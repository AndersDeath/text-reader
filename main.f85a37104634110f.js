"use strict";(self.webpackChunktext_reader=self.webpackChunktext_reader||[]).push([[179],{2011:(vt,Oe,V)=>{V.d(Oe,{Dh:()=>ge,GT:()=>ye,cc:()=>Fe,hO:()=>qe,on:()=>W,pX:()=>he,xv:()=>Ce});var o=V(4650),j=V(127),N=V(5813);vt=V.hmd(vt);const ue=["ngOnDestroy"],he=(ve,at,lt,Ne={})=>new Proxy(ve,{get:(Pe,Te)=>lt.runOutsideAngular(()=>{var Qe;if(ve[Te])return!(null===(Qe=Ne?.spy)||void 0===Qe)&&Qe.get&&Ne.spy.get(Te,ve[Te]),ve[Te];if(ue.indexOf(Te)>-1)return()=>{};const ce=at.toPromise().then(pe=>{const we=pe&&pe[Te];return"function"==typeof we?we.bind(pe):we&&we.then?we.then(ne=>lt.run(()=>ne)):lt.run(()=>we)});return new Proxy(()=>{},{get:(pe,we)=>ce[we],apply:(pe,we,ne)=>ce.then(se=>{var _e;const de=se&&se(...ne);return!(null===(_e=Ne?.spy)||void 0===_e)&&_e.apply&&Ne.spy.apply(Te,ne,de),de})})})}),ye=(ve,at)=>{at.forEach(lt=>{Object.getOwnPropertyNames(lt.prototype||lt).forEach(Ne=>{Object.defineProperty(ve.prototype,Ne,Object.getOwnPropertyDescriptor(lt.prototype||lt,Ne))})})};class oe{constructor(at){return at}}const ge=new o.OlP("angularfire2.app.options"),Ce=new o.OlP("angularfire2.app.name");function W(ve,at,lt){const Pe="object"==typeof lt&&lt||{};Pe.name=Pe.name||"string"==typeof lt&&lt||"[DEFAULT]";const Qe=j.Z.apps.filter(ce=>ce&&ce.name===Pe.name)[0]||at.runOutsideAngular(()=>j.Z.initializeApp(ve,Pe));try{JSON.stringify(ve)!==JSON.stringify(Qe.options)&&Y("error",`${Qe.name} Firebase App already initialized with different options${vt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new oe(Qe)}const Y=(ve,...at)=>{(0,o.X6Q)()&&typeof console<"u"&&console[ve](...at)},re={provide:oe,useFactory:W,deps:[ge,o.R0b,[new o.FiY,Ce]]};let qe=(()=>{class ve{constructor(lt){j.Z.registerVersion("angularfire",N.q4.full,"core"),j.Z.registerVersion("angularfire",N.q4.full,"app-compat"),j.Z.registerVersion("angular",o.q4F.full,lt.toString())}static initializeApp(lt,Ne){return{ngModule:ve,providers:[{provide:ge,useValue:lt},{provide:Ce,useValue:Ne}]}}}return ve.\u0275fac=function(lt){return new(lt||ve)(o.LFG(o.Lbi))},ve.\u0275mod=o.oAB({type:ve}),ve.\u0275inj=o.cJS({providers:[re]}),ve})();function Fe(ve,at,lt,Ne,Pe){const[,Te,Qe]=globalThis.\u0275AngularfireInstanceCache.find(ce=>ce[0]===ve)||[];if(Te)return function xe(ve,at){try{return ve.toString()===at.toString()}catch{return ve===at}}(Pe,Qe)||(De("error",`${at} was already initialized on the ${lt} Firebase App with different settings.${ht?" You may need to reload as Firebase is not HMR aware.":""}`),De("warn",{is:Pe,was:Qe})),Te;{const ce=Ne();return globalThis.\u0275AngularfireInstanceCache.push([ve,ce,Pe]),ce}}const ht=!!vt.hot,De=(ve,...at)=>{(0,o.X6Q)()&&typeof console<"u"&&console[ve](...at)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(vt,Oe,V)=>{V.d(Oe,{q4:()=>Ol,iC:()=>Zn,fc:()=>Oa,HU:()=>kd,vb:()=>bc,JM:()=>Of});var o=V(4650),j=V(5867),N=V(5861),ue=V(9681),he=V(2090),ye=V(4859),oe=V(1877),ge=V(8766);const Ce="@firebase/installations",W="0.5.12",re=`w:${W}`,qe="FIS_v2",at=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function lt(x){return x instanceof he.ZR&&x.code.includes("request-failed")}function Ne({projectId:x}){return`https://firebaseinstallations.googleapis.com/v1/projects/${x}/installations`}function Pe(x){return{token:x.token,requestStatus:2,expiresIn:se(x.expiresIn),creationTime:Date.now()}}function Te(x,T){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,N.Z)(function*(x,T){const H=(yield T.json()).error;return at.create("request-failed",{requestName:x,serverCode:H.code,serverMessage:H.message,serverStatus:H.status})})).apply(this,arguments)}function ce({apiKey:x}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x})}function pe(x,{refreshToken:T}){const R=ce(x);return R.append("Authorization",function _e(x){return`${qe} ${x}`}(T)),R}function we(x){return ne.apply(this,arguments)}function ne(){return(ne=(0,N.Z)(function*(x){const T=yield x();return T.status>=500&&T.status<600?x():T})).apply(this,arguments)}function se(x){return Number(x.replace("s","000"))}function de(x,T){return He.apply(this,arguments)}function He(){return(He=(0,N.Z)(function*({appConfig:x,heartbeatServiceProvider:T},{fid:R}){const H=Ne(x),ie=ce(x),fe=T.getImmediate({optional:!0});if(fe){const Ft=yield fe.getHeartbeatsHeader();Ft&&ie.append("x-firebase-client",Ft)}const nt={method:"POST",headers:ie,body:JSON.stringify({fid:R,authVersion:qe,appId:x.appId,sdkVersion:re})},xt=yield we(()=>fetch(H,nt));if(xt.ok){const Ft=yield xt.json();return{fid:Ft.fid||R,registrationStatus:2,refreshToken:Ft.refreshToken,authToken:Pe(Ft.authToken)}}throw yield Te("Create Installation",xt)})).apply(this,arguments)}function je(x){return new Promise(T=>{setTimeout(T,x)})}const an=/^[cdef][\w-]{21}$/;function tt(){try{const x=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(x),x[0]=112+x[0]%16;const R=function An(x){return function Ct(x){return btoa(String.fromCharCode(...x)).replace(/\+/g,"-").replace(/\//g,"_")}(x).substr(0,22)}(x);return an.test(R)?R:""}catch{return""}}function $n(x){return`${x.appName}!${x.appId}`}const pn=new Map;function cn(x,T){const R=$n(x);Wi(R,T),function to(x,T){const R=function Vn(){return!Yi&&"BroadcastChannel"in self&&(Yi=new BroadcastChannel("[Firebase] FID Change"),Yi.onmessage=x=>{Wi(x.data.key,x.data.fid)}),Yi}();R&&R.postMessage({key:x,fid:T}),function as(){0===pn.size&&Yi&&(Yi.close(),Yi=null)}()}(R,T)}function Wi(x,T){const R=pn.get(x);if(R)for(const H of R)H(T)}let Yi=null;const Jn="firebase-installations-store";let ls=null;function bt(){return ls||(ls=(0,ge.X3)("firebase-installations-database",1,{upgrade:(x,T)=>{0===T&&x.createObjectStore(Jn)}})),ls}function kn(x,T){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,N.Z)(function*(x,T){const R=$n(x),ie=(yield bt()).transaction(Jn,"readwrite"),fe=ie.objectStore(Jn),Le=yield fe.get(R);return yield fe.put(T,R),yield ie.done,(!Le||Le.fid!==T.fid)&&cn(x,T.fid),T})).apply(this,arguments)}function mn(x){return wi.apply(this,arguments)}function wi(){return(wi=(0,N.Z)(function*(x){const T=$n(x),H=(yield bt()).transaction(Jn,"readwrite");yield H.objectStore(Jn).delete(T),yield H.done})).apply(this,arguments)}function Ki(x,T){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,N.Z)(function*(x,T){const R=$n(x),ie=(yield bt()).transaction(Jn,"readwrite"),fe=ie.objectStore(Jn),Le=yield fe.get(R),nt=T(Le);return void 0===nt?yield fe.delete(R):yield fe.put(nt,R),yield ie.done,nt&&(!Le||Le.fid!==nt.fid)&&cn(x,nt.fid),nt})).apply(this,arguments)}function Sn(x){return ir.apply(this,arguments)}function ir(){return(ir=(0,N.Z)(function*(x){let T;const R=yield Ki(x.appConfig,H=>{const ie=Rn(H),fe=pt(x,ie);return T=fe.registrationPromise,fe.installationEntry});return""===R.fid?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}})).apply(this,arguments)}function Rn(x){return jn(x||{fid:tt(),registrationStatus:0})}function pt(x,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(at.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},H=function ut(x,T){return Un.apply(this,arguments)}(x,R);return{installationEntry:R,registrationPromise:H}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:rr(x)}:{installationEntry:T}}function Un(){return(Un=(0,N.Z)(function*(x,T){try{const R=yield de(x,T);return kn(x.appConfig,R)}catch(R){throw lt(R)&&409===R.customData.serverCode?yield mn(x.appConfig):yield kn(x.appConfig,{fid:T.fid,registrationStatus:0}),R}})).apply(this,arguments)}function rr(x){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,N.Z)(function*(x){let T=yield zt(x.appConfig);for(;1===T.registrationStatus;)yield je(100),T=yield zt(x.appConfig);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:H}=yield Sn(x);return H||R}return T})).apply(this,arguments)}function zt(x){return Ki(x,T=>{if(!T)throw at.create("installation-not-found");return jn(T)})}function jn(x){return function sr(x){return 1===x.registrationStatus&&x.registrationTime+1e4<Date.now()}(x)?{fid:x.fid,registrationStatus:0}:x}function Pt(x,T){return Er.apply(this,arguments)}function Er(){return(Er=(0,N.Z)(function*({appConfig:x,heartbeatServiceProvider:T},R){const H=Nt(x,R),ie=pe(x,R),fe=T.getImmediate({optional:!0});if(fe){const Ft=yield fe.getHeartbeatsHeader();Ft&&ie.append("x-firebase-client",Ft)}const nt={method:"POST",headers:ie,body:JSON.stringify({installation:{sdkVersion:re,appId:x.appId}})},xt=yield we(()=>fetch(H,nt));if(xt.ok)return Pe(yield xt.json());throw yield Te("Generate Auth Token",xt)})).apply(this,arguments)}function Nt(x,{fid:T}){return`${Ne(x)}/${T}/authTokens:generate`}function ee(x){return q.apply(this,arguments)}function q(){return(q=(0,N.Z)(function*(x,T=!1){let R;const H=yield Ki(x.appConfig,fe=>{if(!Tt(fe))throw at.create("not-registered");const Le=fe.authToken;if(!T&&bn(Le))return fe;if(1===Le.requestStatus)return R=G(x,T),fe;{if(!navigator.onLine)throw at.create("app-offline");const nt=ui(fe);return R=Ae(x,nt),nt}});return R?yield R:H.authToken})).apply(this,arguments)}function G(x,T){return K.apply(this,arguments)}function K(){return(K=(0,N.Z)(function*(x,T){let R=yield X(x.appConfig);for(;1===R.authToken.requestStatus;)yield je(100),R=yield X(x.appConfig);const H=R.authToken;return 0===H.requestStatus?ee(x,T):H})).apply(this,arguments)}function X(x){return Ki(x,T=>{if(!Tt(T))throw at.create("not-registered");return function J(x){return 1===x.requestStatus&&x.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Ae(x,T){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,N.Z)(function*(x,T){try{const R=yield Pt(x,T),H=Object.assign(Object.assign({},T),{authToken:R});return yield kn(x.appConfig,H),R}catch(R){if(!lt(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const H=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield kn(x.appConfig,H)}else yield mn(x.appConfig);throw R}})).apply(this,arguments)}function Tt(x){return void 0!==x&&2===x.registrationStatus}function bn(x){return 2===x.requestStatus&&!function wn(x){const T=Date.now();return T<x.creationTime||x.creationTime+x.expiresIn<T+36e5}(x)}function ui(x){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},x),{authToken:T})}function $(){return($=(0,N.Z)(function*(x){const T=x,{installationEntry:R,registrationPromise:H}=yield Sn(T);return H?H.catch(console.error):ee(T).catch(console.error),R.fid})).apply(this,arguments)}function We(){return(We=(0,N.Z)(function*(x,T=!1){const R=x;return yield ke(R),(yield ee(R,T)).token})).apply(this,arguments)}function ke(x){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,N.Z)(function*(x){const{registrationPromise:T}=yield Sn(x);T&&(yield T)})).apply(this,arguments)}function Ht(x){return at.create("missing-app-config-values",{valueName:x})}const ul="installations",da=x=>{const T=x.getProvider("app").getImmediate(),R=function ks(x){if(!x||!x.options)throw Ht("App Configuration");if(!x.name)throw Ht("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!x.options[R])throw Ht(R);return{appName:x.name,projectId:x.options.projectId,apiKey:x.options.apiKey,appId:x.options.appId}}(T);return{app:T,appConfig:R,heartbeatServiceProvider:(0,ue._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},xo=x=>{const T=x.getProvider("app").getImmediate(),R=(0,ue._getProvider)(T,ul).getImmediate();return{getId:()=>function Z(x){return $.apply(this,arguments)}(R),getToken:ie=>function Ee(x){return We.apply(this,arguments)}(R,ie)}};(function Ai(){(0,ue._registerComponent)(new ye.wA(ul,da,"PUBLIC")),(0,ue._registerComponent)(new ye.wA("installations-internal",xo,"PRIVATE"))})(),(0,ue.registerVersion)(Ce,W),(0,ue.registerVersion)(Ce,W,"esm2017");const To="@firebase/remote-config",Wt=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Jc{constructor(T,R,H,ie){this.client=T,this.storage=R,this.storageCache=H,this.logger=ie}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const H=Date.now()-R,ie=H<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${H}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${ie}.`),ie}fetch(T){var R=this;return(0,N.Z)(function*(){const[H,ie]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(ie&&R.isCachedDataFresh(T.cacheMaxAgeMillis,H))return ie;T.eTag=ie&&ie.eTag;const fe=yield R.client.fetch(T),Le=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===fe.status&&Le.push(R.storage.setLastSuccessfulFetchResponse(fe)),yield Promise.all(Le),fe})()}}function nc(x=navigator){return x.languages&&x.languages[0]||x.language}class Io{constructor(T,R,H,ie,fe,Le){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=H,this.projectId=ie,this.apiKey=fe,this.appId=Le}fetch(T){var R=this;return(0,N.Z)(function*(){var H,ie,fe;const[Le,nt]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Ft=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Lt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Et={sdk_version:R.sdkVersion,app_instance_id:Le,app_instance_id_token:nt,app_id:R.appId,language_code:nc()},Vi={method:"POST",headers:Lt,body:JSON.stringify(Et)},gr=fetch(Ft,Vi),Dc=new Promise((Pa,Ec)=>{T.signal.addEventListener(()=>{const yu=new Error("The operation was aborted.");yu.name="AbortError",Ec(yu)})});let ys;try{yield Promise.race([gr,Dc]),ys=yield gr}catch(Pa){let Ec="fetch-client-network";throw"AbortError"===(null===(H=Pa)||void 0===H?void 0:H.name)&&(Ec="fetch-timeout"),Wt.create(Ec,{originalErrorMessage:null===(ie=Pa)||void 0===ie?void 0:ie.message})}let Bs=ys.status;const Nf=ys.headers.get("ETag")||void 0;let vu,Nl;if(200===ys.status){let Pa;try{Pa=yield ys.json()}catch(Ec){throw Wt.create("fetch-client-parse",{originalErrorMessage:null===(fe=Ec)||void 0===fe?void 0:fe.message})}vu=Pa.entries,Nl=Pa.state}if("INSTANCE_STATE_UNSPECIFIED"===Nl?Bs=500:"NO_CHANGE"===Nl?Bs=304:("NO_TEMPLATE"===Nl||"EMPTY_CONFIG"===Nl)&&(vu={}),304!==Bs&&200!==Bs)throw Wt.create("fetch-status",{httpStatus:Bs});return{status:Bs,eTag:Nf,config:vu}})()}}class Os{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,N.Z)(function*(){const H=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,H)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:H}){var ie=this;return(0,N.Z)(function*(){yield function xr(x,T){return new Promise((R,H)=>{const ie=Math.max(T-Date.now(),0),fe=setTimeout(R,ie);x.addEventListener(()=>{clearTimeout(fe),H(Wt.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const fe=yield ie.client.fetch(T);return yield ie.storage.deleteThrottleMetadata(),fe}catch(fe){if(!function hg(x){if(!(x instanceof he.ZR&&x.customData))return!1;const T=Number(x.customData.httpStatus);return 429===T||500===T||503===T||504===T}(fe))throw fe;const Le={throttleEndTimeMillis:Date.now()+(0,he.$s)(H),backoffCount:H+1};return yield ie.storage.setThrottleMetadata(Le),ie.attemptFetch(T,Le)}})()}}class pg{constructor(T,R,H,ie,fe){this.app=T,this._client=R,this._storageCache=H,this._storage=ie,this._logger=fe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function hl(x,T){var R;const H=x.target.error||void 0;return Wt.create(T,{originalErrorMessage:H&&(null===(R=H)||void 0===R?void 0:R.message)})}const fa="app_namespace_store";class Ao{constructor(T,R,H,ie=function gg(){return new Promise((x,T)=>{var R;try{const H=indexedDB.open("firebase_remote_config",1);H.onerror=ie=>{T(hl(ie,"storage-open"))},H.onsuccess=ie=>{x(ie.target.result)},H.onupgradeneeded=ie=>{0===ie.oldVersion&&ie.target.result.createObjectStore(fa,{keyPath:"compositeKey"})}}catch(H){T(Wt.create("storage-open",{originalErrorMessage:null===(R=H)||void 0===R?void 0:R.message}))}})}()){this.appId=T,this.appName=R,this.namespace=H,this.openDbPromise=ie}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,N.Z)(function*(){const H=yield R.openDbPromise;return new Promise((ie,fe)=>{var Le;const xt=H.transaction([fa],"readonly").objectStore(fa),Ft=R.createCompositeKey(T);try{const Lt=xt.get(Ft);Lt.onerror=Et=>{fe(hl(Et,"storage-get"))},Lt.onsuccess=Et=>{const Vi=Et.target.result;ie(Vi?Vi.value:void 0)}}catch(Lt){fe(Wt.create("storage-get",{originalErrorMessage:null===(Le=Lt)||void 0===Le?void 0:Le.message}))}})})()}set(T,R){var H=this;return(0,N.Z)(function*(){const ie=yield H.openDbPromise;return new Promise((fe,Le)=>{var nt;const Ft=ie.transaction([fa],"readwrite").objectStore(fa),Lt=H.createCompositeKey(T);try{const Et=Ft.put({compositeKey:Lt,value:R});Et.onerror=Vi=>{Le(hl(Vi,"storage-set"))},Et.onsuccess=()=>{fe()}}catch(Et){Le(Wt.create("storage-set",{originalErrorMessage:null===(nt=Et)||void 0===nt?void 0:nt.message}))}})})()}delete(T){var R=this;return(0,N.Z)(function*(){const H=yield R.openDbPromise;return new Promise((ie,fe)=>{var Le;const xt=H.transaction([fa],"readwrite").objectStore(fa),Ft=R.createCompositeKey(T);try{const Lt=xt.delete(Ft);Lt.onerror=Et=>{fe(hl(Et,"storage-delete"))},Lt.onsuccess=()=>{ie()}}catch(Lt){fe(Wt.create("storage-delete",{originalErrorMessage:null===(Le=Lt)||void 0===Le?void 0:Le.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Ps{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,N.Z)(function*(){const R=T.storage.getLastFetchStatus(),H=T.storage.getLastSuccessfulFetchTimestampMillis(),ie=T.storage.getActiveConfig(),fe=yield R;fe&&(T.lastFetchStatus=fe);const Le=yield H;Le&&(T.lastSuccessfulFetchTimestampMillis=Le);const nt=yield ie;nt&&(T.activeConfig=nt)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function ma(){return fl.apply(this,arguments)}function fl(){return(fl=(0,N.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}!function _g(){(0,ue._registerComponent)(new ye.wA("remote-config",function x(T,{instanceIdentifier:R}){const H=T.getProvider("app").getImmediate(),ie=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Wt.create("registration-window");if(!(0,he.hl)())throw Wt.create("indexed-db-unavailable");const{projectId:fe,apiKey:Le,appId:nt}=H.options;if(!fe)throw Wt.create("registration-project-id");if(!Le)throw Wt.create("registration-api-key");if(!nt)throw Wt.create("registration-app-id");const xt=new Ao(nt,H.name,R=R||"firebase"),Ft=new Ps(xt),Lt=new oe.Yd(To);Lt.logLevel=oe.in.ERROR;const Et=new Io(ie,ue.SDK_VERSION,R,fe,Le,nt),Vi=new Os(Et,xt),gr=new Jc(Vi,xt,Ft,Lt),Dc=new pg(H,gr,Ft,xt,Lt);return function Fn(x){const T=(0,he.m9)(x);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Dc),Dc},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(To,"0.3.11"),(0,ue.registerVersion)(To,"0.3.11","esm2017")}();const Tr="/firebase-messaging-sw.js",ko="/firebase-cloud-messaging-push-scope",ga="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",pl="google.c.a.c_id",ic="google.c.a.c_l",pf="google.c.a.ts",Ro="google.c.a.e";var Wn=(()=>{return(x=Wn||(Wn={})).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",Wn;var x})();function qr(x){const T=new Uint8Array(x);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _d(x){const R=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),H=atob(R),ie=new Uint8Array(H.length);for(let fe=0;fe<H.length;++fe)ie[fe]=H.charCodeAt(fe);return ie}const Oo="fcm_token_details_db",eu="fcm_token_object_Store";function pi(x){return rc.apply(this,arguments)}function rc(){return rc=(0,N.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(fe=>fe.name).includes(Oo))return null;let T=null;return(yield(0,ge.X3)(Oo,5,{upgrade:(H=(0,N.Z)(function*(ie,fe,Le,nt){var xt;if(fe<2||!ie.objectStoreNames.contains(eu))return;const Ft=nt.objectStore(eu),Lt=yield Ft.index("fcmSenderId").get(x);if(yield Ft.clear(),Lt)if(2===fe){const Et=Lt;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;T={token:Et.fcmToken,createTime:null!==(xt=Et.createTime)&&void 0!==xt?xt:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:qr(Et.vapidKey)}}}else if(3===fe){const Et=Lt;T={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:qr(Et.auth),p256dh:qr(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:qr(Et.vapidKey)}}}else if(4===fe){const Et=Lt;T={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:qr(Et.auth),p256dh:qr(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:qr(Et.vapidKey)}}}}),function(fe,Le,nt,xt){return H.apply(this,arguments)})})).close(),yield(0,ge.Lj)(Oo),yield(0,ge.Lj)("fcm_vapid_details_db"),yield(0,ge.Lj)("undefined"),vd(T)?T:null;var H}),rc.apply(this,arguments)}function vd(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:T}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const ro="firebase-messaging-store";let Po=null;function Ns(){return Po||(Po=(0,ge.X3)("firebase-messaging-database",1,{upgrade:(x,T)=>{0===T&&x.createObjectStore(ro)}})),Po}function Bi(x){return No.apply(this,arguments)}function No(){return(No=(0,N.Z)(function*(x){const T=Fo(x),H=yield(yield Ns()).transaction(ro).objectStore(ro).get(T);if(H)return H;{const ie=yield pi(x.appConfig.senderId);if(ie)return yield us(x,ie),ie}})).apply(this,arguments)}function us(x,T){return so.apply(this,arguments)}function so(){return(so=(0,N.Z)(function*(x,T){const R=Fo(x),ie=(yield Ns()).transaction(ro,"readwrite");return yield ie.objectStore(ro).put(T,R),yield ie.done,T})).apply(this,arguments)}function ds(x){return oo.apply(this,arguments)}function oo(){return(oo=(0,N.Z)(function*(x){const T=Fo(x),H=(yield Ns()).transaction(ro,"readwrite");yield H.objectStore(ro).delete(T),yield H.done})).apply(this,arguments)}function Fo({appConfig:x}){return x.appId}const ei=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function mf(x,T){return gl.apply(this,arguments)}function gl(){return(gl=(0,N.Z)(function*(x,T){var R;const H=yield Re(x),ie=Lo(T),fe={method:"POST",headers:H,body:JSON.stringify(ie)};let Le;try{Le=yield(yield fetch(sc(x.appConfig),fe)).json()}catch(nt){throw ei.create("token-subscribe-failed",{errorInfo:null===(R=nt)||void 0===R?void 0:R.toString()})}if(Le.error)throw ei.create("token-subscribe-failed",{errorInfo:Le.error.message});if(!Le.token)throw ei.create("token-subscribe-no-token");return Le.token})).apply(this,arguments)}function yd(x,T){return ao.apply(this,arguments)}function ao(){return(ao=(0,N.Z)(function*(x,T){var R;const H=yield Re(x),ie=Lo(T.subscriptionOptions),fe={method:"PATCH",headers:H,body:JSON.stringify(ie)};let Le;try{Le=yield(yield fetch(`${sc(x.appConfig)}/${T.token}`,fe)).json()}catch(nt){throw ei.create("token-update-failed",{errorInfo:null===(R=nt)||void 0===R?void 0:R.toString()})}if(Le.error)throw ei.create("token-update-failed",{errorInfo:Le.error.message});if(!Le.token)throw ei.create("token-update-no-token");return Le.token})).apply(this,arguments)}function _a(x,T){return va.apply(this,arguments)}function va(){return(va=(0,N.Z)(function*(x,T){var R;const ie={method:"DELETE",headers:yield Re(x)};try{const Le=yield(yield fetch(`${sc(x.appConfig)}/${T}`,ie)).json();if(Le.error)throw ei.create("token-unsubscribe-failed",{errorInfo:Le.error.message})}catch(fe){throw ei.create("token-unsubscribe-failed",{errorInfo:null===(R=fe)||void 0===R?void 0:R.toString()})}})).apply(this,arguments)}function sc({projectId:x}){return`https://fcmregistrations.googleapis.com/v1/projects/${x}/registrations`}function Re(x){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,N.Z)(function*({appConfig:x,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Lo({p256dh:x,auth:T,endpoint:R,vapidKey:H}){const ie={web:{endpoint:R,auth:T,p256dh:x}};return H!==ga&&(ie.web.applicationPubKey=H),ie}const Bo=6048e5;function ti(x){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,N.Z)(function*(x){const T=yield Hv(x.swRegistration,x.vapidKey),R={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:T.endpoint,auth:qr(T.getKey("auth")),p256dh:qr(T.getKey("p256dh"))},H=yield Bi(x.firebaseDependencies);if(H){if(ki(H.subscriptionOptions,R))return Date.now()>=H.createTime+Bo?tu(x,{token:H.token,createTime:Date.now(),subscriptionOptions:R}):H.token;try{yield _a(x.firebaseDependencies,H.token)}catch(ie){console.warn(ie)}return _l(x.firebaseDependencies,R)}return _l(x.firebaseDependencies,R)})).apply(this,arguments)}function ya(x){return or.apply(this,arguments)}function or(){return(or=(0,N.Z)(function*(x){const T=yield Bi(x.firebaseDependencies);T&&(yield _a(x.firebaseDependencies,T.token),yield ds(x.firebaseDependencies));const R=yield x.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function tu(x,T){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,N.Z)(function*(x,T){try{const R=yield yd(x.firebaseDependencies,T),H=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield us(x.firebaseDependencies,H),R}catch(R){throw yield ya(x),R}})).apply(this,arguments)}function _l(x,T){return ba.apply(this,arguments)}function ba(){return(ba=(0,N.Z)(function*(x,T){const H={token:yield mf(x,T),createTime:Date.now(),subscriptionOptions:T};return yield us(x,H),H.token})).apply(this,arguments)}function Hv(x,T){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,N.Z)(function*(x,T){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_d(T)})})).apply(this,arguments)}function ki(x,T){return T.vapidKey===x.vapidKey&&T.endpoint===x.endpoint&&T.auth===x.auth&&T.p256dh===x.p256dh}function Mr(x){const T={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function nu(x,T){if(!T.notification)return;x.notification={};const R=T.notification.title;R&&(x.notification.title=R);const H=T.notification.body;H&&(x.notification.body=H);const ie=T.notification.image;ie&&(x.notification.image=ie)}(T,x),function Ho(x,T){!T.data||(x.data=T.data)}(T,x),function Yr(x,T){var R,H,ie,fe,Le;if(!(T.fcmOptions||null!==(R=T.notification)&&void 0!==R&&R.click_action))return;x.fcmOptions={};const nt=null!==(ie=null===(H=T.fcmOptions)||void 0===H?void 0:H.link)&&void 0!==ie?ie:null===(fe=T.notification)||void 0===fe?void 0:fe.click_action;nt&&(x.fcmOptions.link=nt);const xt=null===(Le=T.fcmOptions)||void 0===Le?void 0:Le.analytics_label;xt&&(x.fcmOptions.analyticsLabel=xt)}(T,x),T}function gf(x){return"object"==typeof x&&!!x&&pl in x}function iu(x,T){const R=[];for(let H=0;H<x.length;H++)R.push(x.charAt(H)),H<T.length&&R.push(T.charAt(H));return R.join("")}function ru(x){return ei.create("missing-app-config-values",{valueName:x})}iu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),iu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class vl{constructor(T,R,H){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ie=function oc(x){if(!x||!x.options)throw ru("App Configuration Object");if(!x.name)throw ru("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=x;for(const H of T)if(!R[H])throw ru(H);return{appName:x.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:ie,installations:R,analyticsProvider:H}}_delete(){return Promise.resolve()}}function yl(x){return wa.apply(this,arguments)}function wa(){return(wa=(0,N.Z)(function*(x){var T;try{x.swRegistration=yield navigator.serviceWorker.register(Tr,{scope:ko}),x.swRegistration.update().catch(()=>{})}catch(R){throw ei.create("failed-service-worker-registration",{browserErrorMessage:null===(T=R)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function su(x,T){return bl.apply(this,arguments)}function bl(){return(bl=(0,N.Z)(function*(x,T){if(!T&&!x.swRegistration&&(yield yl(x)),T||!x.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw ei.create("invalid-sw-registration");x.swRegistration=T}})).apply(this,arguments)}function ac(x,T){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,N.Z)(function*(x,T){T?x.vapidKey=T:x.vapidKey||(x.vapidKey=ga)})).apply(this,arguments)}function Da(){return(Da=(0,N.Z)(function*(x,T){if(!navigator)throw ei.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ei.create("permission-blocked");return yield ac(x,T?.vapidKey),yield su(x,T?.serviceWorkerRegistration),ti(x)})).apply(this,arguments)}function wd(x,T,R){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,N.Z)(function*(x,T,R){const H=lc(T);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(H,{message_id:R[pl],message_name:R[ic],message_time:R[pf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function lc(x){switch(x){case Wn.NOTIFICATION_CLICKED:return"notification_open";case Wn.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function wl(){return(wl=(0,N.Z)(function*(x,T){const R=T.data;if(!R.isFirebaseMessaging)return;x.onMessageHandler&&R.messageType===Wn.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler(Mr(R)):x.onMessageHandler.next(Mr(R)));const H=R.data;gf(H)&&"1"===H[Ro]&&(yield wd(x,R.messageType,H))})).apply(this,arguments)}const mi="@firebase/messaging",Tn=x=>{const T=new vl(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function _f(x,T){return wl.apply(this,arguments)}(T,R)),T},Cd=x=>{const T=x.getProvider("messaging").getImmediate();return{getToken:H=>function bd(x,T){return Da.apply(this,arguments)}(T,H)}};function Dd(){return ou.apply(this,arguments)}function ou(){return(ou=(0,N.Z)(function*(){try{yield(0,he.eu)()}catch{return!1}return typeof window<"u"&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function vf(){(0,ue._registerComponent)(new ye.wA("messaging",Tn,"PUBLIC")),(0,ue._registerComponent)(new ye.wA("messaging-internal",Cd,"PRIVATE")),(0,ue.registerVersion)(mi,"0.9.16"),(0,ue.registerVersion)(mi,"0.9.16","esm2017")}();const fs="analytics",Sa="firebase_id",Ta="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",cu="https://www.googletagmanager.com/gtag/js",Ri=new oe.Yd("@firebase/analytics");function wf(x){return Promise.all(x.map(T=>T.catch(R=>R)))}function Gv(x,T){const R=document.createElement("script");R.src=`${cu}?l=${x}&id=${T}`,R.async=!0,document.head.appendChild(R)}function Dl(x,T,R,H,ie,fe){return uu.apply(this,arguments)}function uu(){return(uu=(0,N.Z)(function*(x,T,R,H,ie,fe){const Le=H[ie];try{if(Le)yield T[Le];else{const xt=(yield wf(R)).find(Ft=>Ft.measurementId===ie);xt&&(yield T[xt.appId])}}catch(nt){Ri.error(nt)}x("config",ie,fe)})).apply(this,arguments)}function El(x,T,R,H,ie){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,N.Z)(function*(x,T,R,H,ie){try{let fe=[];if(ie&&ie.send_to){let Le=ie.send_to;Array.isArray(Le)||(Le=[Le]);const nt=yield wf(R);for(const xt of Le){const Ft=nt.find(Et=>Et.measurementId===xt),Lt=Ft&&T[Ft.appId];if(!Lt){fe=[];break}fe.push(Lt)}}0===fe.length&&(fe=Object.values(T)),yield Promise.all(fe),x("event",H,ie||{})}catch(fe){Ri.error(fe)}})).apply(this,arguments)}function Sl(){const x=window.document.getElementsByTagName("script");for(const T of Object.values(x))if(T.src&&T.src.includes(cu))return T;return null}const Di=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Sd=new class Sf{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function lo(x){return new Headers({Accept:"application/json","x-goog-api-key":x})}function Yn(x){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,N.Z)(function*(x){var T;const{appId:R,apiKey:H}=x,ie={method:"GET",headers:lo(H)},fe=Ta.replace("{app-id}",R),Le=yield fetch(fe,ie);if(200!==Le.status&&304!==Le.status){let nt="";try{const xt=yield Le.json();null!==(T=xt.error)&&void 0!==T&&T.message&&(nt=xt.error.message)}catch{}throw Di.create("config-fetch-failed",{httpStatus:Le.status,responseMessage:nt})}return Le.json()})).apply(this,arguments)}function Aa(x){return ps.apply(this,arguments)}function ps(){return(ps=(0,N.Z)(function*(x,T=Sd,R){const{appId:H,apiKey:ie,measurementId:fe}=x.options;if(!H)throw Di.create("no-app-id");if(!ie){if(fe)return{measurementId:fe,appId:H};throw Di.create("no-api-key")}const Le=T.getThrottleMetadata(H)||{backoffCount:0,throttleEndTimeMillis:Date.now()},nt=new Tl;return setTimeout((0,N.Z)(function*(){nt.abort()}),void 0!==R?R:6e4),xl({appId:H,apiKey:ie,measurementId:fe},Le,nt,T)})).apply(this,arguments)}function xl(x,T,R){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,N.Z)(function*(x,{throttleEndTimeMillis:T,backoffCount:R},H,ie=Sd){var fe,Le;const{appId:nt,measurementId:xt}=x;try{yield dc(H,T)}catch(Ft){if(xt)return Ri.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xt} provided in the "measurementId" field in the local Firebase config. [${null===(fe=Ft)||void 0===fe?void 0:fe.message}]`),{appId:nt,measurementId:xt};throw Ft}try{const Ft=yield Yn(x);return ie.deleteThrottleMetadata(nt),Ft}catch(Ft){const Lt=Ft;if(!ar(Lt)){if(ie.deleteThrottleMetadata(nt),xt)return Ri.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xt} provided in the "measurementId" field in the local Firebase config. [${Lt?.message}]`),{appId:nt,measurementId:xt};throw Ft}const Et=503===Number(null===(Le=Lt?.customData)||void 0===Le?void 0:Le.httpStatus)?(0,he.$s)(R,ie.intervalMillis,30):(0,he.$s)(R,ie.intervalMillis),Vi={throttleEndTimeMillis:Date.now()+Et,backoffCount:R+1};return ie.setThrottleMetadata(nt,Vi),Ri.debug(`Calling attemptFetch again in ${Et} millis`),xl(x,Vi,H,ie)}})).apply(this,arguments)}function dc(x,T){return new Promise((R,H)=>{const ie=Math.max(T-Date.now(),0),fe=setTimeout(R,ie);x.addEventListener(()=>{clearTimeout(fe),H(Di.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function ar(x){if(!(x instanceof he.ZR&&x.customData))return!1;const T=Number(x.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Tl{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let ms,Oi;function hc(){return(hc=(0,N.Z)(function*(x,T,R,H,ie){if(ie&&ie.global)x("event",R,H);else{const fe=yield T;x("event",R,Object.assign(Object.assign({},H),{send_to:fe}))}})).apply(this,arguments)}function Fs(x){Oi=x}function ln(x){ms=x}function ct(){return fc.apply(this,arguments)}function fc(){return(fc=(0,N.Z)(function*(){var x;if(!(0,he.hl)())return Ri.warn(Di.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(T){return Ri.warn(Di.create("indexeddb-unavailable",{errorInfo:null===(x=T)||void 0===x?void 0:x.toString()}).message),!1}return!0})).apply(this,arguments)}function gs(){return(gs=(0,N.Z)(function*(x,T,R,H,ie,fe,Le){var nt;const xt=Aa(x);xt.then(gr=>{R[gr.measurementId]=gr.appId,x.options.measurementId&&gr.measurementId!==x.options.measurementId&&Ri.warn(`The measurement ID in the local Firebase config (${x.options.measurementId}) does not match the measurement ID fetched from the server (${gr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(gr=>Ri.error(gr)),T.push(xt);const Ft=ct().then(gr=>{if(gr)return H.getId()}),[Lt,Et]=yield Promise.all([xt,Ft]);Sl()||Gv(fe,Lt.measurementId),Oi&&(ie("consent","default",Oi),Fs(void 0)),ie("js",new Date);const Vi=null!==(nt=Le?.config)&&void 0!==nt?nt:{};return Vi.origin="firebase",Vi.update=!0,null!=Et&&(Vi[Sa]=Et),ie("config",Lt.measurementId,Vi),ms&&(ie("set",ms),ln(void 0)),Lt.measurementId})).apply(this,arguments)}class Al{constructor(T){this.app=T}_delete(){return delete ni[this.app.options.appId],Promise.resolve()}}let ni={},du=[];const kl={};let xf,$t,_s="dataLayer",Rl=!1;function hu(x,T,R){!function yg(){const x=[];if((0,he.ru)()&&x.push("This is a browser extension environment."),(0,he.zI)()||x.push("Cookies are not available."),x.length>0){const T=x.map((H,ie)=>`(${ie+1}) ${H}`).join(" "),R=Di.create("invalid-analytics-context",{errorInfo:T});Ri.warn(R.message)}}();const H=x.options.appId;if(!H)throw Di.create("no-app-id");if(!x.options.apiKey){if(!x.options.measurementId)throw Di.create("no-api-key");Ri.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${x.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ni[H])throw Di.create("already-exists",{id:H});if(!Rl){!function Cf(x){let T=[];Array.isArray(window[x])?T=window[x]:window[x]=T}(_s);const{wrappedGtag:fe,gtagCore:Le}=function Ef(x,T,R,H,ie){let fe=function(...Le){window[H].push(arguments)};return window[ie]&&"function"==typeof window[ie]&&(fe=window[ie]),window[ie]=function Df(x,T,R,H){function fe(){return(fe=(0,N.Z)(function*(Le,nt,xt){try{"event"===Le?yield El(x,T,R,nt,xt):"config"===Le?yield Dl(x,T,R,H,nt,xt):"consent"===Le?x("consent","update",xt):x("set",nt)}catch(Ft){Ri.error(Ft)}})).apply(this,arguments)}return function ie(Le,nt,xt){return fe.apply(this,arguments)}}(fe,x,T,R),{gtagCore:fe,wrappedGtag:window[ie]}}(ni,du,kl,_s,"gtag");$t=fe,xf=Le,Rl=!0}return ni[H]=function Il(x,T,R,H,ie,fe,Le){return gs.apply(this,arguments)}(x,du,kl,T,xf,_s,R),new Al(x)}function pc(){return ho.apply(this,arguments)}function ho(){return(ho=(0,N.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}const Qi="@firebase/analytics";!function pu(){(0,ue._registerComponent)(new ye.wA(fs,(T,{options:R})=>hu(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ue._registerComponent)(new ye.wA("analytics-internal",function x(T){try{const R=T.getProvider(fs).getImmediate();return{logEvent:(H,ie,fe)=>function xd(x,T,R,H){x=(0,he.m9)(x),function Ml(x,T,R,H,ie){return hc.apply(this,arguments)}($t,ni[x.app.options.appId],T,R,H).catch(ie=>Ri.error(ie))}(R,H,ie,fe)}}catch(R){throw Di.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ue.registerVersion)(Qi,"0.8.0"),(0,ue.registerVersion)(Qi,"0.8.0","esm2017")}();var mu=V(4408),gc=V(7565);const If=new class Td extends gc.v{}(class Ra extends mu.o{constructor(T,R){super(T,R),this.scheduler=T,this.work=R}schedule(T,R=0){return R>0?super.schedule(T,R):(this.delay=R,this.state=T,this.scheduler.flush(this),this)}execute(T,R){return R>0||this.closed?super.execute(T,R):this._execute(T,R)}requestAsyncId(T,R,H=0){return null!=H&&H>0||null==H&&this.delay>0?super.requestAsyncId(T,R,H):T.flush(this)}});var Yv=V(4986),zo=V(8505),Xi=V(5363),_c=V(9468);const Ol=new o.GfV("7.4.1"),Af="__angularfire_symbol__analyticsIsSupportedValue",Pl="__angularfire_symbol__analyticsIsSupported",gu="__angularfire_symbol__remoteConfigIsSupportedValue",Md="__angularfire_symbol__remoteConfigIsSupported",Id="__angularfire_symbol__messagingIsSupportedValue",vc="__angularfire_symbol__messagingIsSupported";function Of(x,T,R){if(T){if(1===T.length)return T[0];const fe=T.filter(Le=>Le.app===R);if(1===fe.length)return fe[0]}return R.container.getProvider(x).getImmediate({optional:!0})}globalThis[Pl]||(globalThis[Pl]=pc().then(x=>globalThis[Af]=x).catch(()=>globalThis[Af]=!1)),globalThis[vc]||(globalThis[vc]=Dd().then(x=>globalThis[Id]=x).catch(()=>globalThis[Id]=!1)),globalThis[Md]||(globalThis[Md]=ma().then(x=>globalThis[gu]=x).catch(()=>globalThis[gu]=!1));const bc=(x,T)=>{const R=T?[T]:(0,j.C6)(),H=[];return R.forEach(ie=>{ie.container.getProvider(x).instances.forEach(Le=>{H.includes(Le)||H.push(Le)})}),H};function Qr(){}class wc{constructor(T,R=If){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,H){const ie=this.zone;return this.delegate.schedule(function(Le){ie.runGuarded(()=>{T.apply(this,[Le])})},R,H)}}class Cg{constructor(T){this.zone=T,this.task=null}call(T,R){const H=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qr,{},Qr,Qr)),R.pipe((0,zo.b)({next:H,complete:H,error:H})).subscribe(T).add(H)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let kd=(()=>{class x{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new wc(Zone.current)),this.insideAngular=R.run(()=>new wc(Zone.current,Yv.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function(R){return new(R||x)(o.LFG(o.R0b))},x.\u0275prov=o.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function fo(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function Oa(x){return x.pipe((0,Xi.Q)(fo().outsideAngular))}function Zn(x){return fo(),function Pf(x){return function(R){return(R=R.lift(new Cg(x.ngZone))).pipe((0,_c.R)(x.outsideAngular),(0,Xi.Q)(x.insideAngular))}}(fo())(x)}},6457:(vt,Oe,V)=>{V.d(Oe,{$:()=>sc,A:()=>Y,B:()=>Fe,G:()=>xo,H:()=>hr,J:()=>Os,L:()=>bn,M:()=>fl,N:()=>ff,P:()=>Yv,Q:()=>pl,R:()=>Mf,T:()=>ic,U:()=>ga,V:()=>Wn,W:()=>qr,X:()=>pi,Y:()=>At,Z:()=>mf,_:()=>yd,a:()=>Ia,a0:()=>ti,a1:()=>ya,a2:()=>tu,a3:()=>_l,a4:()=>Hv,a5:()=>ki,a6:()=>nu,a7:()=>Ho,a8:()=>gf,a9:()=>iu,aA:()=>gr,aB:()=>xt,aC:()=>Oa,aD:()=>vs,aE:()=>qn,aI:()=>lo,aL:()=>Ro,aa:()=>yl,ab:()=>su,ac:()=>ac,af:()=>wd,ag:()=>lc,ah:()=>_f,ak:()=>ro,al:()=>au,an:()=>cu,ao:()=>uu,ap:()=>di,aq:()=>we,ar:()=>qt,as:()=>ke,at:()=>lt,au:()=>Sg,av:()=>Nf,aw:()=>Ne,ax:()=>ce,ay:()=>se,az:()=>wn,b:()=>Di,c:()=>Id,d:()=>Rf,e:()=>Ad,f:()=>Pf,g:()=>H,h:()=>x,i:()=>fc,j:()=>Le,k:()=>ny,l:()=>Ls,m:()=>bs,o:()=>ge,r:()=>mu,s:()=>Wv,u:()=>If});var o=V(5861),j=V(2090),N=V(9681),ue=V(655),he=V(1877),ye=V(4859);const ge={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Y={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Fe=function re(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},xe=function qe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ht=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ve=new he.Yd("@firebase/auth");function at(w,..._){ve.logLevel<=he.in.ERROR&&ve.error(`Auth (${N.SDK_VERSION}): ${w}`,..._)}function lt(w,..._){throw Qe(w,..._)}function Ne(w,..._){return Qe(w,..._)}function Pe(w,_,v){const D=Object.assign(Object.assign({},xe()),{[_]:v});return new j.LL("auth","Firebase",D).create(_,{appName:w.name})}function Te(w,_,v){if(!(_ instanceof v))throw v.name!==_.constructor.name&&lt(w,"argument-error"),Pe(w,"argument-error",`Type of ${_.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qe(w,..._){if("string"!=typeof w){const v=_[0],D=[..._.slice(1)];return D[0]&&(D[0].appName=w.name),w._errorFactory.create(v,...D)}return ht.create(w,..._)}function ce(w,_,...v){if(!w)throw Qe(_,...v)}function pe(w){const _="INTERNAL ASSERTION FAILED: "+w;throw at(_),new Error(_)}function we(w,_){w||pe(_)}const ne=new Map;function se(w){we(w instanceof Function,"Expected a class definition");let _=ne.get(w);return _?(we(_ instanceof w,"Instance stored in cache mismatched with class"),_):(_=new w,ne.set(w,_),_)}function He(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function je(){return"http:"===Ct()||"https:"===Ct()}function Ct(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class tt{constructor(_,v){this.shortDelay=_,this.longDelay=v,we(v>_,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function an(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(je()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function An(w,_){we(w.emulator,"Emulator should always be set here");const{url:v}=w.emulator;return _?`${v}${_.startsWith("/")?_.slice(1):_}`:v}class $n{static initialize(_,v,D){this.fetchImpl=_,v&&(this.headersImpl=v),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},cn=new tt(3e4,6e4);function en(w,_){return w.tenantId&&!_.tenantId?Object.assign(Object.assign({},_),{tenantId:w.tenantId}):_}function Gt(w,_,v,D){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,o.Z)(function*(w,_,v,D,k={}){return to(w,k,(0,o.Z)(function*(){let B={},ae={};D&&("GET"===_?ae=D:B={body:JSON.stringify(D)});const Me=(0,j.xO)(Object.assign({key:w.config.apiKey},ae)).slice(1),it=yield w._getAdditionalHeaders();return it["Content-Type"]="application/json",w.languageCode&&(it["X-Firebase-Locale"]=w.languageCode),$n.fetch()(Cr(w,w.config.apiHost,v,Me),Object.assign({method:_,headers:it,referrerPolicy:"no-referrer"},B))}))})).apply(this,arguments)}function to(w,_,v){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,o.Z)(function*(w,_,v){w._canInitEmulator=!1;const D=Object.assign(Object.assign({},pn),_);try{const k=new Dr(w),B=yield Promise.race([v(),k.promise]);k.clearNetworkTimeout();const ae=yield B.json();if("needConfirmation"in ae)throw Jn(w,"account-exists-with-different-credential",ae);if(B.ok&&!("errorMessage"in ae))return ae;{const Me=B.ok?ae.errorMessage:ae.error.message,[it,Ke]=Me.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===it)throw Jn(w,"credential-already-in-use",ae);if("EMAIL_EXISTS"===it)throw Jn(w,"email-already-in-use",ae);if("USER_DISABLED"===it)throw Jn(w,"user-disabled",ae);const Ge=D[it]||it.toLowerCase().replace(/[_\s]+/g,"-");if(Ke)throw Pe(w,Ge,Ke);lt(w,Ge)}}catch(k){if(k instanceof j.ZR)throw k;lt(w,"network-request-failed")}})).apply(this,arguments)}function Vn(w,_,v,D){return as.apply(this,arguments)}function as(){return(as=(0,o.Z)(function*(w,_,v,D,k={}){const B=yield Gt(w,_,v,D,k);return"mfaPendingCredential"in B&&lt(w,"multi-factor-auth-required",{_serverResponse:B}),B})).apply(this,arguments)}function Cr(w,_,v,D){const k=`${_}${v}?${D}`;return w.config.emulator?An(w.config,k):`${w.config.apiScheme}://${k}`}class Dr{constructor(_){this.auth=_,this.timer=null,this.promise=new Promise((v,D)=>{this.timer=setTimeout(()=>D(Ne(this.auth,"network-request-failed")),cn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jn(w,_,v){const D={appName:w.name};v.email&&(D.email=v.email),v.phoneNumber&&(D.phoneNumber=v.phoneNumber);const k=Ne(w,_,D);return k.customData._tokenResponse=v,k}function bt(){return(bt=(0,o.Z)(function*(w,_){return Gt(w,"POST","/v1/accounts:delete",_)})).apply(this,arguments)}function kn(w,_){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,o.Z)(function*(w,_){return Gt(w,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function mn(w,_){return wi.apply(this,arguments)}function wi(){return(wi=(0,o.Z)(function*(w,_){return Gt(w,"POST","/v1/accounts:lookup",_)})).apply(this,arguments)}function Ki(w){if(w)try{const _=new Date(Number(w));if(!isNaN(_.getTime()))return _.toUTCString()}catch{}}function ir(){return(ir=(0,o.Z)(function*(w,_=!1){const v=(0,j.m9)(w),D=yield v.getIdToken(_),k=pt(D);ce(k&&k.exp&&k.auth_time&&k.iat,v.auth,"internal-error");const B="object"==typeof k.firebase?k.firebase:void 0,ae=B?.sign_in_provider;return{claims:k,token:D,authTime:Ki(Rn(k.auth_time)),issuedAtTime:Ki(Rn(k.iat)),expirationTime:Ki(Rn(k.exp)),signInProvider:ae||null,signInSecondFactor:B?.sign_in_second_factor||null}})).apply(this,arguments)}function Rn(w){return 1e3*Number(w)}function pt(w){var _;const[v,D,k]=w.split(".");if(void 0===v||void 0===D||void 0===k)return at("JWT malformed, contained fewer than 3 sections"),null;try{const B=(0,j.tV)(D);return B?JSON.parse(B):(at("Failed to decode base64 JWT payload"),null)}catch(B){return at("Caught error parsing JWT payload as JSON",null===(_=B)||void 0===_?void 0:_.toString()),null}}function Un(w,_){return rr.apply(this,arguments)}function rr(){return(rr=(0,o.Z)(function*(w,_,v=!1){if(v)return _;try{return yield _}catch(D){throw D instanceof j.ZR&&Hn(D)&&w.auth.currentUser===w&&(yield w.auth.signOut()),D}})).apply(this,arguments)}function Hn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class zt{constructor(_){this.user=_,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(_){var v;if(_){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const k=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(_=!1){var v=this;if(!this.isRunning)return;const D=this.getInterval(_);this.timerId=setTimeout((0,o.Z)(function*(){yield v.iteration()}),D)}iteration(){var _=this;return(0,o.Z)(function*(){var v;try{yield _.user.getIdToken(!0)}catch(D){return void("auth/network-request-failed"===(null===(v=D)||void 0===v?void 0:v.code)&&_.schedule(!0))}_.schedule()})()}}class jn{constructor(_,v){this.createdAt=_,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ki(this.lastLoginAt),this.creationTime=Ki(this.createdAt)}_copy(_){this.createdAt=_.createdAt,this.lastLoginAt=_.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function sr(w){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,o.Z)(function*(w){var _;const v=w.auth,D=yield w.getIdToken(),k=yield Un(w,mn(v,{idToken:D}));ce(k?.users.length,v,"internal-error");const B=k.users[0];w._notifyReloadListener(B);const ae=null!==(_=B.providerUserInfo)&&void 0!==_&&_.length?q(B.providerUserInfo):[],Me=ee(w.providerData,ae),Ge=!!w.isAnonymous&&!(w.email&&B.passwordHash||Me?.length),tn={uid:B.localId,displayName:B.displayName||null,photoURL:B.photoUrl||null,email:B.email||null,emailVerified:B.emailVerified||!1,phoneNumber:B.phoneNumber||null,tenantId:B.tenantId||null,providerData:Me,metadata:new jn(B.createdAt,B.lastLoginAt),isAnonymous:Ge};Object.assign(w,tn)})).apply(this,arguments)}function Nt(){return(Nt=(0,o.Z)(function*(w){const _=(0,j.m9)(w);yield sr(_),yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)})).apply(this,arguments)}function ee(w,_){return[...w.filter(D=>!_.some(k=>k.providerId===D.providerId)),..._]}function q(w){return w.map(_=>{var{providerId:v}=_,D=(0,ue._T)(_,["providerId"]);return{providerId:v,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function K(){return(K=(0,o.Z)(function*(w,_){const v=yield to(w,{},(0,o.Z)(function*(){const D=(0,j.xO)({grant_type:"refresh_token",refresh_token:_}).slice(1),{tokenApiHost:k,apiKey:B}=w.config,ae=Cr(w,k,"/v1/token",`key=${B}`),Me=yield w._getAdditionalHeaders();return Me["Content-Type"]="application/x-www-form-urlencoded",$n.fetch()(ae,{method:"POST",headers:Me,body:D})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class X{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_){ce(_.idToken,"internal-error"),ce(typeof _.idToken<"u","internal-error"),ce(typeof _.refreshToken<"u","internal-error");const v="expiresIn"in _&&typeof _.expiresIn<"u"?Number(_.expiresIn):function ut(w){const _=pt(w);return ce(_,"internal-error"),ce(typeof _.exp<"u","internal-error"),ce(typeof _.iat<"u","internal-error"),Number(_.exp)-Number(_.iat)}(_.idToken);this.updateTokensAndExpiration(_.idToken,_.refreshToken,v)}getToken(_,v=!1){var D=this;return(0,o.Z)(function*(){return ce(!D.accessToken||D.refreshToken,_,"user-token-expired"),v||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(_,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(_,v){var D=this;return(0,o.Z)(function*(){const{accessToken:k,refreshToken:B,expiresIn:ae}=yield function G(w,_){return K.apply(this,arguments)}(_,v);D.updateTokensAndExpiration(k,B,Number(ae))})()}updateTokensAndExpiration(_,v,D){this.refreshToken=v||null,this.accessToken=_||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(_,v){const{refreshToken:D,accessToken:k,expirationTime:B}=v,ae=new X;return D&&(ce("string"==typeof D,"internal-error",{appName:_}),ae.refreshToken=D),k&&(ce("string"==typeof k,"internal-error",{appName:_}),ae.accessToken=k),B&&(ce("number"==typeof B,"internal-error",{appName:_}),ae.expirationTime=B),ae}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_){this.accessToken=_.accessToken,this.refreshToken=_.refreshToken,this.expirationTime=_.expirationTime}_clone(){return Object.assign(new X,this.toJSON())}_performRefresh(){return pe("not implemented")}}function Ae(w,_){ce("string"==typeof w||typeof w>"u","internal-error",{appName:_})}class Ye{constructor(_){var{uid:v,auth:D,stsTokenManager:k}=_,B=(0,ue._T)(_,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=D,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=B.displayName||null,this.email=B.email||null,this.emailVerified=B.emailVerified||!1,this.phoneNumber=B.phoneNumber||null,this.photoURL=B.photoURL||null,this.isAnonymous=B.isAnonymous||!1,this.tenantId=B.tenantId||null,this.providerData=B.providerData?[...B.providerData]:[],this.metadata=new jn(B.createdAt||void 0,B.lastLoginAt||void 0)}getIdToken(_){var v=this;return(0,o.Z)(function*(){const D=yield Un(v,v.stsTokenManager.getToken(v.auth,_));return ce(D,v.auth,"internal-error"),v.accessToken!==D&&(v.accessToken=D,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),D})()}getIdTokenResult(_){return function Sn(w){return ir.apply(this,arguments)}(this,_)}reload(){return function Er(w){return Nt.apply(this,arguments)}(this)}_assign(_){this!==_&&(ce(this.uid===_.uid,this.auth,"internal-error"),this.displayName=_.displayName,this.photoURL=_.photoURL,this.email=_.email,this.emailVerified=_.emailVerified,this.phoneNumber=_.phoneNumber,this.isAnonymous=_.isAnonymous,this.tenantId=_.tenantId,this.providerData=_.providerData.map(v=>Object.assign({},v)),this.metadata._copy(_.metadata),this.stsTokenManager._assign(_.stsTokenManager))}_clone(_){return new Ye(Object.assign(Object.assign({},this),{auth:_,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(_){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_){this.reloadListener?this.reloadListener(_):this.reloadUserInfo=_}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(_,v=!1){var D=this;return(0,o.Z)(function*(){let k=!1;_.idToken&&_.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(_),k=!0),v&&(yield sr(D)),yield D.auth._persistUserIfCurrent(D),k&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var _=this;return(0,o.Z)(function*(){const v=yield _.getIdToken();return yield Un(_,function ls(w,_){return bt.apply(this,arguments)}(_.auth,{idToken:v})),_.stsTokenManager.clearRefreshToken(),_.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_=>Object.assign({},_)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_,v){var D,k,B,ae,Me,it,Ke,Ge;const tn=null!==(D=v.displayName)&&void 0!==D?D:void 0,Vs=null!==(k=v.email)&&void 0!==k?k:void 0,po=null!==(B=v.phoneNumber)&&void 0!==B?B:void 0,ri=null!==(ae=v.photoURL)&&void 0!==ae?ae:void 0,_i=null!==(Me=v.tenantId)&&void 0!==Me?Me:void 0,Fd=null!==(it=v._redirectEventId)&&void 0!==it?it:void 0,si=null!==(Ke=v.createdAt)&&void 0!==Ke?Ke:void 0,wu=null!==(Ge=v.lastLoginAt)&&void 0!==Ge?Ge:void 0,{uid:Tg,emailVerified:Uf,isAnonymous:Fl,providerData:Hf,stsTokenManager:Mg}=v;ce(Tg&&Mg,_,"internal-error");const iy=X.fromJSON(this.name,Mg);ce("string"==typeof Tg,_,"internal-error"),Ae(tn,_.name),Ae(Vs,_.name),ce("boolean"==typeof Uf,_,"internal-error"),ce("boolean"==typeof Fl,_,"internal-error"),Ae(po,_.name),Ae(ri,_.name),Ae(_i,_.name),Ae(Fd,_.name),Ae(si,_.name),Ae(wu,_.name);const jf=new Ye({uid:Tg,auth:_,email:Vs,emailVerified:Uf,displayName:tn,isAnonymous:Fl,photoURL:ri,phoneNumber:po,tenantId:_i,stsTokenManager:iy,createdAt:si,lastLoginAt:wu});return Hf&&Array.isArray(Hf)&&(jf.providerData=Hf.map(Gf=>Object.assign({},Gf))),Fd&&(jf._redirectEventId=Fd),jf}static _fromIdTokenResponse(_,v,D=!1){return(0,o.Z)(function*(){const k=new X;k.updateFromServerResponse(v);const B=new Ye({uid:v.localId,auth:_,stsTokenManager:k,isAnonymous:D});return yield sr(B),B})()}}const bn=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,o.Z)(function*(){return!0})()}_set(v,D){var k=this;return(0,o.Z)(function*(){k.storage[v]=D})()}_get(v){var D=this;return(0,o.Z)(function*(){const k=D.storage[v];return void 0===k?null:k})()}_remove(v){var D=this;return(0,o.Z)(function*(){delete D.storage[v]})()}_addListener(v,D){}_removeListener(v,D){}}return w.type="NONE",w})();function wn(w,_,v){return`firebase:${w}:${_}:${v}`}class ui{constructor(_,v,D){this.persistence=_,this.auth=v,this.userKey=D;const{config:k,name:B}=this.auth;this.fullUserKey=wn(this.userKey,k.apiKey,B),this.fullPersistenceKey=wn("persistence",k.apiKey,B),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_){return this.persistence._set(this.fullUserKey,_.toJSON())}getCurrentUser(){var _=this;return(0,o.Z)(function*(){const v=yield _.persistence._get(_.fullUserKey);return v?Ye._fromJSON(_.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(_){var v=this;return(0,o.Z)(function*(){if(v.persistence===_)return;const D=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=_,D?v.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(_,v,D="authUser"){return(0,o.Z)(function*(){if(!v.length)return new ui(se(bn),_,D);const k=(yield Promise.all(v.map(function(){var Ke=(0,o.Z)(function*(Ge){if(yield Ge._isAvailable())return Ge});return function(Ge){return Ke.apply(this,arguments)}}()))).filter(Ke=>Ke);let B=k[0]||se(bn);const ae=wn(D,_.config.apiKey,_.name);let Me=null;for(const Ke of v)try{const Ge=yield Ke._get(ae);if(Ge){const tn=Ye._fromJSON(_,Ge);Ke!==B&&(Me=tn),B=Ke;break}}catch{}const it=k.filter(Ke=>Ke._shouldAllowMigration);return B._shouldAllowMigration&&it.length?(B=it[0],Me&&(yield B._set(ae,Me.toJSON())),yield Promise.all(v.map(function(){var Ke=(0,o.Z)(function*(Ge){if(Ge!==B)try{yield Ge._remove(ae)}catch{}});return function(Ge){return Ke.apply(this,arguments)}}())),new ui(B,_,D)):new ui(B,_,D)})()}}function J(w){const _=w.toLowerCase();if(_.includes("opera/")||_.includes("opr/")||_.includes("opios/"))return"Opera";if(We(_))return"IEMobile";if(_.includes("msie")||_.includes("trident/"))return"IE";if(_.includes("edge/"))return"Edge";if(Z(_))return"Firefox";if(_.includes("silk/"))return"Silk";if(Xe(_))return"Blackberry";if(Dt(_))return"Webos";if($(_))return"Safari";if((_.includes("chrome/")||Ee(_))&&!_.includes("edge/"))return"Chrome";if(ke(_))return"Android";{const D=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===D?.length)return D[1]}return"Other"}function Z(w=(0,j.z$)()){return/firefox\//i.test(w)}function $(w=(0,j.z$)()){const _=w.toLowerCase();return _.includes("safari/")&&!_.includes("chrome/")&&!_.includes("crios/")&&!_.includes("android")}function Ee(w=(0,j.z$)()){return/crios\//i.test(w)}function We(w=(0,j.z$)()){return/iemobile/i.test(w)}function ke(w=(0,j.z$)()){return/android/i.test(w)}function Xe(w=(0,j.z$)()){return/blackberry/i.test(w)}function Dt(w=(0,j.z$)()){return/webos/i.test(w)}function qt(w=(0,j.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function di(w=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function gn(w=(0,j.z$)()){return qt(w)||ke(w)||Dt(w)||Xe(w)||/windows phone/i.test(w)||We(w)}function ks(w,_=[]){let v;switch(w){case"Browser":v=J((0,j.z$)());break;case"Worker":v=`${J((0,j.z$)())}-${w}`;break;default:v=w}const D=_.length?_.join(","):"FirebaseCore-web";return`${v}/JsCore/${N.SDK_VERSION}/${D}`}class Ht{constructor(_){this.auth=_,this.queue=[]}pushCallback(_,v){const D=B=>new Promise((ae,Me)=>{try{ae(_(B))}catch(it){Me(it)}});D.onAbort=v,this.queue.push(D);const k=this.queue.length-1;return()=>{this.queue[k]=()=>Promise.resolve()}}runMiddleware(_){var v=this;return(0,o.Z)(function*(){var D;if(v.auth.currentUser===_)return;const k=[];try{for(const B of v.queue)yield B(_),B.onAbort&&k.push(B.onAbort)}catch(B){k.reverse();for(const ae of k)try{ae()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:null===(D=B)||void 0===D?void 0:D.message})}})()}}class ul{constructor(_,v,D){this.app=_,this.heartbeatServiceProvider=v,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new da(this),this.idTokenSubscription=new da(this),this.beforeStateQueue=new Ht(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ht,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_.name,this.clientVersion=D.sdkClientVersion}_initializeWithPersistence(_,v){var D=this;return v&&(this._popupRedirectResolver=se(v)),this._initializationPromise=this.queue((0,o.Z)(function*(){var k,B;if(!D._deleted&&(D.persistenceManager=yield ui.create(D,_),!D._deleted)){if(null!==(k=D._popupRedirectResolver)&&void 0!==k&&k._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch{}yield D.initializeCurrentUser(v),D.lastNotifiedUid=(null===(B=D.currentUser)||void 0===B?void 0:B.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var _=this;return(0,o.Z)(function*(){if(_._deleted)return;const v=yield _.assertedPersistence.getCurrentUser();if(_.currentUser||v){if(_.currentUser&&v&&_.currentUser.uid===v.uid)return _._currentUser._assign(v),void(yield _.currentUser.getIdToken());yield _._updateCurrentUser(v,!0)}})()}initializeCurrentUser(_){var v=this;return(0,o.Z)(function*(){var D;const k=yield v.assertedPersistence.getCurrentUser();let B=k,ae=!1;if(_&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const Me=null===(D=v.redirectUser)||void 0===D?void 0:D._redirectEventId,it=B?._redirectEventId,Ke=yield v.tryRedirectSignIn(_);(!Me||Me===it)&&Ke?.user&&(B=Ke.user,ae=!0)}if(!B)return v.directlySetCurrentUser(null);if(!B._redirectEventId){if(ae)try{yield v.beforeStateQueue.runMiddleware(B)}catch(Me){B=k,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(Me))}return B?v.reloadAndSetCurrentUserOrClear(B):v.directlySetCurrentUser(null)}return ce(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===B._redirectEventId?v.directlySetCurrentUser(B):v.reloadAndSetCurrentUserOrClear(B)})()}tryRedirectSignIn(_){var v=this;return(0,o.Z)(function*(){let D=null;try{D=yield v._popupRedirectResolver._completeRedirectFn(v,_,!0)}catch{yield v._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(_){var v=this;return(0,o.Z)(function*(){var D;try{yield sr(_)}catch(k){if("auth/network-request-failed"!==(null===(D=k)||void 0===D?void 0:D.code))return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(_)})()}useDeviceLanguage(){this.languageCode=function Jt(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var _=this;return(0,o.Z)(function*(){_._deleted=!0})()}updateCurrentUser(_){var v=this;return(0,o.Z)(function*(){const D=_?(0,j.m9)(_):null;return D&&ce(D.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(D&&D._clone(v))})()}_updateCurrentUser(_,v=!1){var D=this;return(0,o.Z)(function*(){if(!D._deleted)return _&&ce(D.tenantId===_.tenantId,D,"tenant-id-mismatch"),v||(yield D.beforeStateQueue.runMiddleware(_)),D.queue((0,o.Z)(function*(){yield D.directlySetCurrentUser(_),D.notifyAuthListeners()}))})()}signOut(){var _=this;return(0,o.Z)(function*(){return yield _.beforeStateQueue.runMiddleware(null),(_.redirectPersistenceManager||_._popupRedirectResolver)&&(yield _._setRedirectUser(null)),_._updateCurrentUser(null,!0)})()}setPersistence(_){var v=this;return this.queue((0,o.Z)(function*(){yield v.assertedPersistence.setPersistence(se(_))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_){this._errorFactory=new j.LL("auth","Firebase",_())}onAuthStateChanged(_,v,D){return this.registerStateListener(this.authStateSubscription,_,v,D)}beforeAuthStateChanged(_,v){return this.beforeStateQueue.pushCallback(_,v)}onIdTokenChanged(_,v,D){return this.registerStateListener(this.idTokenSubscription,_,v,D)}toJSON(){var _;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(_=this._currentUser)||void 0===_?void 0:_.toJSON()}}_setRedirectUser(_,v){var D=this;return(0,o.Z)(function*(){const k=yield D.getOrInitRedirectPersistenceManager(v);return null===_?k.removeCurrentUser():k.setCurrentUser(_)})()}getOrInitRedirectPersistenceManager(_){var v=this;return(0,o.Z)(function*(){if(!v.redirectPersistenceManager){const D=_&&se(_)||v._popupRedirectResolver;ce(D,v,"argument-error"),v.redirectPersistenceManager=yield ui.create(v,[se(D._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(_){var v=this;return(0,o.Z)(function*(){var D,k;return v._isInitialized&&(yield v.queue((0,o.Z)(function*(){}))),(null===(D=v._currentUser)||void 0===D?void 0:D._redirectEventId)===_?v._currentUser:(null===(k=v.redirectUser)||void 0===k?void 0:k._redirectEventId)===_?v.redirectUser:null})()}_persistUserIfCurrent(_){var v=this;return(0,o.Z)(function*(){if(_===v.currentUser)return v.queue((0,o.Z)(function*(){return v.directlySetCurrentUser(_)}))})()}_notifyListenersIfCurrent(_){_===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(v=null===(_=this.currentUser)||void 0===_?void 0:_.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(_,v,D,k){if(this._deleted)return()=>{};const B="function"==typeof v?v:v.next.bind(v),ae=this._isInitialized?Promise.resolve():this._initializationPromise;return ce(ae,this,"internal-error"),ae.then(()=>B(this.currentUser)),"function"==typeof v?_.addObserver(v,D,k):_.addObserver(v)}directlySetCurrentUser(_){var v=this;return(0,o.Z)(function*(){v.currentUser&&v.currentUser!==_&&(v._currentUser._stopProactiveRefresh(),_&&v.isProactiveRefreshEnabled&&_._startProactiveRefresh()),v.currentUser=_,_?yield v.assertedPersistence.setCurrentUser(_):yield v.assertedPersistence.removeCurrentUser()})()}queue(_){return this.operations=this.operations.then(_,_),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_){!_||this.frameworks.includes(_)||(this.frameworks.push(_),this.frameworks.sort(),this.clientVersion=ks(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var _=this;return(0,o.Z)(function*(){var v;const D={"X-Client-Version":_.clientVersion};_.app.options.appId&&(D["X-Firebase-gmpid"]=_.app.options.appId);const k=yield null===(v=_.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();return k&&(D["X-Firebase-Client"]=k),D})()}}function qn(w){return(0,j.m9)(w)}class da{constructor(_){this.auth=_,this.observer=null,this.addObserver=(0,j.ne)(v=>this.observer=v)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function xo(w,_,v){const D=qn(w);ce(D._canInitEmulator,D,"emulator-config-failed"),ce(/^https?:\/\//.test(_),D,"invalid-emulator-scheme");const k=!!v?.disableWarnings,B=Ai(_),{host:ae,port:Me}=function To(w){const _=Ai(w),v=/(\/\/)?([^?#/]+)/.exec(w.substr(_.length));if(!v)return{host:"",port:null};const D=v[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(D);if(k){const B=k[1];return{host:B,port:cs(D.substr(B.length+1))}}{const[B,ae]=D.split(":");return{host:B,port:cs(ae)}}}(_);D.config.emulator={url:`${B}//${ae}${null===Me?"":`:${Me}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:ae,port:Me,protocol:B.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function dr(){function w(){const _=document.createElement("p"),v=_.style;_.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",_.classList.add("firebase-emulator-warning"),document.body.appendChild(_)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Ai(w){const _=w.indexOf(":");return _<0?"":w.substr(0,_+1)}function cs(w){if(!w)return null;const _=Number(w);return isNaN(_)?null:_}class hr{constructor(_,v){this.providerId=_,this.signInMethod=v}toJSON(){return pe("not implemented")}_getIdTokenResponse(_){return pe("not implemented")}_linkToIdToken(_,v){return pe("not implemented")}_getReauthenticationResolver(_){return pe("not implemented")}}function Zc(w,_){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,o.Z)(function*(w,_){return Gt(w,"POST","/v1/accounts:resetPassword",en(w,_))})).apply(this,arguments)}function hd(w,_){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,o.Z)(function*(w,_){return Gt(w,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function tc(w,_){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,o.Z)(function*(w,_){return Gt(w,"POST","/v1/accounts:update",en(w,_))})).apply(this,arguments)}function no(){return(no=(0,o.Z)(function*(w,_){return Vn(w,"POST","/v1/accounts:signInWithPassword",en(w,_))})).apply(this,arguments)}function zr(w,_){return hi.apply(this,arguments)}function hi(){return(hi=(0,o.Z)(function*(w,_){return Gt(w,"POST","/v1/accounts:sendOobCode",en(w,_))})).apply(this,arguments)}function Qc(w,_){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,o.Z)(function*(w,_){return zr(w,_)})).apply(this,arguments)}function $r(w,_){return io.apply(this,arguments)}function io(){return(io=(0,o.Z)(function*(w,_){return zr(w,_)})).apply(this,arguments)}function dl(w,_){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,o.Z)(function*(w,_){return zr(w,_)})).apply(this,arguments)}function Sr(w,_){return fd.apply(this,arguments)}function fd(){return(fd=(0,o.Z)(function*(w,_){return zr(w,_)})).apply(this,arguments)}function Xc(){return(Xc=(0,o.Z)(function*(w,_){return Vn(w,"POST","/v1/accounts:signInWithEmailLink",en(w,_))})).apply(this,arguments)}function Jc(){return(Jc=(0,o.Z)(function*(w,_){return Vn(w,"POST","/v1/accounts:signInWithEmailLink",en(w,_))})).apply(this,arguments)}class nc extends hr{constructor(_,v,D,k=null){super("password",D),this._email=_,this._password=v,this._tenantId=k}static _fromEmailAndPassword(_,v){return new nc(_,v,"password")}static _fromEmailAndCode(_,v,D=null){return new nc(_,v,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_){const v="string"==typeof _?JSON.parse(_):_;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(_){var v=this;return(0,o.Z)(function*(){switch(v.signInMethod){case"password":return function ha(w,_){return no.apply(this,arguments)}(_,{returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function pd(w,_){return Xc.apply(this,arguments)}(_,{email:v._email,oobCode:v._password});default:lt(_,"internal-error")}})()}_linkToIdToken(_,v){var D=this;return(0,o.Z)(function*(){switch(D.signInMethod){case"password":return hd(_,{idToken:v,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function hf(w,_){return Jc.apply(this,arguments)}(_,{idToken:v,email:D._email,oobCode:D._password});default:lt(_,"internal-error")}})()}_getReauthenticationResolver(_){return this._getIdTokenResponse(_)}}function Io(w,_){return xr.apply(this,arguments)}function xr(){return(xr=(0,o.Z)(function*(w,_){return Vn(w,"POST","/v1/accounts:signInWithIdp",en(w,_))})).apply(this,arguments)}class Os extends hr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_){const v=new Os(_.providerId,_.signInMethod);return _.idToken||_.accessToken?(_.idToken&&(v.idToken=_.idToken),_.accessToken&&(v.accessToken=_.accessToken),_.nonce&&!_.pendingToken&&(v.nonce=_.nonce),_.pendingToken&&(v.pendingToken=_.pendingToken)):_.oauthToken&&_.oauthTokenSecret?(v.accessToken=_.oauthToken,v.secret=_.oauthTokenSecret):lt("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_){const v="string"==typeof _?JSON.parse(_):_,{providerId:D,signInMethod:k}=v,B=(0,ue._T)(v,["providerId","signInMethod"]);if(!D||!k)return null;const ae=new Os(D,k);return ae.idToken=B.idToken||void 0,ae.accessToken=B.accessToken||void 0,ae.secret=B.secret,ae.nonce=B.nonce,ae.pendingToken=B.pendingToken||null,ae}_getIdTokenResponse(_){return Io(_,this.buildRequest())}_linkToIdToken(_,v){const D=this.buildRequest();return D.idToken=v,Io(_,D)}_getReauthenticationResolver(_){const v=this.buildRequest();return v.autoCreate=!1,Io(_,v)}buildRequest(){const _={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),_.postBody=(0,j.xO)(v)}return _}}function fg(w,_){return md.apply(this,arguments)}function md(){return(md=(0,o.Z)(function*(w,_){return Gt(w,"POST","/v1/accounts:sendVerificationCode",en(w,_))})).apply(this,arguments)}function hl(){return(hl=(0,o.Z)(function*(w,_){return Vn(w,"POST","/v1/accounts:signInWithPhoneNumber",en(w,_))})).apply(this,arguments)}function gd(){return(gd=(0,o.Z)(function*(w,_){const v=yield Vn(w,"POST","/v1/accounts:signInWithPhoneNumber",en(w,_));if(v.temporaryProof)throw Jn(w,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const mg={USER_NOT_FOUND:"user-not-found"};function Ao(){return(Ao=(0,o.Z)(function*(w,_){return Vn(w,"POST","/v1/accounts:signInWithPhoneNumber",en(w,Object.assign(Object.assign({},_),{operation:"REAUTH"})),mg)})).apply(this,arguments)}class Ps extends hr{constructor(_){super("phone","phone"),this.params=_}static _fromVerification(_,v){return new Ps({verificationId:_,verificationCode:v})}static _fromTokenResponse(_,v){return new Ps({phoneNumber:_,temporaryProof:v})}_getIdTokenResponse(_){return function pg(w,_){return hl.apply(this,arguments)}(_,this._makeVerificationRequest())}_linkToIdToken(_,v){return function fa(w,_){return gd.apply(this,arguments)}(_,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(_){return function gg(w,_){return Ao.apply(this,arguments)}(_,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_,phoneNumber:v,verificationId:D,verificationCode:k}=this.params;return _&&v?{temporaryProof:_,phoneNumber:v}:{sessionInfo:D,code:k}}toJSON(){const _={providerId:this.providerId};return this.params.phoneNumber&&(_.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_.verificationCode=this.params.verificationCode),this.params.verificationId&&(_.verificationId=this.params.verificationId),_}static fromJSON(_){"string"==typeof _&&(_=JSON.parse(_));const{verificationId:v,verificationCode:D,phoneNumber:k,temporaryProof:B}=_;return D||v||k||B?new Ps({verificationId:v,verificationCode:D,phoneNumber:k,temporaryProof:B}):null}}class pa{constructor(_){var v,D,k,B,ae,Me;const it=(0,j.zd)((0,j.pd)(_)),Ke=null!==(v=it.apiKey)&&void 0!==v?v:null,Ge=null!==(D=it.oobCode)&&void 0!==D?D:null,tn=function _g(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=it.mode)&&void 0!==k?k:null);ce(Ke&&Ge&&tn,"argument-error"),this.apiKey=Ke,this.operation=tn,this.code=Ge,this.continueUrl=null!==(B=it.continueUrl)&&void 0!==B?B:null,this.languageCode=null!==(ae=it.languageCode)&&void 0!==ae?ae:null,this.tenantId=null!==(Me=it.tenantId)&&void 0!==Me?Me:null}static parseLink(_){const v=function Uv(w){const _=(0,j.zd)((0,j.pd)(w)).link,v=_?(0,j.zd)((0,j.pd)(_)).deep_link_id:null,D=(0,j.zd)((0,j.pd)(w)).deep_link_id;return(D?(0,j.zd)((0,j.pd)(D)).link:null)||D||v||_||w}(_);try{return new pa(v)}catch{return null}}}let fl=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(v,D){return nc._fromEmailAndPassword(v,D)}static credentialWithLink(v,D){const k=pa.parseLink(D);return ce(k,"argument-error"),nc._fromEmailAndCode(v,k.code,k.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Tr{constructor(_){this.providerId=_,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_){this.defaultLanguageCode=_}setCustomParameters(_){return this.customParameters=_,this}getCustomParameters(){return this.customParameters}}class ko extends Tr{constructor(){super(...arguments),this.scopes=[]}addScope(_){return this.scopes.includes(_)||this.scopes.push(_),this}getScopes(){return[...this.scopes]}}class ga extends ko{static credentialFromJSON(_){const v="string"==typeof _?JSON.parse(_):_;return ce("providerId"in v&&"signInMethod"in v,"argument-error"),Os._fromParams(v)}credential(_){return this._credential(Object.assign(Object.assign({},_),{nonce:_.rawNonce}))}_credential(_){return ce(_.idToken||_.accessToken,"argument-error"),Os._fromParams(Object.assign(Object.assign({},_),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(_){return ga.oauthCredentialFromTaggedObject(_)}static credentialFromError(_){return ga.oauthCredentialFromTaggedObject(_.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:v,oauthAccessToken:D,oauthTokenSecret:k,pendingToken:B,nonce:ae,providerId:Me}=_;if(!D&&!k&&!v&&!B||!Me)return null;try{return new ga(Me)._credential({idToken:v,accessToken:D,nonce:ae,pendingToken:B})}catch{return null}}}let ff=(()=>{class w extends ko{constructor(){super("facebook.com")}static credential(v){return Os._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return w.credential(v.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),pl=(()=>{class w extends ko{constructor(){super("google.com"),this.addScope("profile")}static credential(v,D){return Os._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:D})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:D,oauthAccessToken:k}=v;if(!D&&!k)return null;try{return w.credential(D,k)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),ic=(()=>{class w extends ko{constructor(){super("github.com")}static credential(v){return Os._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return w.credential(v.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Ro extends hr{constructor(_,v){super(_,_),this.pendingToken=v}_getIdTokenResponse(_){return Io(_,this.buildRequest())}_linkToIdToken(_,v){const D=this.buildRequest();return D.idToken=v,Io(_,D)}_getReauthenticationResolver(_){const v=this.buildRequest();return v.autoCreate=!1,Io(_,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(_){const v="string"==typeof _?JSON.parse(_):_,{providerId:D,signInMethod:k,pendingToken:B}=v;return D&&k&&B&&D===k?new Ro(D,B):null}static _create(_,v){return new Ro(_,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Wn extends Tr{constructor(_){ce(_.startsWith("saml."),"argument-error"),super(_)}static credentialFromResult(_){return Wn.samlCredentialFromTaggedObject(_)}static credentialFromError(_){return Wn.samlCredentialFromTaggedObject(_.customData||{})}static credentialFromJSON(_){const v=Ro.fromJSON(_);return ce(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{pendingToken:v,providerId:D}=_;if(!v||!D)return null;try{return Ro._create(D,v)}catch{return null}}}let qr=(()=>{class w extends ko{constructor(){super("twitter.com")}static credential(v,D){return Os._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:D})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:D,oauthTokenSecret:k}=v;if(!D||!k)return null;try{return w.credential(D,k)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function _d(w,_){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,o.Z)(function*(w,_){return Vn(w,"POST","/v1/accounts:signUp",en(w,_))})).apply(this,arguments)}class fr{constructor(_){this.user=_.user,this.providerId=_.providerId,this._tokenResponse=_._tokenResponse,this.operationType=_.operationType}static _fromIdTokenResponse(_,v,D,k=!1){return(0,o.Z)(function*(){const B=yield Ye._fromIdTokenResponse(_,D,k),ae=eu(D);return new fr({user:B,providerId:ae,_tokenResponse:D,operationType:v})})()}static _forOperation(_,v,D){return(0,o.Z)(function*(){yield _._updateTokensIfNecessary(D,!0);const k=eu(D);return new fr({user:_,providerId:k,_tokenResponse:D,operationType:v})})()}}function eu(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function pi(w){return rc.apply(this,arguments)}function rc(){return(rc=(0,o.Z)(function*(w){var _;const v=qn(w);if(yield v._initializationPromise,null!==(_=v.currentUser)&&void 0!==_&&_.isAnonymous)return new fr({user:v.currentUser,providerId:null,operationType:"signIn"});const D=yield _d(v,{returnSecureToken:!0}),k=yield fr._fromIdTokenResponse(v,"signIn",D,!0);return yield v._updateCurrentUser(k.user),k})).apply(this,arguments)}class vd extends j.ZR{constructor(_,v,D,k){var B;super(v.code,v.message),this.operationType=D,this.user=k,Object.setPrototypeOf(this,vd.prototype),this.customData={appName:_.name,tenantId:null!==(B=_.tenantId)&&void 0!==B?B:void 0,_serverResponse:v.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(_,v,D,k){return new vd(_,v,D,k)}}function ml(w,_,v,D){return("reauthenticate"===_?v._getReauthenticationResolver(w):v._getIdTokenResponse(w)).catch(B=>{throw"auth/multi-factor-auth-required"===B.code?vd._fromErrorAndOperation(w,B,_,D):B})}function pr(w){return new Set(w.map(({providerId:_})=>_).filter(_=>!!_))}function ro(w,_){return Po.apply(this,arguments)}function Po(){return(Po=(0,o.Z)(function*(w,_){const v=(0,j.m9)(w);yield No(!0,v,_);const{providerUserInfo:D}=yield kn(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[_]}),k=pr(D||[]);return v.providerData=v.providerData.filter(B=>k.has(B.providerId)),k.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function Ns(w,_){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,o.Z)(function*(w,_,v=!1){const D=yield Un(w,_._linkToIdToken(w.auth,yield w.getIdToken()),v);return fr._forOperation(w,"link",D)})).apply(this,arguments)}function No(w,_,v){return us.apply(this,arguments)}function us(){return(us=(0,o.Z)(function*(w,_,v){yield sr(_);const k=!1===w?"provider-already-linked":"no-such-provider";ce(pr(_.providerData).has(v)===w,_.auth,k)})).apply(this,arguments)}function so(w,_){return ds.apply(this,arguments)}function ds(){return(ds=(0,o.Z)(function*(w,_,v=!1){var D;const{auth:k}=w,B="reauthenticate";try{const ae=yield Un(w,ml(k,B,_,w),v);ce(ae.idToken,k,"internal-error");const Me=pt(ae.idToken);ce(Me,k,"internal-error");const{sub:it}=Me;return ce(w.uid===it,k,"user-mismatch"),fr._forOperation(w,B,ae)}catch(ae){throw"auth/user-not-found"===(null===(D=ae)||void 0===D?void 0:D.code)&&lt(k,"user-mismatch"),ae}})).apply(this,arguments)}function oo(w,_){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,o.Z)(function*(w,_,v=!1){const D="signIn",k=yield ml(w,D,_),B=yield fr._fromIdTokenResponse(w,D,k);return v||(yield w._updateCurrentUser(B.user)),B})).apply(this,arguments)}function At(w,_){return ei.apply(this,arguments)}function ei(){return(ei=(0,o.Z)(function*(w,_){return oo(qn(w),_)})).apply(this,arguments)}function mf(w,_){return gl.apply(this,arguments)}function gl(){return(gl=(0,o.Z)(function*(w,_){const v=(0,j.m9)(w);return yield No(!1,v,_.providerId),Ns(v,_)})).apply(this,arguments)}function yd(w,_){return ao.apply(this,arguments)}function ao(){return(ao=(0,o.Z)(function*(w,_){return so((0,j.m9)(w),_)})).apply(this,arguments)}function _a(w,_){return va.apply(this,arguments)}function va(){return(va=(0,o.Z)(function*(w,_){return Vn(w,"POST","/v1/accounts:signInWithCustomToken",en(w,_))})).apply(this,arguments)}function sc(w,_){return Re.apply(this,arguments)}function Re(){return(Re=(0,o.Z)(function*(w,_){const v=qn(w),D=yield _a(v,{token:_,returnSecureToken:!0}),k=yield fr._fromIdTokenResponse(v,"signIn",D);return yield v._updateCurrentUser(k.user),k})).apply(this,arguments)}class Yt{constructor(_,v){this.factorId=_,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(_,v){return"phoneInfo"in v?Lo._fromServerResponse(_,v):lt(_,"internal-error")}}class Lo extends Yt{constructor(_){super("phone",_),this.phoneNumber=_.phoneInfo}static _fromServerResponse(_,v){return new Lo(v)}}function Bo(w,_,v){var D;ce((null===(D=v.url)||void 0===D?void 0:D.length)>0,w,"invalid-continue-uri"),ce(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),_.continueUrl=v.url,_.dynamicLinkDomain=v.dynamicLinkDomain,_.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(ce(v.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),_.iOSBundleId=v.iOS.bundleId),v.android&&(ce(v.android.packageName.length>0,w,"missing-android-pkg-name"),_.androidInstallApp=v.android.installApp,_.androidMinimumVersionCode=v.android.minimumVersion,_.androidPackageName=v.android.packageName)}function ti(w,_,v){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,o.Z)(function*(w,_,v){const D=(0,j.m9)(w),k={requestType:"PASSWORD_RESET",email:_};v&&Bo(D,k,v),yield $r(D,k)})).apply(this,arguments)}function ya(w,_,v){return or.apply(this,arguments)}function or(){return(or=(0,o.Z)(function*(w,_,v){yield Zc((0,j.m9)(w),{oobCode:_,newPassword:v})})).apply(this,arguments)}function tu(w,_){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,o.Z)(function*(w,_){yield tc((0,j.m9)(w),{oobCode:_})})).apply(this,arguments)}function _l(w,_){return ba.apply(this,arguments)}function ba(){return(ba=(0,o.Z)(function*(w,_){const v=(0,j.m9)(w),D=yield Zc(v,{oobCode:_}),k=D.requestType;switch(ce(k,v,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ce(D.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ce(D.mfaInfo,v,"internal-error");default:ce(D.email,v,"internal-error")}let B=null;return D.mfaInfo&&(B=Yt._fromServerResponse(qn(v),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:B},operation:k}})).apply(this,arguments)}function Hv(w,_){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,o.Z)(function*(w,_){const{data:v}=yield _l((0,j.m9)(w),_);return v.email})).apply(this,arguments)}function ki(w,_,v){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,o.Z)(function*(w,_,v){const D=qn(w),k=yield _d(D,{returnSecureToken:!0,email:_,password:v}),B=yield fr._fromIdTokenResponse(D,"signIn",k);return yield D._updateCurrentUser(B.user),B})).apply(this,arguments)}function nu(w,_,v){return At((0,j.m9)(w),fl.credential(_,v))}function Ho(w,_,v){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,o.Z)(function*(w,_,v){const D=(0,j.m9)(w),k={requestType:"EMAIL_SIGNIN",email:_};ce(v.handleCodeInApp,D,"argument-error"),v&&Bo(D,k,v),yield dl(D,k)})).apply(this,arguments)}function gf(w,_){return"EMAIL_SIGNIN"===pa.parseLink(_)?.operation}function iu(w,_,v){return oc.apply(this,arguments)}function oc(){return(oc=(0,o.Z)(function*(w,_,v){const D=(0,j.m9)(w),k=fl.credentialWithLink(_,v||He());return ce(k._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),At(D,k)})).apply(this,arguments)}function ru(w,_){return vl.apply(this,arguments)}function vl(){return(vl=(0,o.Z)(function*(w,_){return Gt(w,"POST","/v1/accounts:createAuthUri",en(w,_))})).apply(this,arguments)}function yl(w,_){return wa.apply(this,arguments)}function wa(){return(wa=(0,o.Z)(function*(w,_){const D={identifier:_,continueUri:je()?He():"http://localhost"},{signinMethods:k}=yield ru((0,j.m9)(w),D);return k||[]})).apply(this,arguments)}function su(w,_){return bl.apply(this,arguments)}function bl(){return(bl=(0,o.Z)(function*(w,_){const v=(0,j.m9)(w),k={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};_&&Bo(v.auth,k,_);const{email:B}=yield Qc(v.auth,k);B!==w.email&&(yield w.reload())})).apply(this,arguments)}function ac(w,_,v){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,o.Z)(function*(w,_,v){const D=(0,j.m9)(w),B={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:_};v&&Bo(D.auth,B,v);const{email:ae}=yield Sr(D.auth,B);ae!==w.email&&(yield w.reload())})).apply(this,arguments)}function bd(w,_){return Da.apply(this,arguments)}function Da(){return(Da=(0,o.Z)(function*(w,_){return Gt(w,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function wd(w,_){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,o.Z)(function*(w,{displayName:_,photoURL:v}){if(void 0===_&&void 0===v)return;const D=(0,j.m9)(w),B={idToken:yield D.getIdToken(),displayName:_,photoUrl:v,returnSecureToken:!0},ae=yield Un(D,bd(D.auth,B));D.displayName=ae.displayName||null,D.photoURL=ae.photoUrl||null;const Me=D.providerData.find(({providerId:it})=>"password"===it);Me&&(Me.displayName=D.displayName,Me.photoURL=D.photoURL),yield D._updateTokensIfNecessary(ae)})).apply(this,arguments)}function lc(w,_){return wl((0,j.m9)(w),_,null)}function _f(w,_){return wl((0,j.m9)(w),null,_)}function wl(w,_,v){return mi.apply(this,arguments)}function mi(){return(mi=(0,o.Z)(function*(w,_,v){const{auth:D}=w,B={idToken:yield w.getIdToken(),returnSecureToken:!0};_&&(B.email=_),v&&(B.password=v);const ae=yield Un(w,hd(D,B));yield w._updateTokensIfNecessary(ae,!0)})).apply(this,arguments)}class Tn{constructor(_,v,D={}){this.isNewUser=_,this.providerId=v,this.profile=D}}class Cd extends Tn{constructor(_,v,D,k){super(_,v,D),this.username=k}}class vf extends Tn{constructor(_,v){super(_,"facebook.com",v)}}class Dd extends Cd{constructor(_,v){super(_,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class ou extends Tn{constructor(_,v){super(_,"google.com",v)}}class Ed extends Cd{constructor(_,v,D){super(_,"twitter.com",v,D)}}function au(w){const{user:_,_tokenResponse:v}=w;return _.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function hs(w){var _,v;if(!w)return null;const{providerId:D}=w,k=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},B=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!D&&w?.idToken){const ae=null===(v=null===(_=pt(w.idToken))||void 0===_?void 0:_.firebase)||void 0===v?void 0:v.sign_in_provider;if(ae)return new Tn(B,"anonymous"!==ae&&"custom"!==ae?ae:null)}if(!D)return null;switch(D){case"facebook.com":return new vf(B,k);case"github.com":return new Dd(B,k);case"google.com":return new ou(B,k);case"twitter.com":return new Ed(B,k,w.screenName||null);case"custom":case"anonymous":return new Tn(B,null);default:return new Tn(B,D,k)}}(v)}class xa{constructor(_,v){this.type=_,this.credential=v}static _fromIdtoken(_){return new xa("enroll",_)}static _fromMfaPendingCredential(_){return new xa("signin",_)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(_){var v,D;if(_?.multiFactorSession){if(null!==(v=_.multiFactorSession)&&void 0!==v&&v.pendingCredential)return xa._fromMfaPendingCredential(_.multiFactorSession.pendingCredential);if(null!==(D=_.multiFactorSession)&&void 0!==D&&D.idToken)return xa._fromIdtoken(_.multiFactorSession.idToken)}return null}}class Ta{constructor(_,v,D){this.session=_,this.hints=v,this.signInResolver=D}static _fromError(_,v){const D=qn(_),k=v.customData._serverResponse,B=(k.mfaInfo||[]).map(Me=>Yt._fromServerResponse(D,Me));ce(k.mfaPendingCredential,D,"internal-error");const ae=xa._fromMfaPendingCredential(k.mfaPendingCredential);return new Ta(ae,B,function(){var Me=(0,o.Z)(function*(it){const Ke=yield it._process(D,ae);delete k.mfaInfo,delete k.mfaPendingCredential;const Ge=Object.assign(Object.assign({},k),{idToken:Ke.idToken,refreshToken:Ke.refreshToken});switch(v.operationType){case"signIn":const tn=yield fr._fromIdTokenResponse(D,v.operationType,Ge);return yield D._updateCurrentUser(tn.user),tn;case"reauthenticate":return ce(v.user,D,"internal-error"),fr._forOperation(v.user,v.operationType,Ge);default:lt(D,"internal-error")}});return function(it){return Me.apply(this,arguments)}}())}resolveSignIn(_){var v=this;return(0,o.Z)(function*(){return v.signInResolver(_)})()}}function cu(w,_){var v;const D=(0,j.m9)(w),k=_;return ce(_.customData.operationType,D,"argument-error"),ce(null===(v=k.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,D,"argument-error"),Ta._fromError(D,k)}function Ri(w,_){return Gt(w,"POST","/v2/accounts/mfaEnrollment:start",en(w,_))}class Cf{constructor(_){this.user=_,this.enrolledFactors=[],_._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(D=>Yt._fromServerResponse(_.auth,D)))})}static _fromUser(_){return new Cf(_)}getSession(){var _=this;return(0,o.Z)(function*(){return xa._fromIdtoken(yield _.user.getIdToken())})()}enroll(_,v){var D=this;return(0,o.Z)(function*(){const k=_,B=yield D.getSession(),ae=yield Un(D.user,k._process(D.user.auth,B,v));return yield D.user._updateTokensIfNecessary(ae),D.user.reload()})()}unenroll(_){var v=this;return(0,o.Z)(function*(){var D;const k="string"==typeof _?_:_.uid,B=yield v.user.getIdToken(),ae=yield Un(v.user,function Gv(w,_){return Gt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",en(w,_))}(v.user.auth,{idToken:B,mfaEnrollmentId:k}));v.enrolledFactors=v.enrolledFactors.filter(({uid:Me})=>Me!==k),yield v.user._updateTokensIfNecessary(ae);try{yield v.user.reload()}catch(Me){if("auth/user-token-expired"!==(null===(D=Me)||void 0===D?void 0:D.code))throw Me}})()}}const Dl=new WeakMap;function uu(w){const _=(0,j.m9)(w);return Dl.has(_)||Dl.set(_,Cf._fromUser(_)),Dl.get(_)}const El="__sak";class Ma{constructor(_,v){this.storageRetriever=_,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(El,"1"),this.storage.removeItem(El),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(_,v){return this.storage.setItem(_,JSON.stringify(v)),Promise.resolve()}_get(_){const v=this.storage.getItem(_);return Promise.resolve(v?JSON.parse(v):null)}_remove(_){return this.storage.removeItem(_),Promise.resolve()}get storage(){return this.storageRetriever()}}const Di=(()=>{class w extends Ma{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,D)=>this.onStorageEvent(v,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Df(){const w=(0,j.z$)();return $(w)||qt(w)}()&&function So(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=gn(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const D of Object.keys(this.listeners)){const k=this.storage.getItem(D),B=this.localCache[D];k!==B&&v(D,B,k)}}onStorageEvent(v,D=!1){if(!v.key)return void this.forAllChangedKeys((Me,it,Ke)=>{this.notifyListeners(Me,Ke)});const k=v.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Me=this.storage.getItem(k);if(v.newValue!==Me)null!==v.newValue?this.storage.setItem(k,v.newValue):this.storage.removeItem(k);else if(this.localCache[k]===v.newValue&&!D)return}const B=()=>{const Me=this.storage.getItem(k);!D&&this.localCache[k]===Me||this.notifyListeners(k,Me)},ae=this.storage.getItem(k);!function Ut(){return(0,j.w1)()&&10===document.documentMode}()||ae===v.newValue||v.newValue===v.oldValue?B():setTimeout(B,10)}notifyListeners(v,D){this.localCache[v]=D;const k=this.listeners[v];if(k)for(const B of Array.from(k))B(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,D,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:D,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(D)}_removeListener(v,D){this.listeners[v]&&(this.listeners[v].delete(D),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,D){var k=()=>super._set,B=this;return(0,o.Z)(function*(){yield k().call(B,v,D),B.localCache[v]=JSON.stringify(D)})()}_get(v){var D=()=>super._get,k=this;return(0,o.Z)(function*(){const B=yield D().call(k,v);return k.localCache[v]=JSON.stringify(B),B})()}_remove(v){var D=()=>super._remove,k=this;return(0,o.Z)(function*(){yield D().call(k,v),delete k.localCache[v]})()}}return w.type="LOCAL",w})(),Ia=(()=>{class w extends Ma{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,D){}_removeListener(v,D){}}return w.type="SESSION",w})();let Sd=(()=>{class w{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const D=this.receivers.find(B=>B.isListeningto(v));if(D)return D;const k=new w(v);return this.receivers.push(k),k}isListeningto(v){return this.eventTarget===v}handleEvent(v){var D=this;return(0,o.Z)(function*(){const k=v,{eventId:B,eventType:ae,data:Me}=k.data,it=D.handlersMap[ae];if(!it?.size)return;k.ports[0].postMessage({status:"ack",eventId:B,eventType:ae});const Ke=Array.from(it).map(function(){var tn=(0,o.Z)(function*(Vs){return Vs(k.origin,Me)});return function(Vs){return tn.apply(this,arguments)}}()),Ge=yield function Sf(w){return Promise.all(w.map(function(){var _=(0,o.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(D){return{fulfilled:!1,reason:D}}});return function(v){return _.apply(this,arguments)}}()))}(Ke);k.ports[0].postMessage({status:"done",eventId:B,eventType:ae,response:Ge})})()}_subscribe(v,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(D)}_unsubscribe(v,D){this.handlersMap[v]&&D&&this.handlersMap[v].delete(D),(!D||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function lo(w="",_=10){let v="";for(let D=0;D<_;D++)v+=Math.floor(10*Math.random());return w+v}class Yn{constructor(_){this.target=_,this.handlers=new Set}removeMessageHandler(_){_.messageChannel&&(_.messageChannel.port1.removeEventListener("message",_.onMessage),_.messageChannel.port1.close()),this.handlers.delete(_)}_send(_,v,D=50){var k=this;return(0,o.Z)(function*(){const B=typeof MessageChannel<"u"?new MessageChannel:null;if(!B)throw new Error("connection_unavailable");let ae,Me;return new Promise((it,Ke)=>{const Ge=lo("",20);B.port1.start();const tn=setTimeout(()=>{Ke(new Error("unsupported_event"))},D);Me={messageChannel:B,onMessage(Vs){const po=Vs;if(po.data.eventId===Ge)switch(po.data.status){case"ack":clearTimeout(tn),ae=setTimeout(()=>{Ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(ae),it(po.data.response);break;default:clearTimeout(tn),clearTimeout(ae),Ke(new Error("invalid_response"))}}},k.handlers.add(Me),B.port1.addEventListener("message",Me.onMessage),k.target.postMessage({eventType:_,eventId:Ge,data:v},[B.port2])}).finally(()=>{Me&&k.removeMessageHandler(Me)})})()}}function Dn(){return window}function ps(){return typeof Dn().WorkerGlobalScope<"u"&&"function"==typeof Dn().importScripts}function Zr(){return(Zr=(0,o.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Tl="firebaseLocalStorageDb",Ml="firebaseLocalStorage",hc="fbase_key";class co{constructor(_){this.request=_}toPromise(){return new Promise((_,v)=>{this.request.addEventListener("success",()=>{_(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function ka(w,_){return w.transaction([Ml],_?"readwrite":"readonly").objectStore(Ml)}function Kr(){const w=indexedDB.open(Tl,1);return new Promise((_,v)=>{w.addEventListener("error",()=>{v(w.error)}),w.addEventListener("upgradeneeded",()=>{const D=w.result;try{D.createObjectStore(Ml,{keyPath:hc})}catch(k){v(k)}}),w.addEventListener("success",(0,o.Z)(function*(){const D=w.result;D.objectStoreNames.contains(Ml)?_(D):(D.close(),yield function Go(){const w=indexedDB.deleteDatabase(Tl);return new co(w).toPromise()}(),_(yield Kr()))}))})}function mr(w,_,v){return uo.apply(this,arguments)}function uo(){return(uo=(0,o.Z)(function*(w,_,v){const D=ka(w,!0).put({[hc]:_,value:v});return new co(D).toPromise()})).apply(this,arguments)}function Cn(){return(Cn=(0,o.Z)(function*(w,_){const v=ka(w,!1).get(_),D=yield new co(v).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function Oi(w,_){const v=ka(w,!0).delete(_);return new co(v).toPromise()}const fc=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,o.Z)(function*(){return v.db||(v.db=yield Kr()),v.db})()}_withRetries(v){var D=this;return(0,o.Z)(function*(){let k=0;for(;;)try{const B=yield D._openDb();return yield v(B)}catch(B){if(k++>3)throw B;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,o.Z)(function*(){return ps()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,o.Z)(function*(){v.receiver=Sd._getInstance(function ar(){return ps()?self:null}()),v.receiver._subscribe("keyChanged",function(){var D=(0,o.Z)(function*(k,B){return{keyProcessed:(yield v._poll()).includes(B.key)}});return function(k,B){return D.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var D=(0,o.Z)(function*(k,B){return["keyChanged"]});return function(k,B){return D.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,o.Z)(function*(){var D,k;if(v.activeServiceWorker=yield function xl(){return Zr.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Yn(v.activeServiceWorker);const B=yield v.sender._send("ping",{},800);!B||(null===(D=B[0])||void 0===D?void 0:D.fulfilled)&&(null===(k=B[0])||void 0===k?void 0:k.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var D=this;return(0,o.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function dc(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:v},D.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,o.Z)(function*(){try{if(!indexedDB)return!1;const v=yield Kr();return yield mr(v,El,"1"),yield Oi(v,El),!0}catch{}return!1})()}_withPendingWrite(v){var D=this;return(0,o.Z)(function*(){D.pendingWrites++;try{yield v()}finally{D.pendingWrites--}})()}_set(v,D){var k=this;return(0,o.Z)(function*(){return k._withPendingWrite((0,o.Z)(function*(){return yield k._withRetries(B=>mr(B,v,D)),k.localCache[v]=D,k.notifyServiceWorker(v)}))})()}_get(v){var D=this;return(0,o.Z)(function*(){const k=yield D._withRetries(B=>function Je(w,_){return Cn.apply(this,arguments)}(B,v));return D.localCache[v]=k,k})()}_remove(v){var D=this;return(0,o.Z)(function*(){return D._withPendingWrite((0,o.Z)(function*(){return yield D._withRetries(k=>Oi(k,v)),delete D.localCache[v],D.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,o.Z)(function*(){const D=yield v._withRetries(ae=>{const Me=ka(ae,!1).getAll();return new co(Me).toPromise()});if(!D)return[];if(0!==v.pendingWrites)return[];const k=[],B=new Set;for(const{fbase_key:ae,value:Me}of D)B.add(ae),JSON.stringify(v.localCache[ae])!==JSON.stringify(Me)&&(v.notifyListeners(ae,Me),k.push(ae));for(const ae of Object.keys(v.localCache))v.localCache[ae]&&!B.has(ae)&&(v.notifyListeners(ae,null),k.push(ae));return k})()}notifyListeners(v,D){this.localCache[v]=D;const k=this.listeners[v];if(k)for(const B of Array.from(k))B(D)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,o.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(D)}_removeListener(v,D){this.listeners[v]&&(this.listeners[v].delete(D),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Il(w,_){return Gt(w,"POST","/v2/accounts/mfaSignIn:start",en(w,_))}function ni(){return(ni=(0,o.Z)(function*(w){return(yield Gt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function kl(w){return new Promise((_,v)=>{const D=document.createElement("script");D.setAttribute("src",w),D.onload=_,D.onerror=k=>{const B=Ne("internal-error");B.customData=k,v(B)},D.type="text/javascript",D.charset="UTF-8",function du(){var w,_;return null!==(_=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==_?_:document}().appendChild(D)})}function _s(w){return`__${w}${Math.floor(1e6*Math.random())}`}const $t=1e12;class Rl{constructor(_){this.auth=_,this.counter=$t,this._widgets=new Map}render(_,v){const D=this.counter;return this._widgets.set(D,new $v(_,this.auth.name,v||{})),this.counter++,D}reset(_){var v;const D=_||$t;null===(v=this._widgets.get(D))||void 0===v||v.delete(),this._widgets.delete(D)}getResponse(_){var v;return(null===(v=this._widgets.get(_||$t))||void 0===v?void 0:v.getResponse())||""}execute(_){var v=this;return(0,o.Z)(function*(){var D;return null===(D=v._widgets.get(_||$t))||void 0===D||D.execute(),""})()}}class $v{constructor(_,v,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof _?document.getElementById(_):_;ce(k,"argument-error",{appName:v}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function yg(w){const _=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<w;D++)_.push(v.charAt(Math.floor(Math.random()*v.length)));return _.join("")}(50);const{callback:_,"expired-callback":v}=this.params;if(_)try{_(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const hu=_s("rcb"),bg=new tt(3e4,6e4);class pc{constructor(){var _;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(_=Dn().grecaptcha)||void 0===_||!_.render)}load(_,v=""){return ce(function ho(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(v),_,"argument-error"),this.shouldResolveImmediately(v)?Promise.resolve(Dn().grecaptcha):new Promise((D,k)=>{const B=Dn().setTimeout(()=>{k(Ne(_,"network-request-failed"))},bg.get());Dn()[hu]=()=>{Dn().clearTimeout(B),delete Dn()[hu];const Me=Dn().grecaptcha;if(!Me)return void k(Ne(_,"internal-error"));const it=Me.render;Me.render=(Ke,Ge)=>{const tn=it(Ke,Ge);return this.counter++,tn},this.hostLanguage=v,D(Me)},kl(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:hu,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(B),k(Ne(_,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_){var v;return!(null===(v=Dn().grecaptcha)||void 0===v||!v.render)&&(_===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class fu{load(_){return(0,o.Z)(function*(){return new Rl(_)})()}clearedOneInstance(){}}const qv="recaptcha",Pi={theme:"light",type:"image"};class Mf{constructor(_,v=Object.assign({},Pi),D){this.parameters=v,this.type=qv,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=qn(D),this.isInvisible="invisible"===this.parameters.size,ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof _?document.getElementById(_):_;ce(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fu:new pc,this.validateStartingState()}verify(){var _=this;return(0,o.Z)(function*(){_.assertNotDestroyed();const v=yield _.render(),D=_.getAssertedRecaptcha();return D.getResponse(v)||new Promise(B=>{const ae=Me=>{!Me||(_.tokenChangeListeners.delete(ae),B(Me))};_.tokenChangeListeners.add(ae),_.isInvisible&&D.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(_){return Promise.reject(_)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(_=>{throw this.renderPromise=null,_})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_=>{this.container.removeChild(_)})}validateStartingState(){ce(!this.parameters.sitekey,this.auth,"argument-error"),ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_){return v=>{if(this.tokenChangeListeners.forEach(D=>D(v)),"function"==typeof _)_(v);else if("string"==typeof _){const D=Dn()[_];"function"==typeof D&&D(v)}}}assertNotDestroyed(){ce(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var _=this;return(0,o.Z)(function*(){if(yield _.init(),!_.widgetId){let v=_.container;if(!_.isInvisible){const D=document.createElement("div");v.appendChild(D),v=D}_.widgetId=_.getAssertedRecaptcha().render(v,_.parameters)}return _.widgetId})()}init(){var _=this;return(0,o.Z)(function*(){ce(je()&&!ps(),_.auth,"internal-error"),yield function mc(){let w=null;return new Promise(_=>{"complete"!==document.readyState?(w=()=>_(),window.addEventListener("load",w)):_()}).catch(_=>{throw w&&window.removeEventListener("load",w),_})}(),_.recaptcha=yield _._recaptchaLoader.load(_.auth,_.auth.languageCode||void 0);const v=yield function Al(w){return ni.apply(this,arguments)}(_.auth);ce(v,_.auth,"internal-error"),_.parameters.sitekey=v})()}getAssertedRecaptcha(){return ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class xd{constructor(_,v){this.verificationId=_,this.onConfirmation=v}confirm(_){const v=Ps._fromVerification(this.verificationId,_);return this.onConfirmation(v)}}function Wv(w,_,v){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,o.Z)(function*(w,_,v){const D=qn(w),k=yield gc(D,_,(0,j.m9)(v));return new xd(k,B=>At(D,B))})).apply(this,arguments)}function Ls(w,_,v){return pu.apply(this,arguments)}function pu(){return(pu=(0,o.Z)(function*(w,_,v){const D=(0,j.m9)(w);yield No(!1,D,"phone");const k=yield gc(D.auth,_,(0,j.m9)(v));return new xd(k,B=>mf(D,B))})).apply(this,arguments)}function mu(w,_,v){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,o.Z)(function*(w,_,v){const D=(0,j.m9)(w),k=yield gc(D.auth,_,(0,j.m9)(v));return new xd(k,B=>yd(D,B))})).apply(this,arguments)}function gc(w,_,v){return Td.apply(this,arguments)}function Td(){return(Td=(0,o.Z)(function*(w,_,v){var D;const k=yield v.verify();try{let B;if(ce("string"==typeof k,w,"argument-error"),ce(v.type===qv,w,"argument-error"),B="string"==typeof _?{phoneNumber:_}:_,"session"in B){const ae=B.session;if("phoneNumber"in B)return ce("enroll"===ae.type,w,"internal-error"),(yield Ri(w,{idToken:ae.credential,phoneEnrollmentInfo:{phoneNumber:B.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{ce("signin"===ae.type,w,"internal-error");const Me=(null===(D=B.multiFactorHint)||void 0===D?void 0:D.uid)||B.multiFactorUid;return ce(Me,w,"missing-multi-factor-info"),(yield Il(w,{mfaPendingCredential:ae.credential,mfaEnrollmentId:Me,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ae}=yield fg(w,{phoneNumber:B.phoneNumber,recaptchaToken:k});return ae}}finally{v._reset()}})).apply(this,arguments)}function If(w,_){return wg.apply(this,arguments)}function wg(){return(wg=(0,o.Z)(function*(w,_){yield Ns((0,j.m9)(w),_)})).apply(this,arguments)}let Yv=(()=>{class w{constructor(v){this.providerId=w.PROVIDER_ID,this.auth=qn(v)}verifyPhoneNumber(v,D){return gc(this.auth,v,(0,j.m9)(D))}static credential(v,D){return Ps._fromVerification(v,D)}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:D,temporaryProof:k}=v;return D&&k?Ps._fromTokenResponse(D,k):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function zo(w,_){return _?se(_):(ce(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Xi extends hr{constructor(_){super("custom","custom"),this.params=_}_getIdTokenResponse(_){return Io(_,this._buildIdpRequest())}_linkToIdToken(_,v){return Io(_,this._buildIdpRequest(v))}_getReauthenticationResolver(_){return Io(_,this._buildIdpRequest())}_buildIdpRequest(_){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _&&(v.idToken=_),v}}function _c(w){return oo(w.auth,new Xi(w),w.bypassAuthState)}function Ol(w){const{auth:_,user:v}=w;return ce(v,_,"internal-error"),so(v,new Xi(w),w.bypassAuthState)}function Af(w){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,o.Z)(function*(w){const{auth:_,user:v}=w;return ce(v,_,"internal-error"),Ns(v,new Xi(w),w.bypassAuthState)})).apply(this,arguments)}class gu{constructor(_,v,D,k,B=!1){this.auth=_,this.resolver=D,this.user=k,this.bypassAuthState=B,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var _=this;return new Promise(function(){var v=(0,o.Z)(function*(D,k){_.pendingPromise={resolve:D,reject:k};try{_.eventManager=yield _.resolver._initialize(_.auth),yield _.onExecution(),_.eventManager.registerConsumer(_)}catch(B){_.reject(B)}});return function(D,k){return v.apply(this,arguments)}}())}onAuthEvent(_){var v=this;return(0,o.Z)(function*(){const{urlResponse:D,sessionId:k,postBody:B,tenantId:ae,error:Me,type:it}=_;if(Me)return void v.reject(Me);const Ke={auth:v.auth,requestUri:D,sessionId:k,tenantId:ae||void 0,postBody:B||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(it)(Ke))}catch(Ge){v.reject(Ge)}})()}onError(_){this.reject(_)}getIdpTask(_){switch(_){case"signInViaPopup":case"signInViaRedirect":return _c;case"linkViaPopup":case"linkViaRedirect":return Af;case"reauthViaPopup":case"reauthViaRedirect":return Ol;default:lt(this.auth,"internal-error")}}resolve(_){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_),this.unregisterAndCleanUp()}reject(_){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Md=new tt(2e3,1e4);function Id(w,_,v){return vc.apply(this,arguments)}function vc(){return(vc=(0,o.Z)(function*(w,_,v){const D=qn(w);Te(w,_,Tr);const k=zo(D,v);return new Of(D,"signInViaPopup",_,k).executeNotNull()})).apply(this,arguments)}function Ad(w,_,v){return kf.apply(this,arguments)}function kf(){return(kf=(0,o.Z)(function*(w,_,v){const D=(0,j.m9)(w);Te(D.auth,_,Tr);const k=zo(D.auth,v);return new Of(D.auth,"reauthViaPopup",_,k,D).executeNotNull()})).apply(this,arguments)}function Rf(w,_,v){return yc.apply(this,arguments)}function yc(){return(yc=(0,o.Z)(function*(w,_,v){const D=(0,j.m9)(w);Te(D.auth,_,Tr);const k=zo(D.auth,v);return new Of(D.auth,"linkViaPopup",_,k,D).executeNotNull()})).apply(this,arguments)}let Of=(()=>{class w extends gu{constructor(v,D,k,B,ae){super(v,D,B,ae),this.provider=k,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var v=this;return(0,o.Z)(function*(){const D=yield v.execute();return ce(D,v.auth,"internal-error"),D})()}onExecution(){var v=this;return(0,o.Z)(function*(){we(1===v.filter.length,"Popup operations only handle one event");const D=lo();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],D),v.authWindow.associatedEvent=D,v.resolver._originValidation(v.auth).catch(k=>{v.reject(k)}),v.resolver._isIframeWebStorageSupported(v.auth,k=>{k||v.reject(Ne(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(Ne(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const v=()=>{var D,k;this.pollId=null!==(k=null===(D=this.authWindow)||void 0===D?void 0:D.window)&&void 0!==k&&k.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ne(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(v,Md.get())};v()}}return w.currentPopupAction=null,w})();const Qr=new Map;class wc extends gu{constructor(_,v,D=!1){super(_,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,D),this.eventId=null}execute(){var _=()=>super.execute,v=this;return(0,o.Z)(function*(){let D=Qr.get(v.auth._key());if(!D){try{const B=(yield function Cg(w,_){return kd.apply(this,arguments)}(v.resolver,v.auth))?yield _().call(v):null;D=()=>Promise.resolve(B)}catch(k){D=()=>Promise.reject(k)}Qr.set(v.auth._key(),D)}return v.bypassAuthState||Qr.set(v.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(_){var v=()=>super.onAuthEvent,D=this;return(0,o.Z)(function*(){if("signInViaRedirect"===_.type)return v().call(D,_);if("unknown"!==_.type){if(_.eventId){const k=yield D.auth._redirectUserForId(_.eventId);if(k)return D.user=k,v().call(D,_);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,o.Z)(function*(){})()}cleanUp(){}}function kd(){return(kd=(0,o.Z)(function*(w,_){const v=Zn(_),D=Dg(w);if(!(yield D._isAvailable()))return!1;const k="true"===(yield D._get(v));return yield D._remove(v),k})).apply(this,arguments)}function fo(w,_){return _u.apply(this,arguments)}function _u(){return(_u=(0,o.Z)(function*(w,_){return Dg(w)._set(Zn(_),"true")})).apply(this,arguments)}function vs(){Qr.clear()}function Oa(w,_){Qr.set(w._key(),_)}function Dg(w){return se(w._redirectPersistence)}function Zn(w){return wn("pendingRedirect",w.config.apiKey,w.name)}function Pf(w,_,v){return function Rd(w,_,v){return Cc.apply(this,arguments)}(w,_,v)}function Cc(){return(Cc=(0,o.Z)(function*(w,_,v){const D=qn(w);Te(w,_,Tr);const k=zo(D,v);return yield fo(k,D),k._openRedirect(D,_,"signInViaRedirect")})).apply(this,arguments)}function x(w,_,v){return function T(w,_,v){return R.apply(this,arguments)}(w,_,v)}function R(){return(R=(0,o.Z)(function*(w,_,v){const D=(0,j.m9)(w);Te(D.auth,_,Tr);const k=zo(D.auth,v);yield fo(k,D.auth);const B=yield Lt(D);return k._openRedirect(D.auth,_,"reauthViaRedirect",B)})).apply(this,arguments)}function H(w,_,v){return function ie(w,_,v){return fe.apply(this,arguments)}(w,_,v)}function fe(){return(fe=(0,o.Z)(function*(w,_,v){const D=(0,j.m9)(w);Te(D.auth,_,Tr);const k=zo(D.auth,v);yield No(!1,D,_.providerId),yield fo(k,D.auth);const B=yield Lt(D);return k._openRedirect(D.auth,_,"linkViaRedirect",B)})).apply(this,arguments)}function Le(w,_){return nt.apply(this,arguments)}function nt(){return(nt=(0,o.Z)(function*(w,_){return yield qn(w)._initializationPromise,xt(w,_,!1)})).apply(this,arguments)}function xt(w,_){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,o.Z)(function*(w,_,v=!1){const D=qn(w),k=zo(D,_),ae=yield new wc(D,k,v).execute();return ae&&!v&&(delete ae.user._redirectEventId,yield D._persistUserIfCurrent(ae.user),yield D._setRedirectUser(null,_)),ae})).apply(this,arguments)}function Lt(w){return Et.apply(this,arguments)}function Et(){return(Et=(0,o.Z)(function*(w){const _=lo(`${w.uid}:::`);return w._redirectEventId=_,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),_})).apply(this,arguments)}class gr{constructor(_){this.auth=_,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_){this.consumers.add(_),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_)&&(this.sendToConsumer(this.queuedRedirectEvent,_),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_){this.consumers.delete(_)}onEvent(_){if(this.hasEventBeenHandled(_))return!1;let v=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(_,D)&&(v=!0,this.sendToConsumer(_,D),this.saveEventToCache(_))}),this.hasHandledPotentialRedirect||!function Bs(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ys(w);default:return!1}}(_)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=_,v=!0)),v}sendToConsumer(_,v){var D;if(_.error&&!ys(_)){const k=(null===(D=_.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";v.onError(Ne(this.auth,k))}else v.onAuthEvent(_)}isEventForConsumer(_,v){const D=null===v.eventId||!!_.eventId&&_.eventId===v.eventId;return v.filter.includes(_.type)&&D}hasEventBeenHandled(_){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dc(_))}saveEventToCache(_){this.cachedEventUids.add(Dc(_)),this.lastProcessedEventTime=Date.now()}}function Dc(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(_=>_).join("-")}function ys({type:w,error:_}){return"unknown"===w&&"auth/no-auth-event"===_?.code}function Nf(w){return vu.apply(this,arguments)}function vu(){return(vu=(0,o.Z)(function*(w,_={}){return Gt(w,"GET","/v1/projects",_)})).apply(this,arguments)}const Nl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pa=/^https?/;function yu(){return(yu=(0,o.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:_}=yield Nf(w);for(const v of _)try{if(OC(v))return}catch{}lt(w,"unauthorized-domain")})).apply(this,arguments)}function OC(w){const _=He(),{protocol:v,hostname:D}=new URL(_);if(w.startsWith("chrome-extension://")){const ae=new URL(w);return""===ae.hostname&&""===D?"chrome-extension:"===v&&w.replace("chrome-extension://","")===_.replace("chrome-extension://",""):"chrome-extension:"===v&&ae.hostname===D}if(!Pa.test(v))return!1;if(Nl.test(w))return D===w;const k=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(D)}const PC=new tt(3e4,6e4);function Od(){const w=Dn().___jsl;if(w?.H)for(const _ of Object.keys(w.H))if(w.H[_].r=w.H[_].r||[],w.H[_].L=w.H[_].L||[],w.H[_].r=[...w.H[_].L],w.CP)for(let v=0;v<w.CP.length;v++)w.CP[v]=null}let Ff=null;function Kv(w){return Ff=Ff||function Zv(w){return new Promise((_,v)=>{var D,k,B;function ae(){Od(),gapi.load("gapi.iframes",{callback:()=>{_(gapi.iframes.getContext())},ontimeout:()=>{Od(),v(Ne(w,"network-request-failed"))},timeout:PC.get()})}if(null!==(k=null===(D=Dn().gapi)||void 0===D?void 0:D.iframes)&&void 0!==k&&k.Iframe)_(gapi.iframes.getContext());else{if(null===(B=Dn().gapi)||void 0===B||!B.load){const Me=_s("iframefcb");return Dn()[Me]=()=>{gapi.load?ae():v(Ne(w,"network-request-failed"))},kl(`https://apis.google.com/js/api.js?onload=${Me}`).catch(it=>v(it))}ae()}}).catch(_=>{throw Ff=null,_})}(w),Ff}const DI=new tt(5e3,15e3),Eg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Xv(w){const _=w.config;ce(_.authDomain,w,"auth-domain-config-required");const v=_.emulator?An(_,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,D={apiKey:_.apiKey,appName:w.name,v:N.SDK_VERSION},k=NC.get(w.config.apiHost);k&&(D.eid=k);const B=w._getFrameworks();return B.length&&(D.fw=B.join(",")),`${v}?${(0,j.xO)(D).slice(1)}`}function Pd(){return Pd=(0,o.Z)(function*(w){const _=yield Kv(w),v=Dn().gapi;return ce(v,w,"internal-error"),_.open({where:document.body,url:Xv(w),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Eg,dontclear:!0},D=>new Promise(function(){var k=(0,o.Z)(function*(B,ae){yield D.restyle({setHideOnLeave:!1});const Me=Ne(w,"network-request-failed"),it=Dn().setTimeout(()=>{ae(Me)},DI.get());function Ke(){Dn().clearTimeout(it),B(D)}D.ping(Ke).then(Ke,()=>{ae(Me)})});return function(B,ae){return k.apply(this,arguments)}}()))}),Pd.apply(this,arguments)}const bu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vf{constructor(_){this.window=_,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Sg(w,_,v,D,k,B){ce(w.config.authDomain,w,"auth-domain-config-required"),ce(w.config.apiKey,w,"invalid-api-key");const ae={apiKey:w.config.apiKey,appName:w.name,authType:v,redirectUrl:D,v:N.SDK_VERSION,eventId:k};if(_ instanceof Tr){_.setDefaultLanguage(w.languageCode),ae.providerId=_.providerId||"",(0,j.xb)(_.getCustomParameters())||(ae.customParameters=JSON.stringify(_.getCustomParameters()));for(const[it,Ke]of Object.entries(B||{}))ae[it]=Ke}if(_ instanceof ko){const it=_.getScopes().filter(Ke=>""!==Ke);it.length>0&&(ae.scopes=it.join(","))}w.tenantId&&(ae.tid=w.tenantId);const Me=ae;for(const it of Object.keys(Me))void 0===Me[it]&&delete Me[it];return`${function BC({config:w}){return w.emulator?An(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,j.xO)(Me).slice(1)}`}const xg="webStorageSupport",ny=class VC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ia,this._completeRedirectFn=xt,this._overrideRedirectResult=Oa}_openPopup(_,v,D,k){var B=this;return(0,o.Z)(function*(){var ae;we(null===(ae=B.eventManagers[_._key()])||void 0===ae?void 0:ae.manager,"_initialize() not called before _openPopup()");const Me=Sg(_,v,D,He(),k);return function Jv(w,_,v,D=500,k=600){const B=Math.max((window.screen.availHeight-k)/2,0).toString(),ae=Math.max((window.screen.availWidth-D)/2,0).toString();let Me="";const it=Object.assign(Object.assign({},bu),{width:D.toString(),height:k.toString(),top:B,left:ae}),Ke=(0,j.z$)().toLowerCase();v&&(Me=Ee(Ke)?"_blank":v),Z(Ke)&&(_=_||"http://localhost",it.scrollbars="yes");const Ge=Object.entries(it).reduce((Vs,[po,ri])=>`${Vs}${po}=${ri},`,"");if(function xn(w=(0,j.z$)()){var _;return qt(w)&&!(null===(_=window.navigator)||void 0===_||!_.standalone)}(Ke)&&"_self"!==Me)return function ey(w,_){const v=document.createElement("a");v.href=w,v.target=_;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(D)}(_||"",Me),new Vf(null);const tn=window.open(_||"",Me,Ge);ce(tn,w,"popup-blocked");try{tn.focus()}catch{}return new Vf(tn)}(_,Me,lo())})()}_openRedirect(_,v,D,k){var B=this;return(0,o.Z)(function*(){return yield B._originValidation(_),function Aa(w){Dn().location.href=w}(Sg(_,v,D,He(),k)),new Promise(()=>{})})()}_initialize(_){const v=_._key();if(this.eventManagers[v]){const{manager:k,promise:B}=this.eventManagers[v];return k?Promise.resolve(k):(we(B,"If manager is not set, promise should be"),B)}const D=this.initAndGetManager(_);return this.eventManagers[v]={promise:D},D.catch(()=>{delete this.eventManagers[v]}),D}initAndGetManager(_){var v=this;return(0,o.Z)(function*(){const D=yield function Lf(w){return Pd.apply(this,arguments)}(_),k=new gr(_);return D.register("authEvent",B=>(ce(B?.authEvent,_,"invalid-auth-event"),{status:k.onEvent(B.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[_._key()]={manager:k},v.iframes[_._key()]=D,k})()}_isIframeWebStorageSupported(_,v){this.iframes[_._key()].send(xg,{type:xg},k=>{var B;const ae=null===(B=k?.[0])||void 0===B?void 0:B[xg];void 0!==ae&&v(!!ae),lt(_,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_){const v=_._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Ec(w){return yu.apply(this,arguments)}(_)),this.originValidationPromises[v]}get _shouldInitProactively(){return gn()||$()||qt()}};class Fa extends class Na{constructor(_){this.factorId=_}_process(_,v,D){switch(v.type){case"enroll":return this._finalizeEnroll(_,v.credential,D);case"signin":return this._finalizeSignIn(_,v.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(_){super("phone"),this.credential=_}static _fromCredential(_){return new Fa(_)}_finalizeEnroll(_,v,D){return function wf(w,_){return Gt(w,"POST","/v2/accounts/mfaEnrollment:finalize",en(w,_))}(_,{idToken:v,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(_,v){return function gs(w,_){return Gt(w,"POST","/v2/accounts/mfaSignIn:finalize",en(w,_))}(_,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let bs=(()=>{class w{constructor(){}static assertion(v){return Fa._fromCredential(v)}}return w.FACTOR_ID="phone",w})();var ii="@firebase/auth";class gi{constructor(_){this.auth=_,this.internalListeners=new Map}getUid(){var _;return this.assertAuthConfigured(),(null===(_=this.auth.currentUser)||void 0===_?void 0:_.uid)||null}getToken(_){var v=this;return(0,o.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(_)}:null})()}addAuthTokenListener(_){if(this.assertAuthConfigured(),this.internalListeners.has(_))return;const v=this.auth.onIdTokenChanged(D=>{var k;_((null===(k=D)||void 0===k?void 0:k.stsTokenManager.accessToken)||null)});this.internalListeners.set(_,v),this.updateProactiveRefresh()}removeAuthTokenListener(_){this.assertAuthConfigured();const v=this.internalListeners.get(_);!v||(this.internalListeners.delete(_),v(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function Nd(w){(0,N._registerComponent)(new ye.wA("auth",(_,{options:v})=>{const D=_.getProvider("app").getImmediate(),k=_.getProvider("heartbeat"),{apiKey:B,authDomain:ae}=D.options;return((Me,it)=>{ce(B&&!B.includes(":"),"invalid-api-key",{appName:Me.name}),ce(!ae?.includes(":"),"argument-error",{appName:Me.name});const Ke={apiKey:B,authDomain:ae,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ks(w)},Ge=new ul(Me,it,Ke);return function de(w,_){const v=_?.persistence||[],D=(Array.isArray(v)?v:[v]).map(se);_?.errorMap&&w._updateErrorMap(_.errorMap),w._initializeWithPersistence(D,_?.popupRedirectResolver)}(Ge,v),Ge})(D,k)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_,v,D)=>{_.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ye.wA("auth-internal",_=>{const v=qn(_.getProvider("auth").getImmediate());return new gi(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(ii,"0.20.5",function Gn(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,N.registerVersion)(ii,"0.20.5","esm2017")}("Browser")},2090:(vt,Oe,V)=>{V.d(Oe,{$s:()=>sr,BH:()=>qe,DV:()=>Gt,Dv:()=>Ki,G6:()=>ce,GJ:()=>cn,L:()=>ge,LL:()=>He,Mn:()=>Te,Pz:()=>Jt,Sg:()=>Fe,UG:()=>De,UI:()=>to,US:()=>ye,Wj:()=>ir,Yr:()=>Qe,ZB:()=>Y,ZR:()=>de,b$:()=>lt,cI:()=>an,d:()=>Ne,dS:()=>pt,eu:()=>we,g5:()=>N,gK:()=>Ci,gQ:()=>ls,h$:()=>oe,hl:()=>pe,hu:()=>j,jU:()=>ve,lb:()=>Rn,m9:()=>Nt,ne:()=>bt,p$:()=>W,pd:()=>Jn,r3:()=>en,ru:()=>at,tV:()=>Ce,uI:()=>ht,ug:()=>ut,vZ:()=>Yi,w1:()=>Pe,w9:()=>pn,xO:()=>Cr,xb:()=>Wi,z$:()=>xe,zI:()=>ne,zd:()=>Dr});const j=function(ee,q){if(!ee)throw N(q)},N=function(ee){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+ee)},ue=function(ee){const q=[];let G=0;for(let K=0;K<ee.length;K++){let X=ee.charCodeAt(K);X<128?q[G++]=X:X<2048?(q[G++]=X>>6|192,q[G++]=63&X|128):55296==(64512&X)&&K+1<ee.length&&56320==(64512&ee.charCodeAt(K+1))?(X=65536+((1023&X)<<10)+(1023&ee.charCodeAt(++K)),q[G++]=X>>18|240,q[G++]=X>>12&63|128,q[G++]=X>>6&63|128,q[G++]=63&X|128):(q[G++]=X>>12|224,q[G++]=X>>6&63|128,q[G++]=63&X|128)}return q},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ee,q){if(!Array.isArray(ee))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,K=[];for(let X=0;X<ee.length;X+=3){const Ae=ee[X],Ye=X+1<ee.length,Tt=Ye?ee[X+1]:0,bn=X+2<ee.length,wn=bn?ee[X+2]:0;let Z=(15&Tt)<<2|wn>>6,$=63&wn;bn||($=64,Ye||(Z=64)),K.push(G[Ae>>2],G[(3&Ae)<<4|Tt>>4],G[Z],G[$])}return K.join("")},encodeString(ee,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(ee):this.encodeByteArray(ue(ee),q)},decodeString(ee,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(ee):function(ee){const q=[];let G=0,K=0;for(;G<ee.length;){const X=ee[G++];if(X<128)q[K++]=String.fromCharCode(X);else if(X>191&&X<224){const Ae=ee[G++];q[K++]=String.fromCharCode((31&X)<<6|63&Ae)}else if(X>239&&X<365){const bn=((7&X)<<18|(63&ee[G++])<<12|(63&ee[G++])<<6|63&ee[G++])-65536;q[K++]=String.fromCharCode(55296+(bn>>10)),q[K++]=String.fromCharCode(56320+(1023&bn))}else{const Ae=ee[G++],Ye=ee[G++];q[K++]=String.fromCharCode((15&X)<<12|(63&Ae)<<6|63&Ye)}}return q.join("")}(this.decodeStringToByteArray(ee,q))},decodeStringToByteArray(ee,q){this.init_();const G=q?this.charToByteMapWebSafe_:this.charToByteMap_,K=[];for(let X=0;X<ee.length;){const Ae=G[ee.charAt(X++)],Tt=X<ee.length?G[ee.charAt(X)]:0;++X;const wn=X<ee.length?G[ee.charAt(X)]:64;++X;const J=X<ee.length?G[ee.charAt(X)]:64;if(++X,null==Ae||null==Tt||null==wn||null==J)throw Error();K.push(Ae<<2|Tt>>4),64!==wn&&(K.push(Tt<<4&240|wn>>2),64!==J&&K.push(wn<<6&192|J))}return K},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ee=0;ee<this.ENCODED_VALS.length;ee++)this.byteToCharMap_[ee]=this.ENCODED_VALS.charAt(ee),this.charToByteMap_[this.byteToCharMap_[ee]]=ee,this.byteToCharMapWebSafe_[ee]=this.ENCODED_VALS_WEBSAFE.charAt(ee),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ee]]=ee,ee>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ee)]=ee,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ee)]=ee)}}},oe=function(ee){const q=ue(ee);return ye.encodeByteArray(q,!0)},ge=function(ee){return oe(ee).replace(/\./g,"")},Ce=function(ee){try{return ye.decodeString(ee,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function W(ee){return Y(void 0,ee)}function Y(ee,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===ee&&(ee={});break;case Array:ee=[];break;default:return q}for(const G in q)!q.hasOwnProperty(G)||!re(G)||(ee[G]=Y(ee[G],q[G]));return ee}function re(ee){return"__proto__"!==ee}class qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,G)=>{this.resolve=q,this.reject=G})}wrapCallback(q){return(G,K)=>{G?this.reject(G):this.resolve(K),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(G):q(G,K))}}}function Fe(ee,q){if(ee.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const K=q||"demo-project",X=ee.iat||0,Ae=ee.sub||ee.user_id;if(!Ae)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ye=Object.assign({iss:`https://securetoken.google.com/${K}`,aud:K,iat:X,exp:X+3600,auth_time:X,sub:Ae,user_id:Ae,firebase:{sign_in_provider:"custom",identities:{}}},ee);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(Ye)),""].join(".")}function xe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ht(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xe())}function De(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ve(){return"object"==typeof self&&self.self===self}function at(){const ee="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ee&&void 0!==ee.id}function lt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ne(){return xe().indexOf("Electron/")>=0}function Pe(){const ee=xe();return ee.indexOf("MSIE ")>=0||ee.indexOf("Trident/")>=0}function Te(){return xe().indexOf("MSAppHost/")>=0}function Qe(){return!1}function ce(){return!De()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pe(){return"object"==typeof indexedDB}function we(){return new Promise((ee,q)=>{try{let G=!0;const K="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(K);X.onsuccess=()=>{X.result.close(),G||self.indexedDB.deleteDatabase(K),ee(!0)},X.onupgradeneeded=()=>{G=!1},X.onerror=()=>{var Ae;q((null===(Ae=X.error)||void 0===Ae?void 0:Ae.message)||"")}}catch(G){q(G)}})}function ne(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class de extends Error{constructor(q,G,K){super(G),this.code=q,this.customData=K,this.name="FirebaseError",Object.setPrototypeOf(this,de.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,He.prototype.create)}}class He{constructor(q,G,K){this.service=q,this.serviceName=G,this.errors=K}create(q,...G){const K=G[0]||{},X=`${this.service}/${q}`,Ae=this.errors[q],Ye=Ae?function je(ee,q){return ee.replace(Ct,(G,K)=>{const X=q[K];return null!=X?String(X):`<${K}?>`})}(Ae,K):"Error";return new de(X,`${this.serviceName}: ${Ye} (${X}).`,K)}}const Ct=/\{\$([^}]+)}/g;function an(ee){return JSON.parse(ee)}function Jt(ee){return JSON.stringify(ee)}const tt=function(ee){let q={},G={},K={},X="";try{const Ae=ee.split(".");q=an(Ce(Ae[0])||""),G=an(Ce(Ae[1])||""),X=Ae[2],K=G.d||{},delete G.d}catch{}return{header:q,claims:G,data:K,signature:X}},pn=function(ee){const G=tt(ee).claims;return!!G&&"object"==typeof G&&G.hasOwnProperty("iat")},cn=function(ee){const q=tt(ee).claims;return"object"==typeof q&&!0===q.admin};function en(ee,q){return Object.prototype.hasOwnProperty.call(ee,q)}function Gt(ee,q){if(Object.prototype.hasOwnProperty.call(ee,q))return ee[q]}function Wi(ee){for(const q in ee)if(Object.prototype.hasOwnProperty.call(ee,q))return!1;return!0}function to(ee,q,G){const K={};for(const X in ee)Object.prototype.hasOwnProperty.call(ee,X)&&(K[X]=q.call(G,ee[X],X,ee));return K}function Yi(ee,q){if(ee===q)return!0;const G=Object.keys(ee),K=Object.keys(q);for(const X of G){if(!K.includes(X))return!1;const Ae=ee[X],Ye=q[X];if(Vn(Ae)&&Vn(Ye)){if(!Yi(Ae,Ye))return!1}else if(Ae!==Ye)return!1}for(const X of K)if(!G.includes(X))return!1;return!0}function Vn(ee){return null!==ee&&"object"==typeof ee}function Cr(ee){const q=[];for(const[G,K]of Object.entries(ee))Array.isArray(K)?K.forEach(X=>{q.push(encodeURIComponent(G)+"="+encodeURIComponent(X))}):q.push(encodeURIComponent(G)+"="+encodeURIComponent(K));return q.length?"&"+q.join("&"):""}function Dr(ee){const q={};return ee.replace(/^\?/,"").split("&").forEach(K=>{if(K){const[X,Ae]=K.split("=");q[decodeURIComponent(X)]=decodeURIComponent(Ae)}}),q}function Jn(ee){const q=ee.indexOf("?");if(!q)return"";const G=ee.indexOf("#",q);return ee.substring(q,G>0?G:void 0)}class ls{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,G){G||(G=0);const K=this.W_;if("string"==typeof q)for(let J=0;J<16;J++)K[J]=q.charCodeAt(G)<<24|q.charCodeAt(G+1)<<16|q.charCodeAt(G+2)<<8|q.charCodeAt(G+3),G+=4;else for(let J=0;J<16;J++)K[J]=q[G]<<24|q[G+1]<<16|q[G+2]<<8|q[G+3],G+=4;for(let J=16;J<80;J++){const Z=K[J-3]^K[J-8]^K[J-14]^K[J-16];K[J]=4294967295&(Z<<1|Z>>>31)}let wn,ui,X=this.chain_[0],Ae=this.chain_[1],Ye=this.chain_[2],Tt=this.chain_[3],bn=this.chain_[4];for(let J=0;J<80;J++){J<40?J<20?(wn=Tt^Ae&(Ye^Tt),ui=1518500249):(wn=Ae^Ye^Tt,ui=1859775393):J<60?(wn=Ae&Ye|Tt&(Ae|Ye),ui=2400959708):(wn=Ae^Ye^Tt,ui=3395469782);const Z=(X<<5|X>>>27)+wn+bn+ui+K[J]&4294967295;bn=Tt,Tt=Ye,Ye=4294967295&(Ae<<30|Ae>>>2),Ae=X,X=Z}this.chain_[0]=this.chain_[0]+X&4294967295,this.chain_[1]=this.chain_[1]+Ae&4294967295,this.chain_[2]=this.chain_[2]+Ye&4294967295,this.chain_[3]=this.chain_[3]+Tt&4294967295,this.chain_[4]=this.chain_[4]+bn&4294967295}update(q,G){if(null==q)return;void 0===G&&(G=q.length);const K=G-this.blockSize;let X=0;const Ae=this.buf_;let Ye=this.inbuf_;for(;X<G;){if(0===Ye)for(;X<=K;)this.compress_(q,X),X+=this.blockSize;if("string"==typeof q){for(;X<G;)if(Ae[Ye]=q.charCodeAt(X),++Ye,++X,Ye===this.blockSize){this.compress_(Ae),Ye=0;break}}else for(;X<G;)if(Ae[Ye]=q[X],++Ye,++X,Ye===this.blockSize){this.compress_(Ae),Ye=0;break}}this.inbuf_=Ye,this.total_+=G}digest(){const q=[];let G=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let X=this.blockSize-1;X>=56;X--)this.buf_[X]=255&G,G/=256;this.compress_(this.buf_);let K=0;for(let X=0;X<5;X++)for(let Ae=24;Ae>=0;Ae-=8)q[K]=this.chain_[X]>>Ae&255,++K;return q}}function bt(ee,q){const G=new kn(ee,q);return G.subscribe.bind(G)}class kn{constructor(q,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{q(this)}).catch(K=>{this.error(K)})}next(q){this.forEachObserver(G=>{G.next(q)})}error(q){this.forEachObserver(G=>{G.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,G,K){let X;if(void 0===q&&void 0===G&&void 0===K)throw new Error("Missing Observer.");X=function mn(ee,q){if("object"!=typeof ee||null===ee)return!1;for(const G of q)if(G in ee&&"function"==typeof ee[G])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:G,complete:K},void 0===X.next&&(X.next=wi),void 0===X.error&&(X.error=wi),void 0===X.complete&&(X.complete=wi);const Ae=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch{}}),this.observers.push(X),Ae}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,q)}sendOne(q,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{G(this.observers[q])}catch(K){typeof console<"u"&&console.error&&console.error(K)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wi(){}const Ki=function(ee,q,G,K){let X;if(K<q?X="at least "+q:K>G&&(X=0===G?"none":"no more than "+G),X)throw new Error(ee+" failed: Was called with "+K+(1===K?" argument.":" arguments.")+" Expects "+X+".")};function Ci(ee,q){return`${ee} failed: ${q} argument `}function ir(ee,q,G,K){if((!K||G)&&"function"!=typeof G)throw new Error(Ci(ee,q)+"must be a valid function.")}function Rn(ee,q,G,K){if((!K||G)&&("object"!=typeof G||null===G))throw new Error(Ci(ee,q)+"must be a valid context object.")}const pt=function(ee){const q=[];let G=0;for(let K=0;K<ee.length;K++){let X=ee.charCodeAt(K);if(X>=55296&&X<=56319){const Ae=X-55296;K++,j(K<ee.length,"Surrogate pair missing trail surrogate."),X=65536+(Ae<<10)+(ee.charCodeAt(K)-56320)}X<128?q[G++]=X:X<2048?(q[G++]=X>>6|192,q[G++]=63&X|128):X<65536?(q[G++]=X>>12|224,q[G++]=X>>6&63|128,q[G++]=63&X|128):(q[G++]=X>>18|240,q[G++]=X>>12&63|128,q[G++]=X>>6&63|128,q[G++]=63&X|128)}return q},ut=function(ee){let q=0;for(let G=0;G<ee.length;G++){const K=ee.charCodeAt(G);K<128?q++:K<2048?q+=2:K>=55296&&K<=56319?(q+=4,G++):q+=3}return q};function sr(ee,q=1e3,G=2){const K=q*Math.pow(G,ee),X=Math.round(.5*K*(Math.random()-.5)*2);return Math.min(144e5,K+X)}function Nt(ee){return ee&&ee._delegate?ee._delegate:ee}},8956:(vt,Oe,V)=>{var o=V(4650);let j=null;function N(){return j}const oe=new o.OlP("DocumentToken");let ge=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Ce(){return(0,o.LFG)(Y)}()},providedIn:"platform"}),n})();const W=new o.OlP("Location Initialized");let Y=(()=>{class n extends ge{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(e){const i=N().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=N().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){re()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){re()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(oe))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function qe(){return new Y((0,o.LFG)(oe))}()},providedIn:"platform"}),n})();function re(){return!!window.history.pushState}function Fe(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function xe(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function ht(n){return n&&"?"!==n[0]?"?"+n:n}let De=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(at)},providedIn:"root"}),n})();const ve=new o.OlP("appBaseHref");let at=(()=>{class n extends De{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,o.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Fe(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+ht(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const c=this.prepareExternalUrl(r+ht(s));this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){const c=this.prepareExternalUrl(r+ht(s));this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ge),o.LFG(ve,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lt=(()=>{class n extends De{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Fe(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let c=this.prepareExternalUrl(r+ht(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){let c=this.prepareExternalUrl(r+ht(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ge),o.LFG(ve,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n{constructor(e){this._subject=new o.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._baseHref=xe(Qe(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+ht(i))}normalize(e){return n.stripTrailingSlash(function Te(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,Qe(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ht(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ht(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=ht,n.joinWithSlash=Fe,n.stripTrailingSlash=xe,n.\u0275fac=function(e){return new(e||n)(o.LFG(De))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Pe(){return new Ne((0,o.LFG)(De))}()},providedIn:"root"}),n})();function Qe(n){return n.replace(/\/index.html$/,"")}var ne=(()=>((ne=ne||{})[ne.Format=0]="Format",ne[ne.Standalone=1]="Standalone",ne))(),se=(()=>((se=se||{})[se.Narrow=0]="Narrow",se[se.Abbreviated=1]="Abbreviated",se[se.Wide=2]="Wide",se[se.Short=3]="Short",se))(),_e=(()=>((_e=_e||{})[_e.Short=0]="Short",_e[_e.Medium=1]="Medium",_e[_e.Long=2]="Long",_e[_e.Full=3]="Full",_e))(),de=(()=>((de=de||{})[de.Decimal=0]="Decimal",de[de.Group=1]="Group",de[de.List=2]="List",de[de.PercentSign=3]="PercentSign",de[de.PlusSign=4]="PlusSign",de[de.MinusSign=5]="MinusSign",de[de.Exponential=6]="Exponential",de[de.SuperscriptingExponent=7]="SuperscriptingExponent",de[de.PerMille=8]="PerMille",de[de.Infinity=9]="Infinity",de[de.NaN=10]="NaN",de[de.TimeSeparator=11]="TimeSeparator",de[de.CurrencyDecimal=12]="CurrencyDecimal",de[de.CurrencyGroup=13]="CurrencyGroup",de))();function pn(n,t){return kn((0,o.cg1)(n)[o.wAp.DateFormat],t)}function cn(n,t){return kn((0,o.cg1)(n)[o.wAp.TimeFormat],t)}function en(n,t){return kn((0,o.cg1)(n)[o.wAp.DateTimeFormat],t)}function Gt(n,t){const e=(0,o.cg1)(n),i=e[o.wAp.NumberSymbols][t];if(typeof i>"u"){if(t===de.CurrencyDecimal)return e[o.wAp.NumberSymbols][de.Decimal];if(t===de.CurrencyGroup)return e[o.wAp.NumberSymbols][de.Group]}return i}function Dr(n){if(!n[o.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[o.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function kn(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function Zi(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const Ci=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Sn={},ir=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Rn=(()=>((Rn=Rn||{})[Rn.Short=0]="Short",Rn[Rn.ShortGMT=1]="ShortGMT",Rn[Rn.Long=2]="Long",Rn[Rn.Extended=3]="Extended",Rn))(),pt=(()=>((pt=pt||{})[pt.FullYear=0]="FullYear",pt[pt.Month=1]="Month",pt[pt.Date=2]="Date",pt[pt.Hours=3]="Hours",pt[pt.Minutes=4]="Minutes",pt[pt.Seconds=5]="Seconds",pt[pt.FractionalSeconds=6]="FractionalSeconds",pt[pt.Day=7]="Day",pt))(),ut=(()=>((ut=ut||{})[ut.DayPeriods=0]="DayPeriods",ut[ut.Days=1]="Days",ut[ut.Months=2]="Months",ut[ut.Eras=3]="Eras",ut))();function Un(n,t,e,i){let r=function $(n){if(We(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,c=1]=n.split("-").map(d=>+d);return rr(r,s-1,c)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(Ci))return function Ee(n){const t=new Date(0);let e=0,i=0;const r=n[8]?t.setUTCFullYear:t.setFullYear,s=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-e,d=Number(n[5]||0)-i,f=Number(n[6]||0),g=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(t,c,d,f,g),t}(i)}const t=new Date(n);if(!We(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=Hn(e,t)||t;let d,c=[];for(;t;){if(d=ir.exec(t),!d){c.push(t);break}{c=c.concat(d.slice(1));const b=c.pop();if(!b)break;t=b}}let f=r.getTimezoneOffset();i&&(f=ui(i,f),r=function Z(n,t,e){const i=e?-1:1,r=n.getTimezoneOffset();return function J(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,i*(ui(t,r)-r))}(r,i,!0));let g="";return c.forEach(b=>{const E=function wn(n){if(bn[n])return bn[n];let t;switch(n){case"G":case"GG":case"GGG":t=Nt(ut.Eras,se.Abbreviated);break;case"GGGG":t=Nt(ut.Eras,se.Wide);break;case"GGGGG":t=Nt(ut.Eras,se.Narrow);break;case"y":t=Pt(pt.FullYear,1,0,!1,!0);break;case"yy":t=Pt(pt.FullYear,2,0,!0,!0);break;case"yyy":t=Pt(pt.FullYear,3,0,!1,!0);break;case"yyyy":t=Pt(pt.FullYear,4,0,!1,!0);break;case"Y":t=Tt(1);break;case"YY":t=Tt(2,!0);break;case"YYY":t=Tt(3);break;case"YYYY":t=Tt(4);break;case"M":case"L":t=Pt(pt.Month,1,1);break;case"MM":case"LL":t=Pt(pt.Month,2,1);break;case"MMM":t=Nt(ut.Months,se.Abbreviated);break;case"MMMM":t=Nt(ut.Months,se.Wide);break;case"MMMMM":t=Nt(ut.Months,se.Narrow);break;case"LLL":t=Nt(ut.Months,se.Abbreviated,ne.Standalone);break;case"LLLL":t=Nt(ut.Months,se.Wide,ne.Standalone);break;case"LLLLL":t=Nt(ut.Months,se.Narrow,ne.Standalone);break;case"w":t=Ye(1);break;case"ww":t=Ye(2);break;case"W":t=Ye(1,!0);break;case"d":t=Pt(pt.Date,1);break;case"dd":t=Pt(pt.Date,2);break;case"c":case"cc":t=Pt(pt.Day,1);break;case"ccc":t=Nt(ut.Days,se.Abbreviated,ne.Standalone);break;case"cccc":t=Nt(ut.Days,se.Wide,ne.Standalone);break;case"ccccc":t=Nt(ut.Days,se.Narrow,ne.Standalone);break;case"cccccc":t=Nt(ut.Days,se.Short,ne.Standalone);break;case"E":case"EE":case"EEE":t=Nt(ut.Days,se.Abbreviated);break;case"EEEE":t=Nt(ut.Days,se.Wide);break;case"EEEEE":t=Nt(ut.Days,se.Narrow);break;case"EEEEEE":t=Nt(ut.Days,se.Short);break;case"a":case"aa":case"aaa":t=Nt(ut.DayPeriods,se.Abbreviated);break;case"aaaa":t=Nt(ut.DayPeriods,se.Wide);break;case"aaaaa":t=Nt(ut.DayPeriods,se.Narrow);break;case"b":case"bb":case"bbb":t=Nt(ut.DayPeriods,se.Abbreviated,ne.Standalone,!0);break;case"bbbb":t=Nt(ut.DayPeriods,se.Wide,ne.Standalone,!0);break;case"bbbbb":t=Nt(ut.DayPeriods,se.Narrow,ne.Standalone,!0);break;case"B":case"BB":case"BBB":t=Nt(ut.DayPeriods,se.Abbreviated,ne.Format,!0);break;case"BBBB":t=Nt(ut.DayPeriods,se.Wide,ne.Format,!0);break;case"BBBBB":t=Nt(ut.DayPeriods,se.Narrow,ne.Format,!0);break;case"h":t=Pt(pt.Hours,1,-12);break;case"hh":t=Pt(pt.Hours,2,-12);break;case"H":t=Pt(pt.Hours,1);break;case"HH":t=Pt(pt.Hours,2);break;case"m":t=Pt(pt.Minutes,1);break;case"mm":t=Pt(pt.Minutes,2);break;case"s":t=Pt(pt.Seconds,1);break;case"ss":t=Pt(pt.Seconds,2);break;case"S":t=Pt(pt.FractionalSeconds,1);break;case"SS":t=Pt(pt.FractionalSeconds,2);break;case"SSS":t=Pt(pt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=q(Rn.Short);break;case"ZZZZZ":t=q(Rn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=q(Rn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=q(Rn.Long);break;default:return null}return bn[n]=t,t}(b);g+=E?E(r,e,f):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),g}function rr(n,t,e){const i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function Hn(n,t){const e=function je(n){return(0,o.cg1)(n)[o.wAp.LocaleId]}(n);if(Sn[e]=Sn[e]||{},Sn[e][t])return Sn[e][t];let i="";switch(t){case"shortDate":i=pn(n,_e.Short);break;case"mediumDate":i=pn(n,_e.Medium);break;case"longDate":i=pn(n,_e.Long);break;case"fullDate":i=pn(n,_e.Full);break;case"shortTime":i=cn(n,_e.Short);break;case"mediumTime":i=cn(n,_e.Medium);break;case"longTime":i=cn(n,_e.Long);break;case"fullTime":i=cn(n,_e.Full);break;case"short":const r=Hn(n,"shortTime"),s=Hn(n,"shortDate");i=zt(en(n,_e.Short),[r,s]);break;case"medium":const c=Hn(n,"mediumTime"),d=Hn(n,"mediumDate");i=zt(en(n,_e.Medium),[c,d]);break;case"long":const f=Hn(n,"longTime"),g=Hn(n,"longDate");i=zt(en(n,_e.Long),[f,g]);break;case"full":const b=Hn(n,"fullTime"),E=Hn(n,"fullDate");i=zt(en(n,_e.Full),[b,E])}return i&&(Sn[e][t]=i),i}function zt(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return null!=t&&i in t?t[i]:e})),n}function jn(n,t,e="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=e));let c=String(n);for(;c.length<t;)c="0"+c;return i&&(c=c.slice(c.length-t)),s+c}function Pt(n,t,e=0,i=!1,r=!1){return function(s,c){let d=function Er(n,t){switch(n){case pt.FullYear:return t.getFullYear();case pt.Month:return t.getMonth();case pt.Date:return t.getDate();case pt.Hours:return t.getHours();case pt.Minutes:return t.getMinutes();case pt.Seconds:return t.getSeconds();case pt.FractionalSeconds:return t.getMilliseconds();case pt.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((e>0||d>-e)&&(d+=e),n===pt.Hours)0===d&&-12===e&&(d=12);else if(n===pt.FractionalSeconds)return function sr(n,t){return jn(n,3).substring(0,t)}(d,t);const f=Gt(c,de.MinusSign);return jn(d,t,f,i,r)}}function Nt(n,t,e=ne.Format,i=!1){return function(r,s){return function ee(n,t,e,i,r,s){switch(e){case ut.Months:return function Jt(n,t,e){const i=(0,o.cg1)(n),s=kn([i[o.wAp.MonthsFormat],i[o.wAp.MonthsStandalone]],t);return kn(s,e)}(t,r,i)[n.getMonth()];case ut.Days:return function an(n,t,e){const i=(0,o.cg1)(n),s=kn([i[o.wAp.DaysFormat],i[o.wAp.DaysStandalone]],t);return kn(s,e)}(t,r,i)[n.getDay()];case ut.DayPeriods:const c=n.getHours(),d=n.getMinutes();if(s){const g=function Jn(n){const t=(0,o.cg1)(n);return Dr(t),(t[o.wAp.ExtraData][2]||[]).map(i=>"string"==typeof i?Zi(i):[Zi(i[0]),Zi(i[1])])}(t),b=function ls(n,t,e){const i=(0,o.cg1)(n);Dr(i);const s=kn([i[o.wAp.ExtraData][0],i[o.wAp.ExtraData][1]],t)||[];return kn(s,e)||[]}(t,r,i),E=g.findIndex(I=>{if(Array.isArray(I)){const[P,F]=I,z=c>=P.hours&&d>=P.minutes,te=c<F.hours||c===F.hours&&d<F.minutes;if(P.hours<F.hours){if(z&&te)return!0}else if(z||te)return!0}else if(I.hours===c&&I.minutes===d)return!0;return!1});if(-1!==E)return b[E]}return function Ct(n,t,e){const i=(0,o.cg1)(n),s=kn([i[o.wAp.DayPeriodsFormat],i[o.wAp.DayPeriodsStandalone]],t);return kn(s,e)}(t,r,i)[c<12?0:1];case ut.Eras:return function tt(n,t){return kn((0,o.cg1)(n)[o.wAp.Eras],t)}(t,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,s,n,t,e,i)}}function q(n){return function(t,e,i){const r=-1*i,s=Gt(e,de.MinusSign),c=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case Rn.Short:return(r>=0?"+":"")+jn(c,2,s)+jn(Math.abs(r%60),2,s);case Rn.ShortGMT:return"GMT"+(r>=0?"+":"")+jn(c,1,s);case Rn.Long:return"GMT"+(r>=0?"+":"")+jn(c,2,s)+":"+jn(Math.abs(r%60),2,s);case Rn.Extended:return 0===i?"Z":(r>=0?"+":"")+jn(c,2,s)+":"+jn(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}function Ae(n){return rr(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function Ye(n,t=!1){return function(e,i){let r;if(t){const s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,c=e.getDate();r=1+Math.floor((c+s)/7)}else{const s=Ae(e),c=function X(n){const t=rr(n,0,1).getDay();return rr(n,0,1+(t<=4?4:11)-t)}(s.getFullYear()),d=s.getTime()-c.getTime();r=1+Math.round(d/6048e5)}return jn(r,n,Gt(i,de.MinusSign))}}function Tt(n,t=!1){return function(e,i){return jn(Ae(e).getFullYear(),n,Gt(i,de.MinusSign),t)}}const bn={};function ui(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function We(n){return n instanceof Date&&!isNaN(n.valueOf())}class no{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zr=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new no(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,c),hi(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{hi(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function hi(n,t){n.context.$implicit=t.item}let Fn=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new $r,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){io("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){io("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class $r{constructor(){this.$implicit=null,this.ngIf=null}}function io(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,o.AaK)(t)}'.`)}class dl{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Rs=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),Sr=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new dl(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(Rs,9))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})();const gg=new o.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Ao=(()=>{class n{constructor(e,i){this.locale=e,this.defaultTimezone=i}transform(e,i="mediumDate",r,s){if(null==e||""===e||e!=e)return null;try{return Un(e,i,s||this.locale,r??this.defaultTimezone??void 0)}catch(c){throw function xr(n,t){return new o.vHH(2100,!1)}()}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.soG,16),o.Y36(gg,24))},n.\u0275pipe=o.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),fi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const Wn="browser";function fr(n){return n===Wn}function eu(n){return"server"===n}let ml=(()=>{class n{}return n.\u0275prov=(0,o.Yz7)({token:n,providedIn:"root",factory:()=>new pr((0,o.LFG)(oe),window)}),n})();class pr{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Po(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const c=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=ro(this.window.history)||ro(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ro(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class us extends class No extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function he(n){j||(j=n)}(new us)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function ds(){return so=so||document.querySelector("base"),so?so.getAttribute("href"):null}();return null==e?null:function Fo(n){oo=oo||document.createElement("a"),oo.setAttribute("href",n);const t=oo.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){so=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function hd(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let oo,so=null;const At=new o.OlP("TRANSITION_ID"),mf=[{provide:o.ip1,useFactory:function ei(n,t,e){return()=>{e.get(o.CZH).donePromise.then(()=>{const i=N(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[At,oe,o.zs3],multi:!0}];let yd=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const ao=new o.OlP("EventManagerPlugins");let _a=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const c=r[s];if(c.supports(e))return this._eventNameToPlugin.set(e,c),c}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ao),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class va{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=N().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let sc=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n extends sc{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,r.push(i.appendChild(c))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(Yt),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Yt))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(oe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Yt(n){N().remove(n)}const Lo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bo=/%COMP%/g;function _l(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?_l(n,r,e):(r=r.replace(Bo,n),e.push(r))}return e}function ba(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Wr=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new ki(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case o.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Yr(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case o.ifc.ShadowDom:return new gf(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=_l(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(_a),o.LFG(Re),o.LFG(o.AFp))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class ki{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Lo[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(Ho(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(Ho(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=Lo[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=Lo[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(o.JOm.DashCase|o.JOm.Important)?t.style.setProperty(e,i,r&o.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&o.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ba(i)):this.eventManager.addEventListener(t,e,ba(i))}}function Ho(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Yr extends ki{constructor(t,e,i,r){super(t),this.component=i;const s=_l(r+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function tu(n){return"_ngcontent-%COMP%".replace(Bo,n)}(r+"-"+i.id),this.hostAttr=function Uo(n){return"_nghost-%COMP%".replace(Bo,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class gf extends ki{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=_l(r.id,r.styles,[]);for(let c=0;c<s.length;c++){const d=document.createElement("style");d.textContent=s[c],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let iu=(()=>{class n extends va{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(oe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const oc=["alt","control","meta","shift"],vl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yl={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},wa={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let su=(()=>{class n extends va{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),c=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(e,s.domEventName,c))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let c="";if(oc.forEach(f=>{const g=i.indexOf(f);g>-1&&(i.splice(g,1),c+=f+".")}),c+=s,0!=i.length||0===s.length)return null;const d={};return d.domEventName=r,d.fullKey=c,d}static getEventFullKey(e){let i="",r=function bl(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&yl.hasOwnProperty(t)&&(t=yl[t]))}return vl[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),oc.forEach(s=>{s!=r&&(0,wa[s])(e)&&(i+=s+".")}),i+=r,i}static eventCallback(e,i,r){return s=>{n.getEventFullKey(s)===e&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(oe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const _f=(0,o.eFA)(o._c5,"browser",[{provide:o.Lbi,useValue:Wn},{provide:o.g9A,useValue:function Da(){us.makeCurrent()},multi:!0},{provide:oe,useFactory:function Ea(){return(0,o.RDi)(document),document},deps:[]}]),wl=new o.OlP(""),mi=[{provide:o.rWj,useClass:class gl{addToWindow(t){o.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},o.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),o.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),o.dqk.frameworkStabilizers||(o.dqk.frameworkStabilizers=[]),o.dqk.frameworkStabilizers.push(i=>{const r=o.dqk.getAllAngularTestabilities();let s=r.length,c=!1;const d=function(f){c=c||f,s--,0==s&&i(c)};r.forEach(function(f){f.whenStable(d)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?N().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:o.lri,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]},{provide:o.dDg,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]}],hs=[{provide:o.zSh,useValue:"root"},{provide:o.qLn,useFactory:function wd(){return new o.qLn},deps:[]},{provide:ao,useClass:iu,multi:!0,deps:[oe,o.R0b,o.Lbi]},{provide:ao,useClass:su,multi:!0,deps:[oe]},{provide:Wr,useClass:Wr,deps:[_a,Re,o.AFp]},{provide:o.FYo,useExisting:Wr},{provide:sc,useExisting:Re},{provide:Re,useClass:Re,deps:[oe]},{provide:_a,useClass:_a,deps:[ao,o.R0b]},{provide:class Bi{},useClass:yd,deps:[]},[]];let Tn=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:o.AFp,useValue:e.appId},{provide:At,useExisting:o.AFp},mf]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(wl,12))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[...hs,...mi],imports:[fi,o.hGG]}),n})(),Ed=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(oe))},n.\u0275prov=o.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function ou(){return new Ed((0,o.LFG)(oe))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let lo,uc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(e){let i=null;return i=e?new(e||n):o.LFG(Sf),i},providedIn:"root"}),n})(),Sf=(()=>{class n extends uc{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case o.q3G.NONE:return i;case o.q3G.HTML:return(0,o.qzn)(i,"HTML")?(0,o.z3N)(i):(0,o.EiD)(this._doc,String(i)).toString();case o.q3G.STYLE:return(0,o.qzn)(i,"Style")?(0,o.z3N)(i):i;case o.q3G.SCRIPT:if((0,o.qzn)(i,"Script"))return(0,o.z3N)(i);throw new Error("unsafe value used in a script context");case o.q3G.URL:return(0,o.qzn)(i,"URL")?(0,o.z3N)(i):(0,o.mCW)(String(i));case o.q3G.RESOURCE_URL:if((0,o.qzn)(i,"ResourceURL"))return(0,o.z3N)(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return(0,o.JVY)(e)}bypassSecurityTrustStyle(e){return(0,o.L6k)(e)}bypassSecurityTrustScript(e){return(0,o.eBb)(e)}bypassSecurityTrustUrl(e){return(0,o.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,o.pB0)(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(oe))},n.\u0275prov=o.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function Ia(n){return new Sf(n.get(oe))}(o.LFG(o.zs3)),i},providedIn:"root"}),n})();try{lo=typeof Intl<"u"&&Intl.v8BreakIterator}catch{lo=!1}let Aa,Yn=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?fr(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!lo)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.Lbi))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ps=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function xl(){if(Aa)return Aa;if("object"!=typeof document||!document)return Aa=new Set(ps),Aa;let n=document.createElement("input");return Aa=new Set(ps.filter(t=>(n.setAttribute("type",t),n.type===t))),Aa}let Zr,ms,co;function ar(n){return function dc(){if(null==Zr&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Zr=!0}))}finally{Zr=Zr||!1}return Zr}()?n:!!n.capture}function Ml(){if(null==ms){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ms=!1,ms;if("scrollBehavior"in document.documentElement.style)ms=!0;else{const n=Element.prototype.scrollTo;ms=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return ms}function Go(n){if(function ka(){if(null==co){const n=typeof document<"u"?document.head:null;co=!(!n||!n.createShadowRoot&&!n.attachShadow)}return co}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Kr(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function mr(n){return n.composedPath?n.composedPath()[0]:n.target}function uo(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var Je=V(7579),Cn=V(727);class Oi extends Je.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}var Fs=V(3269),ln=V(8996);function ct(...n){const t=(0,Fs.yG)(n);return(0,ln.D)(n,t)}function bs(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var ii=V(8505),La=V(4986),gi=V(4482),Gn=V(5403);function Nd(n,t=La.z){return(0,gi.e)((e,i)=>{let r=null,s=null,c=null;const d=()=>{if(r){r.unsubscribe(),r=null;const g=s;s=null,i.next(g)}};function f(){const g=c+n,b=t.now();if(b<g)return r=this.schedule(void 0,g-b),void i.add(r);d()}e.subscribe((0,Gn.x)(i,g=>{s=g,c=t.now(),r||(r=t.schedule(f,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}function Ln(n,t){return(0,gi.e)((e,i)=>{let r=0;e.subscribe((0,Gn.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}var w=V(4004),_=V(515);function v(n){return n<=0?()=>_.E:(0,gi.e)((t,e)=>{let i=0;t.subscribe((0,Gn.x)(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function D(n){return Ln((t,e)=>n<=e)}var k=V(4671);function B(n,t=k.y){return n=n??ae,(0,gi.e)((e,i)=>{let r,s=!0;e.subscribe((0,Gn.x)(i,c=>{const d=t(c);(s||!n(r,d))&&(s=!1,r=d,i.next(c))}))})}function ae(n,t){return n===t}var Me=V(8421),it=V(5032);function Ke(n){return(0,gi.e)((t,e)=>{(0,Me.Xf)(n).subscribe((0,Gn.x)(e,()=>e.complete(),it.Z)),!e.closed&&t.subscribe(e)})}function Ge(n){return null!=n&&"false"!=`${n}`}function tn(n,t=0){return function Vs(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function po(n){return Array.isArray(n)?n:[n]}function ri(n){return null==n?"":"string"==typeof n?n:`${n}px`}function _i(n){return n instanceof o.SBq?n.nativeElement:n}var si=V(9751);let wu=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Tg=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){const i=_i(e);return new si.y(r=>{const c=this._observeElement(i).subscribe(r);return()=>{c.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const i=new Je.x,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:i,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:i,stream:r}=this._observedElements.get(e);i&&i.disconnect(),r.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(wu))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Uf=(()=>{class n{constructor(e,i,r){this._contentObserver=e,this._elementRef=i,this._ngZone=r,this.event=new o.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Ge(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=tn(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(Nd(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Tg),o.Y36(o.SBq),o.Y36(o.R0b))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),Fl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[wu]}),n})();const{isArray:Hf}=Array,{getPrototypeOf:Mg,prototype:iy,keys:jf}=Object;function Gf(n){if(1===n.length){const t=n[0];if(Hf(t))return{args:t,keys:null};if(function Ig(n){return n&&"object"==typeof n&&Mg(n)===iy}(t)){const e=jf(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}const{isArray:UC}=Array;function sy(n){return(0,w.U)(t=>function ry(n,t){return UC(t)?n(...t):n(t)}(n,t))}function Ei(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var HC=V(9672);function oy(...n){const t=(0,Fs.yG)(n),e=(0,Fs.jO)(n),{args:i,keys:r}=Gf(n);if(0===i.length)return(0,ln.D)([],t);const s=new si.y(function ay(n,t,e=k.y){return i=>{ly(t,()=>{const{length:r}=n,s=new Array(r);let c=r,d=r;for(let f=0;f<r;f++)ly(t,()=>{const g=(0,ln.D)(n[f],t);let b=!1;g.subscribe((0,Gn.x)(i,E=>{s[f]=E,b||(b=!0,d--),d||i.next(e(s.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,t,r?c=>Ei(r,c):k.y));return e?s.pipe(sy(e)):s}function ly(n,t,e){n?(0,HC.f)(e,n,t):t()}var zf=V(8189);function $f(...n){return function xI(){return(0,zf.J)(1)}()((0,ln.D)(n,(0,Fs.yG)(n)))}function Ir(...n){const t=(0,Fs.yG)(n);return(0,gi.e)((e,i)=>{(t?$f(n,e,t):$f(n,e)).subscribe(i)})}const TI=new Set;let qf,Wf=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):jC}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function cy(n){if(!TI.has(n))try{qf||(qf=document.createElement("style"),qf.setAttribute("type","text/css"),document.head.appendChild(qf)),qf.sheet&&(qf.sheet.insertRule(`@media ${n} {body{ }}`,0),TI.add(n))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Yn))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function jC(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let GC=(()=>{class n{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new Je.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return uy(po(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let s=oy(uy(po(e)).map(c=>this._registerQuery(c).observable));return s=$f(s.pipe(v(1)),s.pipe(D(1),Nd(0))),s.pipe((0,w.U)(c=>{const d={matches:!1,breakpoints:{}};return c.forEach(({matches:f,query:g})=>{d.matches=d.matches||f,d.breakpoints[g]=f}),d}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),s={observable:new si.y(c=>{const d=f=>this._zone.run(()=>c.next(f));return i.addListener(d),()=>{i.removeListener(d)}}).pipe(Ir(i),(0,w.U)(({matches:c})=>({query:e,matches:c})),Ke(this._destroySubject)),mql:i};return this._queries.set(e,s),s}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Wf),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function uy(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function fy(n,t){return(n.getAttribute(t)||"").match(/\S+/g)||[]}const Ag="cdk-describedby-message",Yf="cdk-describedby-host";let kg=0,Cu=(()=>{class n{constructor(e,i){this._platform=i,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+kg++,this._document=e,this._id=(0,o.f3M)(o.AFp)+"-"+kg++}describe(e,i,r){if(!this._canBeDescribed(e,i))return;const s=py(i,r);"string"!=typeof i?(Rg(i,this._id),this._messageRegistry.set(s,{messageElement:i,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(i,r),this._isElementDescribedByMessage(e,s)||this._addMessageReference(e,s)}removeDescription(e,i,r){if(!i||!this._isElementNode(e))return;const s=py(i,r);if(this._isElementDescribedByMessage(e,s)&&this._removeMessageReference(e,s),"string"==typeof i){const c=this._messageRegistry.get(s);c&&0===c.referenceCount&&this._deleteMessageElement(s)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const e=this._document.querySelectorAll(`[${Yf}="${this._id}"]`);for(let i=0;i<e.length;i++)this._removeCdkDescribedByReferenceIds(e[i]),e[i].removeAttribute(Yf);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,i){const r=this._document.createElement("div");Rg(r,this._id),r.textContent=e,i&&r.setAttribute("role",i),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(py(e,i),{messageElement:r,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;const e="cdk-describedby-message-container",i=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let s=0;s<i.length;s++)i[s].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(e),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(e){const i=fy(e,"aria-describedby").filter(r=>0!=r.indexOf(Ag));e.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(e,i){const r=this._messageRegistry.get(i);(function zC(n,t,e){const i=fy(n,t);i.some(r=>r.trim()==e.trim())||(i.push(e.trim()),n.setAttribute(t,i.join(" ")))})(e,"aria-describedby",r.messageElement.id),e.setAttribute(Yf,this._id),r.referenceCount++}_removeMessageReference(e,i){const r=this._messageRegistry.get(i);r.referenceCount--,function hy(n,t,e){const r=fy(n,t).filter(s=>s!=e.trim());r.length?n.setAttribute(t,r.join(" ")):n.removeAttribute(t)}(e,"aria-describedby",r.messageElement.id),e.removeAttribute(Yf)}_isElementDescribedByMessage(e,i){const r=fy(e,"aria-describedby"),s=this._messageRegistry.get(i),c=s&&s.messageElement.id;return!!c&&-1!=r.indexOf(c)}_canBeDescribed(e,i){if(!this._isElementNode(e))return!1;if(i&&"object"==typeof i)return!0;const r=null==i?"":`${i}`.trim(),s=e.getAttribute("aria-label");return!(!r||s&&s.trim()===r)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(oe),o.LFG(Yn))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function py(n,t){return"string"==typeof n?`${t||""}/${n}`:n}function Rg(n,t){n.id||(n.id=`${Ag}-${t}-${kg++}`)}class Zf extends class Og{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Je.x,this._typeaheadSubscription=Cn.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new Je.x,this.change=new Je.x,t instanceof o.n_E&&t.changes.subscribe(e=>{if(this._activeItem){const r=e.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,ii.b)(e=>this._pressedLetters.push(e)),Nd(t),Ln(()=>this._pressedLetters.length>0),(0,w.U)(()=>this._pressedLetters.join(""))).subscribe(e=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,c=i[s];if(!this._skipPredicateFn(c)&&0===c.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||bs(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),i="number"==typeof t?t:e.indexOf(t);this._activeItem=e[i]??null,this._activeItemIndex=i}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let i=1;i<=e.length;i++){const r=(this._activeItemIndex+t*i+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const i=this._getItemsArray();if(i[t]){for(;this._skipPredicateFn(i[t]);)if(!i[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof o.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let Ba=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function gy(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function $C(n){try{return n.frameElement}catch{return null}}(function RI(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===YC(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=YC(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function kI(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function _y(n){return!function II(n){return function Ld(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function MI(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function qC(n){return function AI(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||WC(n))}(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Yn))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function WC(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function YC(n){if(!WC(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class ZC{constructor(t,e,i,r,s=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(v(1)).subscribe(t)}}let vy=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new ZC(e,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ba),o.LFG(o.R0b),o.LFG(oe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Du(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function yy(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const DB=new o.OlP("cdk-input-modality-detector-options"),KC={ignoreKeys:[18,17,224,91,16]},Bd=ar({passive:!0,capture:!0});let PI=(()=>{class n{constructor(e,i,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new Oi(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(d=>d===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=mr(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Du(c)?"keyboard":"mouse"),this._mostRecentTarget=mr(c))},this._onTouchstart=c=>{yy(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=mr(c))},this._options={...KC,...s},this.modalityDetected=this._modality.pipe(D(1)),this.modalityChanged=this.modalityDetected.pipe(B()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Bd),r.addEventListener("mousedown",this._onMousedown,Bd),r.addEventListener("touchstart",this._onTouchstart,Bd)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Bd),document.removeEventListener("mousedown",this._onMousedown,Bd),document.removeEventListener("touchstart",this._onTouchstart,Bd))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Yn),o.LFG(o.R0b),o.LFG(oe),o.LFG(DB,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const XC=new o.OlP("liveAnnouncerElement",{providedIn:"root",factory:function JC(){return null}}),by=new o.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let NI=(()=>{class n{constructor(e,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=e||this._createLiveElement()}announce(e,...i){const r=this._defaultOptions;let s,c;return 1===i.length&&"number"==typeof i[0]?c=i[0]:[s,c]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==c&&r&&(c=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(d=>this._currentResolve=d)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof c&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",i=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(XC,8),o.LFG(o.R0b),o.LFG(oe),o.LFG(by,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wy=new o.OlP("cdk-focus-monitor-default-options"),Cy=ar({passive:!0,capture:!0});let $o=(()=>{class n{constructor(e,i,r,s,c){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Je.x,this._rootNodeFocusAndBlurListener=d=>{for(let g=mr(d);g;g=g.parentElement)"focus"===d.type?this._onFocus(d,g):this._onBlur(d,g)},this._document=s,this._detectionMode=c?.detectionMode||0}monitor(e,i=!1){const r=_i(e);if(!this._platform.isBrowser||1!==r.nodeType)return ct(null);const s=Go(r)||this._getDocument(),c=this._elementInfo.get(r);if(c)return i&&(c.checkChildren=!0),c.subject;const d={checkChildren:i,subject:new Je.x,rootNode:s};return this._elementInfo.set(r,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(e){const i=_i(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const s=_i(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([d,f])=>this._originChanged(d,i,f)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),s=mr(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Cy),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Cy)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ke(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Cy),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Cy),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const s=e.labels;if(s)for(let c=0;c<s.length;c++)if(s[c].contains(i))return!0;return!1}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.R0b),o.LFG(Yn),o.LFG(PI),o.LFG(oe,8),o.LFG(wy,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const FI="cdk-high-contrast-black-on-white",LI="cdk-high-contrast-white-on-black",tD="cdk-high-contrast-active";let BI=(()=>{class n{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=(0,o.f3M)(GC).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(tD,FI,LI),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(tD,FI):2===i&&e.add(tD,LI)}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Yn),o.LFG(oe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Qf=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(BI))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Fl]}),n})(),iD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();var Ui=V(5577),Dy=V(1144),mo=V(576);const Ey=["addListener","removeListener"],Xf=["addEventListener","removeEventListener"],HI=["on","off"];function Va(n,t,e,i){if((0,mo.m)(e)&&(i=e,e=void 0),i)return Va(n,t,e).pipe(sy(i));const[r,s]=function GI(n){return(0,mo.m)(n.addEventListener)&&(0,mo.m)(n.removeEventListener)}(n)?Xf.map(c=>d=>n[c](t,d,e)):function sD(n){return(0,mo.m)(n.addListener)&&(0,mo.m)(n.removeListener)}(n)?Ey.map(rD(n,t)):function jI(n){return(0,mo.m)(n.on)&&(0,mo.m)(n.off)}(n)?HI.map(rD(n,t)):[];if(!r&&(0,Dy.z)(n))return(0,Ui.z)(c=>Va(c,t,e))((0,Me.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new si.y(c=>{const d=(...f)=>c.next(1<f.length?f:f[0]);return r(d),()=>s(d)})}function rD(n,t){return e=>i=>n[e](t,i)}var oD=V(4408);const Jf={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=Jf;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(s=>{e=void 0,n(s)});return new Cn.w0(()=>e?.(r))},requestAnimationFrame(...n){const{delegate:t}=Jf;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=Jf;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var aD=V(7565);const lD=new class zI extends aD.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class Sy extends oD.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=Jf.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(Jf.cancelAnimationFrame(e),t._scheduled=void 0)}});let xy,qI=1;const Ji={};function Ng(n){return n in Ji&&(delete Ji[n],!0)}const cD={setImmediate(n){const t=qI++;return Ji[t]=!0,xy||(xy=Promise.resolve()),xy.then(()=>Ng(t)&&n()),t},clearImmediate(n){Ng(n)}},{setImmediate:Ar,clearImmediate:ep}=cD,Vd={setImmediate(...n){const{delegate:t}=Vd;return(t?.setImmediate||Ar)(...n)},clearImmediate(n){const{delegate:t}=Vd;return(t?.clearImmediate||ep)(n)},delegate:void 0};new class YI extends aD.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class WI extends oD.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=Vd.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(Vd.clearImmediate(e),t._scheduled=void 0)}});var ZI=V(3532);function Ty(n=0,t,e=La.P){let i=-1;return null!=t&&((0,ZI.K)(t)?e=t:i=t),new si.y(r=>{let s=function fD(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let c=0;return e.schedule(function(){r.closed||(r.next(c++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function My(n,t=La.z){return function hD(n){return(0,gi.e)((t,e)=>{let i=!1,r=null,s=null,c=!1;const d=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const g=r;r=null,e.next(g)}c&&e.complete()},f=()=>{s=null,c&&e.complete()};t.subscribe((0,Gn.x)(e,g=>{i=!0,r=g,s||(0,Me.Xf)(n(g)).subscribe(s=(0,Gn.x)(e,d,f))},()=>{c=!0,(!i||!s||s.closed)&&e.complete()}))})}(()=>Ty(n,t))}const KI=new o.OlP("cdk-dir-doc",{providedIn:"root",factory:function QI(){return(0,o.f3M)(oe)}}),XI=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let ws=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new o.vpe,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function JI(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?XI.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(KI,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ud=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),Ay=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new Je.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new si.y(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(My(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ct()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(Ln(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=_i(i),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Va(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.R0b),o.LFG(Yn),o.LFG(oe,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Hd=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new Je.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(My(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Yn),o.LFG(o.R0b),o.LFG(oe,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qo=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),Lg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Ud,qo,Ud,qo]}),n})();var _r=V(6451);function Ry(n,t,e){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];r?n.setProperty(i,r,e?.has(i)?"important":""):n.removeProperty(i)}return n}function jd(n,t){const e=t?"":"none";Ry(n.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function vD(n,t,e){Ry(n.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function Bg(n,t){return t&&"none"!=t?n+" "+t:n}function yD(n){const t=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*t}function np(n,t){return n.getPropertyValue(t).split(",").map(i=>i.trim())}function Vg(n){const t=n.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function ip(n,t,e){const{top:i,bottom:r,left:s,right:c}=n;return e>=i&&e<=r&&t>=s&&t<=c}function rp(n,t,e){n.top+=t,n.bottom=n.top+n.height,n.left+=e,n.right=n.left+n.width}function wD(n,t,e,i){const{top:r,right:s,bottom:c,left:d,width:f,height:g}=n,b=f*t,E=g*t;return i>r-E&&i<c+E&&e>d-b&&e<s+b}class Oy{constructor(t){this._document=t,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:Vg(e)})})}handleScroll(t){const e=mr(t),i=this.positions.get(e);if(!i)return null;const r=i.scrollPosition;let s,c;if(e===this._document){const g=this.getViewportScrollPosition();s=g.top,c=g.left}else s=e.scrollTop,c=e.scrollLeft;const d=r.top-s,f=r.left-c;return this.positions.forEach((g,b)=>{g.clientRect&&e!==b&&e.contains(b)&&rp(g.clientRect,d,f)}),r.top=s,r.left=c,{top:d,left:f}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function Py(n){const t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();t.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return"canvas"===i?DD(n,t):("input"===i||"select"===i||"textarea"===i)&&Ny(n,t),Tc("canvas",n,t,DD),Tc("input, textarea, select",n,t,Ny),t}function Tc(n,t,e,i){const r=t.querySelectorAll(n);if(r.length){const s=e.querySelectorAll(n);for(let c=0;c<r.length;c++)i(r[c],s[c])}}let CD=0;function Ny(n,t){"file"!==t.type&&(t.value=n.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${CD++}`)}function DD(n,t){const e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}const iA=ar({passive:!0}),Eu=ar({passive:!1}),Ug=new Set(["position"]);class ED{constructor(t,e,i,r,s,c){this._config=e,this._document=i,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=c,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new Je.x,this._pointerMoveSubscription=Cn.w0.EMPTY,this._pointerUpSubscription=Cn.w0.EMPTY,this._scrollSubscription=Cn.w0.EMPTY,this._resizeSubscription=Cn.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new Je.x,this.started=new Je.x,this.released=new Je.x,this.ended=new Je.x,this.entered=new Je.x,this.exited=new Je.x,this.dropped=new Je.x,this.moved=this._moveEvents,this._pointerDown=d=>{if(this.beforeStarted.next(),this._handles.length){const f=this._getTargetHandle(d);f&&!this._disabledHandles.has(f)&&!this.disabled&&this._initializeDragSequence(f,d)}else this.disabled||this._initializeDragSequence(this._rootElement,d)},this._pointerMove=d=>{const f=this._getPointerPositionOnPage(d);if(!this._hasStartedDragging){if(Math.abs(f.x-this._pickupPositionOnPage.x)+Math.abs(f.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const P=Date.now()>=this._dragStartTime+this._getDragStartDelay(d),F=this._dropContainer;if(!P)return void this._endDragSequence(d);(!F||!F.isDragging()&&!F.isReceiving())&&(d.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(d)))}return}d.preventDefault();const g=this._getConstrainedPointerPosition(f);if(this._hasMoved=!0,this._lastKnownPointerPosition=f,this._updatePointerDirectionDelta(g),this._dropContainer)this._updateActiveDropContainer(g,f);else{const b=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,E=this._activeTransform;E.x=g.x-b.x+this._passiveTransform.x,E.y=g.y-b.y+this._passiveTransform.y,this._applyRootElementTransform(E.x,E.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:g,event:d,distance:this._getDragDistance(g),delta:this._pointerDirectionDelta})})},this._pointerUp=d=>{this._endDragSequence(d)},this._nativeDragStart=d=>{if(this._handles.length){const f=this._getTargetHandle(d);f&&!this._disabledHandles.has(f)&&!this.disabled&&d.preventDefault()}else this.disabled||d.preventDefault()},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new Oy(i),c.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=Ge(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(i=>jd(i,e)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>_i(i)),this._handles.forEach(i=>jd(i,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=_i(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,Eu),e.addEventListener("touchstart",this._pointerDown,iA),e.addEventListener("dragstart",this._nativeDragStart,Eu)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?_i(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),jd(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),jd(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){Gd(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const i=this._rootElement,r=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),c=this._anchor=this._anchor||this._document.createComment(""),d=this._getShadowRoot();r.insertBefore(c,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),vD(i,!1,Ug),this._document.body.appendChild(r.replaceChild(s,i)),this._getPreviewInsertionPoint(r,d).appendChild(this._preview),this.started.next({source:this,event:t}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();const i=this.isDragging(),r=Gd(e),s=!r&&0!==e.button,c=this._rootElement,d=mr(e),f=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),g=r?yy(e):Du(e);if(d&&d.draggable&&"mousedown"===e.type&&e.preventDefault(),i||s||f||g)return;if(this._handles.length){const I=c.style;this._rootElementTapHighlight=I.webkitTapHighlightColor||"",I.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(I=>this._updateOnScroll(I)),this._boundaryElement&&(this._boundaryRect=Vg(this._boundaryElement));const b=this._previewTemplate;this._pickupPositionInElement=b&&b.template&&!b.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,t,e);const E=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:E.x,y:E.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){vD(this._rootElement,!0,Ug),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,i=e.getItemIndex(this),r=this._getPointerPositionOnPage(t),s=this._getDragDistance(r),c=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:s,dropPoint:r,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:c,distance:s,dropPoint:r,event:t}),e.drop(this,i,this._initialIndex,this._initialContainer,c,s,r),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:r}){let s=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,t,e,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,i=t?t.template:null;let r;if(i&&t){const s=t.matchSize?this._initialClientRect:null,c=t.viewContainer.createEmbeddedView(i,t.context);c.detectChanges(),r=op(c,this._document),this._previewRef=c,t.matchSize?ap(r,s):r.style.transform=sp(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=Py(this._rootElement),ap(r,this._initialClientRect),this._initialTransform&&(r.style.transform=this._initialTransform);return Ry(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},Ug),jd(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(s=>r.classList.add(s)):r.classList.add(e)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);const e=function bD(n){const t=getComputedStyle(n),e=np(t,"transition-property"),i=e.find(d=>"transform"===d||"all"===d);if(!i)return 0;const r=e.indexOf(i),s=np(t,"transition-duration"),c=np(t,"transition-delay");return yD(s[r])+yD(c[r])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{const r=c=>{(!c||mr(c)===this._preview&&"transform"===c.propertyName)&&(this._preview?.removeEventListener("transitionend",r),i(),clearTimeout(s))},s=setTimeout(r,1.5*e);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=op(this._placeholderRef,this._document)):i=Py(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e,i){const r=e===this._rootElement?null:e,s=r?r.getBoundingClientRect():t,c=Gd(i)?i.targetTouches[0]:i,d=this._getViewportScrollPosition();return{x:s.left-t.left+(c.pageX-s.left-d.left),y:s.top-t.top+(c.pageY-s.top-d.top)}}_getPointerPositionOnPage(t){const e=this._getViewportScrollPosition(),i=Gd(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,r=i.pageX-e.left,s=i.pageY-e.top;if(this._ownerSVGElement){const c=this._ownerSVGElement.getScreenCTM();if(c){const d=this._ownerSVGElement.createSVGPoint();return d.x=r,d.y=s,d.matrixTransform(c.inverse())}}return{x:r,y:s}}_getConstrainedPointerPosition(t){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:r}=this.constrainPosition?this.constrainPosition(t,this,this._initialClientRect,this._pickupPositionInElement):t;if("x"===this.lockAxis||"x"===e?r=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===e)&&(i=this._pickupPositionOnPage.x),this._boundaryRect){const{x:s,y:c}=this._pickupPositionInElement,d=this._boundaryRect,{width:f,height:g}=this._getPreviewRect(),b=d.top+c,E=d.bottom-(g-c);i=Hg(i,d.left+s,d.right-(f-s)),r=Hg(r,b,E)}return{x:i,y:r}}_updatePointerDirectionDelta(t){const{x:e,y:i}=t,r=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,c=Math.abs(e-s.x),d=Math.abs(i-s.y);return c>this._config.pointerDirectionChangeThreshold&&(r.x=e>s.x?1:-1,s.x=e),d>this._config.pointerDirectionChangeThreshold&&(r.y=i>s.y?1:-1,s.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,jd(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,Eu),t.removeEventListener("touchstart",this._pointerDown,iA),t.removeEventListener("dragstart",this._nativeDragStart,Eu)}_applyRootElementTransform(t,e){const i=sp(t,e),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=Bg(i,this._initialTransform)}_applyPreviewTransform(t,e){const i=this._previewTemplate?.template?void 0:this._initialTransform,r=sp(t,e);this._preview.style.transform=Bg(r,i)}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===i.width&&0===i.height)return;const s=r.left-i.left,c=i.right-r.right,d=r.top-i.top,f=i.bottom-r.bottom;r.width>i.width?(s>0&&(t+=s),c>0&&(t-=c)):t=0,r.height>i.height?(d>0&&(e+=d),f>0&&(e-=f)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:Gd(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);if(e){const i=mr(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&rp(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Go(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){const i=this._previewContainer||"global";if("parent"===i)return t;if("global"===i){const r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return _i(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}}function sp(n,t){return`translate3d(${Math.round(n)}px, ${Math.round(t)}px, 0)`}function Hg(n,t,e){return Math.max(t,Math.min(e,n))}function Gd(n){return"t"===n.type[0]}function op(n,t){const e=n.rootNodes;if(1===e.length&&e[0].nodeType===t.ELEMENT_NODE)return e[0];const i=t.createElement("div");return e.forEach(r=>i.appendChild(r)),i}function ap(n,t){n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,n.style.transform=sp(t.left,t.top)}function Su(n,t){return Math.max(0,Math.min(t,n))}class lp{constructor(t,e){this._element=t,this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(t){this.withItems(t)}sort(t,e,i,r){const s=this._itemPositions,c=this._getItemIndexFromPointerPosition(t,e,i,r);if(-1===c&&s.length>0)return null;const d="horizontal"===this.orientation,f=s.findIndex(te=>te.drag===t),g=s[c],E=g.clientRect,I=f>c?1:-1,P=this._getItemOffsetPx(s[f].clientRect,E,I),F=this._getSiblingOffsetPx(f,s,I),z=s.slice();return function SD(n,t,e){const i=Su(t,n.length-1),r=Su(e,n.length-1);if(i===r)return;const s=n[i],c=r<i?-1:1;for(let d=i;d!==r;d+=c)n[d]=n[d+c];n[r]=s}(s,f,c),s.forEach((te,Ve)=>{if(z[Ve]===te)return;const Ze=te.drag===t,rt=Ze?P:F,et=Ze?t.getPlaceholderElement():te.drag.getRootElement();te.offset+=rt,d?(et.style.transform=Bg(`translate3d(${Math.round(te.offset)}px, 0, 0)`,te.initialTransform),rp(te.clientRect,0,rt)):(et.style.transform=Bg(`translate3d(0, ${Math.round(te.offset)}px, 0)`,te.initialTransform),rp(te.clientRect,rt,0))}),this._previousSwap.overlaps=ip(E,e,i),this._previousSwap.drag=g.drag,this._previousSwap.delta=d?r.x:r.y,{previousIndex:f,currentIndex:c}}enter(t,e,i,r){const s=null==r||r<0?this._getItemIndexFromPointerPosition(t,e,i):r,c=this._activeDraggables,d=c.indexOf(t),f=t.getPlaceholderElement();let g=c[s];if(g===t&&(g=c[s+1]),!g&&(null==s||-1===s||s<c.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(g=c[0]),d>-1&&c.splice(d,1),g&&!this._dragDropRegistry.isDragging(g)){const b=g.getRootElement();b.parentElement.insertBefore(f,b),c.splice(s,0,t)}else _i(this._element).appendChild(f),c.push(t);f.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables.forEach(t=>{const e=t.getRootElement();if(e){const i=this._itemPositions.find(r=>r.drag===t)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===t)}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:i})=>{rp(i,t,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}_cacheItemPositions(){const t="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(e=>{const i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:Vg(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getItemOffsetPx(t,e,i){const r="horizontal"===this.orientation;let s=r?e.left-t.left:e.top-t.top;return-1===i&&(s+=r?e.width-t.width:e.height-t.height),s}_getSiblingOffsetPx(t,e,i){const r="horizontal"===this.orientation,s=e[t].clientRect,c=e[t+-1*i];let d=s[r?"width":"height"]*i;if(c){const f=r?"left":"top",g=r?"right":"bottom";-1===i?d-=c.clientRect[f]-s[g]:d+=s[f]-c.clientRect[g]}return d}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,r="horizontal"===this.orientation;if(i[0].drag!==this._activeDraggables[0]){const c=i[i.length-1].clientRect;return r?t>=c.right:e>=c.bottom}{const c=i[0].clientRect;return r?t<=c.left:e<=c.top}}_getItemIndexFromPointerPosition(t,e,i,r){const s="horizontal"===this.orientation,c=this._itemPositions.findIndex(({drag:d,clientRect:f})=>{if(d===t)return!1;if(r){const g=s?r.x:r.y;if(d===this._previousSwap.drag&&this._previousSwap.overlaps&&g===this._previousSwap.delta)return!1}return s?e>=Math.floor(f.left)&&e<Math.floor(f.right):i>=Math.floor(f.top)&&i<Math.floor(f.bottom)});return-1!==c&&this._sortPredicate(c,t)?c:-1}}class oA{constructor(t,e,i,r,s){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new Je.x,this.entered=new Je.x,this.exited=new Je.x,this.dropped=new Je.x,this.sorted=new Je.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Cn.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new Je.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function ky(n=0,t=La.z){return n<0&&(n=0),Ty(n,n,t)}(0,lD).pipe(Ke(this._stopScrollTimers)).subscribe(()=>{const c=this._scrollNode,d=this.autoScrollStep;1===this._verticalScrollDirection?c.scrollBy(0,-d):2===this._verticalScrollDirection&&c.scrollBy(0,d),1===this._horizontalScrollDirection?c.scrollBy(-d,0):2===this._horizontalScrollDirection&&c.scrollBy(d,0)})},this.element=_i(t),this._document=i,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new Oy(i),this._sortStrategy=new lp(this.element,e),this._sortStrategy.withSortPredicate((c,d)=>this.sortPredicate(c,d,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,r,s,c,d,f={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:s,distance:c,dropPoint:d,event:f})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>-1===t.indexOf(r))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._sortStrategy.direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._sortStrategy.orientation=t,this}withScrollableParents(t){const e=_i(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,r){if(this.sortingDisabled||!this._clientRect||!wD(this._clientRect,.05,e,i))return;const s=this._sortStrategy.sort(t,e,i,r);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,r=0,s=0;if(this._parentPositions.positions.forEach((c,d)=>{d===this._document||!c.clientRect||i||wD(c.clientRect,.05,t,e)&&([r,s]=function By(n,t,e,i){const r=MD(t,i),s=Ly(t,e);let c=0,d=0;if(r){const f=n.scrollTop;1===r?f>0&&(c=1):n.scrollHeight-f>n.clientHeight&&(c=2)}if(s){const f=n.scrollLeft;1===s?f>0&&(d=1):n.scrollWidth-f>n.clientWidth&&(d=2)}return[c,d]}(d,c.clientRect,t,e),(r||s)&&(i=d))}),!r&&!s){const{width:c,height:d}=this._viewportRuler.getViewportSize(),f={width:c,height:d,top:0,right:c,bottom:d,left:0};r=MD(f,e),s=Ly(f,t),i=window}i&&(r!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=i,(r||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=_i(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=_i(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_reset(){this._isDragging=!1;const t=_i(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(t,e){return null!=this._clientRect&&ip(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(r=>r._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._clientRect||!ip(this._clientRect,e,i)||!this.enterPredicate(t,this))return!1;const r=this._getShadowRoot().elementFromPoint(e,i);if(!r)return!1;const s=_i(this.element);return r===s||s.contains(r)}_startReceiving(t,e){const i=this._activeSiblings;!i.has(t)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=Go(_i(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}}function MD(n,t){const{top:e,bottom:i,height:r}=n,s=.05*r;return t>=e-s&&t<=e+s?1:t>=i-s&&t<=i+s?2:0}function Ly(n,t){const{left:e,right:i,width:r}=n,s=.05*r;return t>=e-s&&t<=e+s?1:t>=i-s&&t<=i+s?2:0}const cp=ar({passive:!1,capture:!0});let AB=(()=>{class n{constructor(e,i){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new Je.x,this.pointerUp=new Je.x,this.scroll=new Je.x,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=i}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,cp)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,cp)}startDragging(e,i){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const r=i.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:cp}),r||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:cp}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,c)=>{this._document.addEventListener(c,s.handler,s.options)})})}}stopDragging(e){const i=this._activeDragInstances.indexOf(e);i>-1&&(this._activeDragInstances.splice(i,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const i=[this.scroll];return e&&e!==this._document&&i.push(new si.y(r=>this._ngZone.runOutsideAngular(()=>{const c=d=>{this._activeDragInstances.length&&r.next(d)};return e.addEventListener("scroll",c,!0),()=>{e.removeEventListener("scroll",c,!0)}}))),(0,_r.T)(...i)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,i)=>{this._document.removeEventListener(i,e.handler,e.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.R0b),o.LFG(oe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ID={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let aA=(()=>{class n{constructor(e,i,r,s){this._document=e,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=s}createDrag(e,i=ID){return new ED(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new oA(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(oe),o.LFG(o.R0b),o.LFG(Hd),o.LFG(AB))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[aA],imports:[qo]}),n})();class Vy{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Uy extends Vy{constructor(t,e,i,r){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r}}class Hy extends Vy{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class kD extends Vy{constructor(t){super(),this.element=t instanceof o.SBq?t.nativeElement:t}}class jg{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Uy?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Hy?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof kD?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class mA extends jg{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=c=>{const d=c.element,f=this._document.createComment("dom-portal");d.parentNode.insertBefore(f,d),this.outletElement.appendChild(d),this._attachedPortal=c,super.setDisposeFn(()=>{f.parentNode&&f.parentNode.replaceChild(d,f)})},this._document=s}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||o.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let jy=(()=>{class n extends jg{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new o.vpe,this.attachDomPortal=s=>{const c=s.element,d=this._document.createComment("dom-portal");s.setAttachedHost(this),c.parentNode.insertBefore(d,c),this._getRootNode().appendChild(c),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(c,d)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),c=i.createComponent(s,i.length,e.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=e,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o._Vd),o.Y36(o.s_b),o.Y36(oe))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[o.qOj]}),n})(),Ha=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),PD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Ud]}),n})();function dp(n){return n&&"function"==typeof n.connect}class zy{applyChanges(t,e,i,r,s){t.forEachOperation((c,d,f)=>{let g,b;if(null==c.previousIndex){const E=i(c,d,f);g=e.createEmbeddedView(E.templateRef,E.context,E.index),b=1}else null==f?(e.remove(d),b=3):(g=e.get(d),e.move(g,f),b=2);s&&s({context:g?.context,operation:b,record:c})})}detach(){}}let hp=(()=>{class n{constructor(){this._listeners=[]}notify(e,i){for(let r of this._listeners)r(e,i)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(i=>e!==i)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fp=new o.OlP("_ViewRepeater");const qd=[[["caption"]],[["colgroup"],["col"]]],FD=["caption","colgroup, col"];function Us(n){return class extends n{constructor(...t){super(...t),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(t){const e=this._sticky;this._sticky=Ge(t),this._hasStickyChanged=e!==this._sticky}hasStickyChanged(){const t=this._hasStickyChanged;return this._hasStickyChanged=!1,t}resetStickyChanged(){this._hasStickyChanged=!1}}}const xu=new o.OlP("CDK_TABLE");let Mc=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkCellDef",""]]}),n})(),Cs=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),Wd=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class BD{}const qy=Us(BD);let Ic=(()=>{class n extends qy{constructor(e){super(),this._table=e,this._stickyEnd=!1}get name(){return this._name}set name(e){this._setNameInput(e)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){const i=this._stickyEnd;this._stickyEnd=Ge(e),this._hasStickyChanged=i!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(xu,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,Mc,5),o.Suo(r,Cs,5),o.Suo(r,Wd,5)),2&e){let s;o.iGM(s=o.CRH())&&(i.cell=s.first),o.iGM(s=o.CRH())&&(i.headerCell=s.first),o.iGM(s=o.CRH())&&(i.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[o._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),o.qOj]}),n})();class zg{constructor(t,e){e.nativeElement.classList.add(...t._columnCssClassName)}}let VD=(()=>{class n extends zg{constructor(e,i){super(e,i)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ic),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[o.qOj]}),n})(),Yd=(()=>{class n extends zg{constructor(e,i){if(super(e,i),1===e._table?._elementRef.nativeElement.nodeType){const r=e._table._elementRef.nativeElement.getAttribute("role");i.nativeElement.setAttribute("role","grid"===r||"treegrid"===r?"gridcell":"cell")}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ic),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[o.qOj]}),n})();class $g{constructor(){this.tasks=[],this.endTasks=[]}}const mp=new o.OlP("_COALESCED_STYLE_SCHEDULER");let qg=(()=>{class n{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new Je.x}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new $g,this._getScheduleObservable().pipe(Ke(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const e=this._currentSchedule;this._currentSchedule=new $g;for(const i of e.tasks)i();for(const i of e.endTasks)i()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,ln.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe(v(1))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Wy=(()=>{class n{constructor(e,i){this.template=e,this._differs=i}ngOnChanges(e){if(!this._columnsDiffer){const i=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof gp?e.headerCell.template:this instanceof _p?e.footerCell.template:e.cell.template}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,features:[o.TTD]}),n})();class bA extends Wy{}const wA=Us(bA);let gp=(()=>{class n extends wA{constructor(e,i,r){super(e,i),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(o.ZZ4),o.Y36(xu,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[o.qOj,o.TTD]}),n})();class UD extends Wy{}const eV=Us(UD);let _p=(()=>{class n extends eV{constructor(e,i,r){super(e,i),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(o.ZZ4),o.Y36(xu,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[o.qOj,o.TTD]}),n})(),Yy=(()=>{class n extends Wy{constructor(e,i,r){super(e,i),this._table=r}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(o.ZZ4),o.Y36(xu,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[o.qOj]}),n})(),ja=(()=>{class n{constructor(e){this._viewContainer=e,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),Wg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&o.GkF(0,0)},dependencies:[ja],encapsulation:2}),n})(),vp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&o.GkF(0,0)},dependencies:[ja],encapsulation:2}),n})(),Ky=(()=>{class n{constructor(e){this.templateRef=e,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const CA=["top","bottom","left","right"];class tV{constructor(t,e,i,r,s=!0,c=!0,d){this._isNativeHtmlTable=t,this._stickCellCss=e,this.direction=i,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=c,this._positionListener=d,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(t,e){const i=[];for(const r of t)if(r.nodeType===r.ELEMENT_NODE){i.push(r);for(let s=0;s<r.children.length;s++)i.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const r of i)this._removeStickyStyle(r,e)})}updateStickyColumns(t,e,i,r=!0){if(!t.length||!this._isBrowser||!e.some(I=>I)&&!i.some(I=>I))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=t[0],c=s.children.length,d=this._getCellWidths(s,r),f=this._getStickyStartColumnPositions(d,e),g=this._getStickyEndColumnPositions(d,i),b=e.lastIndexOf(!0),E=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const I="rtl"===this.direction,P=I?"right":"left",F=I?"left":"right";for(const z of t)for(let te=0;te<c;te++){const Ve=z.children[te];e[te]&&this._addStickyStyle(Ve,P,f[te],te===b),i[te]&&this._addStickyStyle(Ve,F,g[te],te===E)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===b?[]:d.slice(0,b+1).map((z,te)=>e[te]?z:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===E?[]:d.slice(E).map((z,te)=>i[te+E]?z:null).reverse()}))})}stickRows(t,e,i){if(!this._isBrowser)return;const r="bottom"===i?t.slice().reverse():t,s="bottom"===i?e.slice().reverse():e,c=[],d=[],f=[];for(let b=0,E=0;b<r.length;b++){if(!s[b])continue;c[b]=E;const I=r[b];f[b]=this._isNativeHtmlTable?Array.from(I.children):[I];const P=I.getBoundingClientRect().height;E+=P,d[b]=P}const g=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{for(let b=0;b<r.length;b++){if(!s[b])continue;const E=c[b],I=b===g;for(const P of f[b])this._addStickyStyle(P,i,E,I)}"top"===i?this._positionListener?.stickyHeaderRowsUpdated({sizes:d,offsets:c,elements:f}):this._positionListener?.stickyFooterRowsUpdated({sizes:d,offsets:c,elements:f})})}updateStickyFooterContainer(t,e){if(!this._isNativeHtmlTable)return;const i=t.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{e.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1)})}_removeStickyStyle(t,e){for(const r of e)t.style[r]="",t.classList.remove(this._borderCellCss[r]);CA.some(r=>-1===e.indexOf(r)&&t.style[r])?t.style.zIndex=this._getCalculatedZIndex(t):(t.style.zIndex="",this._needsPositionStickyOnElement&&(t.style.position=""),t.classList.remove(this._stickCellCss))}_addStickyStyle(t,e,i,r){t.classList.add(this._stickCellCss),r&&t.classList.add(this._borderCellCss[e]),t.style[e]=`${i}px`,t.style.zIndex=this._getCalculatedZIndex(t),this._needsPositionStickyOnElement&&(t.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(t){const e={top:100,bottom:10,left:1,right:1};let i=0;for(const r of CA)t.style[r]&&(i+=e[r]);return i?`${i}`:""}_getCellWidths(t,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],r=t.children;for(let s=0;s<r.length;s++)i.push(r[s].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(t,e){const i=[];let r=0;for(let s=0;s<t.length;s++)e[s]&&(i[s]=r,r+=t[s]);return i}_getStickyEndColumnPositions(t,e){const i=[];let r=0;for(let s=t.length;s>0;s--)e[s]&&(i[s]=r,r+=t[s]);return i}}const yp=new o.OlP("CDK_SPL");let bp=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","rowOutlet",""]]}),n})(),Zd=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),wp=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),Kd=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),Cp=(()=>{class n{constructor(e,i,r,s,c,d,f,g,b,E,I,P){this._differs=e,this._changeDetectorRef=i,this._elementRef=r,this._dir=c,this._platform=f,this._viewRepeater=g,this._coalescedStyleScheduler=b,this._viewportRuler=E,this._stickyPositioningListener=I,this._ngZone=P,this._onDestroy=new Je.x,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new o.vpe,this.viewChange=new Oi({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=d,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=Ge(e),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=Ge(e),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((e,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(Ke(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),dp(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const e=this._dataDiffer.diff(this._renderRows);if(!e)return this._updateNoDataRow(),void this.contentChanged.next();const i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,i,(r,s,c)=>this._getEmbeddedViewArgs(r.item,c),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(r=>{i.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&o.R0b.isInAngularZone()?this._ngZone.onStable.pipe(v(1),Ke(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){const e=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=e.length?"":"none");const s=this._headerRowDefs.map(c=>c.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,s,"top"),this._headerRowDefs.forEach(c=>c.resetStickyChanged())}updateStickyFooterRowStyles(){const e=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=e.length?"":"none");const s=this._footerRowDefs.map(c=>c.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(c=>c.resetStickyChanged())}updateStickyColumnStyles(){const e=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((s,c)=>{this._addStickyColumnStyles([s],this._headerRowDefs[c])}),this._rowDefs.forEach(s=>{const c=[];for(let d=0;d<i.length;d++)this._renderRows[d].rowDef===s&&c.push(i[d]);this._addStickyColumnStyles(c,s)}),r.forEach((s,c)=>{this._addStickyColumnStyles([s],this._footerRowDefs[c])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const e=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r];const c=this._getRenderRowsForData(s,r,i.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let d=0;d<c.length;d++){let f=c[d];const g=this._cachedRenderRowsMap.get(f.data);g.has(f.rowDef)?g.get(f.rowDef).push(f):g.set(f.rowDef,[f]),e.push(f)}}return e}_getRenderRowsForData(e,i,r){return this._getRowDefs(e,i).map(c=>{const d=r&&r.has(c)?r.get(c):[];if(d.length){const f=d.shift();return f.dataIndex=i,f}return{data:e,rowDef:c,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),Yg(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=Yg(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=Yg(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=Yg(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const e=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){const e=(c,d)=>c||!!d.getColumnsDiff(),i=this._rowDefs.reduce(e,!1);i&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(e,!1);r&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(e,!1);return s&&this._forceRenderFooterRows(),i||r||s}_switchDataSource(e){this._data=[],dp(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;dp(this.dataSource)?e=this.dataSource.connect(this):function ND(n){return!!n&&(n instanceof si.y||(0,mo.m)(n.lift)&&(0,mo.m)(n.subscribe))}(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=ct(this.dataSource)),this._renderChangeSubscription=e.pipe(Ke(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,i)=>this._renderRow(this._headerRowOutlet,e,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,i)=>this._renderRow(this._footerRowOutlet,e,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,i){const r=Array.from(i.columns||[]).map(d=>this._columnDefsByName.get(d)),s=r.map(d=>d.sticky),c=r.map(d=>d.stickyEnd);this._stickyStyler.updateStickyColumns(e,s,c,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){const i=[];for(let r=0;r<e.viewContainer.length;r++){const s=e.viewContainer.get(r);i.push(s.rootNodes[0])}return i}_getRowDefs(e,i){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(i,e));else{let s=this._rowDefs.find(c=>c.when&&c.when(i,e))||this._defaultRowDef;s&&r.push(s)}return r}_getEmbeddedViewArgs(e,i){return{templateRef:e.rowDef.template,context:{$implicit:e.data},index:i}}_renderRow(e,i,r,s={}){const c=e.viewContainer.createEmbeddedView(i.template,s,r);return this._renderCellTemplateForItem(i,s),c}_renderCellTemplateForItem(e,i){for(let r of this._getCellTemplates(e))ja.mostRecentCellOutlet&&ja.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const e=this._rowOutlet.viewContainer;for(let i=0,r=e.length;i<r;i++){const c=e.get(i).context;c.count=r,c.first=0===i,c.last=i===r-1,c.even=i%2==0,c.odd=!c.even,this.multiTemplateDataRows?(c.dataIndex=this._renderRows[i].dataIndex,c.renderIndex=i):c.index=this._renderRows[i].dataIndex}}_getCellTemplates(e){return e&&e.columns?Array.from(e.columns,i=>{const r=this._columnDefsByName.get(i);return e.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const e=this._document.createDocumentFragment(),i=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of i){const s=this._document.createElement(r.tag);s.setAttribute("role","rowgroup");for(const c of r.outlets)s.appendChild(c.elementRef.nativeElement);e.appendChild(s)}this._elementRef.nativeElement.appendChild(e)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const e=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new tV(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:ct()).pipe(Ke(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){const e=this._customNoDataRow||this._noDataRow;if(!e)return;const i=0===this._rowOutlet.viewContainer.length;if(i===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(i){const s=r.createEmbeddedView(e.templateRef),c=s.rootNodes[0];1===s.rootNodes.length&&c?.nodeType===this._document.ELEMENT_NODE&&(c.setAttribute("role","row"),c.classList.add(e._contentClassName))}else r.clear();this._isShowingNoDataRow=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.ZZ4),o.Y36(o.sBO),o.Y36(o.SBq),o.$8M("role"),o.Y36(ws,8),o.Y36(oe),o.Y36(Yn),o.Y36(fp),o.Y36(mp),o.Y36(Hd),o.Y36(yp,12),o.Y36(o.R0b,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,Ky,5),o.Suo(r,Ic,5),o.Suo(r,Yy,5),o.Suo(r,gp,5),o.Suo(r,_p,5)),2&e){let s;o.iGM(s=o.CRH())&&(i._noDataRow=s.first),o.iGM(s=o.CRH())&&(i._contentColumnDefs=s),o.iGM(s=o.CRH())&&(i._contentRowDefs=s),o.iGM(s=o.CRH())&&(i._contentHeaderRowDefs=s),o.iGM(s=o.CRH())&&(i._contentFooterRowDefs=s)}},viewQuery:function(e,i){if(1&e&&(o.Gf(bp,7),o.Gf(Zd,7),o.Gf(wp,7),o.Gf(Kd,7)),2&e){let r;o.iGM(r=o.CRH())&&(i._rowOutlet=r.first),o.iGM(r=o.CRH())&&(i._headerRowOutlet=r.first),o.iGM(r=o.CRH())&&(i._footerRowOutlet=r.first),o.iGM(r=o.CRH())&&(i._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[o._Bn([{provide:xu,useExisting:n},{provide:fp,useClass:zy},{provide:mp,useClass:qg},{provide:yp,useValue:null}])],ngContentSelectors:FD,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,i){1&e&&(o.F$t(qd),o.Hsn(0),o.Hsn(1,1),o.GkF(2,0)(3,1)(4,2)(5,3))},dependencies:[bp,Zd,wp,Kd],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),n})();function Yg(n,t){return n.concat(Array.from(t))}let Qy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Lg]}),n})(),tb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),Jg=(()=>{class n{}return n.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",n.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",n.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",n.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",n})(),nb=(()=>{class n{}return n.COMPLEX="375ms",n.ENTERING="225ms",n.EXITING="195ms",n})();const kA=new o.OlP("mat-sanity-checks",{providedIn:"root",factory:function AA(){return!0}});let mt=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!uo()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(BI),o.LFG(kA,8),o.LFG(oe))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Ud,Ud]}),n})();function ku(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Ge(t)}}}function Ga(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function Vl(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Ge(t)}}}function Ru(n,t=0){return class extends n{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?tn(e):this.defaultTabIndex}}}function Zo(n){return class extends n{constructor(...t){super(...t),this.errorState=!1}updateErrorState(){const t=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==t&&(this.errorState=s,this.stateChanges.next())}}}function ib(n){return class extends n{constructor(...t){super(...t),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new si.y(e=>{this._isInitialized?this._notifySubscriber(e):this._pendingSubscribers.push(e)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(t){t.next(),t.complete()}}}const OA=new o.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function PA(){return(0,o.f3M)(o.soG)}});class Ul{constructor(){this._localeChanges=new Je.x,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let i=this.isValid(t),r=this.isValid(e);return i&&r?!this.compareDate(t,e):i==r}return t==e}clampDate(t,e,i){return e&&this.compareDate(t,e)<0?e:i&&this.compareDate(t,i)>0?i:t}}const e_=new o.OlP("mat-date-formats"),NA=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function rb(n,t){const e=Array(n);for(let i=0;i<n;i++)e[i]=t(i);return e}let FA=(()=>{class n extends Ul{constructor(e,i){super(),this.useUtcForDisplay=!1,super.setLocale(e)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){const i=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return rb(12,r=>this._format(i,new Date(2017,r,1)))}getDateNames(){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return rb(31,i=>this._format(e,new Date(2017,0,i+1)))}getDayOfWeekNames(e){const i=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return rb(7,r=>this._format(i,new Date(2017,0,r+1)))}getYearName(e){const i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,i,r){let s=this._createDateWithOverflow(e,i,r);return s.getMonth(),s}today(){return new Date}parse(e,i){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,i){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");const r=new Intl.DateTimeFormat(this.locale,{...i,timeZone:"utc"});return this._format(r,e)}addCalendarYears(e,i){return this.addCalendarMonths(e,12*i)}addCalendarMonths(e,i){let r=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+i,this.getDate(e));return this.getMonth(r)!=((this.getMonth(e)+i)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(e,i){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+i)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(NA.test(e)){let i=new Date(e);if(this.isValid(i))return i}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,i,r){const s=new Date;return s.setFullYear(e,i,r),s.setHours(0,0,0,0),s}_2digit(e){return("00"+e).slice(-2)}_format(e,i){const r=new Date;return r.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),r.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),e.format(r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(OA,8),o.LFG(Yn))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const sb={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let LA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[{provide:Ul,useClass:FA}]}),n})(),BA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[{provide:e_,useValue:sb}],imports:[LA]}),n})(),Ou=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Dp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[mt,mt]}),n})();class dV{constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const UA={enterDuration:225,exitDuration:150},$D=ar({passive:!0}),qD=["mousedown","touchstart"],lb=["mouseup","mouseleave","touchend","touchcancel"];class cb{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=_i(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...UA,...i.animation};i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const c=i.radius||function WD(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),d=t-r.left,f=e-r.top,g=s.enterDuration,b=document.createElement("div");b.classList.add("mat-ripple-element"),b.style.left=d-c+"px",b.style.top=f-c+"px",b.style.height=2*c+"px",b.style.width=2*c+"px",null!=i.color&&(b.style.backgroundColor=i.color),b.style.transitionDuration=`${g}ms`,this._containerElement.appendChild(b);const E=window.getComputedStyle(b),P=E.transitionDuration,F="none"===E.transitionProperty||"0s"===P||"0s, 0s"===P,z=new dV(this,b,i,F);b.style.transform="scale3d(1, 1, 1)",z.state=0,i.persistent||(this._mostRecentTransientRipple=z);let te=null;return!F&&(g||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Ve=()=>this._finishRippleTransition(z),Ze=()=>this._destroyRipple(z);b.addEventListener("transitionend",Ve),b.addEventListener("transitioncancel",Ze),te={onTransitionEnd:Ve,onTransitionCancel:Ze}}),this._activeRipples.set(z,te),(F||!g)&&this._finishRippleTransition(z),z}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,i={...UA,...t.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=_i(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(qD))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(lb),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=1,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=Du(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!yy(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,$D)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(qD.forEach(t=>{this._triggerElement.removeEventListener(t,this,$D)}),this._pointerUpEventsRegistered&&lb.forEach(t=>{this._triggerElement.removeEventListener(t,this,$D)}))}}const ub=new o.OlP("mat-ripple-global-options");let za=(()=>{class n{constructor(e,i,r,s,c){this._elementRef=e,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new cb(this,i,e,r)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(Yn),o.Y36(ub,8),o.Y36(o.QbO,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),er=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[mt,mt]}),n})(),Xd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[mt]}),n})(),r_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[er,fi,mt,Xd]}),n})();function Jd(n){return new si.y(t=>{(0,Me.Xf)(n()).subscribe(t)})}const ZD=Ml();class _V{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=ri(-this._previousScrollPosition.left),t.style.top=ri(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,s=i.scrollBehavior||"",c=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),ZD&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),ZD&&(i.scrollBehavior=s,r.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class db{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class KD{enable(){}disable(){}attach(){}}function Ep(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function QD(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class $A{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Ep(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let qA=(()=>{class n{constructor(e,i,r,s){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new KD,this.close=c=>new db(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new _V(this._viewportRuler,this._document),this.reposition=c=>new $A(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=s}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ay),o.LFG(Hd),o.LFG(o.R0b),o.LFG(oe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class hb{constructor(t){if(this.scrollStrategy=new KD,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class s_{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let th=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(oe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),WA=(()=>{class n extends th{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let c=s.length-1;c>-1;c--)if(s[c]._keydownEvents.observers.length>0){const d=s[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(oe),o.LFG(o.R0b,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YA=(()=>{class n extends th{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=mr(s)},this._clickListener=s=>{const c=mr(s),d="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const f=this._attachedOverlays.slice();for(let g=f.length-1;g>-1;g--){const b=f[g];if(b._outsidePointerEvents.observers.length<1||!b.hasAttached())continue;if(b.overlayElement.contains(c)||b.overlayElement.contains(d))break;const E=b._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>E.next(s)):E.next(s)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(oe),o.LFG(Yn),o.LFG(o.R0b,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nh=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||uo()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(e),uo()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(oe),o.LFG(Yn))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Sp{constructor(t,e,i,r,s,c,d,f,g,b=!1){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=c,this._document=d,this._location=f,this._outsideClickDispatcher=g,this._animationsDisabled=b,this._backdropElement=null,this._backdropClick=new Je.x,this._attachments=new Je.x,this._detachments=new Je.x,this._locationChanges=Cn.w0.EMPTY,this._backdropClickHandler=E=>this._backdropClick.next(E),this._backdropTransitionendHandler=E=>{this._disposeBackdrop(E.target)},this._keydownEvents=new Je.x,this._outsidePointerEvents=new Je.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(v(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=ri(this._config.width),t.height=ri(this._config.height),t.minWidth=ri(this._config.minWidth),t.minHeight=ri(this._config.minHeight),t.maxWidth=ri(this._config.maxWidth),t.maxHeight=ri(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){const r=po(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Ke((0,_r.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Ko="cdk-overlay-connected-position-bounding-box",xp=/([A-Za-z%]+)$/;class kr{constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Je.x,this._resizeSubscription=Cn.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(Ko),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let c;for(let d of this._preferredPositions){let f=this._getOriginPoint(t,r,d),g=this._getOverlayPoint(f,e,d),b=this._getOverlayFit(g,e,i,d);if(b.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,f);this._canFitWithFlexibleDimensions(b,g,i)?s.push({position:d,origin:f,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(f,d)}):(!c||c.overlayFit.visibleArea<b.visibleArea)&&(c={overlayFit:b,overlayPoint:g,originPoint:f,position:d,overlayRect:e})}if(s.length){let d=null,f=-1;for(const g of s){const b=g.boundingBoxRect.width*g.boundingBoxRect.height*(g.position.weight||1);b>f&&(f=b,d=g)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Hs(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Ko),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r,s;if("center"==i.originX)r=t.left+t.width/2;else{const c=this._isRtl()?t.right:t.left,d=this._isRtl()?t.left:t.right;r="start"==i.originX?c:d}return e.left<0&&(r-=e.left),s="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r,s;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){const s=js(e);let{x:c,y:d}=t,f=this._getOffset(r,"x"),g=this._getOffset(r,"y");f&&(c+=f),g&&(d+=g);let I=0-d,P=d+s.height-i.height,F=this._subtractOverflows(s.width,0-c,c+s.width-i.width),z=this._subtractOverflows(s.height,I,P),te=F*z;return{visibleArea:te,isCompletelyWithinViewport:s.width*s.height===te,fitsInViewportVertically:z===s.height,fitsInViewportHorizontally:F==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,s=i.right-e.x,c=Tp(this._overlayRef.getConfig().minHeight),d=Tp(this._overlayRef.getConfig().minWidth),g=t.fitsInViewportHorizontally||null!=d&&d<=s;return(t.fitsInViewportVertically||null!=c&&c<=r)&&g}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=js(e),s=this._viewportRect,c=Math.max(t.x+r.width-s.width,0),d=Math.max(t.y+r.height-s.height,0),f=Math.max(s.top-i.top-t.y,0),g=Math.max(s.left-i.left-t.x,0);let b=0,E=0;return b=r.width<=s.width?g||-c:t.x<this._viewportMargin?s.left-i.left-t.x:0,E=r.height<=s.height?f||-d:t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:b,y:E},{x:t.x+b,y:t.y+E}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new s_(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let s,c,d,b,E,I;if("top"===e.overlayY)c=t.y,s=i.height-c+this._viewportMargin;else if("bottom"===e.overlayY)d=i.height-t.y+2*this._viewportMargin,s=i.height-d+this._viewportMargin;else{const P=Math.min(i.bottom-t.y+i.top,t.y),F=this._lastBoundingBoxSize.height;s=2*P,c=t.y-P,s>F&&!this._isInitialRender&&!this._growAfterOpen&&(c=t.y-F/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)I=i.width-t.x+this._viewportMargin,b=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)E=t.x,b=i.right-t.x;else{const P=Math.min(i.right-t.x+i.left,t.x),F=this._lastBoundingBoxSize.width;b=2*P,E=t.x-P,b>F&&!this._isInitialRender&&!this._growAfterOpen&&(E=t.x-F/2)}return{top:c,left:E,bottom:d,right:I,width:b,height:s}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;r.height=ri(i.height),r.top=ri(i.top),r.bottom=ri(i.bottom),r.width=ri(i.width),r.left=ri(i.left),r.right=ri(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=ri(s)),c&&(r.maxWidth=ri(c))}this._lastBoundingBoxSize=i,Hs(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Hs(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Hs(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(r){const b=this._viewportRuler.getViewportScrollPosition();Hs(i,this._getExactOverlayY(e,t,b)),Hs(i,this._getExactOverlayX(e,t,b))}else i.position="static";let d="",f=this._getOffset(e,"x"),g=this._getOffset(e,"y");f&&(d+=`translateX(${f}px) `),g&&(d+=`translateY(${g}px)`),i.transform=d.trim(),c.maxHeight&&(r?i.maxHeight=ri(c.maxHeight):s&&(i.maxHeight="")),c.maxWidth&&(r?i.maxWidth=ri(c.maxWidth):s&&(i.maxWidth="")),Hs(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=ri(s.y),r}_getExactOverlayX(t,e,i){let c,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),c=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===c?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=ri(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:QD(t,i),isOriginOutsideView:Ep(t,i),isOverlayClipped:QD(e,i),isOverlayOutsideView:Ep(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?t.offsetX??this._offsetX:t.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&po(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof o.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function Hs(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Tp(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(xp);return e&&"px"!==e?null:parseFloat(t)}return n||null}function js(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Nu="cdk-global-overlay-wrapper";class ih{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Nu),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:c,maxHeight:d}=i,f=!("100%"!==r&&"100vw"!==r||c&&"100%"!==c&&"100vw"!==c),g=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d),b=this._xPosition,E=this._xOffset,I="rtl"===this._overlayRef.getConfig().direction;let P="",F="",z="";f?z="flex-start":"center"===b?(z="center",I?F=E:P=E):I?"left"===b||"end"===b?(z="flex-end",P=E):("right"===b||"start"===b)&&(z="flex-start",F=E):"left"===b||"start"===b?(z="flex-start",P=E):("right"===b||"end"===b)&&(z="flex-end",F=E),t.position=this._cssPosition,t.marginLeft=f?"0":P,t.marginTop=g?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=f?"0":F,e.justifyContent=z,e.alignItems=g?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(Nu),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let rh=(()=>{class n{constructor(e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new ih}flexibleConnectedTo(e){return new kr(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Hd),o.LFG(oe),o.LFG(Yn),o.LFG(nh))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sh=0,vr=(()=>{class n{constructor(e,i,r,s,c,d,f,g,b,E,I,P){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=c,this._injector=d,this._ngZone=f,this._document=g,this._directionality=b,this._location=E,this._outsideClickDispatcher=I,this._animationsModuleType=P}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),c=new hb(e);return c.direction=c.direction||this._directionality.value,new Sp(s,i,r,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+sh++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(o.z2F)),new mA(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(qA),o.LFG(nh),o.LFG(o._Vd),o.LFG(rh),o.LFG(WA),o.LFG(o.zs3),o.LFG(o.R0b),o.LFG(oe),o.LFG(ws),o.LFG(Ne),o.LFG(YA),o.LFG(o.QbO,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const eE={provide:new o.OlP("cdk-connected-overlay-scroll-strategy"),deps:[vr],useFactory:function JD(n){return()=>n.scrollStrategies.reposition()}};let $a=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[vr,eE],imports:[Ud,Ha,Lg,Lg]}),n})();function fb(...n){const t=(0,Fs.jO)(n),{args:e,keys:i}=Gf(n),r=new si.y(s=>{const{length:c}=e;if(!c)return void s.complete();const d=new Array(c);let f=c,g=c;for(let b=0;b<c;b++){let E=!1;(0,Me.Xf)(e[b]).subscribe((0,Gn.x)(s,I=>{E||(E=!0,g--),d[b]=I},()=>f--,void 0,()=>{(!f||!E)&&(g||s.next(i?Ei(i,d):d),s.complete())}))}});return t?r.pipe(sy(t)):r}let pb=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n}),n})(),Ac=(()=>{class n extends pb{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const Hi=new o.OlP("NgValueAccessor"),XA={provide:Hi,useExisting:(0,o.Gpc)(()=>Hl),multi:!0},JA=new o.OlP("CompositionEventMode");let Hl=(()=>{class n extends pb{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function nE(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(JA,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&o.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[o._Bn([XA]),o.qOj]}),n})();function qa(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function iE(n){return null!=n&&"number"==typeof n.length}const Si=new o.OlP("NgValidators"),Qo=new o.OlP("NgAsyncValidators"),gb=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Xo{static min(t){return function kp(n){return t=>{if(qa(t.value)||qa(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function Rp(n){return t=>{if(qa(t.value)||qa(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function o_(n){return qa(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function _b(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function a_(n){return qa(n.value)||gb.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function vb(n){return t=>qa(t.value)||!iE(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function yb(n){return t=>iE(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function l_(n){if(!n)return ah;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(qa(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return Db(t)}static composeAsync(t){return u_(t)}}function ah(n){return null}function rE(n){return null!=n}function bb(n){return(0,o.QGY)(n)?(0,ln.D)(n):n}function wb(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function Cb(n,t){return t.map(e=>e(n))}function oE(n){return n.map(t=>function sE(n){return!n.validate}(t)?t:e=>t.validate(e))}function Db(n){if(!n)return null;const t=n.filter(rE);return 0==t.length?null:function(e){return wb(Cb(e,t))}}function c_(n){return null!=n?Db(oE(n)):null}function u_(n){if(!n)return null;const t=n.filter(rE);return 0==t.length?null:function(e){return fb(Cb(e,t).map(bb)).pipe((0,w.U)(wb))}}function Op(n){return null!=n?u_(oE(n)):null}function Eb(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Sb(n){return n._rawValidators}function xb(n){return n._rawAsyncValidators}function d_(n){return n?Array.isArray(n)?n:[n]:[]}function Pp(n,t){return Array.isArray(n)?n.includes(t):n===t}function Tb(n,t){const e=d_(t);return d_(n).forEach(r=>{Pp(e,r)||e.push(r)}),e}function Mb(n,t){return d_(t).filter(e=>!Pp(n,e))}class Ib{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=c_(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Op(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Ds extends Ib{get formDirective(){return null}get path(){return null}}class Wa extends Ib{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class aE{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Kn=(()=>{class n extends aE{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Wa,2))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[o.qOj]}),n})(),lh=(()=>{class n extends aE{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ds,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[o.qOj]}),n})();const Es="VALID",Ss="INVALID",Rr="PENDING",ch="DISABLED";function p_(n){return(m_(n)?n.validators:n)||null}function uE(n){return Array.isArray(n)?c_(n):n||null}function Pb(n,t){return(m_(t)?t.asyncValidators:n)||null}function dE(n){return Array.isArray(n)?Op(n):n||null}function m_(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function g_(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new o.vHH(1e3,"");if(!i[e])throw new o.vHH(1001,"")}function uh(n,t,e){n._forEachChild((i,r)=>{if(void 0===e[r])throw new o.vHH(1002,"")})}class __{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=uE(this._rawValidators),this._composedAsyncValidatorFn=dE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Es}get invalid(){return this.status===Ss}get pending(){return this.status==Rr}get disabled(){return this.status===ch}get enabled(){return this.status!==ch}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=uE(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=dE(t)}addValidators(t){this.setValidators(Tb(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Tb(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Mb(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Mb(t,this._rawAsyncValidators))}hasValidator(t){return Pp(this._rawValidators,t)}hasAsyncValidator(t){return Pp(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Rr,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ch,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Es,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Es||this.status===Rr)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ch:Es}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Rr,this._hasOwnPendingAsyncValidator=!0;const e=bb(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?ch:this.errors?Ss:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Rr)?Rr:this._anyControlsHaveStatus(Ss)?Ss:Es}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){m_(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}class Fp extends __{constructor(t,e,i){super(p_(e),Pb(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){uh(this,0,t),Object.keys(t).forEach(i=>{g_(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}function v_(n,t){return[...t.path,n]}function dh(n,t){b_(n,t),t.valueAccessor.writeValue(n.value),n.disabled&&t.valueAccessor.setDisabledState?.(!0),function fE(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Fb(n,t)})}(n,t),function mE(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function pE(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Fb(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function y_(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function Lp(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),Bp(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function hh(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function b_(n,t){const e=Sb(n);null!==t.validator?n.setValidators(Eb(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=xb(n);null!==t.asyncValidator?n.setAsyncValidators(Eb(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();hh(t._rawValidators,r),hh(t._rawAsyncValidators,r)}function Bp(n,t){let e=!1;if(null!==n){if(null!==t.validator){const r=Sb(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==t.validator);s.length!==r.length&&(e=!0,n.setValidators(s))}}if(null!==t.asyncValidator){const r=xb(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==t.asyncValidator);s.length!==r.length&&(e=!0,n.setAsyncValidators(s))}}}const i=()=>{};return hh(t._rawValidators,i),hh(t._rawAsyncValidators,i),e}function Fb(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Lb(n,t){b_(n,t)}function Bb(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}function vE(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Vb(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===Hl?e=s:function ak(n){return Object.getPrototypeOf(n.constructor)===Ac}(s)?i=s:r=s}),r||i||e||null}const ck={provide:Ds,useExisting:(0,o.Gpc)(()=>Up)},Vp=(()=>Promise.resolve(null))();let Up=(()=>{class n extends Ds{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new o.vpe,this.form=new Fp({},c_(e),Op(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Vp.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),dh(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Vp.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Vp.then(()=>{const i=this._findContainer(e.path),r=new Fp({});Lb(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Vp.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Vp.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,vE(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Si,10),o.Y36(Qo,10))},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&o.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([ck]),o.qOj]}),n})();function yE(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function bE(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Hp=class extends __{constructor(t=null,e,i){super(p_(e),Pb(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),m_(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=bE(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){yE(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){yE(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){bE(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},CE={provide:Wa,useExisting:(0,o.Gpc)(()=>fh)},jb=(()=>Promise.resolve(null))();let fh=(()=>{class n extends Wa{constructor(e,i,r,s,c){super(),this._changeDetectorRef=c,this.control=new Hp,this._registered=!1,this.update=new o.vpe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Vb(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Bb(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){dh(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){jb.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&(0,o.D6c)(i);jb.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?v_(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ds,9),o.Y36(Si,10),o.Y36(Qo,10),o.Y36(Hi,10),o.Y36(o.sBO,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[o._Bn([CE]),o.qOj,o.TTD]}),n})(),Fu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),gk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const SE=new o.OlP("NgModelWithFormControlWarning"),vk={provide:Ds,useExisting:(0,o.Gpc)(()=>jl)};let jl=(()=>{class n extends Ds{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new o.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Bp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return dh(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Lp(e.control||null,e,!1),function lk(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,vE(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(Lp(i||null,e),(n=>n instanceof Hp)(r)&&(dh(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);Lb(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function gE(n,t){return Bp(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){b_(this.form,this),this._oldForm&&Bp(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Si,10),o.Y36(Qo,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&o.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([vk]),o.qOj,o.TTD]}),n})();const AV={provide:Wa,useExisting:(0,o.Gpc)(()=>Bu)};let Bu=(()=>{class n extends Wa{constructor(e,i,r,s,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new o.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Vb(0,s)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),Bb(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return v_(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(o.Y36(Ds,13),o.Y36(Si,10),o.Y36(Qo,10),o.Y36(Hi,10),o.Y36(SE,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[o._Bn([AV]),o.qOj,o.TTD]}),n})();const TE={provide:Hi,useExisting:(0,o.Gpc)(()=>Gp),multi:!0};function ME(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let Gp=(()=>{class n extends Ac{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=ME(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function IE(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,i){1&e&&o.NdJ("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([TE]),o.qOj]}),n})(),qb=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(ME(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(Gp,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const AE={provide:Hi,useExisting:(0,o.Gpc)(()=>Vu),multi:!0};function kE(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let Vu=(()=>{class n extends Ac{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const r=e.map(s=>this._getOptionId(s));i=(s,c)=>{s._setSelected(r.indexOf(c.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const r=[],s=i.selectedOptions;if(void 0!==s){const c=s;for(let d=0;d<c.length;d++){const g=this._getOptionValue(c[d].value);r.push(g)}}else{const c=i.options;for(let d=0;d<c.length;d++){const f=c[d];if(f.selected){const g=this._getOptionValue(f.value);r.push(g)}}}this.value=r,e(r)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function yk(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,i){1&e&&o.NdJ("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([AE]),o.qOj]}),n})(),RE=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(kE(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(kE(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(Vu,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Dk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[gk]}),n})(),Xb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Dk]}),n})(),gh=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:SE,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Dk]}),n})();class UE extends __{constructor(t,e,i){super(p_(e),Pb(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){uh(this,0,t),t.forEach((i,r)=>{g_(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}}function _h(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Sk=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new n;return e.useNonNullable=!0,e}group(e,i=null){const r=this._reduceControls(e);let s={};return _h(i)?s=i:null!==i&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new Fp(r,s)}control(e,i,r){let s={};return this.useNonNullable?(_h(i)?s=i:(s.validators=i,s.asyncValidators=r),new Hp(e,{...s,nonNullable:!0})):new Hp(e,i,r)}array(e,i,r){const s=e.map(c=>this._createControl(c));return new UE(s,i,r)}_reduceControls(e){const i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){return e instanceof Hp||e instanceof __?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:gh}),n})(),qp=(()=>{class n extends Sk{group(e,i=null){return super.group(e,i)}control(e,i,r){return super.control(e,i,r)}array(e,i,r){return super.array(e,i,r)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:gh}),n})();class HE{}const Gl="*";function yi(n,t){return{type:7,name:n,definitions:t,options:{}}}function nn(n,t=null){return{type:4,styles:t,timings:n}}function D_(n,t=null){return{type:3,steps:n,options:t}}function Jb(n,t=null){return{type:2,steps:n,options:t}}function ft(n){return{type:6,styles:n,offset:null}}function Zt(n,t,e){return{type:0,name:n,styles:t,options:e}}function Uu(n){return{type:5,steps:n}}function on(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function kc(n=null){return{type:9,options:n}}function Hu(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function GE(n){Promise.resolve(null).then(n)}class Wp{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){GE(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class zE{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?GE(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++e==s&&this._onFinish()}),c.onDestroy(()=>{++i==s&&this._onDestroy()}),c.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,d)=>Math.max(c,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const Tk=["connectionContainer"],$E=["inputContainer"],Mk=["label"];function Ik(n,t){1&n&&(o.ynx(0),o.TgZ(1,"div",14),o._UZ(2,"div",15)(3,"div",16)(4,"div",17),o.qZA(),o.TgZ(5,"div",18),o._UZ(6,"div",15)(7,"div",16)(8,"div",17),o.qZA(),o.BQk())}function Ak(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",19),o.NdJ("cdkObserveContent",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.updateOutlineGap())}),o.Hsn(1,1),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)}}function kk(n,t){if(1&n&&(o.ynx(0),o.Hsn(1,2),o.TgZ(2,"span"),o._uU(3),o.qZA(),o.BQk()),2&n){const e=o.oxw(2);o.xp6(3),o.Oqu(e._control.placeholder)}}function Rk(n,t){1&n&&o.Hsn(0,3,["*ngSwitchCase","true"])}function Ok(n,t){1&n&&(o.TgZ(0,"span",23),o._uU(1," *"),o.qZA())}function Pk(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"label",20,21),o.NdJ("cdkObserveContent",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.updateOutlineGap())}),o.YNc(2,kk,4,1,"ng-container",12),o.YNc(3,Rk,1,0,"ng-content",12),o.YNc(4,Ok,2,0,"span",22),o.qZA()}if(2&n){const e=o.oxw();o.ekj("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),o.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),o.uIk("for",e._control.id)("aria-owns",e._control.id),o.xp6(2),o.Q6J("ngSwitchCase",!1),o.xp6(1),o.Q6J("ngSwitchCase",!0),o.xp6(1),o.Q6J("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function Nk(n,t){1&n&&(o.TgZ(0,"div",24),o.Hsn(1,4),o.qZA())}function qE(n,t){if(1&n&&(o.TgZ(0,"div",25),o._UZ(1,"span",26),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.ekj("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function WE(n,t){if(1&n&&(o.TgZ(0,"div"),o.Hsn(1,5),o.qZA()),2&n){const e=o.oxw();o.Q6J("@transitionMessages",e._subscriptAnimationState)}}function Fk(n,t){if(1&n&&(o.TgZ(0,"div",30),o._uU(1),o.qZA()),2&n){const e=o.oxw(2);o.Q6J("id",e._hintLabelId),o.xp6(1),o.Oqu(e.hintLabel)}}function Lk(n,t){if(1&n&&(o.TgZ(0,"div",27),o.YNc(1,Fk,2,2,"div",28),o.Hsn(2,6),o._UZ(3,"div",29),o.Hsn(4,7),o.qZA()),2&n){const e=o.oxw();o.Q6J("@transitionMessages",e._subscriptAnimationState),o.xp6(1),o.Q6J("ngIf",e.hintLabel)}}const YE=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Bk=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let Vk=0;const ZE=new o.OlP("MatError");let Zp=(()=>{class n{constructor(e,i){this.id="mat-error-"+Vk++,e||i.nativeElement.setAttribute("aria-live","polite")}}return n.\u0275fac=function(e){return new(e||n)(o.$8M("aria-live"),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["mat-error"]],hostAttrs:["aria-atomic","true",1,"mat-error"],hostVars:1,hostBindings:function(e,i){2&e&&o.uIk("id",i.id)},inputs:{id:"id"},features:[o._Bn([{provide:ZE,useExisting:n}])]}),n})();const e0={transitionMessages:yi("transitionMessages",[Zt("enter",ft({opacity:1,transform:"translateY(0%)"})),on("void => enter",[ft({opacity:0,transform:"translateY(-5px)"}),nn("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Kp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n}),n})();const Uk=new o.OlP("MatHint");let Gs=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-label"]]}),n})(),XE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const jk=new o.OlP("MatPrefix"),JE=new o.OlP("MatSuffix");let tS=0;const iS=Ga(class{constructor(n){this._elementRef=n}},"primary"),n0=new o.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Qp=new o.OlP("MatFormField");let ju=(()=>{class n extends iS{constructor(e,i,r,s,c,d,f){super(e),this._changeDetectorRef=i,this._dir=r,this._defaults=s,this._platform=c,this._ngZone=d,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Je.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+tS++,this._labelId="mat-form-field-label-"+tS++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==f,this.appearance=s?.appearance||"legacy",s&&(this._hideRequiredMarker=Boolean(s.hideRequiredMarker),s.color&&(this.color=this.defaultColor=s.color))}get appearance(){return this._appearance}set appearance(e){const i=this._appearance;this._appearance=e||this._defaults?.appearance||"legacy","outline"===this._appearance&&i!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Ge(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(Ir(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Ke(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ke(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,_r.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Ir(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Ir(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Ke(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const i=this._control?this._control.ngControl:null;return i&&i[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Va(this._label.nativeElement,"transitionend").pipe(v(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!e||!e.children.length||!e.textContent.trim()){const b=i.querySelectorAll(`${r}, ${s}`);for(let E=0;E<b.length;E++)b[E].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let c=0,d=0;const f=i.querySelectorAll(r),g=i.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const b=i.getBoundingClientRect();if(0===b.width&&0===b.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const E=this._getStartEnd(b),I=e.children,P=this._getStartEnd(I[0].getBoundingClientRect());let F=0;for(let z=0;z<I.length;z++)F+=I[z].offsetWidth;c=Math.abs(P-E)-5,d=F>0?.75*F+10:0}for(let b=0;b<f.length;b++)f[b].style.width=`${c}px`;for(let b=0;b<g.length;b++)g[b].style.width=`${d}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(ws,8),o.Y36(n0,8),o.Y36(Yn),o.Y36(o.R0b),o.Y36(o.QbO,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,Kp,5),o.Suo(r,Kp,7),o.Suo(r,Gs,5),o.Suo(r,Gs,7),o.Suo(r,XE,5),o.Suo(r,ZE,5),o.Suo(r,Uk,5),o.Suo(r,jk,5),o.Suo(r,JE,5)),2&e){let s;o.iGM(s=o.CRH())&&(i._controlNonStatic=s.first),o.iGM(s=o.CRH())&&(i._controlStatic=s.first),o.iGM(s=o.CRH())&&(i._labelChildNonStatic=s.first),o.iGM(s=o.CRH())&&(i._labelChildStatic=s.first),o.iGM(s=o.CRH())&&(i._placeholderChild=s.first),o.iGM(s=o.CRH())&&(i._errorChildren=s),o.iGM(s=o.CRH())&&(i._hintChildren=s),o.iGM(s=o.CRH())&&(i._prefixChildren=s),o.iGM(s=o.CRH())&&(i._suffixChildren=s)}},viewQuery:function(e,i){if(1&e&&(o.Gf(Tk,7),o.Gf($E,5),o.Gf(Mk,5)),2&e){let r;o.iGM(r=o.CRH())&&(i._connectionContainerRef=r.first),o.iGM(r=o.CRH())&&(i._inputContainerRef=r.first),o.iGM(r=o.CRH())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,i){2&e&&o.ekj("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[o._Bn([{provide:Qp,useExisting:n}]),o.qOj],ngContentSelectors:Bk,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,i){1&e&&(o.F$t(YE),o.TgZ(0,"div",0)(1,"div",1,2),o.NdJ("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),o.YNc(3,Ik,9,0,"ng-container",3),o.YNc(4,Ak,2,1,"div",4),o.TgZ(5,"div",5,6),o.Hsn(7),o.TgZ(8,"span",7),o.YNc(9,Pk,5,16,"label",8),o.qZA()(),o.YNc(10,Nk,2,0,"div",9),o.qZA(),o.YNc(11,qE,2,4,"div",10),o.TgZ(12,"div",11),o.YNc(13,WE,2,1,"div",12),o.YNc(14,Lk,5,2,"div",13),o.qZA()()),2&e&&(o.xp6(3),o.Q6J("ngIf","outline"==i.appearance),o.xp6(1),o.Q6J("ngIf",i._prefixChildren.length),o.xp6(5),o.Q6J("ngIf",i._hasFloatingLabel()),o.xp6(1),o.Q6J("ngIf",i._suffixChildren.length),o.xp6(1),o.Q6J("ngIf","outline"!=i.appearance),o.xp6(1),o.Q6J("ngSwitch",i._getDisplayedMessages()),o.xp6(1),o.Q6J("ngSwitchCase","error"),o.xp6(1),o.Q6J("ngSwitchCase","hint"))},dependencies:[Fn,Rs,Sr,Uf],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[e0.transitionMessages]},changeDetection:0}),n})(),E_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[fi,mt,Fl,mt]}),n})();function Qn(n,t){return(0,gi.e)((e,i)=>{let r=null,s=0,c=!1;const d=()=>c&&!r&&i.complete();e.subscribe((0,Gn.x)(i,f=>{r?.unsubscribe();let g=0;const b=s++;(0,Me.Xf)(n(f,b)).subscribe(r=(0,Gn.x)(i,E=>i.next(t?t(f,E,b,g++):E),()=>{r=null,d()}))},()=>{c=!0,d()}))})}function r0(n){return(0,w.U)(()=>n)}const Qk={provide:new o.OlP("mat-autocomplete-scroll-strategy"),deps:[vr],useFactory:function Kk(n){return()=>n.scrollStrategies.reposition()}};let Xp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Qk],imports:[$a,r_,mt,fi,qo,r_,mt]}),n})(),oS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Qf,mt,mt]}),n})();function aS(n,t){}class S_{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let lS=(()=>{class n extends jg{constructor(e,i,r,s,c,d,f,g){super(),this._elementRef=e,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=c,this._ngZone=d,this._overlayRef=f,this._focusMonitor=g,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=b=>{this._portalOutlet.hasAttached();const E=this._portalOutlet.attachDomPortal(b);return this._contentAttached(),E},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._config.restoreFocus;let i=null;if("string"==typeof e?i=this._document.querySelector(e):"boolean"==typeof e?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=Kr(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=Kr();return e===i||e.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Kr())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(vy),o.Y36(oe,8),o.Y36(S_),o.Y36(Ba),o.Y36(o.R0b),o.Y36(Sp),o.Y36($o))},n.\u0275cmp=o.Xpm({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(e,i){if(1&e&&o.Gf(jy,7),2&e){let r;o.iGM(r=o.CRH())&&(i._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(e,i){2&e&&o.uIk("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[o.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&o.YNc(0,aS,0,0,"ng-template",0)},dependencies:[jy],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class x_{constructor(t,e){this.overlayRef=t,this.config=e,this.closed=new Je.x,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!bs(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(t,e){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this.overlayRef.dispose(),i.next(t),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}}const cS=new o.OlP("DialogScrollStrategy"),sR=new o.OlP("DialogData"),oR=new o.OlP("DefaultDialogConfig"),aR={provide:cS,deps:[vr],useFactory:function Jp(n){return()=>n.scrollStrategies.block()}};let s0=0,Jo=(()=>{class n{constructor(e,i,r,s,c,d){this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Je.x,this._afterOpenedAtThisLevel=new Je.x,this._ariaHiddenElements=new Map,this.afterAllClosed=Jd(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ir(void 0))),this._scrollStrategy=d}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(e,i){(i={...this._defaultOptions||new S_,...i}).id=i.id||"cdk-dialog-"+s0++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),c=this._overlay.create(s),d=new x_(c,i),f=this._attachContainer(c,d,i);return d.containerInstance=f,this._attachDialogContent(e,d,f,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(d),d.closed.subscribe(()=>this._removeOpenDialog(d,!0)),this.afterOpened.next(d),d}closeAll(){o0(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){o0(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),o0(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const i=new hb({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,r){const s=r.injector||r.viewContainerRef?.injector,c=[{provide:S_,useValue:r},{provide:x_,useValue:i},{provide:Sp,useValue:e}];let d;r.container?"function"==typeof r.container?d=r.container:(d=r.container.type,c.push(...r.container.providers(r))):d=lS;const f=new Uy(d,r.viewContainerRef,o.zs3.create({parent:s||this._injector,providers:c}),r.componentFactoryResolver);return e.attach(f).instance}_attachDialogContent(e,i,r,s){if(e instanceof o.Rgc){const c=this._createInjector(s,i,r,void 0);let d={$implicit:s.data,dialogRef:i};s.templateContext&&(d={...d,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new Hy(e,null,d,c))}else{const c=this._createInjector(s,i,r,this._injector),d=r.attachComponentPortal(new Uy(e,s.viewContainerRef,c,s.componentFactoryResolver));i.componentInstance=d.instance}}_createInjector(e,i,r,s){const c=e.injector||e.viewContainerRef?.injector,d=[{provide:sR,useValue:e.data},{provide:x_,useValue:i}];return e.providers&&("function"==typeof e.providers?d.push(...e.providers(i,e,r)):d.push(...e.providers)),e.direction&&(!c||!c.get(ws,null,o.XFs.Optional))&&d.push({provide:ws,useValue:{value:e.direction,change:ct()}}),o.zs3.create({parent:c||s,providers:d})}_removeOpenDialog(e,i){const r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,c)=>{s?c.setAttribute("aria-hidden",s):c.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(vr),o.LFG(o.zs3),o.LFG(oR,8),o.LFG(n,12),o.LFG(nh),o.LFG(cS))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function o0(n,t){let e=n.length;for(;e--;)t(n[e])}let em=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Jo,aR],imports:[$a,Ha,Qf,Ha]}),n})(),lR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[em,mt,Ha,mt]}),n})();const uS=["mat-button",""],c0=["*"],hR=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],ZV=Ga(ku(Vl(class{constructor(n){this._elementRef=n}})));let ea=(()=>{class n extends ZV{constructor(e,i,r){super(e),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of hR)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,i){e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36($o),o.Y36(o.QbO,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,i){if(1&e&&o.Gf(za,5),2&e){let r;o.iGM(r=o.CRH())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,i){2&e&&(o.uIk("disabled",i.disabled||null),o.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[o.qOj],attrs:uS,ngContentSelectors:c0,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,i){1&e&&(o.F$t(),o.TgZ(0,"span",0),o.Hsn(1),o.qZA(),o._UZ(2,"span",1)(3,"span",2)),2&e&&(o.xp6(2),o.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),o.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},dependencies:[za],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),vh=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[er,mt,mt]}),n})(),_S=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[mt,er,mt]}),n})();const vS=["*",[["mat-card-footer"]]],pR=["*","mat-card-footer"],yS=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],bS=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let gR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),n})(),Or=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),yh=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),n})(),_R=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("mat-card-actions-align-end","end"===i.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),n})(),bR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-card-avatar"]}),n})(),_o=(()=>{class n{constructor(e){this._animationMode=e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.QbO,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)},exportAs:["matCard"],ngContentSelectors:pR,decls:2,vars:0,template:function(e,i){1&e&&(o.F$t(vS),o.Hsn(0),o.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),n})(),wR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:bS,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(e,i){1&e&&(o.F$t(yS),o.Hsn(0),o.TgZ(1,"div",0),o.Hsn(2,1),o.qZA(),o.Hsn(3,2))},encapsulation:2,changeDetection:0}),n})(),DR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[mt,mt]}),n})(),k_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),JV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[er,mt,Fl,k_,mt,k_]}),n})();const kS=new o.OlP("mat-chips-default-options");let RR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Ou,{provide:kS,useValue:{separatorKeyCodes:[13]}}],imports:[mt]}),n})();function tm(n,t){const e=(0,mo.m)(n)?n:()=>n,i=r=>r.error(e());return new si.y(t?r=>t.schedule(i,0,r):i)}function Ka(n){return(0,gi.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,Gn.x)(e,void 0,void 0,c=>{s=(0,Me.Xf)(n(c,Ka(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function g0(n){return(0,gi.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}var LS=V(3099);function Gu(n,t){return(0,mo.m)(t)?(0,Ui.z)(n,t,1):(0,Ui.z)(n,1)}class t2{}class zu{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),s=r.toLowerCase(),c=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const r=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof zu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new zu;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof zu?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let c=this.headers.get(e);if(!c)return;c=c.filter(d=>-1===s.indexOf(d)),0===c.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class n2{encodeKey(t){return nm(t)}encodeValue(t){return nm(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const r2=/%(\d[a-f0-9])/gi,BS={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function nm(n){return encodeURIComponent(n).replace(r2,(t,e)=>BS[e]??t)}function im(n){return`${n}`}class zl{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new n2,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function O_(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[c,d]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],f=e.get(c)||[];f.push(d),e.set(c,f)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],r=Array.isArray(i)?i.map(im):[im(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new zl({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(im(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(im(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class _0{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function US(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function v0(n){return typeof Blob<"u"&&n instanceof Blob}function OR(n){return typeof FormData<"u"&&n instanceof FormData}class rm{constructor(t,e,i,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function VS(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new zu),this.context||(this.context=new _0),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=e;else{const d=e.indexOf("?");this.urlWithParams=e+(-1===d?"?":d<e.length-1?"&":"")+c}}else this.params=new zl,this.urlWithParams=e}serializeBody(){return null===this.body?null:US(this.body)||v0(this.body)||OR(this.body)||function PR(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof zl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||OR(this.body)?null:v0(this.body)?this.body.type||null:US(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof zl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,c=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,d=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let f=t.headers||this.headers,g=t.params||this.params;const b=t.context??this.context;return void 0!==t.setHeaders&&(f=Object.keys(t.setHeaders).reduce((E,I)=>E.set(I,t.setHeaders[I]),f)),t.setParams&&(g=Object.keys(t.setParams).reduce((E,I)=>E.set(I,t.setParams[I]),g)),new rm(e,i,s,{params:g,headers:f,context:b,reportProgress:d,responseType:r,withCredentials:c})}}var yr=(()=>((yr=yr||{})[yr.Sent=0]="Sent",yr[yr.UploadProgress=1]="UploadProgress",yr[yr.ResponseHeader=2]="ResponseHeader",yr[yr.DownloadProgress=3]="DownloadProgress",yr[yr.Response=4]="Response",yr[yr.User=5]="User",yr))();class jS extends class P_{constructor(t,e=200,i="OK"){this.headers=t.headers||new zu,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(t={}){super(t),this.type=yr.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new jS({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function GS(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let zS=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof rm)s=e;else{let f,g;f=r.headers instanceof zu?r.headers:new zu(r.headers),r.params&&(g=r.params instanceof zl?r.params:new zl({fromObject:r.params})),s=new rm(e,i,void 0!==r.body?r.body:null,{headers:f,context:r.context,params:g,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const c=ct(s).pipe(Gu(f=>this.handler.handle(f)));if(e instanceof rm||"events"===r.observe)return c;const d=c.pipe(Ln(f=>f instanceof jS));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,w.U)(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return d.pipe((0,w.U)(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return d.pipe((0,w.U)(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));default:return d.pipe((0,w.U)(f=>f.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new zl).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,GS(r,i))}post(e,i,r={}){return this.request("POST",e,GS(r,i))}put(e,i,r={}){return this.request("PUT",e,GS(r,i))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(t2))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const ZS=["*"];let Ch;function sm(n){return function $l(){if(void 0===Ch&&(Ch=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(Ch=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return Ch}()?.createHTML(n)||n}function GR(n){return Error(`Unable to find icon with the name "${n}"`)}function KS(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function QS(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class qu{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}}let om=(()=>{class n{constructor(e,i,r,s){this._httpClient=e,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,s){return this._addSvgIconConfig(e,i,new qu(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,s){const c=this._sanitizer.sanitize(o.q3G.HTML,r);if(!c)throw QS(r);const d=sm(c);return this._addSvgIconConfig(e,i,new qu("",d,s))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new qu(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){const s=this._sanitizer.sanitize(o.q3G.HTML,i);if(!s)throw QS(i);const c=sm(s);return this._addSvgIconSetConfig(e,new qu("",c,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const i=this._sanitizer.sanitize(o.q3G.RESOURCE_URL,e);if(!i)throw KS(e);const r=this._cachedIconsByUrl.get(i);return r?ct(N_(r)):this._loadSvgIconFromConfig(new qu(e,null)).pipe((0,ii.b)(s=>this._cachedIconsByUrl.set(i,s)),(0,w.U)(s=>N_(s)))}getNamedSvgIcon(e,i=""){const r=y0(i,e);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const c=this._iconSetConfigs.get(i);return c?this._getSvgFromIconSetConfigs(e,c):tm(GR(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?ct(N_(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,w.U)(i=>N_(i)))}_getSvgFromIconSetConfigs(e,i){const r=this._extractIconWithNameFromAnySet(e,i);return r?ct(r):fb(i.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(Ka(d=>{const g=`Loading icon set URL: ${this._sanitizer.sanitize(o.q3G.RESOURCE_URL,c.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(g)),ct(null)})))).pipe((0,w.U)(()=>{const c=this._extractIconWithNameFromAnySet(e,i);if(!c)throw GR(e);return c}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const c=this._svgElementFromConfig(s),d=this._extractSvgIconFromSet(c,e,s.options);if(d)return d}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,ii.b)(i=>e.svgText=i),(0,w.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?ct(null):this._fetchIcon(e).pipe((0,ii.b)(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){const s=e.querySelector(`[id="${i}"]`);if(!s)return null;const c=s.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,r);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),r);const d=this._svgElementFromString(sm("<svg></svg>"));return d.appendChild(c),this._setSvgAttributes(d,r)}_svgElementFromString(e){const i=this._document.createElement("DIV");i.innerHTML=e;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const i=this._svgElementFromString(sm("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){const{name:c,value:d}=r[s];"id"!==c&&i.setAttribute(c,d)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){const{url:i,options:r}=e,s=r?.withCredentials??!1;if(!this._httpClient)throw function zR(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const c=this._sanitizer.sanitize(o.q3G.RESOURCE_URL,i);if(!c)throw KS(i);const d=this._inProgressUrlFetches.get(c);if(d)return d;const f=this._httpClient.get(c,{responseType:"text",withCredentials:s}).pipe((0,w.U)(g=>sm(g)),g0(()=>this._inProgressUrlFetches.delete(c)),(0,LS.B)());return this._inProgressUrlFetches.set(c,f),f}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(y0(e,i),r),this}_addSvgIconSetConfig(e,i){const r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){const i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,e);if(s)return g2(s)?new qu(s.url,null,s.options):new qu(s,null)}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zS,8),o.LFG(uc),o.LFG(oe,8),o.LFG(o.qLn))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function N_(n){return n.cloneNode(!0)}function y0(n,t){return n+":"+t}function g2(n){return!(!n.url||!n.options)}const b0=Ga(class{constructor(n){this._elementRef=n}}),XS=new o.OlP("MAT_ICON_DEFAULT_OPTIONS"),JS=new o.OlP("mat-icon-location",{providedIn:"root",factory:function qR(){const n=(0,o.f3M)(oe),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),w0=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],ex=w0.map(n=>`[${n}]`).join(", "),F_=/^url\(['"]?#(.*?)['"]?\)$/;let Rc=(()=>{class n extends b0{constructor(e,i,r,s,c,d){super(e),this._iconRegistry=i,this._location=s,this._errorHandler=c,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Cn.w0.EMPTY,d&&(d.color&&(this.color=this.defaultColor=d.color),d.fontSet&&(this.fontSet=d.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=Ge(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=e.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),i.forEach(r=>e.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(c=>{s.setAttribute(c.name,`url('${e}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(e){const i=e.querySelectorAll(ex),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)w0.forEach(c=>{const d=i[s],f=d.getAttribute(c),g=f?f.match(F_):null;if(g){let b=r.get(d);b||(b=[],r.set(d,b)),b.push({name:c,value:g[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(v(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(om),o.$8M("aria-hidden"),o.Y36(JS),o.Y36(o.qLn),o.Y36(XS,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,i){2&e&&(o.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),o.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[o.qOj],ngContentSelectors:ZS,decls:1,vars:0,template:function(e,i){1&e&&(o.F$t(),o.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),C0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[mt,mt]}),n})(),lm=(()=>{class n{constructor(){this.changes=new Je.x,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const D0={provide:lm,deps:[[new o.FiY,new o.tp0,lm]],useFactory:function eO(n){return n||new lm}};let ax=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[D0,Ou],imports:[mt,fi,Ha,vh,PD,C0,er,mt]}),n})();const S0=ar({passive:!0});let lx=(()=>{class n{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return _.E;const i=_i(e),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new Je.x,c="cdk-text-field-autofilled",d=f=>{"cdk-text-field-autofill-start"!==f.animationName||i.classList.contains(c)?"cdk-text-field-autofill-end"===f.animationName&&i.classList.contains(c)&&(i.classList.remove(c),this._ngZone.run(()=>s.next({target:f.target,isAutofilled:!1}))):(i.classList.add(c),this._ngZone.run(()=>s.next({target:f.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",d,S0),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",d,S0)}}),s}stopMonitoring(e){const i=_i(e),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Yn),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nO=(()=>{class n{constructor(e,i,r,s){this._elementRef=e,this._platform=i,this._ngZone=r,this._destroyed=new Je.x,this._enabled=!0,this._previousMinRows=-1,this._isViewInited=!1,this._handleFocusEvent=c=>{this._hasFocus="focus"===c.type},this._document=s,this._textareaElement=this._elementRef.nativeElement}get minRows(){return this._minRows}set minRows(e){this._minRows=tn(e),this._setMinHeight()}get maxRows(){return this._maxRows}set maxRows(e){this._maxRows=tn(e),this._setMaxHeight()}get enabled(){return this._enabled}set enabled(e){e=Ge(e),this._enabled!==e&&((this._enabled=e)?this.resizeToFitContent(!0):this.reset())}get placeholder(){return this._textareaElement.placeholder}set placeholder(e){this._cachedPlaceholderHeight=void 0,e?this._textareaElement.setAttribute("placeholder",e):this._textareaElement.removeAttribute("placeholder"),this._cacheTextareaPlaceholderHeight()}_setMinHeight(){const e=this.minRows&&this._cachedLineHeight?this.minRows*this._cachedLineHeight+"px":null;e&&(this._textareaElement.style.minHeight=e)}_setMaxHeight(){const e=this.maxRows&&this._cachedLineHeight?this.maxRows*this._cachedLineHeight+"px":null;e&&(this._textareaElement.style.maxHeight=e)}ngAfterViewInit(){this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular(()=>{Va(this._getWindow(),"resize").pipe(My(16),Ke(this._destroyed)).subscribe(()=>this.resizeToFitContent(!0)),this._textareaElement.addEventListener("focus",this._handleFocusEvent),this._textareaElement.addEventListener("blur",this._handleFocusEvent)}),this._isViewInited=!0,this.resizeToFitContent(!0))}ngOnDestroy(){this._textareaElement.removeEventListener("focus",this._handleFocusEvent),this._textareaElement.removeEventListener("blur",this._handleFocusEvent),this._destroyed.next(),this._destroyed.complete()}_cacheTextareaLineHeight(){if(this._cachedLineHeight)return;let e=this._textareaElement.cloneNode(!1);e.rows=1,e.style.position="absolute",e.style.visibility="hidden",e.style.border="none",e.style.padding="0",e.style.height="",e.style.minHeight="",e.style.maxHeight="",e.style.overflow="hidden",this._textareaElement.parentNode.appendChild(e),this._cachedLineHeight=e.clientHeight,e.remove(),this._setMinHeight(),this._setMaxHeight()}_measureScrollHeight(){const e=this._textareaElement,i=e.style.marginBottom||"",r=this._platform.FIREFOX,s=r&&this._hasFocus,c=r?"cdk-textarea-autosize-measuring-firefox":"cdk-textarea-autosize-measuring";s&&(e.style.marginBottom=`${e.clientHeight}px`),e.classList.add(c);const d=e.scrollHeight-4;return e.classList.remove(c),s&&(e.style.marginBottom=i),d}_cacheTextareaPlaceholderHeight(){if(!this._isViewInited||null!=this._cachedPlaceholderHeight)return;if(!this.placeholder)return void(this._cachedPlaceholderHeight=0);const e=this._textareaElement.value;this._textareaElement.value=this._textareaElement.placeholder,this._cachedPlaceholderHeight=this._measureScrollHeight(),this._textareaElement.value=e}ngDoCheck(){this._platform.isBrowser&&this.resizeToFitContent()}resizeToFitContent(e=!1){if(!this._enabled||(this._cacheTextareaLineHeight(),this._cacheTextareaPlaceholderHeight(),!this._cachedLineHeight))return;const i=this._elementRef.nativeElement,r=i.value;if(!e&&this._minRows===this._previousMinRows&&r===this._previousValue)return;const s=this._measureScrollHeight(),c=Math.max(s,this._cachedPlaceholderHeight||0);i.style.height=`${c}px`,this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame<"u"?requestAnimationFrame(()=>this._scrollToCaretPosition(i)):setTimeout(()=>this._scrollToCaretPosition(i))}),this._previousValue=r,this._previousMinRows=this._minRows}reset(){void 0!==this._initialHeight&&(this._textareaElement.style.height=this._initialHeight)}_noopInputHandler(){}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollToCaretPosition(e){const{selectionStart:i,selectionEnd:r}=e;!this._destroyed.isStopped&&this._hasFocus&&e.setSelectionRange(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Yn),o.Y36(o.R0b),o.Y36(oe,8))},n.\u0275dir=o.lG2({type:n,selectors:[["textarea","cdkTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize"],hostBindings:function(e,i){1&e&&o.NdJ("input",function(){return i._noopInputHandler()})},inputs:{minRows:["cdkAutosizeMinRows","minRows"],maxRows:["cdkAutosizeMaxRows","maxRows"],enabled:["cdkTextareaAutosize","enabled"],placeholder:"placeholder"},exportAs:["cdkTextareaAutosize"]}),n})(),x0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const iO=new o.OlP("MAT_INPUT_VALUE_ACCESSOR"),ux=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let T0=0;const rO=Zo(class{constructor(n,t,e,i){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=i,this.stateChanges=new Je.x}});let Eh=(()=>{class n extends rO{constructor(e,i,r,s,c,d,f,g,b,E){super(d,s,c,r),this._elementRef=e,this._platform=i,this._autofillMonitor=g,this._formField=E,this._uid="mat-input-"+T0++,this.focused=!1,this.stateChanges=new Je.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(F=>xl().has(F)),this._iOSKeyupListener=F=>{const z=F.target;!z.value&&0===z.selectionStart&&0===z.selectionEnd&&(z.setSelectionRange(1,1),z.setSelectionRange(0,0))};const I=this._elementRef.nativeElement,P=I.nodeName.toLowerCase();this._inputValueAccessor=f||I,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&b.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===P,this._isTextarea="textarea"===P,this._isInFormField=!!E,this._isNativeSelect&&(this.controlType=I.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=Ge(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Xo.required)??!1}set required(e){this._required=Ge(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&xl().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Ge(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const e=this._formField,i=e&&"legacy"===e.appearance&&!e._hasLabel?.()?null:this.placeholder;if(i!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=i,i?r.setAttribute("placeholder",i):r.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){ux.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Yn),o.Y36(Wa,10),o.Y36(Up,8),o.Y36(jl,8),o.Y36(Ou),o.Y36(iO,10),o.Y36(lx),o.Y36(o.R0b),o.Y36(Qp,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(e,i){1&e&&o.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&e&&(o.Ikx("disabled",i.disabled)("required",i.required),o.uIk("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),o.ekj("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[o._Bn([{provide:Kp,useExisting:n}]),o.qOj,o.TTD]}),n})(),M2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Ou],imports:[x0,E_,mt,x0,E_]}),n})(),p=(()=>{class n{constructor(){this.changes=new Je.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(e,i){return`${e} \u2013 ${i}`}formatYearRangeLabel(e,i){return`${e} to ${i}`}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const BW={provide:new o.OlP("mat-datepicker-scroll-strategy"),deps:[vr],useFactory:function LW(n){return()=>n.scrollStrategies.reposition()}};let GW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[p,BW],imports:[fi,vh,$a,Qf,Ha,mt,qo]}),n})();function zW(n,t){}const B_={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},$W={dialogContainer:yi("dialogContainer",[Zt("void, exit",ft({opacity:0,transform:"scale(0.7)"})),Zt("enter",ft({transform:"none"})),on("* => enter",D_([nn("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",ft({transform:"none",opacity:1})),Hu("@*",kc(),{optional:!0})]),B_),on("* => void, * => exit",D_([nn("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",ft({opacity:0})),Hu("@*",kc(),{optional:!0})]),B_)])};class vx{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=B_.params.enterAnimationDuration,this.exitAnimationDuration=B_.params.exitAnimationDuration}}let qW=(()=>{class n extends lS{constructor(e,i,r,s,c,d,f,g){super(e,i,r,s,c,d,f,g),this._animationStateChanged=new o.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(vy),o.Y36(oe,8),o.Y36(vx),o.Y36(Ba),o.Y36(o.R0b),o.Y36(Sp),o.Y36($o))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],features:[o.qOj],decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})(),WW=(()=>{class n extends qW{constructor(e,i,r,s,c,d,f,g,b){super(e,i,r,s,c,d,f,b),this._changeDetectorRef=g,this._state="enter"}_onAnimationDone({toState:e,totalTime:i}){"enter"===e?this._openAnimationDone(i):"exit"===e&&this._animationStateChanged.next({state:"closed",totalTime:i})}_onAnimationStart({toState:e,totalTime:i}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||B_.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||B_.params.exitAnimationDuration}}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(vy),o.Y36(oe,8),o.Y36(vx),o.Y36(Ba),o.Y36(o.R0b),o.Y36(Sp),o.Y36(o.sBO),o.Y36($o))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(e,i){1&e&&o.WFA("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&e&&(o.Ikx("id",i._config.id),o.uIk("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),o.d8E("@dialogContainer",i._getAnimationState()))},features:[o.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&o.YNc(0,zW,0,0,"ng-template",0)},dependencies:[jy],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[$W.dialogContainer]}}),n})();class YW{constructor(t,e,i){this._ref=t,this._containerInstance=i,this._afterOpened=new Je.x,this._beforeClosed=new Je.x,this._state=0,this.disableClose=e.disableClose,this.id=t.id,i._animationStateChanged.pipe(Ln(r=>"opened"===r.state),v(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Ln(r=>"closed"===r.state),v(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,_r.T)(this.backdropClick(),this.keydownEvents().pipe(Ln(r=>27===r.keyCode&&!this.disableClose&&!bs(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function ZW(n,t,e){n._closeInteractionType=t,n.close(e)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(Ln(e=>"closing"===e.state),v(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const KW=new o.OlP("MatDialogData"),QW=new o.OlP("mat-dialog-default-options"),R2=new o.OlP("mat-dialog-scroll-strategy"),JW={provide:R2,deps:[vr],useFactory:function XW(n){return()=>n.scrollStrategies.block()}};let eY=0,tY=(()=>{class n{constructor(e,i,r,s,c,d,f,g,b,E){this._overlay=e,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=f,this._dialogContainerType=g,this._dialogDataToken=b,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Je.x,this._afterOpenedAtThisLevel=new Je.x,this._idPrefix="mat-dialog-",this.afterAllClosed=Jd(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ir(void 0))),this._scrollStrategy=d,this._dialog=i.get(Jo)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,i){let r;(i={...this._defaultOptions||new vx,...i}).id=i.id||`${this._idPrefix}${eY++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(e,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:vx,useValue:i},{provide:S_,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(c,d,f)=>(r=new this._dialogRefConstructor(c,i,f),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:f},{provide:this._dialogDataToken,useValue:d.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const c=this.openDialogs.indexOf(r);c>-1&&(this.openDialogs.splice(c,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),nY=(()=>{class n extends tY{constructor(e,i,r,s,c,d,f,g){super(e,i,s,d,f,c,YW,WW,KW,g)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(vr),o.LFG(o.zs3),o.LFG(Ne,8),o.LFG(QW,8),o.LFG(R2),o.LFG(n,12),o.LFG(nh),o.LFG(o.QbO,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),iY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[nY,JW],imports:[em,$a,Ha,mt,mt]}),n})(),O2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[mt,mt]}),n})(),rY=0;const aO=new o.OlP("CdkAccordion");let sY=(()=>{class n{constructor(){this._stateChanges=new Je.x,this._openCloseAllActions=new Je.x,this.id="cdk-accordion-"+rY++,this._multi=!1}get multi(){return this._multi}set multi(e){this._multi=Ge(e)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[o._Bn([{provide:aO,useExisting:n}]),o.TTD]}),n})(),oY=0,aY=(()=>{class n{constructor(e,i,r){this.accordion=e,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=Cn.w0.EMPTY,this.closed=new o.vpe,this.opened=new o.vpe,this.destroyed=new o.vpe,this.expandedChange=new o.vpe,this.id="cdk-accordion-child-"+oY++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,c)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===c&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(e){e=Ge(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=Ge(e)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(aO,12),o.Y36(o.sBO),o.Y36(hp))},n.\u0275dir=o.lG2({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[o._Bn([{provide:aO,useValue:void 0}])]}),n})(),lY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const cY=["body"];function uY(n,t){}const dY=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],hY=["mat-expansion-panel-header","*","mat-action-row"];function fY(n,t){if(1&n&&o._UZ(0,"span",2),2&n){const e=o.oxw();o.Q6J("@indicatorRotate",e._getExpandedState())}}const pY=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],mY=["mat-panel-title","mat-panel-description","*"],lO=new o.OlP("MAT_ACCORDION"),P2="225ms cubic-bezier(0.4,0.0,0.2,1)",N2={indicatorRotate:yi("indicatorRotate",[Zt("collapsed, void",ft({transform:"rotate(0deg)"})),Zt("expanded",ft({transform:"rotate(180deg)"})),on("expanded <=> collapsed, void => collapsed",nn(P2))]),bodyExpansion:yi("bodyExpansion",[Zt("collapsed, void",ft({height:"0px",visibility:"hidden"})),Zt("expanded",ft({height:"*",visibility:"visible"})),on("expanded <=> collapsed, void => collapsed",nn(P2))])},F2=new o.OlP("MAT_EXPANSION_PANEL");let gY=(()=>{class n{constructor(e,i){this._template=e,this._expansionPanel=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(F2,8))},n.\u0275dir=o.lG2({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),_Y=0;const L2=new o.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let B2=(()=>{class n extends aY{constructor(e,i,r,s,c,d,f){super(e,i,r),this._viewContainerRef=s,this._animationMode=d,this._hideToggle=!1,this.afterExpand=new o.vpe,this.afterCollapse=new o.vpe,this._inputChanges=new Je.x,this._headerId="mat-expansion-panel-header-"+_Y++,this._bodyAnimationDone=new Je.x,this.accordion=e,this._document=c,this._bodyAnimationDone.pipe(B((g,b)=>g.fromState===b.fromState&&g.toState===b.toState)).subscribe(g=>{"void"!==g.fromState&&("expanded"===g.toState?this.afterExpand.emit():"collapsed"===g.toState&&this.afterCollapse.emit())}),f&&(this.hideToggle=f.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=Ge(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Ir(null),Ln(()=>this.expanded&&!this._portal),v(1)).subscribe(()=>{this._portal=new Hy(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,i=this._body.nativeElement;return e===i||i.contains(e)}return!1}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(lO,12),o.Y36(o.sBO),o.Y36(hp),o.Y36(o.s_b),o.Y36(oe),o.Y36(o.QbO,8),o.Y36(L2,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,gY,5),2&e){let s;o.iGM(s=o.CRH())&&(i._lazyContent=s.first)}},viewQuery:function(e,i){if(1&e&&o.Gf(cY,5),2&e){let r;o.iGM(r=o.CRH())&&(i._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,i){2&e&&o.ekj("mat-expanded",i.expanded)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-expansion-panel-spacing",i._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[o._Bn([{provide:lO,useValue:void 0},{provide:F2,useExisting:n}]),o.qOj,o.TTD],ngContentSelectors:hY,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,i){1&e&&(o.F$t(dY),o.Hsn(0),o.TgZ(1,"div",0,1),o.NdJ("@bodyExpansion.done",function(s){return i._bodyAnimationDone.next(s)}),o.TgZ(3,"div",2),o.Hsn(4,1),o.YNc(5,uY,0,0,"ng-template",3),o.qZA(),o.Hsn(6,2),o.qZA()),2&e&&(o.xp6(1),o.Q6J("@bodyExpansion",i._getExpandedState())("id",i.id),o.uIk("aria-labelledby",i._headerId),o.xp6(4),o.Q6J("cdkPortalOutlet",i._portal))},dependencies:[jy],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[N2.bodyExpansion]},changeDetection:0}),n})();class vY{}const yY=Ru(vY);let V2=(()=>{class n extends yY{constructor(e,i,r,s,c,d,f){super(),this.panel=e,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=d,this._parentChangeSubscription=Cn.w0.EMPTY;const g=e.accordion?e.accordion._stateChanges.pipe(Ln(b=>!(!b.hideToggle&&!b.togglePosition))):_.E;this.tabIndex=parseInt(f||"")||0,this._parentChangeSubscription=(0,_r.T)(e.opened,e.closed,g,e._inputChanges.pipe(Ln(b=>!!(b.hideToggle||b.disabled||b.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(Ln(()=>e._containsFocus())).subscribe(()=>r.focusVia(i,"program")),c&&(this.expandedHeight=c.expandedHeight,this.collapsedHeight=c.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:bs(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,i){e?this._focusMonitor.focusVia(this._element,e,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(B2,1),o.Y36(o.SBq),o.Y36($o),o.Y36(o.sBO),o.Y36(L2,8),o.Y36(o.QbO,8),o.$8M("tabindex"))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,i){1&e&&o.NdJ("click",function(){return i._toggle()})("keydown",function(s){return i._keydown(s)}),2&e&&(o.uIk("id",i.panel._headerId)("tabindex",i.tabIndex)("aria-controls",i._getPanelId())("aria-expanded",i._isExpanded())("aria-disabled",i.panel.disabled),o.Udp("height",i._getHeaderHeight()),o.ekj("mat-expanded",i._isExpanded())("mat-expansion-toggle-indicator-after","after"===i._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===i._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[o.qOj],ngContentSelectors:mY,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,i){1&e&&(o.F$t(pY),o.TgZ(0,"span",0),o.Hsn(1),o.Hsn(2,1),o.Hsn(3,2),o.qZA(),o.YNc(4,fY,1,1,"span",1)),2&e&&(o.ekj("mat-content-hide-toggle",!i._showToggle()),o.xp6(4),o.Q6J("ngIf",i._showToggle()))},dependencies:[Fn],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[N2.indicatorRotate]},changeDetection:0}),n})(),bY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),n})(),wY=(()=>{class n extends sY{constructor(){super(...arguments),this._ownHeaders=new o.n_E,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(e){this._hideToggle=Ge(e)}ngAfterContentInit(){this._headers.changes.pipe(Ir(this._headers)).subscribe(e=>{this._ownHeaders.reset(e.filter(i=>i.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new Zf(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(e){this._keyManager.onKeydown(e)}_handleHeaderFocus(e){this._keyManager.updateActiveItem(e)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["mat-accordion"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,V2,5),2&e){let s;o.iGM(s=o.CRH())&&(i._headers=s)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("mat-accordion-multi",i.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[o._Bn([{provide:lO,useExisting:n}]),o.qOj]}),n})(),CY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[fi,mt,lY,Ha]}),n})(),SY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Dp,mt,Dp,mt]}),n})(),VY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Dp,er,mt,Xd,fi,Dp,mt,Xd,O2]}),n})();const GY={provide:new o.OlP("mat-menu-scroll-strategy"),deps:[vr],useFactory:function jY(n){return()=>n.scrollStrategies.reposition()}};let zY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[GY],imports:[fi,mt,er,$a,qo,mt]}),n})();const ZY={provide:new o.OlP("mat-select-scroll-strategy"),deps:[vr],useFactory:function YY(n){return()=>n.scrollStrategies.reposition()}};let z2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[ZY],imports:[fi,$a,r_,mt,qo,E_,r_,mt]}),n})();const JY={provide:new o.OlP("mat-tooltip-scroll-strategy"),deps:[vr],useFactory:function XY(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let $2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[JY],imports:[Qf,fi,$a,mt,mt,qo]}),n})(),cO=(()=>{class n{constructor(){this.changes=new Je.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,i,r)=>{if(0==r||0==i)return`0 of ${r}`;const s=e*i;return`${s+1} \u2013 ${s<(r=Math.max(r,0))?Math.min(s+i,r):s+i} of ${r}`}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const o8={provide:cO,deps:[[new o.FiY,new o.tp0,cO]],useFactory:function s8(n){return n||new cO}};let a8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[o8],imports:[fi,vh,z2,$2,mt]}),n})(),c8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[fi,mt,mt]}),n})();function u8(n,t){if(1&n&&(o.O4$(),o._UZ(0,"circle",4)),2&n){const e=o.oxw(),i=o.MAs(1);o.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(i)),o.uIk("r",e._getCircleRadius())}}function d8(n,t){if(1&n&&(o.O4$(),o._UZ(0,"circle",4)),2&n){const e=o.oxw(),i=o.MAs(1);o.Udp("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(i)),o.uIk("r",e._getCircleRadius())}}const f8=Ga(class{constructor(n){this._elementRef=n}},"primary"),p8=new o.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function m8(){return{diameter:100}}});class Th extends f8{constructor(t,e,i,r,s,c,d,f){super(t),this._document=i,this._diameter=100,this._value=0,this._resizeSubscription=Cn.w0.EMPTY,this.mode="determinate";const g=Th._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),g.has(i.head)||g.set(i.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,"mat-spinner"===t.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.color&&(this.color=this.defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),e.isBrowser&&e.SAFARI&&d&&c&&f&&(this._resizeSubscription=d.change(150).subscribe(()=>{"indeterminate"===this.mode&&f.run(()=>c.markForCheck())}))}get diameter(){return this._diameter}set diameter(t){this._diameter=tn(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=tn(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,tn(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=Go(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(t){const e=50*(t.currentScale??1);return`${e}% ${e}%`}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,i=Th._diameters;let r=i.get(t);if(!r||!r.has(e)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),t.appendChild(s),r||(r=new Set,i.set(t,r)),r.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Th._diameters=new WeakMap,Th.\u0275fac=function(t){return new(t||Th)(o.Y36(o.SBq),o.Y36(Yn),o.Y36(oe,8),o.Y36(o.QbO,8),o.Y36(p8),o.Y36(o.sBO),o.Y36(Hd),o.Y36(o.R0b))},Th.\u0275cmp=o.Xpm({type:Th,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(o.uIk("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),o.Udp("width",e.diameter,"px")("height",e.diameter,"px"),o.ekj("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[o.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(o.O4$(),o.TgZ(0,"svg",0,1),o.YNc(2,u8,1,11,"circle",2),o.YNc(3,d8,1,9,"circle",3),o.qZA()),2&t&&(o.Udp("width",e.diameter,"px")("height",e.diameter,"px"),o.Q6J("ngSwitch","indeterminate"===e.mode),o.uIk("viewBox",e._getViewBox()),o.xp6(2),o.Q6J("ngSwitchCase",!0),o.xp6(1),o.Q6J("ngSwitchCase",!1))},dependencies:[Rs,Sr],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let _8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[mt,fi,mt]}),n})(),A8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[er,mt,mt]}),n})(),R8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[fi,mt,qo,qo,mt]}),n})(),G8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[fi,mt,mt]}),n})(),Q2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),nZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Q2,er,mt,Fl,Q2,mt]}),n})(),sZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[$a,Ha,fi,vh,mt,mt]}),n})();const aZ=["mat-sort-header",""];function lZ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",3),o.NdJ("@arrowPosition.start",function(){o.CHM(e);const r=o.oxw();return o.KtG(r._disableViewStateAnimation=!0)})("@arrowPosition.done",function(){o.CHM(e);const r=o.oxw();return o.KtG(r._disableViewStateAnimation=!1)}),o._UZ(1,"div",4),o.TgZ(2,"div",5),o._UZ(3,"div",6)(4,"div",7)(5,"div",8),o.qZA()()}if(2&n){const e=o.oxw();o.Q6J("@arrowOpacity",e._getArrowViewState())("@arrowPosition",e._getArrowViewState())("@allowChildren",e._getArrowDirectionState()),o.xp6(2),o.Q6J("@indicator",e._getArrowDirectionState()),o.xp6(1),o.Q6J("@leftPointer",e._getArrowDirectionState()),o.xp6(1),o.Q6J("@rightPointer",e._getArrowDirectionState())}}const cZ=["*"],X2=new o.OlP("MAT_SORT_DEFAULT_OPTIONS"),uZ=ib(ku(class{}));let hO=(()=>{class n extends uZ{constructor(e){super(),this._defaultOptions=e,this.sortables=new Map,this._stateChanges=new Je.x,this.start="asc",this._direction="",this.sortChange=new o.vpe}get direction(){return this._direction}set direction(e){this._direction=e}get disableClear(){return this._disableClear}set disableClear(e){this._disableClear=Ge(e)}register(e){this.sortables.set(e.id,e)}deregister(e){this.sortables.delete(e.id)}sort(e){this.active!=e.id?(this.active=e.id,this.direction=e.start?e.start:this.start):this.direction=this.getNextSortDirection(e),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(e){if(!e)return"";let r=function dZ(n,t){let e=["asc","desc"];return"desc"==n&&e.reverse(),t||e.push(""),e}(e.start||this.start,e?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear),s=r.indexOf(this.direction)+1;return s>=r.length&&(s=0),r[s]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(X2,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],active:["matSortActive","active"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[o.qOj,o.TTD]}),n})();const Mh=nb.ENTERING+" "+Jg.STANDARD_CURVE,V_={indicator:yi("indicator",[Zt("active-asc, asc",ft({transform:"translateY(0px)"})),Zt("active-desc, desc",ft({transform:"translateY(10px)"})),on("active-asc <=> active-desc",nn(Mh))]),leftPointer:yi("leftPointer",[Zt("active-asc, asc",ft({transform:"rotate(-45deg)"})),Zt("active-desc, desc",ft({transform:"rotate(45deg)"})),on("active-asc <=> active-desc",nn(Mh))]),rightPointer:yi("rightPointer",[Zt("active-asc, asc",ft({transform:"rotate(45deg)"})),Zt("active-desc, desc",ft({transform:"rotate(-45deg)"})),on("active-asc <=> active-desc",nn(Mh))]),arrowOpacity:yi("arrowOpacity",[Zt("desc-to-active, asc-to-active, active",ft({opacity:1})),Zt("desc-to-hint, asc-to-hint, hint",ft({opacity:.54})),Zt("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void",ft({opacity:0})),on("* => asc, * => desc, * => active, * => hint, * => void",nn("0ms")),on("* <=> *",nn(Mh))]),arrowPosition:yi("arrowPosition",[on("* => desc-to-hint, * => desc-to-active",nn(Mh,Uu([ft({transform:"translateY(-25%)"}),ft({transform:"translateY(0)"})]))),on("* => hint-to-desc, * => active-to-desc",nn(Mh,Uu([ft({transform:"translateY(0)"}),ft({transform:"translateY(25%)"})]))),on("* => asc-to-hint, * => asc-to-active",nn(Mh,Uu([ft({transform:"translateY(25%)"}),ft({transform:"translateY(0)"})]))),on("* => hint-to-asc, * => active-to-asc",nn(Mh,Uu([ft({transform:"translateY(0)"}),ft({transform:"translateY(-25%)"})]))),Zt("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",ft({transform:"translateY(0)"})),Zt("hint-to-desc, active-to-desc, desc",ft({transform:"translateY(-25%)"})),Zt("hint-to-asc, active-to-asc, asc",ft({transform:"translateY(25%)"}))]),allowChildren:yi("allowChildren",[on("* <=> *",[Hu("@*",kc(),{optional:!0})])])};let yx=(()=>{class n{constructor(){this.changes=new Je.x}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fZ={provide:yx,deps:[[new o.FiY,new o.tp0,yx]],useFactory:function hZ(n){return n||new yx}},pZ=ku(class{});let mZ=(()=>{class n extends pZ{constructor(e,i,r,s,c,d,f,g){super(),this._intl=e,this._changeDetectorRef=i,this._sort=r,this._columnDef=s,this._focusMonitor=c,this._elementRef=d,this._ariaDescriber=f,this._showIndicatorHint=!1,this._viewState={},this._arrowDirection="",this._disableViewStateAnimation=!1,this.arrowPosition="after",this._sortActionDescription="Sort",g?.arrowPosition&&(this.arrowPosition=g?.arrowPosition),this._handleStateChanges()}get sortActionDescription(){return this._sortActionDescription}set sortActionDescription(e){this._updateSortActionDescription(e)}get disableClear(){return this._disableClear}set disableClear(e){this._disableClear=Ge(e)}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this),this._sortButton=this._elementRef.nativeElement.querySelector(".mat-sort-header-container"),this._updateSortActionDescription(this._sortActionDescription)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{const i=!!e;i!==this._showIndicatorHint&&(this._setIndicatorHintVisible(i),this._changeDetectorRef.markForCheck())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe()}_setIndicatorHintVisible(e){this._isDisabled()&&e||(this._showIndicatorHint=e,this._isSorted()||(this._updateArrowDirection(),this._setAnimationTransitionState(this._showIndicatorHint?{fromState:this._arrowDirection,toState:"hint"}:{fromState:"hint",toState:this._arrowDirection})))}_setAnimationTransitionState(e){this._viewState=e||{},this._disableViewStateAnimation&&(this._viewState={toState:e.toState})}_toggleOnInteraction(){this._sort.sort(this),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0)}_handleClick(){this._isDisabled()||this._sort.sort(this)}_handleKeydown(e){!this._isDisabled()&&(32===e.keyCode||13===e.keyCode)&&(e.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&("asc"===this._sort.direction||"desc"===this._sort.direction)}_getArrowDirectionState(){return`${this._isSorted()?"active-":""}${this._arrowDirection}`}_getArrowViewState(){const e=this._viewState.fromState;return(e?`${e}-to-`:"")+this._viewState.toState}_updateArrowDirection(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?"asc"==this._sort.direction?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}_updateSortActionDescription(e){this._sortButton&&(this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription),this._ariaDescriber?.describe(this._sortButton,e)),this._sortActionDescription=e}_handleStateChanges(){this._rerenderSubscription=(0,_r.T)(this._sort.sortChange,this._sort._stateChanges,this._intl.changes).subscribe(()=>{this._isSorted()&&(this._updateArrowDirection(),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0),this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"active"}),this._showIndicatorHint=!1),!this._isSorted()&&this._viewState&&"active"===this._viewState.toState&&(this._disableViewStateAnimation=!1,this._setAnimationTransitionState({fromState:"active",toState:this._arrowDirection})),this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(yx),o.Y36(o.sBO),o.Y36(hO,8),o.Y36("MAT_SORT_HEADER_COLUMN_DEF",8),o.Y36($o),o.Y36(o.SBq),o.Y36(Cu,8),o.Y36(X2,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(e,i){1&e&&o.NdJ("click",function(){return i._handleClick()})("keydown",function(s){return i._handleKeydown(s)})("mouseenter",function(){return i._setIndicatorHintVisible(!0)})("mouseleave",function(){return i._setIndicatorHintVisible(!1)}),2&e&&(o.uIk("aria-sort",i._getAriaSortAttribute()),o.ekj("mat-sort-header-disabled",i._isDisabled()))},inputs:{disabled:"disabled",id:["mat-sort-header","id"],arrowPosition:"arrowPosition",start:"start",sortActionDescription:"sortActionDescription",disableClear:"disableClear"},exportAs:["matSortHeader"],features:[o.qOj],attrs:aZ,ngContentSelectors:cZ,decls:4,vars:7,consts:[[1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],["class","mat-sort-header-arrow",4,"ngIf"],[1,"mat-sort-header-arrow"],[1,"mat-sort-header-stem"],[1,"mat-sort-header-indicator"],[1,"mat-sort-header-pointer-left"],[1,"mat-sort-header-pointer-right"],[1,"mat-sort-header-pointer-middle"]],template:function(e,i){1&e&&(o.F$t(),o.TgZ(0,"div",0)(1,"div",1),o.Hsn(2),o.qZA(),o.YNc(3,lZ,6,6,"div",2),o.qZA()),2&e&&(o.ekj("mat-sort-header-sorted",i._isSorted())("mat-sort-header-position-before","before"===i.arrowPosition),o.uIk("tabindex",i._isDisabled()?null:0)("role",i._isDisabled()?null:"button"),o.xp6(3),o.Q6J("ngIf",i._renderArrow()))},dependencies:[Fn],styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-container::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}"],encapsulation:2,data:{animation:[V_.indicator,V_.leftPointer,V_.rightPointer,V_.arrowOpacity,V_.arrowPosition,V_.allowChildren]},changeDetection:0}),n})(),gZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[fZ],imports:[fi,mt]}),n})();const _Z=[[["caption"]],[["colgroup"],["col"]]],vZ=["caption","colgroup, col"];let fO=(()=>{class n extends Cp{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("mat-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[o._Bn([{provide:fp,useClass:zy},{provide:Cp,useExisting:n},{provide:xu,useExisting:n},{provide:mp,useClass:qg},{provide:yp,useValue:null}]),o.qOj],ngContentSelectors:vZ,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,i){1&e&&(o.F$t(_Z),o.Hsn(0),o.Hsn(1,1),o.GkF(2,0)(3,1)(4,2)(5,3))},dependencies:[bp,Zd,wp,Kd],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),n})(),pO=(()=>{class n extends Mc{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matCellDef",""]],features:[o._Bn([{provide:Mc,useExisting:n}]),o.qOj]}),n})(),mO=(()=>{class n extends Cs{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matHeaderCellDef",""]],features:[o._Bn([{provide:Cs,useExisting:n}]),o.qOj]}),n})(),gO=(()=>{class n extends Ic{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[o._Bn([{provide:Ic,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),o.qOj]}),n})(),_O=(()=>{class n extends VD{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[o.qOj]}),n})(),vO=(()=>{class n extends Yd{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[o.qOj]}),n})(),J2=(()=>{class n extends gp{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[o._Bn([{provide:gp,useExisting:n}]),o.qOj]}),n})(),eU=(()=>{class n extends Yy{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[o._Bn([{provide:Yy,useExisting:n}]),o.qOj]}),n})(),tU=(()=>{class n extends Wg{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[o._Bn([{provide:Wg,useExisting:n}]),o.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&o.GkF(0,0)},dependencies:[ja],encapsulation:2}),n})(),nU=(()=>{class n extends vp{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[o._Bn([{provide:vp,useExisting:n}]),o.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&o.GkF(0,0)},dependencies:[ja],encapsulation:2}),n})(),MZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Qy,mt,mt]}),n})(),PZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[fi,mt,Ha,er,Fl,Qf,mt]}),n})();const NZ=["*",[["mat-toolbar-row"]]],FZ=["*","mat-toolbar-row"],LZ=Ga(class{constructor(n){this._elementRef=n}});let BZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),Wu=(()=>{class n extends LZ{constructor(e,i,r){super(e),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Yn),o.Y36(oe))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,BZ,5),2&e){let s;o.iGM(s=o.CRH())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,i){2&e&&o.ekj("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[o.qOj],ngContentSelectors:FZ,decls:2,vars:0,template:function(e,i){1&e&&(o.F$t(NZ),o.Hsn(0),o.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),VZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[mt,mt]}),n})(),WZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[tb,mt,mt]}),n})(),YZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Qf,iD,PD,Qy,tb,AD,Xp,oS,lR,vh,_S,DR,JV,RR,ax,GW,iY,O2,CY,SY,C0,M2,VY,zY,BA,a8,c8,_8,A8,er,z2,R8,G8,nZ,sZ,gZ,MZ,PZ,VZ,$2,WZ,$a,Ha,Lg]}),n})();var bx,ZZ=V(6457),L=V(2090),zs=V(9681),ql=V(1877),Wl=V(4859),KZ=new Uint8Array(16);function QZ(){if(!bx&&!(bx=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return bx(KZ)}const XZ=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,eK=function JZ(n){return"string"==typeof n&&XZ.test(n)};for(var Xr=[],bO=0;bO<256;++bO)Xr.push((bO+256).toString(16).substr(1));const iU=function iK(n,t,e){var i=(n=n||{}).random||(n.rng||QZ)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){e=e||0;for(var r=0;r<16;++r)t[e+r]=i[r];return t}return function tK(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(Xr[n[t+0]]+Xr[n[t+1]]+Xr[n[t+2]]+Xr[n[t+3]]+"-"+Xr[n[t+4]]+Xr[n[t+5]]+"-"+Xr[n[t+6]]+Xr[n[t+7]]+"-"+Xr[n[t+8]]+Xr[n[t+9]]+"-"+Xr[n[t+10]]+Xr[n[t+11]]+Xr[n[t+12]]+Xr[n[t+13]]+Xr[n[t+14]]+Xr[n[t+15]]).toLowerCase();if(!eK(e))throw TypeError("Stringified UUID is invalid");return e}(i)};var Pn=V(5813);function wO(){return(0,gi.e)((n,t)=>{let e,i=!1;n.subscribe((0,Gn.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}function rK(n,t,e,i,r){return(s,c)=>{let d=e,f=t,g=0;s.subscribe((0,Gn.x)(c,b=>{const E=g++;f=d?n(f,b,E):(d=!0,b),i&&c.next(f)},r&&(()=>{d&&c.next(f),c.complete()})))}}function um(n,t){return(0,gi.e)(rK(n,t,arguments.length>=2,!0))}var _t,br=V(2011),CO=(V(5881),V(3942)),Se=V(5861),sK=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yu={},DO=DO||{},Qt=sK||self;function wx(){}function EO(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function A0(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var SO="closure_uid_"+(1e9*Math.random()>>>0),aK=0;function lK(n,t,e){return n.call.apply(n.bind,arguments)}function cK(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function Jr(n,t,e){return(Jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?lK:cK).apply(null,arguments)}function Cx(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function es(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(i,r,s){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return t.prototype[r].apply(i,c)}}function Ih(){this.s=this.s,this.o=this.o}var dK={};Ih.prototype.s=!1,Ih.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function oK(n){return Object.prototype.hasOwnProperty.call(n,SO)&&n[SO]||(n[SO]=++aK)}(this);delete dK[n]}},Ih.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const rU=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},sU=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const i=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<i;s++)s in r&&t.call(e,r[s],s,n)};function oU(n){return Array.prototype.concat.apply([],arguments)}function xO(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function Dx(n){return/^[\s\xa0]*$/.test(n)}var qs,aU=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function $s(n,t){return-1!=n.indexOf(t)}function TO(n,t){return n<t?-1:n>t?1:0}e:{var lU=Qt.navigator;if(lU){var cU=lU.userAgent;if(cU){qs=cU;break e}}qs=""}function MO(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function uU(n){const t={};for(const e in n)t[e]=n[e];return t}var dU="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hU(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<dU.length;s++)e=dU[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function IO(n){return IO[" "](n),n}IO[" "]=wx;var Ex,n,pK=$s(qs,"Opera"),U_=$s(qs,"Trident")||$s(qs,"MSIE"),fU=$s(qs,"Edge"),AO=fU||U_,pU=$s(qs,"Gecko")&&!($s(qs.toLowerCase(),"webkit")&&!$s(qs,"Edge"))&&!($s(qs,"Trident")||$s(qs,"MSIE"))&&!$s(qs,"Edge"),mK=$s(qs.toLowerCase(),"webkit")&&!$s(qs,"Edge");function mU(){var n=Qt.document;return n?n.documentMode:void 0}e:{var kO="",RO=(n=qs,pU?/rv:([^\);]+)(\)|;)/.exec(n):fU?/Edge\/([\d\.]+)/.exec(n):U_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):mK?/WebKit\/(\S+)/.exec(n):pK?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(RO&&(kO=RO?RO[1]:""),U_){var OO=mU();if(null!=OO&&OO>parseFloat(kO)){Ex=String(OO);break e}}Ex=kO}var gK={};var vK=Qt.document&&U_&&(mU()||parseInt(Ex,10))||void 0,yK=function(){if(!Qt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Qt.addEventListener("test",wx,t),Qt.removeEventListener("test",wx,t)}catch{}return n}();function xs(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function k0(n,t){if(xs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(pU){e:{try{IO(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:bK[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&k0.Z.h.call(this)}}xs.prototype.h=function(){this.defaultPrevented=!0},es(k0,xs);var bK={2:"touch",3:"pen",4:"mouse"};k0.prototype.h=function(){k0.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var R0="closure_listenable_"+(1e6*Math.random()|0),wK=0;function CK(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ia=r,this.key=++wK,this.ca=this.fa=!1}function Sx(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function xx(n){this.src=n,this.g={},this.h=0}function NO(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=rU(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Sx(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function FO(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ca&&s.listener==t&&s.capture==!!e&&s.ia==i)return r}return-1}xx.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=FO(n,t,i,r);return-1<c?(t=n[c],e||(t.fa=!1)):((t=new CK(t,this.src,s,!!i,r)).fa=e,n.push(t)),t};var LO="closure_lm_"+(1e6*Math.random()|0),BO={};function _U(n,t,e,i,r){if(i&&i.once)return yU(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)_U(n,t[s],e,i,r);return null}return e=jO(e),n&&n[R0]?n.N(t,e,A0(i)?!!i.capture:!!i,r):vU(n,t,e,!1,i,r)}function vU(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var c=A0(r)?!!r.capture:!!r,d=UO(n);if(d||(n[LO]=d=new xx(n)),(e=d.add(t,e,i,c,s)).proxy)return e;if(i=function DK(){var t=EK;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)yK||(r=c),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(wU(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function yU(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)yU(n,t[s],e,i,r);return null}return e=jO(e),n&&n[R0]?n.O(t,e,A0(i)?!!i.capture:!!i,r):vU(n,t,e,!0,i,r)}function bU(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)bU(n,t[s],e,i,r);else i=A0(i)?!!i.capture:!!i,e=jO(e),n&&n[R0]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=FO(s=n.g[t],e,i,r))&&(Sx(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=UO(n))&&(t=n.g[t.toString()],n=-1,t&&(n=FO(t,e,i,r)),(e=-1<n?t[n]:null)&&VO(e))}function VO(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[R0])NO(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(wU(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=UO(t))?(NO(e,n),0==e.h&&(e.src=null,t[LO]=null)):Sx(n)}}}function wU(n){return n in BO?BO[n]:BO[n]="on"+n}function EK(n,t){if(n.ca)n=!0;else{t=new k0(t,this);var e=n.listener,i=n.ia||n.src;n.fa&&VO(n),n=e.call(i,t)}return n}function UO(n){return(n=n[LO])instanceof xx?n:null}var HO="__closure_events_fn_"+(1e9*Math.random()>>>0);function jO(n){return"function"==typeof n?n:(n[HO]||(n[HO]=function(t){return n.handleEvent(t)}),n[HO])}function Pr(){Ih.call(this),this.i=new xx(this),this.P=this,this.I=null}function ts(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,"string"==typeof t)t=new xs(t,n);else if(t instanceof xs)t.target=t.target||n;else{var r=t;hU(t=new xs(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var c=t.g=e[s];r=Tx(c,i,!0,t)&&r}if(r=Tx(c=t.g=n,i,!0,t)&&r,r=Tx(c,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=Tx(c=t.g=e[s],i,!1,t)&&r}function Tx(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var c=t[s];if(c&&!c.ca&&c.capture==e){var d=c.listener,f=c.ia||c.src;c.fa&&NO(n.i,c),r=!1!==d.call(f,i)&&r}}return r&&!i.defaultPrevented}es(Pr,Ih),Pr.prototype[R0]=!0,Pr.prototype.removeEventListener=function(n,t,e,i){bU(this,n,t,e,i)},Pr.prototype.M=function(){if(Pr.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)Sx(e[i]);delete n.g[t],n.h--}}this.I=null},Pr.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},Pr.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var GO=Qt.JSON.stringify;function SK(){var n=DU;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var $O,CU=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new TK,n=>n.reset());class TK{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function MK(n){Qt.setTimeout(()=>{throw n},0)}function zO(n,t){$O||function IK(){var n=Qt.Promise.resolve(void 0);$O=function(){n.then(AK)}}(),qO||($O(),qO=!0),DU.add(n,t)}var qO=!1,DU=new class xK{constructor(){this.h=this.g=null}add(t,e){const i=CU.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function AK(){for(var n;n=SK();){try{n.h.call(n.g)}catch(e){MK(e)}var t=CU;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}qO=!1}function Mx(n,t){Pr.call(this),this.h=n||1,this.g=t||Qt,this.j=Jr(this.kb,this),this.l=Date.now()}function WO(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function YO(n,t,e){if("function"==typeof n)e&&(n=Jr(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Jr(n.handleEvent,n)}return 2147483647<Number(t)?-1:Qt.setTimeout(n,t||0)}function EU(n){n.g=YO(()=>{n.g=null,n.i&&(n.i=!1,EU(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}es(Mx,Pr),(_t=Mx.prototype).da=!1,_t.S=null,_t.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ts(this,"tick"),this.da&&(WO(this),this.start()))}},_t.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},_t.M=function(){Mx.Z.M.call(this),WO(this),delete this.g};class kK extends Ih{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:EU(this)}M(){super.M(),this.g&&(Qt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function O0(n){Ih.call(this),this.h=n,this.g={}}es(O0,Ih);var SU=[];function xU(n,t,e,i){Array.isArray(e)||(e&&(SU[0]=e.toString()),e=SU);for(var r=0;r<e.length;r++){var s=_U(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function TU(n){MO(n.g,function(t,e){this.g.hasOwnProperty(e)&&VO(t)},n),n.g={}}function Ix(){this.g=!0}function H_(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function NK(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<r.length;c++)r[c]=""}}}return GO(e)}catch{return t}}(n,e)+(i?" "+i:"")})}O0.prototype.M=function(){O0.Z.M.call(this),TU(this)},O0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ix.prototype.Aa=function(){this.g=!1},Ix.prototype.info=function(){};var dm={},MU=null;function Ax(){return MU=MU||new Pr}function IU(n){xs.call(this,dm.Ma,n)}function P0(n){const t=Ax();ts(t,new IU(t,n))}function AU(n,t){xs.call(this,dm.STAT_EVENT,n),this.stat=t}function Ws(n){const t=Ax();ts(t,new AU(t,n))}function kU(n,t){xs.call(this,dm.Na,n),this.size=t}function N0(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Qt.setTimeout(function(){n()},t)}dm.Ma="serverreachability",es(IU,xs),dm.STAT_EVENT="statevent",es(AU,xs),dm.Na="timingevent",es(kU,xs);var kx={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},RU={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ZO(){}function PU(){}ZO.prototype.h=null;var XO,F0={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function KO(){xs.call(this,"d")}function QO(){xs.call(this,"c")}function Rx(){}function L0(n,t,e,i){this.l=n,this.j=t,this.m=e,this.X=i||1,this.V=new O0(this),this.P=FK,this.W=new Mx(n=AO?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new NU}function NU(){this.i=null,this.g="",this.h=!1}es(KO,xs),es(QO,xs),es(Rx,ZO),Rx.prototype.g=function(){return new XMLHttpRequest},Rx.prototype.i=function(){return{}},XO=new Rx;var FK=45e3,JO={},Ox={};function eP(n,t,e){n.K=1,n.v=Bx(Zu(t)),n.s=e,n.U=!0,FU(n,null)}function FU(n,t){n.F=Date.now(),B0(n),n.A=Zu(n.v);var e=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),$U(e.h,"t",i),n.C=0,e=n.l.H,n.h=new NU,n.g=pH(n.l,e?t:null,!n.s),0<n.O&&(n.L=new kK(Jr(n.Ia,n,n.g),n.O)),xU(n.V,n.g,"readystatechange",n.gb),t=n.H?uU(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),P0(1),function RK(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var c="",d=s.split("&"),f=0;f<d.length;f++){var g=d[f].split("=");if(1<g.length){var b=g[0];g=g[1];var E=b.split("_");c=2<=E.length&&"type"==E[1]?c+(b+"=")+g+"&":c+(b+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function LU(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function BU(n,t,e){let r,i=!0;for(;!n.I&&n.C<e.length;){if(r=LK(n,e),r==Ox){4==t&&(n.o=4,Ws(14),i=!1),H_(n.j,n.m,null,"[Incomplete Response]");break}if(r==JO){n.o=4,Ws(15),H_(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}H_(n.j,n.m,r,null),tP(n,r)}LU(n)&&r!=Ox&&r!=JO&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,Ws(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),hP(t),t.L=!0,Ws(11))):(H_(n.j,n.m,e,"[Invalid Chunked Response]"),hm(n),V0(n))}function LK(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?Ox:(e=Number(t.substring(e,i)),isNaN(e)?JO:(i+=1)+e>t.length?Ox:(t=t.substr(i,e),n.C=i+e,t))}function B0(n){n.Y=Date.now()+n.P,VU(n,n.P)}function VU(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=N0(Jr(n.eb,n),t)}function Px(n){n.B&&(Qt.clearTimeout(n.B),n.B=null)}function V0(n){0==n.l.G||n.I||uH(n.l,n)}function hm(n){Px(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,WO(n.W),TU(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function tP(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||rP(e.i,n)))if(e.I=n.N,!n.J&&rP(e.i,n)&&3==e.G){try{var i=e.Ca.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<n.F))break e;zx(e),jx(e)}dP(e),Ws(18)}}else e.ta=r[1],0<e.ta-e.U&&37500>r[2]&&e.N&&0==e.A&&!e.v&&(e.v=N0(Jr(e.ab,e),6e3));if(1>=YU(e.i)&&e.ka){try{e.ka()}catch{}e.ka=void 0}}else mm(e,11)}else if((n.J||e.g==n)&&zx(e),!Dx(t))for(r=e.Ca.g.parse(t),t=0;t<r.length;t++){let g=r[t];if(e.U=g[0],g=g[1],2==e.G)if("c"==g[0]){e.J=g[1],e.la=g[2];const b=g[3];null!=b&&(e.ma=b,e.h.info("VER="+e.ma));const E=g[4];null!=E&&(e.za=E,e.h.info("SVER="+e.za));const I=g[5];null!=I&&"number"==typeof I&&0<I&&(e.K=i=1.5*I,e.h.info("backChannelRequestTimeoutMs_="+i)),i=e;const P=n.g;if(P){const F=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(F){var s=i.i;!s.g&&($s(F,"spdy")||$s(F,"quic")||$s(F,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(sP(s,s.h),s.h=null))}if(i.D){const z=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;z&&(i.sa=z,xi(i.F,i.D,z))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var c=n;if((i=e).oa=fH(i,i.H?i.la:null,i.W),c.J){ZU(i.i,c);var d=c,f=i.K;f&&d.setTimeout(f),d.B&&(Px(d),B0(d)),i.g=c}else lH(i);0<e.l.length&&Gx(e)}else"stop"!=g[0]&&"close"!=g[0]||mm(e,7);else 3==e.G&&("stop"==g[0]||"close"==g[0]?"stop"==g[0]?mm(e,7):cP(e):"noop"!=g[0]&&e.j&&e.j.wa(g),e.A=0)}P0(4)}catch{}}function nP(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(EO(n)||"string"==typeof n)sU(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(EO(n)||"string"==typeof n){e=[];for(var i=n.length,r=0;r<i;r++)e.push(r)}else for(r in e=[],i=0,n)e[i++]=r;i=function BK(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(EO(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length;for(var s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}}function j_(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var i=0;i<e;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof j_)for(e=n.T(),i=0;i<e.length;i++)this.set(e[i],n.get(e[i]));else for(i in n)this.set(i,n[i])}function iP(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var i=n.g[t];fm(n.h,i)&&(n.g[e++]=i),t++}n.g.length=e}if(n.i!=n.g.length){var r={};for(e=t=0;t<n.g.length;)fm(r,i=n.g[t])||(n.g[e++]=i,r[i]=1),t++;n.g.length=e}}function fm(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(_t=L0.prototype).setTimeout=function(n){this.P=n},_t.gb=function(n){n=n.target;const t=this.L;t&&3==Ku(n)?t.l():this.Ia(n)},_t.Ia=function(n){try{if(n==this.g)e:{const b=Ku(this.g);var t=this.g.Da();const E=this.g.ba();if(!(3>b)&&(3!=b||AO||this.g&&(this.h.h||this.g.ga()||iH(this.g)))){this.I||4!=b||7==t||P0(8==t||0>=E?3:2),Px(this);var e=this.g.ba();this.N=e;t:if(LU(this)){var i=iH(this.g);n="";var r=i.length,s=4==Ku(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){hm(this),V0(this);var c="";break t}this.h.i=new Qt.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==e,function OK(n,t,e,i,r,s,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.X,b,e),this.i){if(this.$&&!this.J){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Dx(d)){var g=d;break t}}g=null}if(!(e=g)){this.i=!1,this.o=3,Ws(12),hm(this),V0(this);break e}H_(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,tP(this,e)}this.U?(BU(this,b,c),AO&&this.i&&3==b&&(xU(this.V,this.W,"tick",this.fb),this.W.start())):(H_(this.j,this.m,c,null),tP(this,c)),4==b&&hm(this),this.i&&!this.I&&(4==b?uH(this.l,this):(this.i=!1,B0(this)))}else 400==e&&0<c.indexOf("Unknown SID")?(this.o=3,Ws(12)):(this.o=0,Ws(13)),hm(this),V0(this)}}}catch{}},_t.fb=function(){if(this.g){var n=Ku(this.g),t=this.g.ga();this.C<t.length&&(Px(this),BU(this,n,t),this.i&&4!=n&&B0(this))}},_t.cancel=function(){this.I=!0,hm(this)},_t.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function PK(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(P0(3),Ws(17)),hm(this),this.o=2,V0(this)):VU(this,this.Y-n)},(_t=j_.prototype).R=function(){iP(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},_t.T=function(){return iP(this),this.g.concat()},_t.get=function(n,t){return fm(this.h,n)?this.h[n]:t},_t.set=function(n,t){fm(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},_t.forEach=function(n,t){for(var e=this.T(),i=0;i<e.length;i++){var r=e[i],s=this.get(r);n.call(t,s,r,this)}};var UU=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function pm(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof pm){this.g=void 0!==t?t:n.g,Nx(this,n.j),this.s=n.s,Fx(this,n.i),Lx(this,n.m),this.l=n.l,t=n.h;var e=new j0;e.i=t.i,t.g&&(e.g=new j_(t.g),e.h=t.h),HU(this,e),this.o=n.o}else n&&(e=String(n).match(UU))?(this.g=!!t,Nx(this,e[1]||"",!0),this.s=U0(e[2]||""),Fx(this,e[3]||"",!0),Lx(this,e[4]),this.l=U0(e[5]||"",!0),HU(this,e[6]||"",!0),this.o=U0(e[7]||"")):(this.g=!!t,this.h=new j0(null,this.g))}function Zu(n){return new pm(n)}function Nx(n,t,e){n.j=e?U0(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function Fx(n,t,e){n.i=e?U0(t,!0):t}function Lx(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function HU(n,t,e){t instanceof j0?(n.h=t,function WK(n,t){t&&!n.j&&(Ah(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(GU(this,i),$U(this,r,e))},n)),n.j=t}(n.h,n.g)):(e||(t=H0(t,$K)),n.h=new j0(t,n.g))}function xi(n,t,e){n.h.set(t,e)}function Bx(n){return xi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function U0(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function H0(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,jK),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function jK(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}pm.prototype.toString=function(){var n=[],t=this.j;t&&n.push(H0(t,jU,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(H0(t,jU,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(H0(e,"/"==e.charAt(0)?zK:GK,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",H0(e,qK)),n.join("")};var jU=/[#\/\?@]/g,GK=/[#\?:]/g,zK=/[#\?]/g,$K=/[#\?@]/g,qK=/#/g;function j0(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function Ah(n){n.g||(n.g=new j_,n.h=0,n.i&&function VK(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function GU(n,t){Ah(n),t=G_(n,t),fm(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,fm((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&iP(n)))}function zU(n,t){return Ah(n),t=G_(n,t),fm(n.g.h,t)}function $U(n,t,e){GU(n,t),0<e.length&&(n.i=null,n.g.set(G_(n,t),xO(e)),n.h+=e.length)}function G_(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function qU(n){this.l=n||ZK,n=Qt.PerformanceNavigationTiming?0<(n=Qt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Qt.g&&Qt.g.Ea&&Qt.g.Ea()&&Qt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(_t=j0.prototype).add=function(n,t){Ah(this),this.i=null,n=G_(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},_t.forEach=function(n,t){Ah(this),this.g.forEach(function(e,i){sU(e,function(r){n.call(t,r,i,this)},this)},this)},_t.T=function(){Ah(this);for(var n=this.g.R(),t=this.g.T(),e=[],i=0;i<t.length;i++)for(var r=n[i],s=0;s<r.length;s++)e.push(t[i]);return e},_t.R=function(n){Ah(this);var t=[];if("string"==typeof n)zU(this,n)&&(t=oU(t,this.g.get(G_(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=oU(t,n[e])}return t},_t.set=function(n,t){return Ah(this),this.i=null,zU(this,n=G_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},_t.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},_t.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var i=t[e],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var c=r;""!==i[s]&&(c+="="+encodeURIComponent(String(i[s]))),n.push(c)}}return this.i=n.join("&")};var ZK=10;function WU(n){return!!n.h||!!n.g&&n.g.size>=n.j}function YU(n){return n.h?1:n.g?n.g.size:0}function rP(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function sP(n,t){n.g?n.g.add(t):n.h=t}function ZU(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function KU(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return xO(n.i)}function oP(){}function KK(){this.g=new oP}function QK(n,t,e){const i=e||"";try{nP(n,function(r,s){let c=r;A0(r)&&(c=GO(r)),t.push(i+s+"="+encodeURIComponent(c))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function Vx(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function G0(n){this.l=n.$b||null,this.j=n.ib||!1}function Ux(n,t){Pr.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=aP,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qU.prototype.cancel=function(){if(this.i=KU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},oP.prototype.stringify=function(n){return Qt.JSON.stringify(n,void 0)},oP.prototype.parse=function(n){return Qt.JSON.parse(n,void 0)},es(G0,ZO),G0.prototype.g=function(){return new Ux(this.l,this.j)},G0.prototype.i=function(n){return function(){return n}}({}),es(Ux,Pr);var aP=0;function QU(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function z0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,$0(n)}function $0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(_t=Ux.prototype).open=function(n,t){if(this.readyState!=aP)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,$0(this)},_t.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Qt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},_t.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,z0(this)),this.readyState=aP},_t.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,$0(this)),this.g&&(this.readyState=3,$0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Qt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;QU(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},_t.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?z0(this):$0(this),3==this.readyState&&QU(this)}},_t.Ua=function(n){this.g&&(this.response=this.responseText=n,z0(this))},_t.Ta=function(n){this.g&&(this.response=n,z0(this))},_t.ha=function(){this.g&&z0(this)},_t.setRequestHeader=function(n,t){this.v.append(n,t)},_t.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},_t.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(Ux.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var JK=Qt.JSON.parse;function lr(n){Pr.call(this),this.headers=new j_,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=XU,this.K=this.L=!1}es(lr,Pr);var XU="",e7=/^https?$/i,t7=["POST","PUT"];function r7(n){return"content-type"==n.toLowerCase()}function JU(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,eH(n),Hx(n)}function eH(n){n.D||(n.D=!0,ts(n,"complete"),ts(n,"error"))}function tH(n){if(n.h&&typeof DO<"u"&&(!n.C[1]||4!=Ku(n)||2!=n.ba()))if(n.v&&4==Ku(n))YO(n.Fa,0,n);else if(ts(n,"readystatechange"),4==Ku(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===d){var r=String(n.H).match(UU)[1]||null;if(!r&&Qt.self&&Qt.self.location){var s=Qt.self.location.protocol;r=s.substr(0,s.length-1)}i=!e7.test(r?r.toLowerCase():"")}e=i}if(e)ts(n,"complete"),ts(n,"success");else{n.m=6;try{var c=2<Ku(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.ba()+"]",eH(n)}}finally{Hx(n)}}}function Hx(n,t){if(n.g){nH(n);const e=n.g,i=n.C[0]?wx:null;n.g=null,n.C=null,t||ts(n,"ready");try{e.onreadystatechange=i}catch{}}}function nH(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Qt.clearTimeout(n.A),n.A=null)}function Ku(n){return n.g?n.g.readyState:0}function iH(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case XU:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function lP(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=function s7(n){let t="";return MO(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):xi(n,t,e))}function q0(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function rH(n){this.za=0,this.l=[],this.h=new Ix,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=q0("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=q0("baseRetryDelayMs",5e3,n),this.$a=q0("retryDelaySeedMs",1e4,n),this.Ya=q0("forwardChannelMaxRetries",2,n),this.ra=q0("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new qU(n&&n.concurrentRequestLimit),this.Ca=new KK,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function cP(n){if(sH(n),3==n.G){var t=n.V++,e=Zu(n.F);xi(e,"SID",n.J),xi(e,"RID",t),xi(e,"TYPE","terminate"),W0(n,e),(t=new L0(n,n.h,t,void 0)).K=2,t.v=Bx(Zu(e)),e=!1,Qt.navigator&&Qt.navigator.sendBeacon&&(e=Qt.navigator.sendBeacon(t.v.toString(),"")),!e&&Qt.Image&&((new Image).src=t.v,e=!0),e||(t.g=pH(t.l,null),t.g.ea(t.v)),t.F=Date.now(),B0(t)}hH(n)}function jx(n){n.g&&(hP(n),n.g.cancel(),n.g=null)}function sH(n){jx(n),n.u&&(Qt.clearTimeout(n.u),n.u=null),zx(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Qt.clearTimeout(n.m),n.m=null)}function uP(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&Gx(n)}function Gx(n){WU(n.i)||n.m||(n.m=!0,zO(n.Ha,n),n.C=0)}function oH(n,t){var e;e=t?t.m:n.V++;const i=Zu(n.F);xi(i,"SID",n.J),xi(i,"RID",e),xi(i,"AID",n.U),W0(n,i),n.o&&n.s&&lP(i,n.o,n.s),e=new L0(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=aH(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),sP(n.i,e),eP(e,i,t)}function W0(n,t){n.j&&nP({},function(e,i){xi(t,i,e)})}function aH(n,t,e){e=Math.min(n.l.length,e);var i=n.j?Jr(n.j.Oa,n.j,n):null;e:{var r=n.l;let s=-1;for(;;){const c=["count="+e];-1==s?0<e?(s=r[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let d=!0;for(let f=0;f<e;f++){let g=r[f].h;const b=r[f].g;if(g-=s,0>g)s=Math.max(0,r[f].h-100),d=!1;else try{QK(b,c,"req"+g+"_")}catch{i&&i(b)}}if(d){i=c.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,i}function lH(n){n.g||n.u||(n.Y=1,zO(n.Ga,n),n.A=0)}function dP(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=N0(Jr(n.Ga,n),dH(n,n.A)),n.A++,0))}function hP(n){null!=n.B&&(Qt.clearTimeout(n.B),n.B=null)}function cH(n){n.g=new L0(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=Zu(n.oa);xi(t,"RID","rpc"),xi(t,"SID",n.J),xi(t,"CI",n.N?"0":"1"),xi(t,"AID",n.U),W0(n,t),xi(t,"TYPE","xmlhttp"),n.o&&n.s&&lP(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=Bx(Zu(t)),e.s=null,e.U=!0,FU(e,n)}function zx(n){null!=n.v&&(Qt.clearTimeout(n.v),n.v=null)}function uH(n,t){var e=null;if(n.g==t){zx(n),hP(n),n.g=null;var i=2}else{if(!rP(n.i,t))return;e=t.D,ZU(n.i,t),i=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;ts(i=Ax(),new kU(i,e,t,r)),Gx(n)}else lH(n);else if(3==(r=t.o)||0==r&&0<n.I||!(1==i&&function o7(n,t){return!(YU(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=N0(Jr(n.Ha,n,t),dH(n,n.C)),n.C++,0)))}(n,t)||2==i&&dP(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),r){case 1:mm(n,5);break;case 4:mm(n,10);break;case 3:mm(n,6);break;default:mm(n,2)}}function dH(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function mm(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var i=Jr(n.jb,n);e||(e=new pm("//www.google.com/images/cleardot.gif"),Qt.location&&"http"==Qt.location.protocol||Nx(e,"https"),Bx(e)),function XK(n,t){const e=new Ix;if(Qt.Image){const i=new Image;i.onload=Cx(Vx,e,i,"TestLoadImage: loaded",!0,t),i.onerror=Cx(Vx,e,i,"TestLoadImage: error",!1,t),i.onabort=Cx(Vx,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=Cx(Vx,e,i,"TestLoadImage: timeout",!1,t),Qt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else Ws(2);n.G=0,n.j&&n.j.va(t),hH(n),sH(n)}function hH(n){n.G=0,n.I=-1,n.j&&((0!=KU(n.i).length||0!=n.l.length)&&(n.i.i.length=0,xO(n.l),n.l.length=0),n.j.ua())}function fH(n,t,e){let i=function UK(n){return n instanceof pm?Zu(n):new pm(n,void 0)}(e);if(""!=i.i)t&&Fx(i,t+"."+i.i),Lx(i,i.m);else{const r=Qt.location;i=function HK(n,t,e,i){var r=new pm(null,void 0);return n&&Nx(r,n),t&&Fx(r,t),e&&Lx(r,e),i&&(r.l=i),r}(r.protocol,t?t+"."+r.hostname:r.hostname,+r.port,e)}return n.aa&&MO(n.aa,function(r,s){xi(i,s,r)}),e=n.sa,(t=n.D)&&e&&xi(i,t,e),xi(i,"VER",n.ma),W0(n,i),i}function pH(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new lr(e&&n.Ba&&!n.qa?new G0({ib:!0}):n.qa)).L=n.H,t}function mH(){}function $x(){if(U_&&!(10<=Number(vK)))throw Error("Environmental error: no available transport.")}function ta(n,t){Pr.call(this),this.g=new rH(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!Dx(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Dx(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new z_(this)}function gH(n){KO.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function _H(){QO.call(this),this.status=1}function z_(n){this.g=n}(_t=lr.prototype).ea=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():XO.g(),this.C=function OU(n){return n.h||(n.h=n.i())}(this.u?this.u:XO),this.g.onreadystatechange=Jr(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(s){return void JU(this,s)}n=e||"";const r=new j_(this.headers);i&&nP(i,function(s,c){r.set(c,s)}),i=function hK(n){e:{var t=r7;const e=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<e;r++)if(r in i&&t.call(void 0,i[r],r,n)){t=r;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(r.T()),e=Qt.FormData&&n instanceof Qt.FormData,!(0<=rU(t7,t))||i||e||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(s,c){this.g.setRequestHeader(c,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{nH(this),0<this.B&&((this.K=function n7(n){return U_&&function _K(){return function fK(n){var t=gK;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=aU(String(Ex)).split("."),e=aU("9").split("."),i=Math.max(t.length,e.length);for(let c=0;0==n&&c<i;c++){var r=t[c]||"",s=e[c]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=TO(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||TO(0==r[2].length,0==s[2].length)||TO(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jr(this.pa,this)):this.A=YO(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){JU(this,s)}},_t.pa=function(){typeof DO<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ts(this,"timeout"),this.abort(8))},_t.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ts(this,"complete"),ts(this,"abort"),Hx(this))},_t.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hx(this,!0)),lr.Z.M.call(this)},_t.Fa=function(){this.s||(this.F||this.v||this.l?tH(this):this.cb())},_t.cb=function(){tH(this)},_t.ba=function(){try{return 2<Ku(this)?this.g.status:-1}catch{return-1}},_t.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},_t.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),JK(t)}},_t.Da=function(){return this.m},_t.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(_t=rH.prototype).ma=8,_t.G=1,_t.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},_t.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new L0(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=uU(s),hU(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var i=this.l[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=aH(this,r,t),xi(e=Zu(this.F),"RID",n),xi(e,"CVER",22),this.D&&xi(e,"X-HTTP-Session-Id",this.D),W0(this,e),this.o&&s&&lP(e,this.o,s),sP(this.i,r),this.Ra&&xi(e,"TYPE","init"),this.ja?(xi(e,"$req",t),xi(e,"SID","null"),r.$=!0,eP(r,e,null)):eP(r,e,t),this.G=2}}else 3==this.G&&(n?oH(this,n):0==this.l.length||WU(this.i)||oH(this))},_t.Ga=function(){if(this.u=null,cH(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=N0(Jr(this.bb,this),n)}},_t.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ws(10),jx(this),cH(this))},_t.ab=function(){null!=this.v&&(this.v=null,jx(this),dP(this),Ws(19))},_t.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ws(2)):(this.h.info("Failed to ping google.com"),Ws(1))},(_t=mH.prototype).xa=function(){},_t.wa=function(){},_t.va=function(){},_t.ua=function(){},_t.Oa=function(){},$x.prototype.g=function(n,t){return new ta(n,t)},es(ta,Pr),ta.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),zO(Jr(n.hb,n,t))),Ws(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=fH(n,null,n.W),Gx(n)},ta.prototype.close=function(){cP(this.g)},ta.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,uP(this.g,t)}else this.v?((t={}).__data__=GO(n),uP(this.g,t)):uP(this.g,n)},ta.prototype.M=function(){this.g.j=null,delete this.j,cP(this.g),delete this.g,ta.Z.M.call(this)},es(gH,KO),es(_H,QO),es(z_,mH),z_.prototype.xa=function(){ts(this.g,"a")},z_.prototype.wa=function(n){ts(this.g,new gH(n))},z_.prototype.va=function(n){ts(this.g,new _H(n))},z_.prototype.ua=function(){ts(this.g,"b")},$x.prototype.createWebChannel=$x.prototype.g,ta.prototype.send=ta.prototype.u,ta.prototype.open=ta.prototype.m,ta.prototype.close=ta.prototype.close,kx.NO_ERROR=0,kx.TIMEOUT=8,kx.HTTP_ERROR=6,RU.COMPLETE="complete",PU.EventType=F0,F0.OPEN="a",F0.CLOSE="b",F0.ERROR="c",F0.MESSAGE="d",Pr.prototype.listen=Pr.prototype.N,lr.prototype.listenOnce=lr.prototype.O,lr.prototype.getLastError=lr.prototype.La,lr.prototype.getLastErrorCode=lr.prototype.Da,lr.prototype.getStatus=lr.prototype.ba,lr.prototype.getResponseJson=lr.prototype.Qa,lr.prototype.getResponseText=lr.prototype.ga,lr.prototype.send=lr.prototype.ea;var a7=Yu.createWebChannelTransport=function(){return new $x},l7=Yu.getStatEventTarget=function(){return Ax()},fP=Yu.ErrorCode=kx,c7=Yu.EventType=RU,u7=Yu.Event=dm,vH=Yu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},d7=Yu.FetchXmlHttpFactory=G0,qx=Yu.WebChannel=PU,h7=Yu.XhrIo=lr;const yH="@firebase/firestore";class Nr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Nr.UNAUTHENTICATED=new Nr(null),Nr.GOOGLE_CREDENTIALS=new Nr("google-credentials-uid"),Nr.FIRST_PARTY=new Nr("first-party-uid"),Nr.MOCK_USER=new Nr("mock-user");let $_="9.9.2";const kh=new ql.Yd("@firebase/firestore");function pP(){return kh.logLevel}function $e(n,...t){if(kh.logLevel<=ql.in.DEBUG){const e=t.map(mP);kh.debug(`Firestore (${$_}): ${n}`,...e)}}function tr(n,...t){if(kh.logLevel<=ql.in.ERROR){const e=t.map(mP);kh.error(`Firestore (${$_}): ${n}`,...e)}}function gm(n,...t){if(kh.logLevel<=ql.in.WARN){const e=t.map(mP);kh.warn(`Firestore (${$_}): ${n}`,...e)}}function mP(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function yt(n="Unexpected state"){const t=`FIRESTORE (${$_}) INTERNAL ASSERTION FAILED: `+n;throw tr(t),new Error(t)}function jt(n,t){n||yt()}function dt(n,t){return n}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends L.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class bH{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class m7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Nr.UNAUTHENTICATED))}shutdown(){}}class g7{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class _7{constructor(t){this.t=t,this.currentUser=Nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=g=>this.i!==r?(r=this.i,e(g)):Promise.resolve();let c=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Fr,t.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const g=c;t.enqueueRetryable((0,Se.Z)(function*(){yield g.promise,yield s(i.currentUser)}))},f=g=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(g=>f(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Fr)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(jt("string"==typeof i.accessToken),new bH(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return jt(null===t||"string"==typeof t),new Nr(t)}}class v7{constructor(t,e,i){this.type="FirstParty",this.user=Nr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const r=t.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class y7{constructor(t,e,i){this.h=t,this.l=e,this.m=i}getToken(){return Promise.resolve(new v7(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(Nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wH{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b7{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const i=s=>{null!=s.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.p;return this.p=s.token,$e("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?r(s):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(jt("string"==typeof e.token),this.p=e.token,new wH(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function w7(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class CH{static I(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=w7(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function Xt(n,t){return n<t?-1:n>t?1:0}function q_(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function DH(n){return n+"\0"}class Ti{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ue(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ue(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ue(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ue(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ti.fromMillis(Date.now())}static fromDate(t){return Ti.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new Ti(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Xt(this.nanoseconds,t.nanoseconds):Xt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Bt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Bt(t)}static min(){return new Bt(new Ti(0,0))}static max(){return new Bt(new Ti(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Y0{constructor(t,e,i){void 0===e?e=0:e>t.length&&yt(),void 0===i?i=t.length-e:i>t.length-e&&yt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===Y0.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Y0?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),c=e.get(r);if(s<c)return-1;if(s>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Mn extends Y0{construct(t,e,i){return new Mn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Ue(be.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new Mn(e)}static emptyPath(){return new Mn([])}}const C7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ji extends Y0{construct(t,e,i){return new ji(t,e,i)}static isValidIdentifier(t){return C7.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ji.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ji(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Ue(be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const d=t[r];if("\\"===d){if(r+1===t.length)throw new Ue(be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[r+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Ue(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=f,r+=2}else"`"===d?(c=!c,r++):"."!==d||c?(i+=d,r++):(s(),r++)}if(s(),c)throw new Ue(be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ji(e)}static emptyPath(){return new ji([])}}class ot{constructor(t){this.path=t}static fromPath(t){return new ot(Mn.fromString(t))}static fromName(t){return new ot(Mn.fromString(t).popFirst(5))}static empty(){return new ot(Mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Mn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Mn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ot(new Mn(t.slice()))}}class Wx{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function gP(n){return n.fields.find(t=>2===t.kind)}function _m(n){return n.fields.filter(t=>2!==t.kind)}Wx.UNKNOWN_ID=-1;class Yx{constructor(t,e){this.fieldPath=t,this.kind=e}}class Z0{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Z0(0,na.min())}}function EH(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Bt.fromTimestamp(1e9===i?new Ti(e+1,0):new Ti(e,i));return new na(r,ot.empty(),t)}function SH(n){return new na(n.readTime,n.key,-1)}class na{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new na(Bt.min(),ot.empty(),-1)}static max(){return new na(Bt.max(),ot.empty(),-1)}}function _P(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=ot.comparator(n.documentKey,t.documentKey),0!==e?e:Xt(n.largestBatchId,t.largestBatchId))}const xH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function Rh(n){return vP.apply(this,arguments)}function vP(){return vP=(0,Se.Z)(function*(n){if(n.code!==be.FAILED_PRECONDITION||n.message!==xH)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),vP.apply(this,arguments)}class me{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new me((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof me?e:me.resolve(e)}catch(e){return me.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):me.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):me.reject(e)}static resolve(t){return new me((e,i)=>{e(t)})}static reject(t){return new me((e,i)=>{i(t)})}static waitFor(t){return new me((e,i)=>{let r=0,s=0,c=!1;t.forEach(d=>{++r,d.next(()=>{++s,c&&s===r&&e()},f=>i(f))}),c=!0,s===r&&e()})}static or(t){let e=me.resolve(!1);for(const i of t)e=e.next(r=>r?me.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new me((i,r)=>{const s=t.length,c=new Array(s);let d=0;for(let f=0;f<s;f++){const g=f;e(t[g]).next(b=>{c[g]=b,++d,d===s&&i(c)},b=>r(b))}})}static doWhile(t,e){return new me((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class Zx{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.T=new Fr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{e.error?this.T.reject(new K0(t,e.error)):this.T.resolve()},this.transaction.onerror=i=>{const r=yP(i.target.error);this.T.reject(new K0(t,r))}}static open(t,e,i,r){try{return new Zx(e,t.transaction(r,i))}catch(s){throw new K0(e,s)}}get A(){return this.T.promise}abort(t){t&&this.T.reject(t),this.aborted||($e("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new x7(e)}}class Yl{constructor(t,e,i){this.name=t,this.version=e,this.P=i,12.2===Yl.v((0,L.z$)())&&tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return $e("SimpleDb","Removing database:",t),vm(window.indexedDB.deleteDatabase(t)).toPromise()}static V(){if(!(0,L.hl)())return!1;if(Yl.S())return!0;const t=(0,L.z$)(),e=Yl.v(t),i=0<e&&e<10,r=Yl.D(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static S(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.C)}static N(t,e){return t.store(e)}static v(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static D(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}k(t){var e=this;return(0,Se.Z)(function*(){return e.db||($e("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=c=>{i(c.target.result)},s.onblocked=()=>{r(new K0(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const d=c.target.error;r("VersionError"===d.name?new Ue(be.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Ue(be.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new K0(t,d))},s.onupgradeneeded=c=>{$e("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.P.M(c.target.result,s.transaction,c.oldVersion,e.version).next(()=>{$e("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.O&&(e.db.onversionchange=i=>e.O(i)),e.db})()}F(t){this.O=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,Se.Z)(function*(){const c="readonly"===e;let d=0;for(;;){++d;try{s.db=yield s.k(t);const f=Zx.open(s.db,t,c?"readonly":"readwrite",i),g=r(f).next(b=>(f.R(),b)).catch(b=>(f.abort(b),me.reject(b))).toPromise();return g.catch(()=>{}),yield f.A,g}catch(f){const g=f,b="FirebaseError"!==g.name&&d<3;if($e("SimpleDb","Transaction failed with error:",g.message,"Retrying:",b),s.close(),!b)return Promise.reject(g)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class S7{constructor(t){this.$=t,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(t){this.$=t}done(){this.B=!0}q(t){this.L=t}delete(){return vm(this.$.delete())}}class K0 extends Ue{constructor(t,e){super(be.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Oh(n){return"IndexedDbTransactionError"===n.name}class x7{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?($e("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),vm(i)}add(t){return $e("SimpleDb","ADD",this.store.name,t,t),vm(this.store.add(t))}get(t){return vm(this.store.get(t)).next(e=>(void 0===e&&(e=null),$e("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return $e("SimpleDb","DELETE",this.store.name,t),vm(this.store.delete(t))}count(){return $e("SimpleDb","COUNT",this.store.name),vm(this.store.count())}K(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.G(r,(c,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new me((s,c)=>{r.onerror=d=>{c(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}j(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new me((r,s)=>{i.onerror=c=>{s(c.target.error)},i.onsuccess=c=>{r(c.target.result)}})}W(t,e){$e("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.H=!1;const r=this.cursor(i);return this.G(r,(s,c,d)=>d.delete())}J(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.G(r,e)}Y(t){const e=this.cursor({});return new me((i,r)=>{e.onerror=s=>{const c=yP(s.target.error);r(c)},e.onsuccess=s=>{const c=s.target.result;c?t(c.primaryKey,c.value).next(d=>{d?c.continue():i()}):i()}})}G(t,e){const i=[];return new me((r,s)=>{t.onerror=c=>{s(c.target.error)},t.onsuccess=c=>{const d=c.target.result;if(!d)return void r();const f=new S7(d),g=e(d.primaryKey,d.value,f);if(g instanceof me){const b=g.catch(E=>(f.done(),me.reject(E)));i.push(b)}f.isDone?r():null===f.U?d.continue():d.continue(f.U)}}).next(()=>me.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.H?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function vm(n){return new me((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=yP(i.target.error);e(r)}})}let MH=!1;function yP(n){const t=Yl.v((0,L.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return MH||(MH=!0,setTimeout(()=>{throw i},0)),i}}return n}class T7{constructor(t,e){this.asyncQueue=t,this.X=e,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(t){var e=this;$e("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,Se.Z)(function*(){e.task=null;try{$e("IndexBackiller",`Documents written: ${yield e.X.tt()}`)}catch(i){Oh(i)?$e("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Rh(i)}yield e.Z(1)}))}}class M7{constructor(t,e){this.localStore=t,this.persistence=e}tt(t=50){var e=this;return(0,Se.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.et(i,t))})()}et(t,e){const i=new Set;let r=e,s=!0;return me.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(c=>{if(null!==c&&!i.has(c))return $e("IndexBackiller",`Processing collection: ${c}`),this.nt(t,c,r).next(d=>{r-=d,i.add(c)});s=!1})).next(()=>e-r)}nt(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next(()=>this.st(r,s)).next(d=>($e("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>c.size)}))}st(t,e){let i=t;return e.changes.forEach((r,s)=>{const c=SH(s);_P(c,i)>0&&(i=c)}),new na(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}class yo{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.it(i),this.rt=i=>e.writeSequenceNumber(i))}it(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.rt&&this.rt(t),t}}function IH(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function ym(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function AH(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}yo.ot=-1;class Gi{constructor(t,e){this.comparator=t,this.root=e||ns.EMPTY}insert(t,e){return new Gi(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ns.BLACK,null,null))}remove(t){return new Gi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ns.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Kx(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Kx(this.root,t,this.comparator,!1)}getReverseIterator(){return new Kx(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Kx(this.root,t,this.comparator,!0)}}class Kx{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ns{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??ns.RED,this.left=r??ns.EMPTY,this.right=s??ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new ns(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ns.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return ns.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw yt();const t=this.left.check();if(t!==this.right.check())throw yt();return t+(this.isRed()?0:1)}}ns.EMPTY=null,ns.RED=!0,ns.BLACK=!1,ns.EMPTY=new class{constructor(){this.size=0}get key(){throw yt()}get value(){throw yt()}get color(){throw yt()}get left(){throw yt()}get right(){throw yt()}copy(n,t,e,i,r){return this}insert(n,t,e){return new ns(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zn{constructor(t){this.comparator=t,this.data=new Gi(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new kH(this.data.getIterator())}getIteratorFrom(t){return new kH(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof zn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new zn(this.comparator);return e.data=t,e}}class kH{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function W_(n){return n.hasNext()?n.getNext():void 0}class ia{constructor(t){this.fields=t,t.sort(ji.comparator)}static empty(){return new ia([])}unionWith(t){let e=new zn(ji.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new ia(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return q_(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class wr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new wr(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new wr(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Xt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}wr.EMPTY_BYTE_STRING=new wr("");const A7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ph(n){if(jt(!!n),"string"==typeof n){let t=0;const e=A7.exec(n);if(jt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:zi(n.seconds),nanos:zi(n.nanos)}}function zi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function bm(n){return"string"==typeof n?wr.fromBase64String(n):wr.fromUint8Array(n)}function bP(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function RH(n){const t=n.mapValue.fields.__previous_value__;return bP(t)?RH(t):t}function Q0(n){const t=Ph(n.mapValue.fields.__local_write_time__.timestampValue);return new Ti(t.seconds,t.nanos)}class k7{constructor(t,e,i,r,s,c,d,f){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.useFetchStreams=f}}class Qu{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Qu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Qu&&t.projectId===this.projectId&&t.database===this.database}}function X0(n){return null==n}function J0(n){return 0===n&&1/n==-1/0}function OH(n){return"number"==typeof n&&Number.isInteger(n)&&!J0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Nh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Qx={nullValue:"NULL_VALUE"};function wm(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bP(n)?4:LH(n)?9007199254740991:10:yt()}function Oc(n,t){if(n===t)return!0;const e=wm(n);if(e!==wm(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Q0(n).isEqual(Q0(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Ph(i.timestampValue),c=Ph(r.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,bm(n.bytesValue).isEqual(bm(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return zi(i.geoPointValue.latitude)===zi(r.geoPointValue.latitude)&&zi(i.geoPointValue.longitude)===zi(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return zi(i.integerValue)===zi(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=zi(i.doubleValue),c=zi(r.doubleValue);return s===c?J0(s)===J0(c):isNaN(s)&&isNaN(c)}return!1}(n,t);case 9:return q_(n.arrayValue.values||[],t.arrayValue.values||[],Oc);case 10:return function(i,r){const s=i.mapValue.fields||{},c=r.mapValue.fields||{};if(IH(s)!==IH(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===c[d]||!Oc(s[d],c[d])))return!1;return!0}(n,t);default:return yt()}var r}function ew(n,t){return void 0!==(n.values||[]).find(e=>Oc(e,t))}function Fh(n,t){if(n===t)return 0;const e=wm(n),i=wm(t);if(e!==i)return Xt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Xt(n.booleanValue,t.booleanValue);case 2:return function(r,s){const c=zi(r.integerValue||r.doubleValue),d=zi(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,t);case 3:return PH(n.timestampValue,t.timestampValue);case 4:return PH(Q0(n),Q0(t));case 5:return Xt(n.stringValue,t.stringValue);case 6:return function(r,s){const c=bm(r),d=bm(s);return c.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const c=r.split("/"),d=s.split("/");for(let f=0;f<c.length&&f<d.length;f++){const g=Xt(c[f],d[f]);if(0!==g)return g}return Xt(c.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const c=Xt(zi(r.latitude),zi(s.latitude));return 0!==c?c:Xt(zi(r.longitude),zi(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const c=r.values||[],d=s.values||[];for(let f=0;f<c.length&&f<d.length;++f){const g=Fh(c[f],d[f]);if(g)return g}return Xt(c.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===Nh.mapValue&&s===Nh.mapValue)return 0;if(r===Nh.mapValue)return 1;if(s===Nh.mapValue)return-1;const c=r.fields||{},d=Object.keys(c),f=s.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let b=0;b<d.length&&b<g.length;++b){const E=Xt(d[b],g[b]);if(0!==E)return E;const I=Fh(c[d[b]],f[g[b]]);if(0!==I)return I}return Xt(d.length,g.length)}(n.mapValue,t.mapValue);default:throw yt()}}function PH(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Xt(n,t);const e=Ph(n),i=Ph(t),r=Xt(e.seconds,i.seconds);return 0!==r?r:Xt(e.nanos,i.nanos)}function Y_(n){return wP(n)}function wP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Ph(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?bm(n.bytesValue).toBase64():"referenceValue"in n?ot.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const c of i.values||[])s?s=!1:r+=",",r+=wP(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",c=!0;for(const d of r)c?c=!1:s+=",",s+=`${d}:${wP(i.fields[d])}`;return s+"}"}(n.mapValue):yt();var t}function Cm(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function CP(n){return!!n&&"integerValue"in n}function tw(n){return!!n&&"arrayValue"in n}function NH(n){return!!n&&"nullValue"in n}function FH(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xx(n){return!!n&&"mapValue"in n}function nw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return ym(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=nw(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=nw(n.arrayValue.values[e]);return t}return Object.assign({},n)}function LH(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function R7(n){return"nullValue"in n?Qx:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Cm(Qu.empty(),ot.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:yt()}function O7(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Cm(Qu.empty(),ot.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Nh:yt()}function BH(n,t){const e=Fh(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function VH(n,t){const e=Fh(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class is{constructor(t){this.value=t}static empty(){return new is({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Xx(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=nw(e)}setAll(t){let e=ji.emptyPath(),i={},r=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const f=this.getFieldsMap(e);this.applyChanges(f,i,r),i={},r=[],e=d.popLast()}c?i[d.lastSegment()]=nw(c):r.push(d.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());Xx(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Oc(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Xx(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){ym(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new is(nw(this.value))}}function UH(n){const t=[];return ym(n.fields,(e,i)=>{const r=new ji([e]);if(Xx(i)){const s=UH(i.mapValue).fields;if(0===s.length)t.push(r);else for(const c of s)t.push(r.child(c))}else t.push(r)}),new ia(t)}class ai{constructor(t,e,i,r,s,c){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.data=s,this.documentState=c}static newInvalidDocument(t){return new ai(t,0,Bt.min(),Bt.min(),is.empty(),0)}static newFoundDocument(t,e,i){return new ai(t,1,e,Bt.min(),i,0)}static newNoDocument(t,e){return new ai(t,2,e,Bt.min(),is.empty(),0)}static newUnknownDocument(t,e){return new ai(t,3,e,Bt.min(),is.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=is.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=is.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof ai&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ai(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class P7{constructor(t,e=null,i=[],r=[],s=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=c,this.endAt=d,this.ut=null}}function HH(n,t=null,e=[],i=[],r=null,s=null,c=null){return new P7(n,t,e,i,r,s,c)}function Dm(n){const t=dt(n);if(null===t.ut){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+Y_(r.value);var r}).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),X0(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Y_(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Y_(i)).join(",")),t.ut=e}return t.ut}function iw(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!G7(n.orderBy[r],t.orderBy[r]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((e=n.filters[r]).op!==(i=t.filters[r]).op||!e.field.isEqual(i.field)||!Oc(e.value,i.value))return!1;var e,i;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!qH(n.startAt,t.startAt)&&qH(n.endAt,t.endAt)}function Jx(n){return ot.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function eT(n,t){return n.filters.filter(e=>e instanceof rs&&e.field.isEqual(t))}function jH(n,t,e){let i=Qx,r=!0;for(const s of eT(n,t)){let c=Qx,d=!0;switch(s.op){case"<":case"<=":c=R7(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,d=!1;break;case"!=":case"not-in":c=Qx}BH({value:i,inclusive:r},{value:c,inclusive:d})<0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];BH({value:i,inclusive:r},{value:c,inclusive:e.inclusive})<0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}function GH(n,t,e){let i=Nh,r=!0;for(const s of eT(n,t)){let c=Nh,d=!0;switch(s.op){case">=":case">":c=O7(s.value),d=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,d=!1;break;case"!=":case"not-in":c=Nh}VH({value:i,inclusive:r},{value:c,inclusive:d})>0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];VH({value:i,inclusive:r},{value:c,inclusive:e.inclusive})>0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}class rs extends class{}{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.ct(t,e,i):new F7(t,e,i):"array-contains"===e?new V7(t,i):"in"===e?new U7(t,i):"not-in"===e?new H7(t,i):"array-contains-any"===e?new j7(t,i):new rs(t,e,i)}static ct(t,e,i){return"in"===e?new L7(t,i):new B7(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.at(Fh(e,this.value)):null!==e&&wm(this.value)===wm(e)&&this.at(Fh(e,this.value))}at(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return yt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class F7 extends rs{constructor(t,e,i){super(t,e,i),this.key=ot.fromName(i.referenceValue)}matches(t){const e=ot.comparator(t.key,this.key);return this.at(e)}}class L7 extends rs{constructor(t,e){super(t,"in",e),this.keys=zH(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class B7 extends rs{constructor(t,e){super(t,"not-in",e),this.keys=zH(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function zH(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>ot.fromName(i.referenceValue))}class V7 extends rs{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return tw(e)&&ew(e.arrayValue,this.value)}}class U7 extends rs{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&ew(this.value.arrayValue,e)}}class H7 extends rs{constructor(t,e){super(t,"not-in",e)}matches(t){if(ew(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!ew(this.value.arrayValue,e)}}class j7 extends rs{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!tw(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>ew(this.value.arrayValue,i))}}class Lh{constructor(t,e){this.position=t,this.inclusive=e}}class Z_{constructor(t,e="asc"){this.field=t,this.dir=e}}function G7(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function $H(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],c=n.position[r];if(i=s.field.isKeyField()?ot.comparator(ot.fromName(c.referenceValue),e.key):Fh(c,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function qH(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Oc(n.position[e],t.position[e]))return!1;return!0}class Xu{constructor(t,e=null,i=[],r=[],s=null,c="F",d=null,f=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=c,this.startAt=d,this.endAt=f,this.lt=null,this.ft=null}}function WH(n,t,e,i,r,s,c,d){return new Xu(n,t,e,i,r,s,c,d)}function K_(n){return new Xu(n)}function YH(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function DP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function EP(n){for(const t of n.filters)if(t.ht())return t.field;return null}function SP(n){return null!==n.collectionGroup}function Q_(n){const t=dt(n);if(null===t.lt){t.lt=[];const e=EP(t),i=DP(t);if(null!==e&&null===i)e.isKeyField()||t.lt.push(new Z_(e)),t.lt.push(new Z_(ji.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t.lt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new Z_(ji.keyField(),s))}}}return t.lt}function bo(n){const t=dt(n);if(!t.ft)if("F"===t.limitType)t.ft=HH(t.path,t.collectionGroup,Q_(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of Q_(t))e.push(new Z_(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new Lh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Lh(t.startAt.position,t.startAt.inclusive):null;t.ft=HH(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t.ft}function tT(n,t,e){return new Xu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function rw(n,t){return iw(bo(n),bo(t))&&n.limitType===t.limitType}function ZH(n){return`${Dm(bo(n))}|lt:${n.limitType}`}function xP(n){return`Query(target=${function N7(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(i=e).field.canonicalString()} ${i.op} ${Y_(i.value)}`;var i}).join(", ")}]`),X0(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(i=e).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>Y_(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>Y_(e)).join(",")),`Target(${t})`}(bo(n))}; limitType=${n.limitType})`}function TP(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):ot.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of e.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,c){const d=$H(r,s,c);return r.inclusive?d<=0:d<0}(e.startAt,Q_(e),i)||e.endAt&&!function(r,s,c){const d=$H(r,s,c);return r.inclusive?d>=0:d>0}(e.endAt,Q_(e),i)));var e,i}function KH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function QH(n){return(t,e)=>{let i=!1;for(const r of Q_(n)){const s=z7(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function z7(n,t,e){const i=n.field.isKeyField()?ot.comparator(t.key,e.key):function(r,s,c){const d=s.data.field(r),f=c.data.field(r);return null!==d&&null!==f?Fh(d,f):yt()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return yt()}}function XH(n,t){if(n.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:J0(t)?"-0":t}}function JH(n){return{integerValue:""+n}}function ej(n,t){return OH(t)?JH(t):XH(n,t)}class nT{constructor(){this._=void 0}}function $7(n,t,e){return n instanceof X_?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof Em?nj(n,t):n instanceof Sm?ij(n,t):function(i,r){const s=tj(i,r),c=rj(s)+rj(i._t);return CP(s)&&CP(i._t)?JH(c):XH(i.wt,c)}(n,t)}function q7(n,t,e){return n instanceof Em?nj(n,t):n instanceof Sm?ij(n,t):e}function tj(n,t){return n instanceof J_?CP(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class X_ extends nT{}class Em extends nT{constructor(t){super(),this.elements=t}}function nj(n,t){const e=sj(t);for(const i of n.elements)e.some(r=>Oc(r,i))||e.push(i);return{arrayValue:{values:e}}}class Sm extends nT{constructor(t){super(),this.elements=t}}function ij(n,t){let e=sj(t);for(const i of n.elements)e=e.filter(r=>!Oc(r,i));return{arrayValue:{values:e}}}class J_ extends nT{constructor(t,e){super(),this.wt=t,this._t=e}}function rj(n){return zi(n.integerValue||n.doubleValue)}function sj(n){return tw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class sw{constructor(t,e){this.field=t,this.transform=e}}class Y7{constructor(t,e){this.version=t,this.transformResults=e}}class Ni{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ni}static exists(t){return new Ni(void 0,t)}static updateTime(t){return new Ni(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function iT(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class rT{}function oj(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new tv(n.key,Ni.none()):new ev(n.key,n.data,Ni.none());{const e=n.data,i=is.empty();let r=new zn(ji.comparator);for(let s of t.fields)if(!r.has(s)){let c=e.field(s);null===c&&s.length>1&&(s=s.popLast(),c=e.field(s)),null===c?i.delete(s):i.set(s,c),r=r.add(s)}return new Ju(n.key,i,new ia(r.toArray()),Ni.none())}}function Z7(n,t,e){n instanceof ev?function(i,r,s){const c=i.value.clone(),d=cj(i.fieldTransforms,r,s.transformResults);c.setAll(d),r.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,t,e):n instanceof Ju?function(i,r,s){if(!iT(i.precondition,r))return void r.convertToUnknownDocument(s.version);const c=cj(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(lj(i)),d.setAll(c),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function ow(n,t,e,i){return n instanceof ev?function(r,s,c,d){if(!iT(r.precondition,s))return c;const f=r.value.clone(),g=uj(r.fieldTransforms,d,s);return f.setAll(g),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(n,t,e,i):n instanceof Ju?function(r,s,c,d){if(!iT(r.precondition,s))return c;const f=uj(r.fieldTransforms,d,s),g=s.data;return g.setAll(lj(r)),g.setAll(f),s.convertToFoundDocument(s.version,g).setHasLocalMutations(),null===c?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(b=>b.field))}(n,t,e,i):(c=e,iT(n.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function K7(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=tj(i.transform,r||null);null!=s&&(null===e&&(e=is.empty()),e.set(i.field,s))}return e||null}function aj(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&q_(e,i,(r,s)=>function W7(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof Em&&i instanceof Em||e instanceof Sm&&i instanceof Sm?q_(e.elements,i.elements,Oc):e instanceof J_&&i instanceof J_?Oc(e._t,i._t):e instanceof X_&&i instanceof X_);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class ev extends rT{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ju extends rT{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function lj(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function cj(n,t,e){const i=new Map;jt(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],c=s.transform,d=t.data.field(s.field);i.set(s.field,q7(c,d,e[r]))}return i}function uj(n,t,e){const i=new Map;for(const r of n){const s=r.transform,c=e.data.field(r.field);i.set(r.field,$7(s,c,t))}return i}class tv extends rT{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MP extends rT{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Q7{constructor(t){this.count=t}}var cr,In;function dj(n){switch(n){default:return yt();case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0}}function hj(n){if(void 0===n)return tr("GRPC error has no .code"),be.UNKNOWN;switch(n){case cr.OK:return be.OK;case cr.CANCELLED:return be.CANCELLED;case cr.UNKNOWN:return be.UNKNOWN;case cr.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case cr.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case cr.INTERNAL:return be.INTERNAL;case cr.UNAVAILABLE:return be.UNAVAILABLE;case cr.UNAUTHENTICATED:return be.UNAUTHENTICATED;case cr.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case cr.NOT_FOUND:return be.NOT_FOUND;case cr.ALREADY_EXISTS:return be.ALREADY_EXISTS;case cr.PERMISSION_DENIED:return be.PERMISSION_DENIED;case cr.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case cr.ABORTED:return be.ABORTED;case cr.OUT_OF_RANGE:return be.OUT_OF_RANGE;case cr.UNIMPLEMENTED:return be.UNIMPLEMENTED;case cr.DATA_LOSS:return be.DATA_LOSS;default:return yt()}}(In=cr||(cr={}))[In.OK=0]="OK",In[In.CANCELLED=1]="CANCELLED",In[In.UNKNOWN=2]="UNKNOWN",In[In.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",In[In.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",In[In.NOT_FOUND=5]="NOT_FOUND",In[In.ALREADY_EXISTS=6]="ALREADY_EXISTS",In[In.PERMISSION_DENIED=7]="PERMISSION_DENIED",In[In.UNAUTHENTICATED=16]="UNAUTHENTICATED",In[In.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",In[In.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",In[In.ABORTED=10]="ABORTED",In[In.OUT_OF_RANGE=11]="OUT_OF_RANGE",In[In.UNIMPLEMENTED=12]="UNIMPLEMENTED",In[In.INTERNAL=13]="INTERNAL",In[In.UNAVAILABLE=14]="UNAVAILABLE",In[In.DATA_LOSS=15]="DATA_LOSS";class Bh{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){ym(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return AH(this.inner)}size(){return this.innerSize}}const X7=new Gi(ot.comparator);function wo(){return X7}const fj=new Gi(ot.comparator);function aw(...n){let t=fj;for(const e of n)t=t.insert(e.key,e);return t}function pj(n){let t=fj;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Pc(){return lw()}function mj(){return lw()}function lw(){return new Bh(n=>n.toString(),(n,t)=>n.isEqual(t))}const J7=new Gi(ot.comparator),eQ=new zn(ot.comparator);function sn(...n){let t=eQ;for(const e of n)t=t.add(e);return t}const tQ=new zn(Xt);function sT(){return tQ}class cw{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e){const i=new Map;return i.set(t,uw.createSynthesizedTargetChangeForCurrentChange(t,e)),new cw(Bt.min(),i,sT(),wo(),sn())}}class uw{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e){return new uw(wr.EMPTY_BYTE_STRING,e,sn(),sn(),sn())}}class oT{constructor(t,e,i,r){this.gt=t,this.removedTargetIds=e,this.key=i,this.yt=r}}class gj{constructor(t,e){this.targetId=t,this.It=e}}class _j{constructor(t,e,i=wr.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class vj{constructor(){this.Tt=0,this.Et=bj(),this.At=wr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(t){t.approximateByteSize()>0&&(this.bt=!0,this.At=t)}St(){let t=sn(),e=sn(),i=sn();return this.Et.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:yt()}}),new uw(this.At,this.Rt,t,e,i)}Dt(){this.bt=!1,this.Et=bj()}Ct(t,e){this.bt=!0,this.Et=this.Et.insert(t,e)}xt(t){this.bt=!0,this.Et=this.Et.remove(t)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class nQ{constructor(t){this.Ot=t,this.Ft=new Map,this.$t=wo(),this.Bt=yj(),this.Lt=new zn(Xt)}Ut(t){for(const e of t.gt)t.yt&&t.yt.isFoundDocument()?this.qt(e,t.yt):this.Kt(e,t.key,t.yt);for(const e of t.removedTargetIds)this.Kt(e,t.key,t.yt)}Gt(t){this.forEachTarget(t,e=>{const i=this.Qt(e);switch(t.state){case 0:this.jt(e)&&i.Vt(t.resumeToken);break;case 1:i.kt(),i.Pt||i.Dt(),i.Vt(t.resumeToken);break;case 2:i.kt(),i.Pt||this.removeTarget(e);break;case 3:this.jt(e)&&(i.Mt(),i.Vt(t.resumeToken));break;case 4:this.jt(e)&&(this.Wt(e),i.Vt(t.resumeToken));break;default:yt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ft.forEach((i,r)=>{this.jt(r)&&e(r)})}zt(t){const e=t.targetId,i=t.It.count,r=this.Ht(e);if(r){const s=r.target;if(Jx(s))if(0===i){const c=new ot(s.path);this.Kt(e,c,ai.newNoDocument(c,Bt.min()))}else jt(1===i);else this.Jt(e)!==i&&(this.Wt(e),this.Lt=this.Lt.add(e))}}Yt(t){const e=new Map;this.Ft.forEach((s,c)=>{const d=this.Ht(c);if(d){if(s.current&&Jx(d.target)){const f=new ot(d.target.path);null!==this.$t.get(f)||this.Xt(c,f)||this.Kt(c,f,ai.newNoDocument(f,t))}s.vt&&(e.set(c,s.St()),s.Dt())}});let i=sn();this.Bt.forEach((s,c)=>{let d=!0;c.forEachWhile(f=>{const g=this.Ht(f);return!g||2===g.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.$t.forEach((s,c)=>c.setReadTime(t));const r=new cw(t,e,this.Lt,this.$t,i);return this.$t=wo(),this.Bt=yj(),this.Lt=new zn(Xt),r}qt(t,e){if(!this.jt(t))return;const i=this.Xt(t,e.key)?2:0;this.Qt(t).Ct(e.key,i),this.$t=this.$t.insert(e.key,e),this.Bt=this.Bt.insert(e.key,this.Zt(e.key).add(t))}Kt(t,e,i){if(!this.jt(t))return;const r=this.Qt(t);this.Xt(t,e)?r.Ct(e,1):r.xt(e),this.Bt=this.Bt.insert(e,this.Zt(e).delete(t)),i&&(this.$t=this.$t.insert(e,i))}removeTarget(t){this.Ft.delete(t)}Jt(t){const e=this.Qt(t).St();return this.Ot.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Nt(t){this.Qt(t).Nt()}Qt(t){let e=this.Ft.get(t);return e||(e=new vj,this.Ft.set(t,e)),e}Zt(t){let e=this.Bt.get(t);return e||(e=new zn(Xt),this.Bt=this.Bt.insert(t,e)),e}jt(t){const e=null!==this.Ht(t);return e||$e("WatchChangeAggregator","Detected inactive target",t),e}Ht(t){const e=this.Ft.get(t);return e&&e.Pt?null:this.Ot.te(t)}Wt(t){this.Ft.set(t,new vj),this.Ot.getRemoteKeysForTarget(t).forEach(e=>{this.Kt(t,e,null)})}Xt(t,e){return this.Ot.getRemoteKeysForTarget(t).has(e)}}function yj(){return new Gi(ot.comparator)}function bj(){return new Gi(ot.comparator)}const iQ={asc:"ASCENDING",desc:"DESCENDING"},rQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class sQ{constructor(t,e){this.databaseId=t,this.dt=e}}function dw(n,t){return n.dt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function wj(n,t){return n.dt?t.toBase64():t.toUint8Array()}function oQ(n,t){return dw(n,t.toTimestamp())}function Lr(n){return jt(!!n),Bt.fromTimestamp(function(t){const e=Ph(t);return new Ti(e.seconds,e.nanos)}(n))}function IP(n,t){return(e=n,new Mn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function Cj(n){const t=Mn.fromString(n);return jt(kj(t)),t}function hw(n,t){return IP(n.databaseId,t.path)}function Nc(n,t){const e=Cj(t);if(e.get(1)!==n.databaseId.projectId)throw new Ue(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ue(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new ot(Ej(e))}function AP(n,t){return IP(n.databaseId,t)}function Dj(n){const t=Cj(n);return 4===t.length?Mn.emptyPath():Ej(t)}function fw(n){return new Mn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ej(n){return jt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Sj(n,t,e){return{name:hw(n,t),fields:e.value.mapValue.fields}}function xj(n,t,e){const i=Nc(n,t.name),r=Lr(t.updateTime),s=new is({mapValue:{fields:t.fields}}),c=ai.newFoundDocument(i,r,s);return e&&c.setHasCommittedMutations(),e?c.setHasCommittedMutations():c}function pw(n,t){let e;if(t instanceof ev)e={update:Sj(n,t.key,t.value)};else if(t instanceof tv)e={delete:hw(n,t.key)};else if(t instanceof Ju)e={update:Sj(n,t.key,t.data),updateMask:mQ(t.fieldMask)};else{if(!(t instanceof MP))return yt();e={verify:hw(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const c=s.transform;if(c instanceof X_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Em)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Sm)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof J_)return{fieldPath:s.field.canonicalString(),increment:c._t};throw yt()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:oQ(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:yt()),e;var r}function kP(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?Ni.updateTime(Lr(r.updateTime)):void 0!==r.exists?Ni.exists(r.exists):Ni.none():Ni.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,c){let d=null;"setToServerValue"in c?(jt("REQUEST_TIME"===c.setToServerValue),d=new X_):"appendMissingElements"in c?d=new Em(c.appendMissingElements.values||[]):"removeAllFromArray"in c?d=new Sm(c.removeAllFromArray.values||[]):"increment"in c?d=new J_(s,c.increment):yt();const f=ji.fromServerFormat(c.fieldPath);return new sw(f,d)}(n,r)):[];var r;if(t.update){const r=Nc(n,t.update.name),s=new is({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=new ia((t.updateMask.fieldPaths||[]).map(g=>ji.fromServerFormat(g)));return new Ju(r,s,c,e,i)}return new ev(r,s,e,i)}if(t.delete){const r=Nc(n,t.delete);return new tv(r,e)}if(t.verify){const r=Nc(n,t.verify);return new MP(r,e)}return yt()}function Tj(n,t){return{documents:[AP(n,t.path)]}}function Mj(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=AP(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=AP(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(f){if(0===f.length)return;const g=f.map(b=>function(E){if("=="===E.op){if(FH(E.value))return{unaryFilter:{field:nv(E.field),op:"IS_NAN"}};if(NH(E.value))return{unaryFilter:{field:nv(E.field),op:"IS_NULL"}}}else if("!="===E.op){if(FH(E.value))return{unaryFilter:{field:nv(E.field),op:"IS_NOT_NAN"}};if(NH(E.value))return{unaryFilter:{field:nv(E.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nv(E.field),op:hQ(E.op),value:E.value}}}(b));return 1===g.length?g[0]:{compositeFilter:{op:"AND",filters:g}}}(t.filters);r&&(e.structuredQuery.where=r);const s=function(f){if(0!==f.length)return f.map(g=>{return{field:nv((b=g).field),direction:dQ(b.dir)};var b})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const c=(g=t.limit,n.dt||X0(g)?g:{value:g});var g,d,f;return null!==c&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(f=t.endAt).inclusive,values:f.position}),e}function Ij(n){let t=Dj(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){jt(1===i);const b=e.from[0];b.allDescendants?r=b.collectionId:t=t.child(b.collectionId)}let s=[];e.where&&(s=Aj(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(b=>{return new Z_(iv((E=b).field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let d=null;e.limit&&(d=function(b){let E;return E="object"==typeof b?b.value:b,X0(E)?null:E}(e.limit));let f=null;var b;e.startAt&&(f=new Lh((b=e.startAt).values||[],!!b.before));let g=null;return e.endAt&&(g=function(b){return new Lh(b.values||[],!b.before)}(e.endAt)),WH(t,r,c,s,d,"F",f,g)}function Aj(n){return n?void 0!==n.unaryFilter?[pQ(n)]:void 0!==n.fieldFilter?[fQ(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>Aj(t)).reduce((t,e)=>t.concat(e)):yt():[]}function dQ(n){return iQ[n]}function hQ(n){return rQ[n]}function nv(n){return{fieldPath:n.canonicalString()}}function iv(n){return ji.fromServerFormat(n.fieldPath)}function fQ(n){return rs.create(iv(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yt()}}(n.fieldFilter.op),n.fieldFilter.value)}function pQ(n){switch(n.unaryFilter.op){case"IS_NAN":const t=iv(n.unaryFilter.field);return rs.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=iv(n.unaryFilter.field);return rs.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=iv(n.unaryFilter.field);return rs.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=iv(n.unaryFilter.field);return rs.create(r,"!=",{nullValue:"NULL_VALUE"});default:return yt()}}function mQ(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function kj(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ys(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Rj(t)),t=gQ(n.get(e),t);return Rj(t)}function gQ(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function Rj(n){return n+"\x01\x01"}function Fc(n){const t=n.length;if(jt(t>=2),2===t)return jt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Mn.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const c=n.indexOf("\x01",s);switch((c<0||c>e)&&yt(),n.charAt(c+1)){case"\x01":const d=n.substring(s,c);let f;0===r.length?f=d:(r+=d,f=r,r=""),i.push(f);break;case"\x10":r+=n.substring(s,c),r+="\0";break;case"\x11":r+=n.substring(s,c+1);break;default:yt()}s=c+2}return new Mn(i)}const Oj=["userId","batchId"];function aT(n,t){return[n,Ys(t)]}function Pj(n,t,e){return[n,Ys(t),e]}const _Q={},vQ=["prefixPath","collectionGroup","readTime","documentId"],yQ=["prefixPath","collectionGroup","documentId"],bQ=["collectionGroup","readTime","prefixPath","documentId"],wQ=["canonicalId","targetId"],CQ=["targetId","path"],DQ=["path","targetId"],EQ=["collectionId","parent"],SQ=["indexId","uid"],xQ=["uid","sequenceNumber"],TQ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],MQ=["indexId","uid","orderedDocumentKey"],IQ=["userId","collectionPath","documentId"],AQ=["userId","collectionPath","largestBatchId"],kQ=["userId","collectionGroup","largestBatchId"],Nj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],RQ=[...Nj,"documentOverlays"],Fj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Lj=Fj,OQ=[...Lj,"indexConfiguration","indexState","indexEntries"];class RP extends TH{constructor(t,e){super(),this.ee=t,this.currentSequenceNumber=e}}function Br(n,t){const e=dt(n);return Yl.N(e.ee,t)}class OP{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&Z7(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=ow(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=ow(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=mj();return this.mutations.forEach(r=>{const s=t.get(r.key),c=s.overlayedDocument;let d=this.applyToLocalView(c,s.mutatedFields);d=e.has(r.key)?null:d;const f=oj(c,d);null!==f&&i.set(r.key,f),c.isValidDocument()||c.convertToNoDocument(Bt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),sn())}isEqual(t){return this.batchId===t.batchId&&q_(this.mutations,t.mutations,(e,i)=>aj(e,i))&&q_(this.baseMutations,t.baseMutations,(e,i)=>aj(e,i))}}class PP{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){jt(t.mutations.length===i.length);let r=J7;const s=t.mutations;for(let c=0;c<s.length;c++)r=r.insert(s[c].key,i[c].version);return new PP(t,e,i,r)}}class NP{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Vh{constructor(t,e,i,r,s=Bt.min(),c=Bt.min(),d=wr.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d}withSequenceNumber(t){return new Vh(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Vh(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Vh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class Bj{constructor(t){this.ne=t}}function Vj(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:lT(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:hw(r=n.ne,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:dw(r,s.version.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:xm(t.version)};else{if(!t.isUnknownDocument())return yt();i.unknownDocument={path:e.path.toArray(),version:xm(t.version)}}var r,s;return i}function lT(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function xm(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Tm(n){const t=new Ti(n.seconds,n.nanoseconds);return Bt.fromTimestamp(t)}function Mm(n,t){const e=(t.baseMutations||[]).map(s=>kP(n.ne,s));for(let s=0;s<t.mutations.length-1;++s){const c=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(c.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>kP(n.ne,s)),r=Ti.fromMillis(t.localWriteTimeMs);return new OP(t.batchId,r,e,i)}function mw(n){const t=Tm(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Tm(n.lastLimboFreeSnapshotVersion):Bt.min();let i;var r;return void 0!==n.query.documents?(jt(1===(r=n.query).documents.length),i=bo(K_(Dj(r.documents[0])))):i=bo(Ij(n.query)),new Vh(i,n.targetId,0,n.lastListenSequenceNumber,t,e,wr.fromBase64String(n.resumeToken))}function Uj(n,t){const e=xm(t.snapshotVersion),i=xm(t.lastLimboFreeSnapshotVersion);let r;r=Jx(t.target)?Tj(n.ne,t.target):Mj(n.ne,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Dm(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function FP(n){const t=Ij({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?tT(t,t.limit,"L"):t}function LP(n,t){return new NP(t.largestBatchId,kP(n.ne,t.overlayMutation))}function Hj(n,t){const e=t.path.lastSegment();return[n,Ys(t.path.popLast()),e]}function jj(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:xm(i.readTime),documentKey:Ys(i.documentKey.path),largestBatchId:i.largestBatchId}}class NQ{getBundleMetadata(t,e){return Gj(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Tm(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return Gj(t).put({bundleId:(i=e).id,createTime:xm(Lr(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return zj(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:FP(r.bundledQuery),readTime:Tm(r.readTime)};var r})}saveNamedQuery(t,e){return zj(t).put({name:(i=e).name,readTime:xm(Lr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Gj(n){return Br(n,"bundles")}function zj(n){return Br(n,"namedQueries")}class cT{constructor(t,e){this.wt=t,this.userId=e}static se(t,e){return new cT(t,e.uid||"")}getOverlay(t,e){return gw(t).get(Hj(this.userId,e)).next(i=>i?LP(this.wt,i):null)}getOverlays(t,e){const i=Pc();return me.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,c)=>{const d=new NP(e,c);r.push(this.ie(t,d))}),me.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(c=>r.add(Ys(c.getCollectionPath())));const s=[];return r.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);s.push(gw(t).W("collectionPathOverlayIndex",d))}),me.waitFor(s)}getOverlaysForCollection(t,e,i){const r=Pc(),s=Ys(e),c=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return gw(t).K("collectionPathOverlayIndex",c).next(d=>{for(const f of d){const g=LP(this.wt,f);r.set(g.getKey(),g)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=Pc();let c;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return gw(t).J({index:"collectionGroupOverlayIndex",range:d},(f,g,b)=>{const E=LP(this.wt,g);s.size()<r||E.largestBatchId===c?(s.set(E.getKey(),E),c=E.largestBatchId):b.done()}).next(()=>s)}ie(t,e){return gw(t).put(function(i,r,s){const[c,d,f]=Hj(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:pw(i.ne,s.mutation)}}(this.wt,this.userId,e))}}function gw(n){return Br(n,"documentOverlays")}class Im{constructor(){}re(t,e){this.oe(t,e),e.ue()}oe(t,e){if("nullValue"in t)this.ce(e,5);else if("booleanValue"in t)this.ce(e,10),e.ae(t.booleanValue?1:0);else if("integerValue"in t)this.ce(e,15),e.ae(zi(t.integerValue));else if("doubleValue"in t){const i=zi(t.doubleValue);isNaN(i)?this.ce(e,13):(this.ce(e,15),J0(i)?e.ae(0):e.ae(i))}else if("timestampValue"in t){const i=t.timestampValue;this.ce(e,20),"string"==typeof i?e.he(i):(e.he(`${i.seconds||""}`),e.ae(i.nanos||0))}else if("stringValue"in t)this.le(t.stringValue,e),this.fe(e);else if("bytesValue"in t)this.ce(e,30),e.de(bm(t.bytesValue)),this.fe(e);else if("referenceValue"in t)this._e(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.ce(e,45),e.ae(i.latitude||0),e.ae(i.longitude||0)}else"mapValue"in t?LH(t)?this.ce(e,Number.MAX_SAFE_INTEGER):(this.we(t.mapValue,e),this.fe(e)):"arrayValue"in t?(this.me(t.arrayValue,e),this.fe(e)):yt()}le(t,e){this.ce(e,25),this.ge(t,e)}ge(t,e){e.he(t)}we(t,e){const i=t.fields||{};this.ce(e,55);for(const r of Object.keys(i))this.le(r,e),this.oe(i[r],e)}me(t,e){const i=t.values||[];this.ce(e,50);for(const r of i)this.oe(r,e)}_e(t,e){this.ce(e,37),ot.fromName(t).path.forEach(i=>{this.ce(e,60),this.ge(i,e)})}ce(t,e){t.ae(e)}fe(t){t.ae(2)}}function FQ(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function $j(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=FQ(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}Im.ye=new Im;class LQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ie(i.value),i=e.next();this.Te()}Ee(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ae(i.value),i=e.next();this.Re()}be(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{const r=e.codePointAt(0);this.Ie(240|r>>>18),this.Ie(128|63&r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r)}}this.Te()}Pe(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const r=e.codePointAt(0);this.Ae(240|r>>>18),this.Ae(128|63&r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r)}}this.Re()}ve(t){const e=this.Ve(t),i=$j(e);this.Se(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}De(t){const e=this.Ve(t),i=$j(e);this.Se(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(t){this.Se(t.length),this.buffer.set(t,this.position),this.position+=t.length}Me(){return this.buffer.slice(0,this.position)}Ve(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ie(t){const e=255&t;0===e?(this.xe(0),this.xe(255)):255===e?(this.xe(255),this.xe(0)):this.xe(e)}Ae(t){const e=255&t;0===e?(this.ke(0),this.ke(255)):255===e?(this.ke(255),this.ke(0)):this.ke(t)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(t){this.Se(1),this.buffer[this.position++]=t}ke(t){this.Se(1),this.buffer[this.position++]=~t}Se(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class BQ{constructor(t){this.Oe=t}de(t){this.Oe.pe(t)}he(t){this.Oe.be(t)}ae(t){this.Oe.ve(t)}ue(){this.Oe.Ce()}}class VQ{constructor(t){this.Oe=t}de(t){this.Oe.Ee(t)}he(t){this.Oe.Pe(t)}ae(t){this.Oe.De(t)}ue(){this.Oe.Ne()}}class _w{constructor(){this.Oe=new LQ,this.Fe=new BQ(this.Oe),this.$e=new VQ(this.Oe)}seed(t){this.Oe.seed(t)}Be(t){return 0===t?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class Am{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Le(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new Am(this.indexId,this.documentKey,this.arrayValue,i)}}function km(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=qj(n.arrayValue,t.arrayValue),0!==e?e:(e=qj(n.directionalValue,t.directionalValue),0!==e?e:ot.comparator(n.documentKey,t.documentKey)))}function qj(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class UQ{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];for(const e of t.filters){const i=e;i.ht()?this.Ke=i:this.qe.push(i)}}Ge(t){const e=gP(t);if(void 0!==e&&!this.Qe(e))return!1;const i=_m(t);let r=0,s=0;for(;r<i.length&&this.Qe(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Ke){const c=i[r];if(!this.je(this.Ke,c)||!this.We(this.Ue[s++],c))return!1;++r}for(;r<i.length;++r){const c=i[r];if(s>=this.Ue.length||!this.We(this.Ue[s++],c))return!1}return!0}Qe(t){for(const e of this.qe)if(this.je(e,t))return!0;return!1}je(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}We(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class HQ{constructor(){this.ze=new BP}addToCollectionParentIndex(t,e){return this.ze.add(e),me.resolve()}getCollectionParents(t,e){return me.resolve(this.ze.getEntries(e))}addFieldIndex(t,e){return me.resolve()}deleteFieldIndex(t,e){return me.resolve()}getDocumentsMatchingTarget(t,e){return me.resolve(null)}getIndexType(t,e){return me.resolve(0)}getFieldIndexes(t,e){return me.resolve([])}getNextCollectionGroupToUpdate(t){return me.resolve(null)}getMinOffset(t,e){return me.resolve(na.min())}getMinOffsetFromCollectionGroup(t,e){return me.resolve(na.min())}updateCollectionGroup(t,e,i){return me.resolve()}updateIndexEntries(t,e){return me.resolve()}}class BP{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new zn(Mn.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new zn(Mn.comparator)).toArray()}}const uT=new Uint8Array(0);class jQ{constructor(t,e){this.user=t,this.databaseId=e,this.He=new BP,this.Je=new Bh(i=>Dm(i),(i,r)=>iw(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.He.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.He.add(e)});const s={collectionId:i,parent:Ys(r)};return Wj(t).put(s)}return me.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[DH(e),""],!1,!0);return Wj(t).K(r).next(s=>{for(const c of s){if(c.collectionId!==e)break;i.push(Fc(c.parent))}return i})}addFieldIndex(t,e){const i=dT(t),r={indexId:(c=e).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var c;delete r.indexId;const s=i.add(r);if(e.indexState){const c=yw(t);return s.next(d=>{c.put(jj(d,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=dT(t),r=yw(t),s=vw(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=vw(t);let r=!0;const s=new Map;return me.forEach(this.Ye(e),c=>this.Xe(t,c).next(d=>{r&&(r=!!d),s.set(c,d)})).next(()=>{if(r){let c=sn();const d=[];return me.forEach(s,(f,g)=>{var b;$e("IndexedDbIndexManager",`Using index ${b=f,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(rt=>`${rt.fieldPath}:${rt.kind}`).join(",")}`} to execute ${Dm(e)}`);const E=function(rt,et){const St=gP(et);if(void 0===St)return null;for(const It of eT(rt,St.fieldPath))switch(It.op){case"array-contains-any":return It.value.arrayValue.values||[];case"array-contains":return[It.value]}return null}(g,f),I=function(rt,et){const St=new Map;for(const It of _m(et))for(const fn of eT(rt,It.fieldPath))switch(fn.op){case"==":case"in":St.set(It.fieldPath.canonicalString(),fn.value);break;case"not-in":case"!=":return St.set(It.fieldPath.canonicalString(),fn.value),Array.from(St.values())}return null}(g,f),P=function(rt,et){const St=[];let It=!0;for(const fn of _m(et)){const nr=0===fn.kind?jH(rt,fn.fieldPath,rt.startAt):GH(rt,fn.fieldPath,rt.startAt);St.push(nr.value),It&&(It=nr.inclusive)}return new Lh(St,It)}(g,f),F=function(rt,et){const St=[];let It=!0;for(const fn of _m(et)){const nr=0===fn.kind?GH(rt,fn.fieldPath,rt.endAt):jH(rt,fn.fieldPath,rt.endAt);St.push(nr.value),It&&(It=nr.inclusive)}return new Lh(St,It)}(g,f),z=this.Ze(f,g,P),te=this.Ze(f,g,F),Ve=this.tn(f,g,I),Ze=this.en(f.indexId,E,z,P.inclusive,te,F.inclusive,Ve);return me.forEach(Ze,rt=>i.j(rt,e.limit).next(et=>{et.forEach(St=>{const It=ot.fromSegments(St.documentKey);c.has(It)||(c=c.add(It),d.push(It))})}))}).next(()=>d)}return me.resolve(null)})}Ye(t){let e=this.Je.get(t);return e||(e=[t],this.Je.set(t,e),e)}en(t,e,i,r,s,c,d){const f=(null!=e?e.length:1)*Math.max(i.length,s.length),g=f/(null!=e?e.length:1),b=[];for(let E=0;E<f;++E){const I=e?this.nn(e[E/g]):uT,P=this.sn(t,I,i[E%g],r),F=this.rn(t,I,s[E%g],c),z=d.map(te=>this.sn(t,I,te,!0));b.push(...this.createRange(P,F,z))}return b}sn(t,e,i,r){const s=new Am(t,ot.empty(),e,i);return r?s:s.Le()}rn(t,e,i,r){const s=new Am(t,ot.empty(),e,i);return r?s.Le():s}Xe(t,e){const i=new UQ(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let c=null;for(const d of s)i.Ge(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(t,e){let i=2;return me.forEach(this.Ye(e),r=>this.Xe(t,r).next(s=>{s?0!==i&&s.fields.length<function(c){let d=new zn(ji.comparator),f=!1;for(const g of c.filters){const b=g;b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?f=!0:d=d.add(b.field))}for(const g of c.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(f?1:0)}(r)&&(i=1):i=0})).next(()=>i)}on(t,e){const i=new _w;for(const r of _m(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const c=i.Be(r.kind);Im.ye.re(s,c)}return i.Me()}nn(t){const e=new _w;return Im.ye.re(t,e.Be(0)),e.Me()}un(t,e){const i=new _w;return Im.ye.re(Cm(this.databaseId,e),i.Be(function(r){const s=_m(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.Me()}tn(t,e,i){if(null===i)return[];let r=[];r.push(new _w);let s=0;for(const c of _m(t)){const d=i[s++];for(const f of r)if(this.cn(e,c.fieldPath)&&tw(d))r=this.an(r,c,d);else{const g=f.Be(c.kind);Im.ye.re(d,g)}}return this.hn(r)}Ze(t,e,i){return this.tn(t,e,i.position)}hn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Me();return e}an(t,e,i){const r=[...t],s=[];for(const c of i.arrayValue.values||[])for(const d of r){const f=new _w;f.seed(d.Me()),Im.ye.re(c,f.Be(e.kind)),s.push(f)}return s}cn(t,e){return!!t.filters.find(i=>i instanceof rs&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=dT(t),r=yw(t);return(e?i.K("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.K()).next(s=>{const c=[];return me.forEach(s,d=>r.get([d.indexId,this.uid]).next(f=>{c.push(function(g,b){const E=b?new Z0(b.sequenceNumber,new na(Tm(b.readTime),new ot(Fc(b.documentKey)),b.largestBatchId)):Z0.empty(),I=g.fields.map(([P,F])=>new Yx(ji.fromServerFormat(P),F));return new Wx(g.indexId,g.collectionGroup,I,E)}(d,f))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Xt(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=dT(t),s=yw(t);return this.ln(t).next(c=>r.K("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>me.forEach(d,f=>s.put(jj(f.indexId,this.user,c,i)))))}updateIndexEntries(t,e){const i=new Map;return me.forEach(e,(r,s)=>{const c=i.get(r.collectionGroup);return(c?me.resolve(c):this.getFieldIndexes(t,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),me.forEach(d,f=>this.fn(t,r,f).next(g=>{const b=this.dn(s,f);return g.isEqual(b)?me.resolve():this._n(t,s,f,g,b)}))))})}wn(t,e,i,r){return vw(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(i,e.key),documentKey:e.key.path.toArray()})}mn(t,e,i,r){return vw(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(i,e.key),e.key.path.toArray()])}fn(t,e,i){const r=vw(t);let s=new zn(km);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.un(i,e)])},(c,d)=>{s=s.add(new Am(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>s)}dn(t,e){let i=new zn(km);const r=this.on(e,t);if(null==r)return i;const s=gP(e);if(null!=s){const c=t.data.field(s.fieldPath);if(tw(c))for(const d of c.arrayValue.values||[])i=i.add(new Am(e.indexId,t.key,this.nn(d),r))}else i=i.add(new Am(e.indexId,t.key,uT,r));return i}_n(t,e,i,r,s){$e("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(d,f,g,b,E){const I=d.getIterator(),P=f.getIterator();let F=W_(I),z=W_(P);for(;F||z;){let te=!1,Ve=!1;if(F&&z){const Ze=g(F,z);Ze<0?Ve=!0:Ze>0&&(te=!0)}else null!=F?Ve=!0:te=!0;te?(b(z),z=W_(P)):Ve?(E(F),F=W_(I)):(F=W_(I),z=W_(P))}}(r,s,km,d=>{c.push(this.wn(t,e,i,d))},d=>{c.push(this.mn(t,e,i,d))}),me.waitFor(c)}ln(t){let e=1;return yw(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((c,d)=>km(c,d)).filter((c,d,f)=>!d||0!==km(c,f[d-1]));const r=[];r.push(t);for(const c of i){const d=km(c,t),f=km(c,e);if(0===d)r[0]=t.Le();else if(d>0&&f<0)r.push(c),r.push(c.Le());else if(f>0)break}r.push(e);const s=[];for(let c=0;c<r.length;c+=2)s.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,uT,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,uT,[]]));return s}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(Yj)}getMinOffset(t,e){return me.mapArray(this.Ye(e),i=>this.Xe(t,i).next(r=>r||yt())).next(Yj)}}function Wj(n){return Br(n,"collectionParents")}function vw(n){return Br(n,"indexEntries")}function dT(n){return Br(n,"indexConfiguration")}function yw(n){return Br(n,"indexState")}function Yj(n){jt(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;_P(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new na(t.readTime,t.documentKey,e)}const Zj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Co{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new Co(t,Co.DEFAULT_COLLECTION_PERCENTILE,Co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Kj(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],c=IDBKeyRange.only(e.batchId);let d=0;const f=i.J({range:c},(b,E,I)=>(d++,I.delete()));s.push(f.next(()=>{jt(1===d)}));const g=[];for(const b of e.mutations){const E=Pj(t,b.key.path,e.batchId);s.push(r.delete(E)),g.push(b.key)}return me.waitFor(s).next(()=>g)}function hT(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw yt();t=n.noDocument}return JSON.stringify(t).length}Co.DEFAULT_COLLECTION_PERCENTILE=10,Co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Co.DEFAULT=new Co(41943040,Co.DEFAULT_COLLECTION_PERCENTILE,Co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Co.DISABLED=new Co(-1,0,0);class fT{constructor(t,e,i,r){this.userId=t,this.wt=e,this.indexManager=i,this.referenceDelegate=r,this.gn={}}static se(t,e,i,r){jt(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new fT(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Uh(t).J({index:"userMutationsIndex",range:i},(r,s,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=rv(t),c=Uh(t);return c.add({}).next(d=>{jt("number"==typeof d);const f=new OP(d,e,i,r),g=function(I,P,F){const z=F.baseMutations.map(Ve=>pw(I.ne,Ve)),te=F.mutations.map(Ve=>pw(I.ne,Ve));return{userId:P,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:z,mutations:te}}(this.wt,this.userId,f),b=[];let E=new zn((I,P)=>Xt(I.canonicalString(),P.canonicalString()));for(const I of r){const P=Pj(this.userId,I.key.path,d);E=E.add(I.key.path.popLast()),b.push(c.put(g)),b.push(s.put(P,_Q))}return E.forEach(I=>{b.push(this.indexManager.addToCollectionParentIndex(t,I))}),t.addOnCommittedListener(()=>{this.gn[d]=f.keys()}),me.waitFor(b).next(()=>f)})}lookupMutationBatch(t,e){return Uh(t).get(e).next(i=>i?(jt(i.userId===this.userId),Mm(this.wt,i)):null)}yn(t,e){return this.gn[e]?me.resolve(this.gn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.gn[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Uh(t).J({index:"userMutationsIndex",range:r},(c,d,f)=>{d.userId===this.userId&&(jt(d.batchId>=i),s=Mm(this.wt,d)),f.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Uh(t).J({index:"userMutationsIndex",range:e,reverse:!0},(r,s,c)=>{i=s.batchId,c.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Uh(t).K("userMutationsIndex",e).next(i=>i.map(r=>Mm(this.wt,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=aT(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return rv(t).J({range:r},(c,d,f)=>{const[g,b,E]=c,I=Fc(b);if(g===this.userId&&e.path.isEqual(I))return Uh(t).get(E).next(P=>{if(!P)throw yt();jt(P.userId===this.userId),s.push(Mm(this.wt,P))});f.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new zn(Xt);const r=[];return e.forEach(s=>{const c=aT(this.userId,s.path),d=IDBKeyRange.lowerBound(c),f=rv(t).J({range:d},(g,b,E)=>{const[I,P,F]=g,z=Fc(P);I===this.userId&&s.path.isEqual(z)?i=i.add(F):E.done()});r.push(f)}),me.waitFor(r).next(()=>this.pn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=aT(this.userId,i),c=IDBKeyRange.lowerBound(s);let d=new zn(Xt);return rv(t).J({range:c},(f,g,b)=>{const[E,I,P]=f,F=Fc(I);E===this.userId&&i.isPrefixOf(F)?F.length===r&&(d=d.add(P)):b.done()}).next(()=>this.pn(t,d))}pn(t,e){const i=[],r=[];return e.forEach(s=>{r.push(Uh(t).get(s).next(c=>{if(null===c)throw yt();jt(c.userId===this.userId),i.push(Mm(this.wt,c))}))}),me.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return Kj(t.ee,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.In(e.batchId)}),me.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}In(t){delete this.gn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return me.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return rv(t).J({range:i},(s,c,d)=>{if(s[0]===this.userId){const f=Fc(s[1]);r.push(f)}else d.done()}).next(()=>{jt(0===r.length)})})}containsKey(t,e){return Qj(t,this.userId,e)}Tn(t){return Xj(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Qj(n,t,e){const i=aT(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let c=!1;return rv(n).J({range:s,H:!0},(d,f,g)=>{const[b,E,I]=d;b===t&&E===r&&(c=!0),g.done()}).next(()=>c)}function Uh(n){return Br(n,"mutations")}function rv(n){return Br(n,"documentMutations")}function Xj(n){return Br(n,"mutationQueues")}class Rm{constructor(t){this.En=t}next(){return this.En+=2,this.En}static An(){return new Rm(0)}static Rn(){return new Rm(-1)}}class GQ{constructor(t,e){this.referenceDelegate=t,this.wt=e}allocateTargetId(t){return this.bn(t).next(e=>{const i=new Rm(e.highestTargetId);return e.highestTargetId=i.next(),this.Pn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.bn(t).next(e=>Bt.fromTimestamp(new Ti(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.bn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.bn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.Pn(t,r)))}addTargetData(t,e){return this.vn(t,e).next(()=>this.bn(t).next(i=>(i.targetCount+=1,this.Vn(e,i),this.Pn(t,i))))}updateTargetData(t,e){return this.vn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>sv(t).delete(e.targetId)).next(()=>this.bn(t)).next(i=>(jt(i.targetCount>0),i.targetCount-=1,this.Pn(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return sv(t).J((c,d)=>{const f=mw(d);f.sequenceNumber<=e&&null===i.get(f.targetId)&&(r++,s.push(this.removeTargetData(t,f)))}).next(()=>me.waitFor(s)).next(()=>r)}forEachTarget(t,e){return sv(t).J((i,r)=>{const s=mw(r);e(s)})}bn(t){return Jj(t).get("targetGlobalKey").next(e=>(jt(null!==e),e))}Pn(t,e){return Jj(t).put("targetGlobalKey",e)}vn(t,e){return sv(t).put(Uj(this.wt,e))}Vn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.bn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=Dm(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return sv(t).J({range:r,index:"queryTargetsIndex"},(c,d,f)=>{const g=mw(d);iw(e,g.target)&&(s=g,f.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=Hh(t);return e.forEach(c=>{const d=Ys(c.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(t,i,c))}),me.waitFor(r)}removeMatchingKeys(t,e,i){const r=Hh(t);return me.forEach(e,s=>{const c=Ys(s.path);return me.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=Hh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=Hh(t);let s=sn();return r.J({range:i,H:!0},(c,d,f)=>{const g=Fc(c[1]),b=new ot(g);s=s.add(b)}).next(()=>s)}containsKey(t,e){const i=Ys(e.path),r=IDBKeyRange.bound([i],[DH(i)],!1,!0);let s=0;return Hh(t).J({index:"documentTargetsIndex",H:!0,range:r},([c,d],f,g)=>{0!==c&&(s++,g.done())}).next(()=>s>0)}te(t,e){return sv(t).get(e).next(i=>i?mw(i):null)}}function sv(n){return Br(n,"targets")}function Jj(n){return Br(n,"targetGlobal")}function Hh(n){return Br(n,"targetDocuments")}function e3([n,t],[e,i]){const r=Xt(n,e);return 0===r?Xt(t,i):r}class zQ{constructor(t){this.Sn=t,this.buffer=new zn(e3),this.Dn=0}Cn(){return++this.Dn}xn(t){const e=[t,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();e3(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class $Q{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(t){var e=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,Se.Z)(function*(){e.Nn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){Oh(i)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Rh(i)}yield e.kn(3e5)}))}}class qQ{constructor(t,e){this.Mn=t,this.params=e}calculateTargetCount(t,e){return this.Mn.On(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return me.resolve(yo.ot);const i=new zQ(e);return this.Mn.forEachTarget(t,r=>i.xn(r.sequenceNumber)).next(()=>this.Mn.Fn(t,r=>i.xn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Mn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Mn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(Zj)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zj):this.$n(t,e))}getCacheSize(t){return this.Mn.getCacheSize(t)}$n(t,e){let i,r,s,c,d,f,g;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,c=Date.now(),this.nthSequenceNumber(t,r))).next(E=>(i=E,d=Date.now(),this.removeTargets(t,i,e))).next(E=>(s=E,f=Date.now(),this.removeOrphanedDocuments(t,i))).next(E=>(g=Date.now(),pP()<=ql.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-b}ms\n\tDetermined least recently used ${r} in `+(d-c)+`ms\n\tRemoved ${s} targets in `+(f-d)+`ms\n\tRemoved ${E} documents in `+(g-f)+`ms\nTotal Duration: ${g-b}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:E})))}}class WQ{constructor(t,e){this.db=t,this.garbageCollector=new qQ(this,e)}On(t){const e=this.Bn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}Bn(t){let e=0;return this.Fn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Fn(t,e){return this.Ln(t,(i,r)=>e(r))}addReference(t,e,i){return pT(t,i)}removeReference(t,e,i){return pT(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return pT(t,e)}Un(t,e){return function(i,r){let s=!1;return Xj(i).Y(c=>Qj(i,c,r).next(d=>(d&&(s=!0),me.resolve(!d)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Ln(t,(c,d)=>{if(d<=e){const f=this.Un(t,c).next(g=>{if(!g)return s++,i.getEntry(t,c).next(()=>(i.removeEntry(c,Bt.min()),Hh(t).delete([0,Ys(c.path)])))});r.push(f)}}).next(()=>me.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return pT(t,e)}Ln(t,e){const i=Hh(t);let r,s=yo.ot;return i.J({index:"documentTargetsIndex"},([c,d],{path:f,sequenceNumber:g})=>{0===c?(s!==yo.ot&&e(new ot(Fc(r)),s),s=g,r=f):s=yo.ot}).next(()=>{s!==yo.ot&&e(new ot(Fc(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function pT(n,t){return Hh(n).put((i=n.currentSequenceNumber,{targetId:0,path:Ys(t.path),sequenceNumber:i}));var i}class t3{constructor(){this.changes=new Bh(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ai.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?me.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class YQ{constructor(t){this.wt=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Om(t).put(i)}removeEntry(t,e,i){return Om(t).delete(function(r,s){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],lT(s),c[c.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.qn(t,i)))}getEntry(t,e){let i=ai.newInvalidDocument(e);return Om(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(bw(e))},(r,s)=>{i=this.Kn(e,s)}).next(()=>i)}Gn(t,e){let i={size:0,document:ai.newInvalidDocument(e)};return Om(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(bw(e))},(r,s)=>{i={document:this.Kn(e,s),size:hT(s)}}).next(()=>i)}getEntries(t,e){let i=wo();return this.Qn(t,e,(r,s)=>{const c=this.Kn(r,s);i=i.insert(r,c)}).next(()=>i)}jn(t,e){let i=wo(),r=new Gi(ot.comparator);return this.Qn(t,e,(s,c)=>{const d=this.Kn(s,c);i=i.insert(s,d),r=r.insert(s,hT(c))}).next(()=>({documents:i,Wn:r}))}Qn(t,e,i){if(e.isEmpty())return me.resolve();let r=new zn(o3);e.forEach(f=>r=r.add(f));const s=IDBKeyRange.bound(bw(r.first()),bw(r.last())),c=r.getIterator();let d=c.getNext();return Om(t).J({index:"documentKeyIndex",range:s},(f,g,b)=>{const E=ot.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&o3(d,E)<0;)i(d,null),d=c.getNext();d&&d.isEqual(E)&&(i(d,g),d=c.hasNext()?c.getNext():null),d?b.q(bw(d)):b.done()}).next(()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null})}getAllFromCollection(t,e,i){const r=[e.popLast().toArray(),e.lastSegment(),lT(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Om(t).K(IDBKeyRange.bound(r,s,!0)).next(c=>{let d=wo();for(const f of c){const g=this.Kn(ot.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);d=d.insert(g.key,g)}return d})}getAllFromCollectionGroup(t,e,i,r){let s=wo();const c=s3(e,i),d=s3(e,na.max());return Om(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(f,g,b)=>{const E=this.Kn(ot.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);s=s.insert(E.key,E),s.size===r&&b.done()}).next(()=>s)}newChangeBuffer(t){return new ZQ(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return r3(t).get("remoteDocumentGlobalKey").next(e=>(jt(!!e),e))}qn(t,e){return r3(t).put("remoteDocumentGlobalKey",e)}Kn(t,e){if(e){const i=function PQ(n,t){let e;if(t.document)e=xj(n.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=ot.fromSegments(t.noDocument.path),r=Tm(t.noDocument.readTime);e=ai.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return yt();{const i=ot.fromSegments(t.unknownDocument.path),r=Tm(t.unknownDocument.version);e=ai.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new Ti(i[0],i[1]);return Bt.fromTimestamp(r)}(t.readTime)),e}(this.wt,e);if(!i.isNoDocument()||!i.version.isEqual(Bt.min()))return i}return ai.newInvalidDocument(t)}}function n3(n){return new YQ(n)}class ZQ extends t3{constructor(t,e){super(),this.zn=t,this.trackRemovals=e,this.Hn=new Bh(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new zn((s,c)=>Xt(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const d=this.Hn.get(s);if(e.push(this.zn.removeEntry(t,s,d.readTime)),c.isValidDocument()){const f=Vj(this.zn.wt,c);r=r.add(s.path.popLast()),i+=hT(f)-d.size,e.push(this.zn.addEntry(t,s,f))}else if(i-=d.size,this.trackRemovals){const f=Vj(this.zn.wt,c.convertToNoDocument(Bt.min()));e.push(this.zn.addEntry(t,s,f))}}),r.forEach(s=>{e.push(this.zn.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.zn.updateMetadata(t,i)),me.waitFor(e)}getFromCache(t,e){return this.zn.Gn(t,e).next(i=>(this.Hn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.zn.jn(t,e).next(({documents:i,Wn:r})=>(r.forEach((s,c)=>{this.Hn.set(s,{size:c,readTime:i.get(s).readTime})}),i))}}function r3(n){return Br(n,"remoteDocumentGlobal")}function Om(n){return Br(n,"remoteDocumentsV14")}function bw(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function s3(n,t){const e=t.documentKey.path.toArray();return[n,lT(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function o3(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=Xt(e[s],i[s]),r)return r;return r=Xt(e.length,i.length),r||(r=Xt(e[e.length-2],i[i.length-2]),r||Xt(e[e.length-1],i[i.length-1]))}class KQ{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class a3{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.getBaseDocument(t,e,i))).next(r=>(null!==i&&ow(i.mutation,r,ia.empty(),Ti.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,sn()).next(()=>i))}getLocalViewOfDocuments(t,e,i=sn()){const r=Pc();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let c=aw();return s.forEach((d,f)=>{c=c.insert(d,f.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=Pc();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,sn()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((c,d)=>{e.set(c,d)})})}computeViews(t,e,i,r){let s=wo();const c=lw(),d=lw();return e.forEach((f,g)=>{const b=i.get(g.key);r.has(g.key)&&(void 0===b||b.mutation instanceof Ju)?s=s.insert(g.key,g):void 0!==b&&(c.set(g.key,b.mutation.getFieldMask()),ow(b.mutation,g,b.mutation.getFieldMask(),Ti.now()))}),this.recalculateAndSaveOverlays(t,s).next(f=>(f.forEach((g,b)=>c.set(g,b)),e.forEach((g,b)=>{var E;return d.set(g,new KQ(b,null!==(E=c.get(g))&&void 0!==E?E:null))}),d))}recalculateAndSaveOverlays(t,e){const i=lw();let r=new Gi((c,d)=>c-d),s=sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const d of c)d.keys().forEach(f=>{const g=e.get(f);if(null===g)return;let b=i.get(f)||ia.empty();b=d.applyToLocalView(g,b),i.set(f,b);const E=(r.get(d.batchId)||sn()).add(f);r=r.insert(d.batchId,E)})}).next(()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),g=f.key,b=f.value,E=mj();b.forEach(I=>{if(!s.has(I)){const P=oj(e.get(I),i.get(I));null!==P&&E.set(I,P),s=s.add(I)}}),c.push(this.documentOverlayCache.saveOverlays(t,g,E))}return me.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return ot.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):SP(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var r}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const c=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):me.resolve(Pc());let d=-1,f=s;return c.next(g=>me.forEach(g,(b,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),s.get(b)?me.resolve():this.getBaseDocument(t,b,E).next(I=>{f=f.insert(b,I)}))).next(()=>this.populateOverlays(t,g,s)).next(()=>this.computeViews(t,f,g,sn())).next(b=>({batchId:d,changes:pj(b)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ot(e)).next(i=>{let r=aw();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let s=aw();return this.indexManager.getCollectionParents(t,r).next(c=>me.forEach(c,d=>{const f=(g=e,b=d.child(r),new Xu(b,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,b;return this.getDocumentsMatchingCollectionQuery(t,f,i).next(g=>{g.forEach((b,E)=>{s=s.insert(b,E)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.remoteDocumentCache.getAllFromCollection(t,e.path,i).next(s=>(r=s,this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId))).next(s=>{s.forEach((d,f)=>{const g=f.getKey();null===r.get(g)&&(r=r.insert(g,ai.newInvalidDocument(g)))});let c=aw();return r.forEach((d,f)=>{const g=s.get(d);void 0!==g&&ow(g.mutation,f,ia.empty(),Ti.now()),TP(e,f)&&(c=c.insert(d,f))}),c})}getBaseDocument(t,e,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(t,e):me.resolve(ai.newInvalidDocument(e))}}class QQ{constructor(t){this.wt=t,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(t,e){return me.resolve(this.Jn.get(e))}saveBundleMetadata(t,e){var i;return this.Jn.set(e.id,{id:(i=e).id,version:i.version,createTime:Lr(i.createTime)}),me.resolve()}getNamedQuery(t,e){return me.resolve(this.Yn.get(e))}saveNamedQuery(t,e){return this.Yn.set(e.name,{name:(i=e).name,query:FP(i.bundledQuery),readTime:Lr(i.readTime)}),me.resolve();var i}}class XQ{constructor(){this.overlays=new Gi(ot.comparator),this.Xn=new Map}getOverlay(t,e){return me.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Pc();return me.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ie(t,e,s)}),me.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.Xn.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(i)),me.resolve()}getOverlaysForCollection(t,e,i){const r=Pc(),s=e.length+1,c=new ot(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,g=f.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===s&&f.largestBatchId>i&&r.set(f.getKey(),f)}return me.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Gi((g,b)=>g-b);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>i){let b=s.get(g.largestBatchId);null===b&&(b=Pc(),s=s.insert(g.largestBatchId,b)),b.set(g.getKey(),g)}}const d=Pc(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((g,b)=>d.set(g,b)),!(d.size()>=r)););return me.resolve(d)}ie(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const c=this.Xn.get(r.largestBatchId).delete(i.key);this.Xn.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new NP(e,i));let s=this.Xn.get(e);void 0===s&&(s=sn(),this.Xn.set(e,s)),this.Xn.set(e,s.add(i.key))}}class VP{constructor(){this.Zn=new zn(Vr.ts),this.es=new zn(Vr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(t,e){const i=new Vr(t,e);this.Zn=this.Zn.add(i),this.es=this.es.add(i)}ss(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.rs(new Vr(t,e))}os(t,e){t.forEach(i=>this.removeReference(i,e))}us(t){const e=new ot(new Mn([])),i=new Vr(e,t),r=new Vr(e,t+1),s=[];return this.es.forEachInRange([i,r],c=>{this.rs(c),s.push(c.key)}),s}cs(){this.Zn.forEach(t=>this.rs(t))}rs(t){this.Zn=this.Zn.delete(t),this.es=this.es.delete(t)}hs(t){const e=new ot(new Mn([])),i=new Vr(e,t),r=new Vr(e,t+1);let s=sn();return this.es.forEachInRange([i,r],c=>{s=s.add(c.key)}),s}containsKey(t){const e=new Vr(t,0),i=this.Zn.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class Vr{constructor(t,e){this.key=t,this.ls=e}static ts(t,e){return ot.comparator(t.key,e.key)||Xt(t.ls,e.ls)}static ns(t,e){return Xt(t.ls,e.ls)||ot.comparator(t.key,e.key)}}class JQ{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.fs=1,this.ds=new zn(Vr.ts)}checkEmpty(t){return me.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.fs;this.fs++;const c=new OP(s,e,i,r);this.mutationQueue.push(c);for(const d of r)this.ds=this.ds.add(new Vr(d.key,s)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return me.resolve(c)}lookupMutationBatch(t,e){return me.resolve(this._s(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.ws(e+1),s=r<0?0:r;return me.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(t){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Vr(e,0),r=new Vr(e,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([i,r],c=>{const d=this._s(c.ls);s.push(d)}),me.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new zn(Xt);return e.forEach(r=>{const s=new Vr(r,0),c=new Vr(r,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,c],d=>{i=i.add(d.ls)})}),me.resolve(this.gs(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;ot.isDocumentKey(s)||(s=s.child(""));const c=new Vr(new ot(s),0);let d=new zn(Xt);return this.ds.forEachWhile(f=>{const g=f.key.path;return!!i.isPrefixOf(g)&&(g.length===r&&(d=d.add(f.ls)),!0)},c),me.resolve(this.gs(d))}gs(t){const e=[];return t.forEach(i=>{const r=this._s(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){jt(0===this.ys(e.batchId,"removed")),this.mutationQueue.shift();let i=this.ds;return me.forEach(e.mutations,r=>{const s=new Vr(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.ds=i})}In(t){}containsKey(t,e){const i=new Vr(e,0),r=this.ds.firstAfterOrEqual(i);return me.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return me.resolve()}ys(t,e){return this.ws(t)}ws(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}_s(t){const e=this.ws(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class e9{constructor(t){this.ps=t,this.docs=new Gi(ot.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,c=this.ps(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return me.resolve(i?i.document.mutableCopy():ai.newInvalidDocument(e))}getEntries(t,e){let i=wo();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ai.newInvalidDocument(r))}),me.resolve(i)}getAllFromCollection(t,e,i){let r=wo();const s=new ot(e.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!e.isPrefixOf(d.path))break;d.path.length>e.length+1||_P(SH(f),i)<=0||(r=r.insert(f.key,f.mutableCopy()))}return me.resolve(r)}getAllFromCollectionGroup(t,e,i,r){yt()}Is(t,e){return me.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new t9(this)}getSize(t){return me.resolve(this.size)}}class t9 extends t3{constructor(t){super(),this.zn=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.zn.addEntry(t,r)):this.zn.removeEntry(i)}),me.waitFor(e)}getFromCache(t,e){return this.zn.getEntry(t,e)}getAllFromCache(t,e){return this.zn.getEntries(t,e)}}class n9{constructor(t){this.persistence=t,this.Ts=new Bh(e=>Dm(e),iw),this.lastRemoteSnapshotVersion=Bt.min(),this.highestTargetId=0,this.Es=0,this.As=new VP,this.targetCount=0,this.Rs=Rm.An()}forEachTarget(t,e){return this.Ts.forEach((i,r)=>e(r)),me.resolve()}getLastRemoteSnapshotVersion(t){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return me.resolve(this.Es)}allocateTargetId(t){return this.highestTargetId=this.Rs.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Es&&(this.Es=e),me.resolve()}vn(t){this.Ts.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Rs=new Rm(e),this.highestTargetId=e),t.sequenceNumber>this.Es&&(this.Es=t.sequenceNumber)}addTargetData(t,e){return this.vn(e),this.targetCount+=1,me.resolve()}updateTargetData(t,e){return this.vn(e),me.resolve()}removeTargetData(t,e){return this.Ts.delete(e.target),this.As.us(e.targetId),this.targetCount-=1,me.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Ts.forEach((c,d)=>{d.sequenceNumber<=e&&null===i.get(d.targetId)&&(this.Ts.delete(c),s.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)}),me.waitFor(s).next(()=>r)}getTargetCount(t){return me.resolve(this.targetCount)}getTargetData(t,e){const i=this.Ts.get(e)||null;return me.resolve(i)}addMatchingKeys(t,e,i){return this.As.ss(e,i),me.resolve()}removeMatchingKeys(t,e,i){this.As.os(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(c=>{s.push(r.markPotentiallyOrphaned(t,c))}),me.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.As.us(e),me.resolve()}getMatchingKeysForTargetId(t,e){const i=this.As.hs(e);return me.resolve(i)}containsKey(t,e){return me.resolve(this.As.containsKey(e))}}class l3{constructor(t,e){this.bs={},this.overlays={},this.Ps=new yo(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new n9(this),this.indexManager=new HQ,this.remoteDocumentCache=new e9(i=>this.referenceDelegate.Ss(i)),this.wt=new Bj(e),this.Ds=new QQ(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new XQ,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.bs[t.toKey()];return i||(i=new JQ(e,this.referenceDelegate),this.bs[t.toKey()]=i),i}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(t,e,i){$e("MemoryPersistence","Starting transaction:",t);const r=new r9(this.Ps.next());return this.referenceDelegate.Cs(),i(r).next(s=>this.referenceDelegate.xs(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ns(t,e){return me.or(Object.values(this.bs).map(i=>()=>i.containsKey(t,e)))}}class r9 extends TH{constructor(t){super(),this.currentSequenceNumber=t}}class mT{constructor(t){this.persistence=t,this.ks=new VP,this.Ms=null}static Os(t){return new mT(t)}get Fs(){if(this.Ms)return this.Ms;throw yt()}addReference(t,e,i){return this.ks.addReference(i,e),this.Fs.delete(i.toString()),me.resolve()}removeReference(t,e,i){return this.ks.removeReference(i,e),this.Fs.add(i.toString()),me.resolve()}markPotentiallyOrphaned(t,e){return this.Fs.add(e.toString()),me.resolve()}removeTarget(t,e){this.ks.us(e.targetId).forEach(r=>this.Fs.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Fs.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Cs(){this.Ms=new Set}xs(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Fs,i=>{const r=ot.fromPath(i);return this.$s(t,r).next(s=>{s||e.removeEntry(r,Bt.min())})}).next(()=>(this.Ms=null,e.apply(t)))}updateLimboDocument(t,e){return this.$s(t,e).next(i=>{i?this.Fs.delete(e.toString()):this.Fs.add(e.toString())})}Ss(t){return 0}$s(t,e){return me.or([()=>me.resolve(this.ks.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ns(t,e)])}}class s9{constructor(t){this.wt=t}M(t,e,i,r){const s=new Zx("createOrUpgrade",e);var d;i<1&&r>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Oj,{unique:!0}),d.createObjectStore("documentMutations"),c3(t),function(d){d.createObjectStore("remoteDocuments")}(t));let c=me.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),c3(t)),c=c.next(()=>function(d){const f=d.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Bt.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",g)}(s))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(d,f){return f.store("mutations").K().next(g=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Oj,{unique:!0});const b=f.store("mutations"),E=g.map(I=>b.put(I));return me.waitFor(E)})}(t,s))),c=c.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(c=c.next(()=>this.Bs(s))),i<6&&r>=6&&(c=c.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.Ls(s)))),i<7&&r>=7&&(c=c.next(()=>this.Us(s))),i<8&&r>=8&&(c=c.next(()=>this.qs(t,s))),i<9&&r>=9&&(c=c.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(c=c.next(()=>this.Ks(s))),i<11&&r>=11&&(c=c.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(c=c.next(()=>{!function(d){const f=d.createObjectStore("documentOverlays",{keyPath:IQ});f.createIndex("collectionPathOverlayIndex",AQ,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",kQ,{unique:!1})}(t)})),i<13&&r>=13&&(c=c.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:vQ});f.createIndex("documentKeyIndex",yQ),f.createIndex("collectionGroupIndex",bQ)}(t)).next(()=>this.Gs(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(c=c.next(()=>this.Qs(t,s))),i<15&&r>=15&&(c=c.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:SQ}).createIndex("sequenceNumberIndex",xQ,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:TQ}).createIndex("documentKeyIndex",MQ,{unique:!1})}(t))),c}Ls(t){let e=0;return t.store("remoteDocuments").J((i,r)=>{e+=hT(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Bs(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.K().next(r=>me.forEach(r,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.K("userMutationsIndex",c).next(d=>me.forEach(d,f=>{jt(f.userId===s.userId);const g=Mm(this.wt,f);return Kj(t,s.userId,g).next(()=>{})}))}))}Us(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.J((c,d)=>{const f=new Mn(c),g=[0,Ys(f)];s.push(e.get(g).next(b=>b?me.resolve():e.put({targetId:0,path:Ys(f),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>me.waitFor(s))})}qs(t,e){t.createObjectStore("collectionParents",{keyPath:EQ});const i=e.store("collectionParents"),r=new BP,s=c=>{if(r.add(c)){const d=c.lastSegment(),f=c.popLast();return i.put({collectionId:d,parent:Ys(f)})}};return e.store("remoteDocuments").J({H:!0},(c,d)=>{const f=new Mn(c);return s(f.popLast())}).next(()=>e.store("documentMutations").J({H:!0},([c,d,f],g)=>{const b=Fc(d);return s(b.popLast())}))}Ks(t){const e=t.store("targets");return e.J((i,r)=>{const s=mw(r),c=Uj(this.wt,s);return e.put(c)})}Gs(t,e){const i=e.store("remoteDocuments"),r=[];return i.J((s,c)=>{const d=e.store("remoteDocumentsV14"),f=(g=c,g.document?new ot(Mn.fromString(g.document.name).popFirst(5)):g.noDocument?ot.fromSegments(g.noDocument.path):g.unknownDocument?ot.fromSegments(g.unknownDocument.path):yt()).path.toArray();var g;const b={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};r.push(d.put(b))}).next(()=>me.waitFor(r))}Qs(t,e){const i=e.store("mutations"),r=n3(this.wt),s=new l3(mT.Os,this.wt.ne);return i.K().next(c=>{const d=new Map;return c.forEach(f=>{var g;let b=null!==(g=d.get(f.userId))&&void 0!==g?g:sn();Mm(this.wt,f).keys().forEach(E=>b=b.add(E)),d.set(f.userId,b)}),me.forEach(d,(f,g)=>{const b=new Nr(g),E=cT.se(this.wt,b),I=s.getIndexManager(b),P=fT.se(b,this.wt,I,s.referenceDelegate);return new a3(r,P,E,I).recalculateAndSaveOverlaysForDocumentKeys(new RP(e,yo.ot),f).next()})})}}function c3(n){n.createObjectStore("targetDocuments",{keyPath:CQ}).createIndex("documentTargetsIndex",DQ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wQ,{unique:!0}),n.createObjectStore("targetGlobal")}const UP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class HP{constructor(t,e,i,r,s,c,d,f,g,b,E=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.js=s,this.window=c,this.document=d,this.Ws=g,this.zs=b,this.Hs=E,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=I=>Promise.resolve(),!HP.V())throw new Ue(be.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new WQ(this,r),this.ei=e+"main",this.wt=new Bj(f),this.ni=new Yl(this.ei,this.Hs,new s9(this.wt)),this.Vs=new GQ(this.referenceDelegate,this.wt),this.remoteDocumentCache=n3(this.wt),this.Ds=new NQ,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===b&&tr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ue(be.FAILED_PRECONDITION,UP);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Vs.getHighestSequenceNumber(t))}).then(t=>{this.Ps=new yo(t,this.Ws)}).then(()=>{this.vs=!0}).catch(t=>(this.ni&&this.ni.close(),Promise.reject(t)))}ci(t){var e=this;return this.ti=function(){var i=(0,Se.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ni.F(function(){var e=(0,Se.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.js.enqueueAndForget((0,Se.Z)(function*(){e.started&&(yield e.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>gT(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(t).next(e=>{e||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(t)).next(e=>this.isPrimary&&!e?this.li(t).next(()=>!1):!!e&&this.fi(t).next(()=>!0))).catch(t=>{if(Oh(t))return $e("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.js.enqueueRetryable(()=>this.ti(t)),this.isPrimary=t})}ai(t){return ww(t).get("owner").next(e=>me.resolve(this.di(e)))}_i(t){return gT(t).delete(this.clientId)}wi(){var t=this;return(0,Se.Z)(function*(){if(t.isPrimary&&!t.mi(t.Zs,18e5)){t.Zs=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Br(i,"clientMetadata");return r.K().next(s=>{const c=t.gi(s,18e5),d=s.filter(f=>-1===c.indexOf(f));return me.forEach(d,f=>r.delete(f.clientId)).next(()=>d)})}).catch(()=>[]);if(t.si)for(const i of e)t.si.removeItem(t.yi(i.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(t){return!!t&&t.ownerId===this.clientId}hi(t){return this.zs?me.resolve(!0):ww(t).get("owner").next(e=>{if(null!==e&&this.mi(e.leaseTimestampMs,5e3)&&!this.pi(e.ownerId)){if(this.di(e)&&this.networkEnabled)return!0;if(!this.di(e)){if(!e.allowTabSynchronization)throw new Ue(be.FAILED_PRECONDITION,UP);return!1}}return!(!this.networkEnabled||!this.inForeground)||gT(t).K().next(i=>void 0===this.gi(i,5e3).find(r=>{if(this.clientId!==r.clientId){const c=!this.inForeground&&r.inForeground,d=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||c&&d)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&$e("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,Se.Z)(function*(){t.vs=!1,t.Ii(),t.Xs&&(t.Xs.cancel(),t.Xs=null),t.Ti(),t.Ei(),yield t.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new RP(e,yo.ot);return t.li(i).next(()=>t._i(i))}),t.ni.close(),t.Ai()})()}gi(t,e){return t.filter(i=>this.mi(i.updateTimeMs,e)&&!this.pi(i.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",t=>gT(t).K().next(e=>this.gi(e,18e5).map(i=>i.clientId)))}get started(){return this.vs}getMutationQueue(t,e){return fT.se(t,this.wt,e,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new jQ(t,this.wt.ne.databaseId)}getDocumentOverlayCache(t){return cT.se(this.wt,t)}getBundleCache(){return this.Ds}runTransaction(t,e,i){$e("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=15===(c=this.Hs)?OQ:14===c?Lj:13===c?Fj:12===c?RQ:11===c?Nj:void yt();var c;let d;return this.ni.runTransaction(t,r,s,f=>(d=new RP(f,this.Ps?this.Ps.next():yo.ot),"readwrite-primary"===e?this.ai(d).next(g=>!!g||this.hi(d)).next(g=>{if(!g)throw tr(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Ue(be.FAILED_PRECONDITION,xH);return i(d)}).next(g=>this.fi(d).next(()=>g)):this.bi(d).next(()=>i(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}bi(t){return ww(t).get("owner").next(e=>{if(null!==e&&this.mi(e.leaseTimestampMs,5e3)&&!this.pi(e.ownerId)&&!this.di(e)&&!(this.zs||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ue(be.FAILED_PRECONDITION,UP)})}fi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ww(t).put("owner",e)}static V(){return Yl.V()}li(t){const e=ww(t);return e.get("owner").next(i=>this.di(i)?($e("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):me.resolve())}mi(t,e){const i=Date.now();return!(t<i-e||t>i&&(tr(`Detected an update time that is in the future: ${t} > ${i}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Js=()=>{this.Ii(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(t){var e;try{const i=null!==(null===(e=this.si)||void 0===e?void 0:e.getItem(this.yi(t)));return $e("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return tr("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(t){tr("Failed to set zombie client id.",t)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function ww(n){return Br(n,"owner")}function gT(n){return Br(n,"clientMetadata")}function jP(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class GP{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Pi=i,this.vi=r}static Vi(t,e){let i=sn(),r=sn();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new GP(t,e.fromCache,i,r)}}class u3{constructor(){this.Si=!1}initialize(t,e){this.Di=t,this.indexManager=e,this.Si=!0}getDocumentsMatchingQuery(t,e,i,r){return this.Ci(t,e).next(s=>s||this.xi(t,e,r,i)).next(s=>s||this.Ni(t,e))}Ci(t,e){if(YH(e))return me.resolve(null);let i=bo(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=tT(e,null,"F"),i=bo(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const c=sn(...s);return this.Di.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,i).next(f=>{const g=this.ki(e,d);return this.Mi(e,g,c,f.readTime)?this.Ci(t,tT(e,null,"F")):this.Oi(t,g,e,f)}))})))}xi(t,e,i,r){return YH(e)||r.isEqual(Bt.min())?this.Ni(t,e):this.Di.getDocuments(t,i).next(s=>{const c=this.ki(e,s);return this.Mi(e,c,i,r)?this.Ni(t,e):(pP()<=ql.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),xP(e)),this.Oi(t,c,e,EH(r,-1)))})}ki(t,e){let i=new zn(QH(t));return e.forEach((r,s)=>{TP(t,s)&&(i=i.add(s))}),i}Mi(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ni(t,e){return pP()<=ql.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",xP(e)),this.Di.getDocumentsMatchingQuery(t,e,na.min())}Oi(t,e,i,r){return this.Di.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(c=>{s=s.insert(c.key,c)}),s))}}class o9{constructor(t,e,i,r){this.persistence=t,this.Fi=e,this.wt=r,this.$i=new Gi(Xt),this.Bi=new Bh(s=>Dm(s),iw),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(i)}qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new a3(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.$i))}}function d3(n,t,e,i){return new o9(n,t,e,i)}function h3(n,t){return zP.apply(this,arguments)}function zP(){return zP=(0,Se.Z)(function*(n,t){const e=dt(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.qi(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const c=[],d=[];let f=sn();for(const g of r){c.push(g.batchId);for(const b of g.mutations)f=f.add(b.key)}for(const g of s){d.push(g.batchId);for(const b of g.mutations)f=f.add(b.key)}return e.localDocuments.getDocuments(i,f).next(g=>({Ki:g,removedBatchIds:c,addedBatchIds:d}))})})}),zP.apply(this,arguments)}function a9(n,t){const e=dt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.Ui.newChangeBuffer({trackRemovals:!0});return function(c,d,f,g){const b=f.batch,E=b.keys();let I=me.resolve();return E.forEach(P=>{I=I.next(()=>g.getEntry(d,P)).next(F=>{const z=f.docVersions.get(P);jt(null!==z),F.version.compareTo(z)<0&&(b.applyToRemoteDocument(F,f),F.isValidDocument()&&(F.setReadTime(f.commitVersion),g.addEntry(F)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(d,b))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let d=sn();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function f3(n){const t=dt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Vs.getLastRemoteSnapshotVersion(e))}function l9(n,t){const e=dt(n),i=t.snapshotVersion;let r=e.$i;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=e.Ui.newChangeBuffer({trackRemovals:!0});r=e.$i;const d=[];t.targetChanges.forEach((b,E)=>{const I=r.get(E);if(!I)return;d.push(e.Vs.removeMatchingKeys(s,b.removedDocuments,E).next(()=>e.Vs.addMatchingKeys(s,b.addedDocuments,E)));let P=I.withSequenceNumber(s.currentSequenceNumber);var F,z,te;t.targetMismatches.has(E)?P=P.withResumeToken(wr.EMPTY_BYTE_STRING,Bt.min()).withLastLimboFreeSnapshotVersion(Bt.min()):b.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(b.resumeToken,i)),r=r.insert(E,P),z=P,te=b,(0===(F=I).resumeToken.approximateByteSize()||z.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8||te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0)&&d.push(e.Vs.updateTargetData(s,P))});let f=wo(),g=sn();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(s,b))}),d.push(p3(s,c,t.documentUpdates).next(b=>{f=b.Gi,g=b.Qi})),!i.isEqual(Bt.min())){const b=e.Vs.getLastRemoteSnapshotVersion(s).next(E=>e.Vs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(b)}return me.waitFor(d).next(()=>c.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,f,g)).next(()=>f)}).then(s=>(e.$i=r,s))}function p3(n,t,e){let i=sn(),r=sn();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let c=wo();return e.forEach((d,f)=>{const g=s.get(d);f.isFoundDocument()!==g.isFoundDocument()&&(r=r.add(d)),f.isNoDocument()&&f.version.isEqual(Bt.min())?(t.removeEntry(d,f.readTime),c=c.insert(d,f)):!g.isValidDocument()||f.version.compareTo(g.version)>0||0===f.version.compareTo(g.version)&&g.hasPendingWrites?(t.addEntry(f),c=c.insert(d,f)):$e("LocalStore","Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",f.version)}),{Gi:c,Qi:r}})}function c9(n,t){const e=dt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function ov(n,t){const e=dt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Vs.getTargetData(i,t).next(s=>s?(r=s,me.resolve(r)):e.Vs.allocateTargetId(i).next(c=>(r=new Vh(t,c,0,i.currentSequenceNumber),e.Vs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.$i.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.$i=e.$i.insert(i.targetId,i),e.Bi.set(t,i.targetId)),i})}function av(n,t,e){return $P.apply(this,arguments)}function $P(){return $P=(0,Se.Z)(function*(n,t,e){const i=dt(n),r=i.$i.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!Oh(c))throw c;$e("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}i.$i=i.$i.remove(t),i.Bi.delete(r.target)}),$P.apply(this,arguments)}function _T(n,t,e){const i=dt(n);let r=Bt.min(),s=sn();return i.persistence.runTransaction("Execute query","readonly",c=>function(d,f,g){const b=dt(d),E=b.Bi.get(g);return void 0!==E?me.resolve(b.$i.get(E)):b.Vs.getTargetData(f,g)}(i,c,bo(t)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Vs.getMatchingKeysForTargetId(c,d.targetId).next(f=>{s=f})}).next(()=>i.Fi.getDocumentsMatchingQuery(c,t,e?r:Bt.min(),e?s:sn())).next(d=>(_3(i,KH(t),d),{documents:d,ji:s})))}function m3(n,t){const e=dt(n),i=dt(e.Vs),r=e.$i.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.te(s,t).next(c=>c?c.target:null))}function g3(n,t){const e=dt(n),i=e.Li.get(t)||Bt.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.Ui.getAllFromCollectionGroup(r,t,EH(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(_3(e,t,r),r))}function _3(n,t,e){let i=Bt.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Li.set(t,i)}function qP(){return qP=(0,Se.Z)(function*(n,t,e,i){const r=dt(n);let s=sn(),c=wo();for(const g of e){const b=t.Wi(g.metadata.name);g.document&&(s=s.add(b));const E=t.zi(g);E.setReadTime(t.Hi(g.metadata.readTime)),c=c.insert(b,E)}const d=r.Ui.newChangeBuffer({trackRemovals:!0}),f=yield ov(r,(g=i,bo(K_(Mn.fromString(`__bundle__/docs/${g}`)))));var g;return r.persistence.runTransaction("Apply bundle documents","readwrite",g=>p3(g,d,c).next(b=>(d.apply(g),b)).next(b=>r.Vs.removeMatchingKeysForTargetId(g,f.targetId).next(()=>r.Vs.addMatchingKeys(g,s,f.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(g,b.Gi,b.Qi)).next(()=>b.Gi)))}),qP.apply(this,arguments)}function d9(n,t){return WP.apply(this,arguments)}function WP(){return WP=(0,Se.Z)(function*(n,t,e=sn()){const i=yield ov(n,bo(FP(t.bundledQuery))),r=dt(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const c=Lr(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r.Ds.saveNamedQuery(s,t);const d=i.withResumeToken(wr.EMPTY_BYTE_STRING,c);return r.$i=r.$i.insert(d.targetId,d),r.Vs.updateTargetData(s,d).next(()=>r.Vs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Vs.addMatchingKeys(s,e,i.targetId)).next(()=>r.Ds.saveNamedQuery(s,t))})}),WP.apply(this,arguments)}function v3(n,t){return`firestore_clients_${n}_${t}`}function y3(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function YP(n,t){return`firestore_targets_${n}_${t}`}class vT{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Ji(t,e,i){const r=JSON.parse(i);let s,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new Ue(r.error.code,r.error.message))),c?new vT(t,e,r.state,s):(tr("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}Yi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Cw{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Ji(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Ue(i.error.code,i.error.message))),s?new Cw(t,i.state,r):(tr("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Yi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class yT{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ji(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=sT();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=OH(i.activeTargetIds[c]),s=s.add(i.activeTargetIds[c]);return r?new yT(t,s):(tr("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class ZP{constructor(t,e){this.clientId=t,this.onlineState=e}static Ji(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new ZP(e.clientId,e.onlineState):(tr("SharedClientState",`Failed to parse online state: ${t}`),null)}}class KP{constructor(){this.activeTargetIds=sT()}Xi(t){this.activeTargetIds=this.activeTargetIds.add(t)}Zi(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Yi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class QP{constructor(t,e,i,r,s){this.window=t,this.js=e,this.persistenceKey=i,this.tr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Gi(Xt),this.started=!1,this.ir=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.rr=v3(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new KP),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,Se.Z)(function*(){const e=yield t.syncEngine.Ri();for(const r of e){if(r===t.tr)continue;const s=t.getItem(v3(t.persistenceKey,r));if(s){const c=yT.Ji(r,s);c&&(t.sr=t.sr.insert(c.clientId,c))}}t._r();const i=t.storage.getItem(t.lr);if(i){const r=t.wr(i);r&&t.mr(r)}for(const r of t.ir)t.nr(r);t.ir=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.ur,JSON.stringify(t))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(t){let e=!1;return this.sr.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.yr(t,"pending")}updateMutationState(t,e,i){this.yr(t,e,i),this.pr(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(YP(this.persistenceKey,t));if(i){const r=Cw.Ji(t,i);r&&(e=r.state)}}return this.Ir.Xi(t),this._r(),e}removeLocalQueryTarget(t){this.Ir.Zi(t),this._r()}isLocalQueryTarget(t){return this.Ir.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(YP(this.persistenceKey,t))}updateQueryState(t,e,i){this.Tr(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.pr(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Er(t)}notifyBundleLoaded(t){this.Ar(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return $e("SharedClientState","READ",t,e),e}setItem(t,e){$e("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){$e("SharedClientState","REMOVE",t),this.storage.removeItem(t)}nr(t){var e=this;const i=t;if(i.storageArea===this.storage){if($e("SharedClientState","EVENT",i.key,i.newValue),i.key===this.rr)return void tr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Se.Z)(function*(){if(e.started){if(null!==i.key)if(e.cr.test(i.key)){if(null==i.newValue){const r=e.Rr(i.key);return e.br(r,null)}{const r=e.Pr(i.key,i.newValue);if(r)return e.br(r.clientId,r)}}else if(e.ar.test(i.key)){if(null!==i.newValue){const r=e.vr(i.key,i.newValue);if(r)return e.Vr(r)}}else if(e.hr.test(i.key)){if(null!==i.newValue){const r=e.Sr(i.key,i.newValue);if(r)return e.Dr(r)}}else if(i.key===e.lr){if(null!==i.newValue){const r=e.wr(i.newValue);if(r)return e.mr(r)}}else if(i.key===e.ur){const r=function(s){let c=yo.ot;if(null!=s)try{const d=JSON.parse(s);jt("number"==typeof d),c=d}catch(d){tr("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(i.newValue);r!==yo.ot&&e.sequenceNumberHandler(r)}else if(i.key===e.dr){const r=e.Cr(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Nr(s)))}}else e.ir.push(i)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(t,e,i){const r=new vT(this.currentUser,t,e,i),s=y3(this.persistenceKey,this.currentUser,t);this.setItem(s,r.Yi())}pr(t){const e=y3(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Er(t){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:t}))}Tr(t,e,i){const r=YP(this.persistenceKey,t),s=new Cw(t,e,i);this.setItem(r,s.Yi())}Ar(t){const e=JSON.stringify(Array.from(t));this.setItem(this.dr,e)}Rr(t){const e=this.cr.exec(t);return e?e[1]:null}Pr(t,e){const i=this.Rr(t);return yT.Ji(i,e)}vr(t,e){const i=this.ar.exec(t),r=Number(i[1]);return vT.Ji(new Nr(void 0!==i[2]?i[2]:null),r,e)}Sr(t,e){const i=this.hr.exec(t),r=Number(i[1]);return Cw.Ji(r,e)}wr(t){return ZP.Ji(t)}Cr(t){return JSON.parse(t)}Vr(t){var e=this;return(0,Se.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.kr(t.batchId,t.state,t.error);$e("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Dr(t){return this.syncEngine.Mr(t.targetId,t.state,t.error)}br(t,e){const i=e?this.sr.insert(t,e):this.sr.remove(t),r=this.gr(this.sr),s=this.gr(i),c=[],d=[];return s.forEach(f=>{r.has(f)||c.push(f)}),r.forEach(f=>{s.has(f)||d.push(f)}),this.syncEngine.Or(c,d).then(()=>{this.sr=i})}mr(t){this.sr.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}gr(t){let e=sT();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class b3{constructor(){this.Fr=new KP,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Fr.Xi(t),this.$r[t]||"not-current"}updateQueryState(t,e,i){this.$r[t]=e}removeLocalQueryTarget(t){this.Fr.Zi(t)}isLocalQueryTarget(t){return this.Fr.activeTargetIds.has(t)}clearQueryState(t){delete this.$r[t]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(t){return this.Fr.activeTargetIds.has(t)}start(){return this.Fr=new KP,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class h9{Br(t){}shutdown(){}}class w3{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(t){this.Gr.push(t)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Gr)t(0)}Kr(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Gr)t(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const f9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class p9{constructor(t){this.jr=t.jr,this.Wr=t.Wr}zr(t){this.Hr=t}Jr(t){this.Yr=t}onMessage(t){this.Xr=t}close(){this.Wr()}send(t){this.jr(t)}Zr(){this.Hr()}eo(t){this.Yr(t)}no(t){this.Xr(t)}}class m9 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.so=(t.ssl?"https":"http")+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(t,e,i,r,s){const c=this.oo(t,e);$e("RestConnection","Sending: ",c,i);const d={};return this.uo(d,r,s),this.co(t,c,d,i).then(f=>($e("RestConnection","Received: ",f),f),f=>{throw gm("RestConnection",`${t} failed with error: `,f,"url: ",c,"request:",i),f})}ao(t,e,i,r,s,c){return this.ro(t,e,i,r,s)}uo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+$_,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}oo(t,e){return`${this.so}/v1/${e}:${f9[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,e,i,r){return new Promise((s,c)=>{const d=new h7;d.listenOnce(c7.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case fP.NO_ERROR:const g=d.getResponseJson();$e("Connection","XHR received:",JSON.stringify(g)),s(g);break;case fP.TIMEOUT:$e("Connection",'RPC "'+t+'" timed out'),c(new Ue(be.DEADLINE_EXCEEDED,"Request time out"));break;case fP.HTTP_ERROR:const b=d.getStatus();if($e("Connection",'RPC "'+t+'" failed with status:',b,"response text:",d.getResponseText()),b>0){const E=d.getResponseJson().error;if(E&&E.status&&E.message){const I=function(P){const F=P.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(F)>=0?F:be.UNKNOWN}(E.status);c(new Ue(I,E.message))}else c(new Ue(be.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Ue(be.UNAVAILABLE,"Connection failed."));break;default:yt()}}finally{$e("Connection",'RPC "'+t+'" completed.')}});const f=JSON.stringify(r);d.send(e,"POST",f,i,15)})}ho(t,e,i){const r=[this.so,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=a7(),c=l7(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new d7({})),this.uo(d.initMessageHeaders,e,i),(0,L.uI)()||(0,L.b$)()||(0,L.d)()||(0,L.w1)()||(0,L.Mn)()||(0,L.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const f=r.join("");$e("Connection","Creating WebChannel: "+f,d);const g=s.createWebChannel(f,d);let b=!1,E=!1;const I=new p9({jr:F=>{E?$e("Connection","Not sending because WebChannel is closed:",F):(b||($e("Connection","Opening WebChannel transport."),g.open(),b=!0),$e("Connection","WebChannel sending:",F),g.send(F))},Wr:()=>g.close()}),P=(F,z,te)=>{F.listen(z,Ve=>{try{te(Ve)}catch(Ze){setTimeout(()=>{throw Ze},0)}})};return P(g,qx.EventType.OPEN,()=>{E||$e("Connection","WebChannel transport opened.")}),P(g,qx.EventType.CLOSE,()=>{E||(E=!0,$e("Connection","WebChannel transport closed"),I.eo())}),P(g,qx.EventType.ERROR,F=>{E||(E=!0,gm("Connection","WebChannel transport errored:",F),I.eo(new Ue(be.UNAVAILABLE,"The operation could not be completed")))}),P(g,qx.EventType.MESSAGE,F=>{var z;if(!E){const te=F.data[0];jt(!!te);const Ve=te,Ze=Ve.error||(null===(z=Ve[0])||void 0===z?void 0:z.error);if(Ze){$e("Connection","WebChannel received error:",Ze);const rt=Ze.status;let et=function(It){const fn=cr[It];if(void 0!==fn)return hj(fn)}(rt),St=Ze.message;void 0===et&&(et=be.INTERNAL,St="Unknown error status: "+rt+" with message "+Ze.message),E=!0,I.eo(new Ue(et,St)),g.close()}else $e("Connection","WebChannel received:",te),I.no(te)}}),P(c,u7.STAT_EVENT,F=>{F.stat===vH.PROXY?$e("Connection","Detected buffering proxy"):F.stat===vH.NOPROXY&&$e("Connection","Detected no buffering proxy")}),setTimeout(()=>{I.Zr()},0),I}}function C3(){return typeof window<"u"?window:null}function bT(){return typeof document<"u"?document:null}function Dw(n){return new sQ(n,!0)}class XP{constructor(t,e,i=1e3,r=1.5,s=6e4){this.js=t,this.timerId=e,this.lo=i,this.fo=r,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(t){this.cancel();const e=Math.floor(this.wo+this.To()),i=Math.max(0,Date.now()-this.yo),r=Math.max(0,e-i);r>0&&$e("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.wo} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,r,()=>(this.yo=Date.now(),t())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class D3{constructor(t,e,i,r,s,c,d,f){this.js=t,this.Ao=i,this.Ro=r,this.bo=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new XP(t,e)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var t=this;return(0,Se.Z)(function*(){t.Do()&&(yield t.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(t){this.Fo(),this.stream.send(t)}Mo(){var t=this;return(0,Se.Z)(function*(){if(t.Co())return t.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(t,e){var i=this;return(0,Se.Z)(function*(){i.Fo(),i.$o(),i.So.cancel(),i.Po++,4!==t?i.So.reset():e&&e.code===be.RESOURCE_EXHAUSTED?(tr(e.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),i.So.po()):e&&e.code===be.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Bo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Jr(e)})()}Bo(){}auth(){this.state=1;const t=this.Lo(this.Po),e=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Po===e&&this.Uo(i,r)},i=>{t(()=>{const r=new Ue(be.UNKNOWN,"Fetching auth token failed: "+i.message);return this.qo(r)})})}Uo(t,e){const i=this.Lo(this.Po);this.stream=this.Ko(t,e),this.stream.zr(()=>{i(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(r=>{i(()=>this.qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}xo(){var t=this;this.state=5,this.So.Io((0,Se.Z)(function*(){t.state=0,t.start()}))}qo(t){return $e("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Lo(t){return e=>{this.js.enqueueAndForget(()=>this.Po===t?e():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class g9 extends D3{constructor(t,e,i,r,s,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.wt=s}Ko(t,e){return this.bo.ho("Listen",t,e)}onMessage(t){this.So.reset();const e=function lQ(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(f=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:yt(),r=t.targetChange.targetIds||[],s=function(f,g){return f.dt?(jt(void 0===g||"string"==typeof g),wr.fromBase64String(g||"")):(jt(void 0===g||g instanceof Uint8Array),wr.fromUint8Array(g||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(f){const g=void 0===f.code?be.UNKNOWN:hj(f.code);return new Ue(g,f.message||"")}(c);e=new _j(i,r,s,d||null)}else if("documentChange"in t){const i=t.documentChange,r=Nc(n,i.document.name),s=Lr(i.document.updateTime),c=new is({mapValue:{fields:i.document.fields}}),d=ai.newFoundDocument(r,s,c);e=new oT(i.targetIds||[],i.removedTargetIds||[],d.key,d)}else if("documentDelete"in t){const i=t.documentDelete,r=Nc(n,i.document),s=i.readTime?Lr(i.readTime):Bt.min(),c=ai.newNoDocument(r,s);e=new oT([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in t){const i=t.documentRemove,r=Nc(n,i.document);e=new oT([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return yt();{const i=t.filter,s=new Q7(i.count||0);e=new gj(i.targetId,s)}}var f;return e}(this.wt,t),i=function(r){if(!("targetChange"in r))return Bt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Bt.min():s.readTime?Lr(s.readTime):Bt.min()}(t);return this.listener.Go(e,i)}Qo(t){const e={};e.database=fw(this.wt),e.addTarget=function(r,s){let c;const d=s.target;return c=Jx(d)?{documents:Tj(r,d)}:{query:Mj(r,d)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=wj(r,s.resumeToken):s.snapshotVersion.compareTo(Bt.min())>0&&(c.readTime=dw(r,s.snapshotVersion.toTimestamp())),c}(this.wt,t);const i=function uQ(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return yt()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Oo(e)}jo(t){const e={};e.database=fw(this.wt),e.removeTarget=t,this.Oo(e)}}class _9 extends D3{constructor(t,e,i,r,s,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(t,e){return this.bo.ho("Write",t,e)}onMessage(t){if(jt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Wo){this.So.reset();const e=function cQ(n,t){return n&&n.length>0?(jt(void 0!==t),n.map(e=>function(i,r){let s=Lr(i.updateTime?i.updateTime:r);return s.isEqual(Bt.min())&&(s=Lr(r)),new Y7(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=Lr(t.commitTime);return this.listener.Jo(i,e)}return jt(!t.writeResults||0===t.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const t={};t.database=fw(this.wt),this.Oo(t)}Ho(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>pw(this.wt,i))};this.Oo(e)}}class v9 extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.bo=i,this.wt=r,this.Zo=!1}tu(){if(this.Zo)throw new Ue(be.FAILED_PRECONDITION,"The client has already been terminated.")}ro(t,e,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.bo.ro(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Ue(be.UNKNOWN,r.toString())})}ao(t,e,i,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.bo.ao(t,e,i,s,c,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ue(be.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class y9{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(t){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ru("Offline")))}set(t){this.cu(),this.eu=0,"Online"===t&&(this.su=!1),this.ru(t)}ru(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ou(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(tr(e),this.su=!1):$e("OnlineStateTracker",e)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class b9{constructor(t,e,i,r,s){var c=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(d=>{i.enqueueAndForget((0,Se.Z)(function*(){var f;jh(c)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,Se.Z)(function*(g){const b=dt(g);b.lu.add(4),yield lv(b),b._u.set("Unknown"),b.lu.delete(4),yield Ew(b)}),function(g){return f.apply(this,arguments)})(c))}))}),this._u=new y9(i,r)}}function Ew(n){return JP.apply(this,arguments)}function JP(){return JP=(0,Se.Z)(function*(n){if(jh(n))for(const t of n.fu)yield t(!0)}),JP.apply(this,arguments)}function lv(n){return e1.apply(this,arguments)}function e1(){return e1=(0,Se.Z)(function*(n){for(const t of n.fu)yield t(!1)}),e1.apply(this,arguments)}function wT(n,t){const e=dt(n);e.hu.has(t.targetId)||(e.hu.set(t.targetId,t),r1(e)?n1(e):uv(e).Co()&&t1(e,t))}function Sw(n,t){const e=dt(n),i=uv(e);e.hu.delete(t),i.Co()&&E3(e,t),0===e.hu.size&&(i.Co()?i.ko():jh(e)&&e._u.set("Unknown"))}function t1(n,t){n.wu.Nt(t.targetId),uv(n).Qo(t)}function E3(n,t){n.wu.Nt(t),uv(n).jo(t)}function n1(n){n.wu=new nQ({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),te:t=>n.hu.get(t)||null}),uv(n).start(),n._u.iu()}function r1(n){return jh(n)&&!uv(n).Do()&&n.hu.size>0}function jh(n){return 0===dt(n).lu.size}function S3(n){n.wu=void 0}function w9(n){return s1.apply(this,arguments)}function s1(){return s1=(0,Se.Z)(function*(n){n.hu.forEach((t,e)=>{t1(n,t)})}),s1.apply(this,arguments)}function C9(n,t){return o1.apply(this,arguments)}function o1(){return o1=(0,Se.Z)(function*(n,t){S3(n),r1(n)?(n._u.uu(t),n1(n)):n._u.set("Unknown")}),o1.apply(this,arguments)}function D9(n,t,e){return a1.apply(this,arguments)}function a1(){return a1=(0,Se.Z)(function*(n,t,e){if(n._u.set("Online"),t instanceof _j&&2===t.state&&t.cause)try{yield(i=(0,Se.Z)(function*(r,s){const c=s.cause;for(const d of s.targetIds)r.hu.has(d)&&(yield r.remoteSyncer.rejectListen(d,c),r.hu.delete(d),r.wu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){$e("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield CT(n,i)}else if(t instanceof oT?n.wu.Ut(t):t instanceof gj?n.wu.zt(t):n.wu.Gt(t),!e.isEqual(Bt.min()))try{const i=yield f3(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const c=r.wu.Yt(s);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=r.hu.get(f);g&&r.hu.set(f,g.withResumeToken(d.resumeToken,s))}}),c.targetMismatches.forEach(d=>{const f=r.hu.get(d);if(!f)return;r.hu.set(d,f.withResumeToken(wr.EMPTY_BYTE_STRING,f.snapshotVersion)),E3(r,d);const g=new Vh(f.target,d,1,f.sequenceNumber);t1(r,g)}),r.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){$e("RemoteStore","Failed to raise snapshot:",i),yield CT(n,i)}var i}),a1.apply(this,arguments)}function CT(n,t,e){return l1.apply(this,arguments)}function l1(){return l1=(0,Se.Z)(function*(n,t,e){if(!Oh(t))throw t;n.lu.add(1),yield lv(n),n._u.set("Offline"),e||(e=()=>f3(n.localStore)),n.asyncQueue.enqueueRetryable((0,Se.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield e(),n.lu.delete(1),yield Ew(n)}))}),l1.apply(this,arguments)}function x3(n,t){return t().catch(e=>CT(n,e,t))}function cv(n){return c1.apply(this,arguments)}function c1(){return c1=(0,Se.Z)(function*(n){const t=dt(n),e=Gh(t);let i=t.au.length>0?t.au[t.au.length-1].batchId:-1;for(;E9(t);)try{const r=yield c9(t.localStore,i);if(null===r){0===t.au.length&&e.ko();break}i=r.batchId,S9(t,r)}catch(r){yield CT(t,r)}T3(t)&&M3(t)}),c1.apply(this,arguments)}function E9(n){return jh(n)&&n.au.length<10}function S9(n,t){n.au.push(t);const e=Gh(n);e.Co()&&e.zo&&e.Ho(t.mutations)}function T3(n){return jh(n)&&!Gh(n).Do()&&n.au.length>0}function M3(n){Gh(n).start()}function x9(n){return u1.apply(this,arguments)}function u1(){return u1=(0,Se.Z)(function*(n){Gh(n).Xo()}),u1.apply(this,arguments)}function T9(n){return d1.apply(this,arguments)}function d1(){return d1=(0,Se.Z)(function*(n){const t=Gh(n);for(const e of n.au)t.Ho(e.mutations)}),d1.apply(this,arguments)}function M9(n,t,e){return h1.apply(this,arguments)}function h1(){return h1=(0,Se.Z)(function*(n,t,e){const i=n.au.shift(),r=PP.from(i,t,e);yield x3(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield cv(n)}),h1.apply(this,arguments)}function I9(n,t){return f1.apply(this,arguments)}function f1(){return f1=(0,Se.Z)(function*(n,t){var e;t&&Gh(n).zo&&(yield(e=(0,Se.Z)(function*(i,r){if(dj(s=r.code)&&s!==be.ABORTED){const c=i.au.shift();Gh(i).No(),yield x3(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield cv(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),T3(n)&&M3(n)}),f1.apply(this,arguments)}function I3(n,t){return p1.apply(this,arguments)}function p1(){return p1=(0,Se.Z)(function*(n,t){const e=dt(n);e.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const i=jh(e);e.lu.add(3),yield lv(e),i&&e._u.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.lu.delete(3),yield Ew(e)}),p1.apply(this,arguments)}function m1(n,t){return g1.apply(this,arguments)}function g1(){return g1=(0,Se.Z)(function*(n,t){const e=dt(n);t?(e.lu.delete(2),yield Ew(e)):t||(e.lu.add(2),yield lv(e),e._u.set("Unknown"))}),g1.apply(this,arguments)}function uv(n){return n.mu||(n.mu=function(t,e,i){const r=dt(t);return r.tu(),new g9(e,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,i)}(n.datastore,n.asyncQueue,{zr:w9.bind(null,n),Jr:C9.bind(null,n),Go:D9.bind(null,n)}),n.fu.push(function(){var t=(0,Se.Z)(function*(e){e?(n.mu.No(),r1(n)?n1(n):n._u.set("Unknown")):(yield n.mu.stop(),S3(n))});return function(e){return t.apply(this,arguments)}}())),n.mu}function Gh(n){return n.gu||(n.gu=function(t,e,i){const r=dt(t);return r.tu(),new _9(e,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,i)}(n.datastore,n.asyncQueue,{zr:x9.bind(null,n),Jr:I9.bind(null,n),Yo:T9.bind(null,n),Jo:M9.bind(null,n)}),n.fu.push(function(){var t=(0,Se.Z)(function*(e){e?(n.gu.No(),yield cv(n)):(yield n.gu.stop(),n.au.length>0&&($e("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(e){return t.apply(this,arguments)}}())),n.gu}class _1{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,e,i,r,s){const c=Date.now()+i,d=new _1(t,e,c,r,s);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ue(be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dv(n,t){if(tr("AsyncQueue",`${t}: ${n}`),Oh(n))return new Ue(be.UNAVAILABLE,`${t}: ${n}`);throw n}class hv{constructor(t){this.comparator=t?(e,i)=>t(e,i)||ot.comparator(e.key,i.key):(e,i)=>ot.comparator(e.key,i.key),this.keyedMap=aw(),this.sortedSet=new Gi(this.comparator)}static emptySet(t){return new hv(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof hv)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new hv;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class A3{constructor(){this.yu=new Gi(ot.comparator)}track(t){const e=t.doc.key,i=this.yu.get(e);i?0!==t.type&&3===i.type?this.yu=this.yu.insert(e,t):3===t.type&&1!==i.type?this.yu=this.yu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.yu=this.yu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.yu=this.yu.remove(e):1===t.type&&2===i.type?this.yu=this.yu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):yt():this.yu=this.yu.insert(e,t)}pu(){const t=[];return this.yu.inorderTraversal((e,i)=>{t.push(i)}),t}}class fv{constructor(t,e,i,r,s,c,d,f){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f}static fromInitialDocuments(t,e,i,r){const s=[];return e.forEach(c=>{s.push({type:0,doc:c})}),new fv(t,e,hv.emptySet(e),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&rw(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class A9{constructor(){this.Iu=void 0,this.listeners=[]}}class k9{constructor(){this.queries=new Bh(t=>ZH(t),rw),this.onlineState="Unknown",this.Tu=new Set}}function v1(n,t){return y1.apply(this,arguments)}function y1(){return y1=(0,Se.Z)(function*(n,t){const e=dt(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new A9),r)try{s.Iu=yield e.onListen(i)}catch(c){const d=dv(c,`Initialization of query '${xP(t.query)}' failed`);return void t.onError(d)}e.queries.set(i,s),s.listeners.push(t),t.Eu(e.onlineState),s.Iu&&t.Au(s.Iu)&&C1(e)}),y1.apply(this,arguments)}function b1(n,t){return w1.apply(this,arguments)}function w1(){return w1=(0,Se.Z)(function*(n,t){const e=dt(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const c=s.listeners.indexOf(t);c>=0&&(s.listeners.splice(c,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),w1.apply(this,arguments)}function R9(n,t){const e=dt(n);let i=!1;for(const r of t){const c=e.queries.get(r.query);if(c){for(const d of c.listeners)d.Au(r)&&(i=!0);c.Iu=r}}i&&C1(e)}function O9(n,t,e){const i=dt(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function C1(n){n.Tu.forEach(t=>{t.next()})}class D1{constructor(t,e,i){this.query=t,this.Ru=e,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=i||{}}Au(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new fv(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.bu?this.vu(t)&&(this.Ru.next(t),e=!0):this.Vu(t,this.onlineState)&&(this.Su(t),e=!0),this.Pu=t,e}onError(t){this.Ru.error(t)}Eu(t){this.onlineState=t;let e=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,t)&&(this.Su(this.Pu),e=!0),e}Vu(t,e){return!t.fromCache||!(this.options.Du&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}vu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(t){t=fv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Ru.next(t)}}class P9{constructor(t,e){this.payload=t,this.byteLength=e}Cu(){return"metadata"in this.payload}}class k3{constructor(t){this.wt=t}Wi(t){return Nc(this.wt,t)}zi(t){return t.metadata.exists?xj(this.wt,t.document,!1):ai.newNoDocument(this.Wi(t.metadata.name),this.Hi(t.metadata.readTime))}Hi(t){return Lr(t)}}class N9{constructor(t,e,i){this.xu=t,this.localStore=e,this.wt=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=R3(t)}Nu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const i=Mn.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}ku(t){const e=new Map,i=new k3(this.wt);for(const r of t)if(r.metadata.queries){const s=i.Wi(r.metadata.name);for(const c of r.metadata.queries){const d=(e.get(c)||sn()).add(s);e.set(c,d)}}return e}complete(){var t=this;return(0,Se.Z)(function*(){const e=yield function u9(n,t,e,i){return qP.apply(this,arguments)}(t.localStore,new k3(t.wt),t.documents,t.xu.id),i=t.ku(t.documents);for(const r of t.queries)yield d9(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Mu:t.collectionGroups,Ou:e}})()}}function R3(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class O3{constructor(t){this.key=t}}class P3{constructor(t){this.key=t}}class N3{constructor(t,e){this.query=t,this.Fu=e,this.$u=null,this.current=!1,this.Bu=sn(),this.mutatedKeys=sn(),this.Lu=QH(t),this.Uu=new hv(this.Lu)}get qu(){return this.Fu}Ku(t,e){const i=e?e.Gu:new A3,r=e?e.Uu:this.Uu;let s=e?e.mutatedKeys:this.mutatedKeys,c=r,d=!1;const f="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,g="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((b,E)=>{const I=r.get(b),P=TP(this.query,E)?E:null,F=!!I&&this.mutatedKeys.has(I.key),z=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let te=!1;I&&P?I.data.isEqual(P.data)?F!==z&&(i.track({type:3,doc:P}),te=!0):this.Qu(I,P)||(i.track({type:2,doc:P}),te=!0,(f&&this.Lu(P,f)>0||g&&this.Lu(P,g)<0)&&(d=!0)):!I&&P?(i.track({type:0,doc:P}),te=!0):I&&!P&&(i.track({type:1,doc:I}),te=!0,(f||g)&&(d=!0)),te&&(P?(c=c.add(P),s=z?s.add(b):s.delete(b)):(c=c.delete(b),s=s.delete(b)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const b="F"===this.query.limitType?c.last():c.first();c=c.delete(b.key),s=s.delete(b.key),i.track({type:1,doc:b})}return{Uu:c,Gu:i,Mi:d,mutatedKeys:s}}Qu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.Uu;this.Uu=t.Uu,this.mutatedKeys=t.mutatedKeys;const s=t.Gu.pu();s.sort((g,b)=>function(E,I){const P=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt()}};return P(E)-P(I)}(g.type,b.type)||this.Lu(g.doc,b.doc)),this.ju(i);const c=e?this.Wu():[],d=0===this.Bu.size&&this.current?1:0,f=d!==this.$u;return this.$u=d,0!==s.length||f?{snapshot:new fv(this.query,t.Uu,r,s,t.mutatedKeys,0===d,f,!1),zu:c}:{zu:c}}Eu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new A3,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(t){return!this.Fu.has(t)&&!!this.Uu.has(t)&&!this.Uu.get(t).hasLocalMutations}ju(t){t&&(t.addedDocuments.forEach(e=>this.Fu=this.Fu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Fu=this.Fu.delete(e)),this.current=t.current)}Wu(){if(!this.current)return[];const t=this.Bu;this.Bu=sn(),this.Uu.forEach(i=>{this.Hu(i.key)&&(this.Bu=this.Bu.add(i.key))});const e=[];return t.forEach(i=>{this.Bu.has(i)||e.push(new P3(i))}),this.Bu.forEach(i=>{t.has(i)||e.push(new O3(i))}),e}Ju(t){this.Fu=t.ji,this.Bu=sn();const e=this.Ku(t.documents);return this.applyChanges(e,!0)}Yu(){return fv.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class F9{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class L9{constructor(t){this.key=t,this.Xu=!1}}class B9{constructor(t,e,i,r,s,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.Zu={},this.tc=new Bh(d=>ZH(d),rw),this.ec=new Map,this.nc=new Set,this.sc=new Gi(ot.comparator),this.ic=new Map,this.rc=new VP,this.oc={},this.uc=new Map,this.cc=Rm.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function V9(n,t){return E1.apply(this,arguments)}function E1(){return E1=(0,Se.Z)(function*(n,t){const e=W1(n);let i,r;const s=e.tc.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.Yu();else{const c=yield ov(e.localStore,bo(t));e.isPrimaryClient&&wT(e.remoteStore,c);const d=e.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield S1(e,t,i,"current"===d)}return r}),E1.apply(this,arguments)}function S1(n,t,e,i){return x1.apply(this,arguments)}function x1(){return x1=(0,Se.Z)(function*(n,t,e,i){n.hc=(b,E,I)=>{return(P=(0,Se.Z)(function*(F,z,te,Ve){let Ze=z.view.Ku(te);Ze.Mi&&(Ze=yield _T(F.localStore,z.query,!1).then(({documents:St})=>z.view.Ku(St,Ze)));const rt=Ve&&Ve.targetChanges.get(z.targetId),et=z.view.applyChanges(Ze,F.isPrimaryClient,rt);return F1(F,z.targetId,et.zu),et.snapshot}),function(F,z,te,Ve){return P.apply(this,arguments)})(n,b,E,I);var P};const r=yield _T(n.localStore,t,!0),s=new N3(t,r.ji),c=s.Ku(r.documents),d=uw.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState),f=s.applyChanges(c,n.isPrimaryClient,d);F1(n,e,f.zu);const g=new F9(t,e,s);return n.tc.set(t,g),n.ec.has(e)?n.ec.get(e).push(t):n.ec.set(e,[t]),f.snapshot}),x1.apply(this,arguments)}function U9(n,t){return T1.apply(this,arguments)}function T1(){return T1=(0,Se.Z)(function*(n,t){const e=dt(n),i=e.tc.get(t),r=e.ec.get(i.targetId);if(r.length>1)return e.ec.set(i.targetId,r.filter(s=>!rw(s,t))),void e.tc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield av(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),Sw(e.remoteStore,i.targetId),pv(e,i.targetId)}).catch(Rh))):(pv(e,i.targetId),yield av(e.localStore,i.targetId,!0))}),T1.apply(this,arguments)}function M1(){return M1=(0,Se.Z)(function*(n,t,e){const i=Y1(n);try{const r=yield function(s,c){const d=dt(s),f=Ti.now(),g=c.reduce((I,P)=>I.add(P.key),sn());let b,E;return d.persistence.runTransaction("Locally write mutations","readwrite",I=>{let P=wo(),F=sn();return d.Ui.getEntries(I,g).next(z=>{P=z,P.forEach((te,Ve)=>{Ve.isValidDocument()||(F=F.add(te))})}).next(()=>d.localDocuments.getOverlayedDocuments(I,P)).next(z=>{b=z;const te=[];for(const Ve of c){const Ze=K7(Ve,b.get(Ve.key).overlayedDocument);null!=Ze&&te.push(new Ju(Ve.key,Ze,UH(Ze.value.mapValue),Ni.exists(!0)))}return d.mutationQueue.addMutationBatch(I,f,te,c)}).next(z=>{E=z;const te=z.applyToLocalDocumentSet(b,F);return d.documentOverlayCache.saveOverlays(I,z.batchId,te)})}).then(()=>({batchId:E.batchId,changes:pj(b)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,d){let f=s.oc[s.currentUser.toKey()];f||(f=new Gi(Xt)),f=f.insert(c,d),s.oc[s.currentUser.toKey()]=f}(i,r.batchId,e),yield ed(i,r.changes),yield cv(i.remoteStore)}catch(r){const s=dv(r,"Failed to persist write");e.reject(s)}}),M1.apply(this,arguments)}function F3(n,t){return I1.apply(this,arguments)}function I1(){return I1=(0,Se.Z)(function*(n,t){const e=dt(n);try{const i=yield l9(e.localStore,t);t.targetChanges.forEach((r,s)=>{const c=e.ic.get(s);c&&(jt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.Xu=!0:r.modifiedDocuments.size>0?jt(c.Xu):r.removedDocuments.size>0&&(jt(c.Xu),c.Xu=!1))}),yield ed(e,i,t)}catch(i){yield Rh(i)}}),I1.apply(this,arguments)}function L3(n,t,e){const i=dt(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.tc.forEach((s,c)=>{const d=c.view.Eu(t);d.snapshot&&r.push(d.snapshot)}),function(s,c){const d=dt(s);d.onlineState=c;let f=!1;d.queries.forEach((g,b)=>{for(const E of b.listeners)E.Eu(c)&&(f=!0)}),f&&C1(d)}(i.eventManager,t),r.length&&i.Zu.Go(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function j9(n,t,e){return A1.apply(this,arguments)}function A1(){return A1=(0,Se.Z)(function*(n,t,e){const i=dt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.ic.get(t),s=r&&r.key;if(s){let c=new Gi(ot.comparator);c=c.insert(s,ai.newNoDocument(s,Bt.min()));const d=sn().add(s),f=new cw(Bt.min(),new Map,new zn(Xt),c,d);yield F3(i,f),i.sc=i.sc.remove(s),i.ic.delete(t),L1(i)}else yield av(i.localStore,t,!1).then(()=>pv(i,t,e)).catch(Rh)}),A1.apply(this,arguments)}function G9(n,t){return k1.apply(this,arguments)}function k1(){return k1=(0,Se.Z)(function*(n,t){const e=dt(n),i=t.batch.batchId;try{const r=yield a9(e.localStore,t);N1(e,i,null),P1(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield ed(e,r)}catch(r){yield Rh(r)}}),k1.apply(this,arguments)}function z9(n,t,e){return R1.apply(this,arguments)}function R1(){return R1=(0,Se.Z)(function*(n,t,e){const i=dt(n);try{const r=yield function(s,c){const d=dt(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return d.mutationQueue.lookupMutationBatch(f,c).next(b=>(jt(null!==b),g=b.keys(),d.mutationQueue.removeMutationBatch(f,b))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>d.localDocuments.getDocuments(f,g))})}(i.localStore,t);N1(i,t,e),P1(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield ed(i,r)}catch(r){yield Rh(r)}}),R1.apply(this,arguments)}function O1(){return O1=(0,Se.Z)(function*(n,t){const e=dt(n);jh(e.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const c=dt(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>c.mutationQueue.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===i)return void t.resolve();const r=e.uc.get(i)||[];r.push(t),e.uc.set(i,r)}catch(i){const r=dv(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),O1.apply(this,arguments)}function P1(n,t){(n.uc.get(t)||[]).forEach(e=>{e.resolve()}),n.uc.delete(t)}function N1(n,t,e){const i=dt(n);let r=i.oc[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.oc[i.currentUser.toKey()]=r}}function pv(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.ec.get(t))n.tc.delete(i),e&&n.Zu.lc(i,e);n.ec.delete(t),n.isPrimaryClient&&n.rc.us(t).forEach(i=>{n.rc.containsKey(i)||B3(n,i)})}function B3(n,t){n.nc.delete(t.path.canonicalString());const e=n.sc.get(t);null!==e&&(Sw(n.remoteStore,e),n.sc=n.sc.remove(t),n.ic.delete(e),L1(n))}function F1(n,t,e){for(const i of e)i instanceof O3?(n.rc.addReference(i.key,t),q9(n,i)):i instanceof P3?($e("SyncEngine","Document no longer in limbo: "+i.key),n.rc.removeReference(i.key,t),n.rc.containsKey(i.key)||B3(n,i.key)):yt()}function q9(n,t){const e=t.key,i=e.path.canonicalString();n.sc.get(e)||n.nc.has(i)||($e("SyncEngine","New document in limbo: "+e),n.nc.add(i),L1(n))}function L1(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const t=n.nc.values().next().value;n.nc.delete(t);const e=new ot(Mn.fromString(t)),i=n.cc.next();n.ic.set(i,new L9(e)),n.sc=n.sc.insert(e,i),wT(n.remoteStore,new Vh(bo(K_(e.path)),i,2,yo.ot))}}function ed(n,t,e){return B1.apply(this,arguments)}function B1(){return B1=(0,Se.Z)(function*(n,t,e){const i=dt(n),r=[],s=[],c=[];var d;i.tc.isEmpty()||(i.tc.forEach((d,f)=>{c.push(i.hc(f,t,e).then(g=>{if(g){i.isPrimaryClient&&i.sharedClientState.updateQueryState(f.targetId,g.fromCache?"not-current":"current"),r.push(g);const b=GP.Vi(f.targetId,g);s.push(b)}}))}),yield Promise.all(c),i.Zu.Go(r),yield(d=(0,Se.Z)(function*(f,g){const b=dt(f);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>me.forEach(g,I=>me.forEach(I.Pi,P=>b.persistence.referenceDelegate.addReference(E,I.targetId,P)).next(()=>me.forEach(I.vi,P=>b.persistence.referenceDelegate.removeReference(E,I.targetId,P)))))}catch(E){if(!Oh(E))throw E;$e("LocalStore","Failed to update sequence numbers: "+E)}for(const E of g){const I=E.targetId;if(!E.fromCache){const P=b.$i.get(I),z=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);b.$i=b.$i.insert(I,z)}}}),function(f,g){return d.apply(this,arguments)})(i.localStore,s))}),B1.apply(this,arguments)}function W9(n,t){return V1.apply(this,arguments)}function V1(){return V1=(0,Se.Z)(function*(n,t){const e=dt(n);if(!e.currentUser.isEqual(t)){$e("SyncEngine","User change. New user:",t.toKey());const i=yield h3(e.localStore,t);e.currentUser=t,(r=e).uc.forEach(c=>{c.forEach(d=>{d.reject(new Ue(be.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.uc.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield ed(e,i.Ki)}var r}),V1.apply(this,arguments)}function Y9(n,t){const e=dt(n),i=e.ic.get(t);if(i&&i.Xu)return sn().add(i.key);{let r=sn();const s=e.ec.get(t);if(!s)return r;for(const c of s){const d=e.tc.get(c);r=r.unionWith(d.view.qu)}return r}}function Z9(n,t){return U1.apply(this,arguments)}function U1(){return U1=(0,Se.Z)(function*(n,t){const e=dt(n),i=yield _T(e.localStore,t.query,!0),r=t.view.Ju(i);return e.isPrimaryClient&&F1(e,t.targetId,r.zu),r}),U1.apply(this,arguments)}function K9(n,t){return H1.apply(this,arguments)}function H1(){return H1=(0,Se.Z)(function*(n,t){const e=dt(n);return g3(e.localStore,t).then(i=>ed(e,i))}),H1.apply(this,arguments)}function Q9(n,t,e,i){return j1.apply(this,arguments)}function j1(){return j1=(0,Se.Z)(function*(n,t,e,i){const r=dt(n),s=yield function(c,d){const f=dt(c),g=dt(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",b=>g.yn(b,d).next(E=>E?f.localDocuments.getDocuments(b,E):me.resolve(null)))}(r.localStore,t);var d;null!==s?("pending"===e?yield cv(r.remoteStore):"acknowledged"===e||"rejected"===e?(N1(r,t,i||null),P1(r,t),d=t,dt(dt(r.localStore).mutationQueue).In(d)):yt(),yield ed(r,s)):$e("SyncEngine","Cannot apply mutation batch with id: "+t)}),j1.apply(this,arguments)}function G1(){return G1=(0,Se.Z)(function*(n,t){const e=dt(n);if(W1(e),Y1(e),!0===t&&!0!==e.ac){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield V3(e,i.toArray());e.ac=!0,yield m1(e.remoteStore,!0);for(const s of r)wT(e.remoteStore,s)}else if(!1===t&&!1!==e.ac){const i=[];let r=Promise.resolve();e.ec.forEach((s,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(pv(e,c),av(e.localStore,c,!0))),Sw(e.remoteStore,c)}),yield r,yield V3(e,i),function(s){const c=dt(s);c.ic.forEach((d,f)=>{Sw(c.remoteStore,f)}),c.rc.cs(),c.ic=new Map,c.sc=new Gi(ot.comparator)}(e),e.ac=!1,yield m1(e.remoteStore,!1)}}),G1.apply(this,arguments)}function V3(n,t,e){return z1.apply(this,arguments)}function z1(){return z1=(0,Se.Z)(function*(n,t,e){const i=dt(n),r=[],s=[];for(const c of t){let d;const f=i.ec.get(c);if(f&&0!==f.length){d=yield ov(i.localStore,bo(f[0]));for(const g of f){const b=i.tc.get(g),E=yield Z9(i,b);E.snapshot&&s.push(E.snapshot)}}else{const g=yield m3(i.localStore,c);d=yield ov(i.localStore,g),yield S1(i,U3(g),c,!1)}r.push(d)}return i.Zu.Go(s),r}),z1.apply(this,arguments)}function U3(n){return WH(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function J9(n){const t=dt(n);return dt(dt(t.localStore).persistence).Ri()}function eX(n,t,e,i){return $1.apply(this,arguments)}function $1(){return $1=(0,Se.Z)(function*(n,t,e,i){const r=dt(n);if(r.ac)return void $e("SyncEngine","Ignoring unexpected query state notification.");const s=r.ec.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const c=yield g3(r.localStore,KH(s[0])),d=cw.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield ed(r,c,d);break}case"rejected":yield av(r.localStore,t,!0),pv(r,t,i);break;default:yt()}}),$1.apply(this,arguments)}function tX(n,t,e){return q1.apply(this,arguments)}function q1(){return q1=(0,Se.Z)(function*(n,t,e){const i=W1(n);if(i.ac){for(const r of t){if(i.ec.has(r)){$e("SyncEngine","Adding an already active target "+r);continue}const s=yield m3(i.localStore,r),c=yield ov(i.localStore,s);yield S1(i,U3(s),c.targetId,!1),wT(i.remoteStore,c)}for(const r of e)i.ec.has(r)&&(yield av(i.localStore,r,!1).then(()=>{Sw(i.remoteStore,r),pv(i,r)}).catch(Rh))}}),q1.apply(this,arguments)}function W1(n){const t=dt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=F3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y9.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=j9.bind(null,t),t.Zu.Go=R9.bind(null,t.eventManager),t.Zu.lc=O9.bind(null,t.eventManager),t}function Y1(n){const t=dt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=G9.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=z9.bind(null,t),t}class H3{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,Se.Z)(function*(){e.wt=Dw(t.databaseInfo.databaseId),e.sharedClientState=e.dc(t),e.persistence=e._c(t),yield e.persistence.start(),e.localStore=e.wc(t),e.gcScheduler=e.mc(t,e.localStore),e.indexBackfillerScheduler=e.gc(t,e.localStore)})()}mc(t,e){return null}gc(t,e){return null}wc(t){return d3(this.persistence,new u3,t.initialUser,this.wt)}_c(t){return new l3(mT.Os,this.wt)}dc(t){return new b3}terminate(){var t=this;return(0,Se.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class j3 extends H3{constructor(t,e,i){super(),this.yc=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,Se.Z)(function*(){yield e().call(i,t),yield i.yc.initialize(i,t),yield Y1(i.yc.syncEngine),yield cv(i.yc.remoteStore),yield i.persistence.ci(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(t){return d3(this.persistence,new u3,t.initialUser,this.wt)}mc(t,e){return new $Q(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}gc(t,e){const i=new M7(e,this.persistence);return new T7(t.asyncQueue,i)}_c(t){const e=jP(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Co.withCacheSize(this.cacheSizeBytes):Co.DEFAULT;return new HP(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,C3(),bT(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(t){return new b3}}class iX extends j3{constructor(t,e){super(t,e,!1),this.yc=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,Se.Z)(function*(){yield e().call(i,t);const r=i.yc.syncEngine;i.sharedClientState instanceof QP&&(i.sharedClientState.syncEngine={kr:Q9.bind(null,r),Mr:eX.bind(null,r),Or:tX.bind(null,r),Ri:J9.bind(null,r),Nr:K9.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.ci(function(){var s=(0,Se.Z)(function*(c){yield function X9(n,t){return G1.apply(this,arguments)}(i.yc.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start():c||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(c&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():c||i.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}dc(t){const e=C3();if(!QP.V(e))throw new Ue(be.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=jP(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new QP(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class Z1{initialize(t,e){var i=this;return(0,Se.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>L3(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=W9.bind(null,i.syncEngine),yield m1(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new k9}createDatastore(t){const e=Dw(t.databaseInfo.databaseId),i=new m9(t.databaseInfo);return new v9(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=d=>L3(this.syncEngine,d,0),c=w3.V()?new w3:new h9,new b9(e,i,r,s,c);var e,i,r,s,c}createSyncEngine(t,e){return function(i,r,s,c,d,f,g){const b=new B9(i,r,s,c,d,f);return g&&(b.ac=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,Se.Z)(function*(e){const i=dt(e);$e("RemoteStore","RemoteStore shutting down."),i.lu.add(5),yield lv(i),i.du.shutdown(),i._u.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function G3(n,t=10240){let e=0;return{read:()=>(0,Se.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,Se.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class DT{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ic(this.observer.next,t)}error(t){this.observer.error?this.Ic(this.observer.error,t):tr("Uncaught Error in snapshot listener:",t)}Tc(){this.muted=!0}Ic(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class rX{constructor(t,e){this.Ec=t,this.wt=e,this.metadata=new Fr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(i=>{i&&i.Cu()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Ec.cancel()}getMetadata(){var t=this;return(0,Se.Z)(function*(){return t.metadata.promise})()}fc(){var t=this;return(0,Se.Z)(function*(){return yield t.getMetadata(),t.Rc()})()}Rc(){var t=this;return(0,Se.Z)(function*(){const e=yield t.bc();if(null===e)return null;const i=t.Ac.decode(e),r=Number(i);isNaN(r)&&t.Pc(`length string (${i}) is not valid number`);const s=yield t.vc(r);return new P9(JSON.parse(s),e.length+r)})()}Vc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}bc(){var t=this;return(0,Se.Z)(function*(){for(;t.Vc()<0&&!(yield t.Sc()););if(0===t.buffer.length)return null;const e=t.Vc();e<0&&t.Pc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}vc(t){var e=this;return(0,Se.Z)(function*(){for(;e.buffer.length<t;)(yield e.Sc())&&e.Pc("Reached the end of bundle when more is expected.");const i=e.Ac.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Pc(t){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${t}`)}Sc(){var t=this;return(0,Se.Z)(function*(){const e=yield t.Ec.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class sX{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,Se.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Ue(be.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Se.Z)(function*(s,c){const d=dt(s),f=fw(d.wt)+"/documents",g={documents:c.map(P=>hw(d.wt,P))},b=yield d.ao("BatchGetDocuments",f,g,c.length),E=new Map;b.forEach(P=>{const F=function aQ(n,t){return"found"in t?function(e,i){jt(!!i.found);const r=Nc(e,i.found.name),s=Lr(i.found.updateTime),c=new is({mapValue:{fields:i.found.fields}});return ai.newFoundDocument(r,s,c)}(n,t):"missing"in t?function(e,i){jt(!!i.missing),jt(!!i.readTime);const r=Nc(e,i.missing),s=Lr(i.readTime);return ai.newNoDocument(r,s)}(n,t):yt()}(d.wt,P);E.set(F.key.toString(),F)});const I=[];return c.forEach(P=>{const F=E.get(P.toString());jt(!!F),I.push(F)}),I}),function(s,c){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new tv(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,Se.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=ot.fromPath(r);t.mutations.push(new MP(s,t.precondition(s)))}),yield(i=(0,Se.Z)(function*(r,s){const c=dt(r),d=fw(c.wt)+"/documents",f={writes:s.map(g=>pw(c.wt,g))};yield c.ro("Commit",d,f)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw yt();e=Bt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Ue(be.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Ni.updateTime(e):Ni.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Bt.min()))throw new Ue(be.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ni.updateTime(e)}return Ni.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class oX{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.Dc=i.maxAttempts,this.So=new XP(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var t=this;this.So.Io((0,Se.Z)(function*(){const e=new sX(t.datastore),i=t.xc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Nc(s)}))}).catch(r=>{t.Nc(r)})}))}xc(t){try{const e=this.updateFunction(t);return!X0(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Nc(t){this.Dc>0&&this.kc(t)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(t)}kc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!dj(e)}return!1}}class aX{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Nr.UNAUTHENTICATED,this.clientId=CH.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,Se.Z)(function*(d){$e("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>($e("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var t=this;return(0,Se.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ue(be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=dv(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function z3(n,t){return K1.apply(this,arguments)}function K1(){return K1=(0,Se.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,Se.Z)(function*(s){i.isEqual(s)||(yield h3(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),K1.apply(this,arguments)}function $3(n,t){return Q1.apply(this,arguments)}function Q1(){return Q1=(0,Se.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield X1(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>I3(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>I3(t.remoteStore,s)),n.onlineComponents=t}),Q1.apply(this,arguments)}function X1(n){return J1.apply(this,arguments)}function J1(){return J1=(0,Se.Z)(function*(n){return n.offlineComponents||($e("FirestoreClient","Using default OfflineComponentProvider"),yield z3(n,new H3)),n.offlineComponents}),J1.apply(this,arguments)}function ET(n){return eN.apply(this,arguments)}function eN(){return eN=(0,Se.Z)(function*(n){return n.onlineComponents||($e("FirestoreClient","Using default OnlineComponentProvider"),yield $3(n,new Z1)),n.onlineComponents}),eN.apply(this,arguments)}function q3(n){return X1(n).then(t=>t.persistence)}function ST(n){return X1(n).then(t=>t.localStore)}function W3(n){return ET(n).then(t=>t.remoteStore)}function tN(n){return ET(n).then(t=>t.syncEngine)}function mv(n){return nN.apply(this,arguments)}function nN(){return nN=(0,Se.Z)(function*(n){const t=yield ET(n),e=t.eventManager;return e.onListen=V9.bind(null,t.syncEngine),e.onUnlisten=U9.bind(null,t.syncEngine),e}),nN.apply(this,arguments)}function Y3(n,t,e={}){const i=new Fr;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(r,s,c,d,f){const g=new DT({next:E=>{s.enqueueAndForget(()=>b1(r,b));const I=E.docs.has(c);!I&&E.fromCache?f.reject(new Ue(be.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&E.fromCache&&d&&"server"===d.source?f.reject(new Ue(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),b=new D1(K_(c.path),g,{includeMetadataChanges:!0,Du:!0});return v1(r,b)}(yield mv(n),n.asyncQueue,t,e,i)})),i.promise}function Z3(n,t,e={}){const i=new Fr;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(r,s,c,d,f){const g=new DT({next:E=>{s.enqueueAndForget(()=>b1(r,b)),E.fromCache&&"server"===d.source?f.reject(new Ue(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),b=new D1(c,g,{includeMetadataChanges:!0,Du:!0});return v1(r,b)}(yield mv(n),n.asyncQueue,t,e,i)})),i.promise}const K3=new Map;function iN(n,t,e){if(!e)throw new Ue(be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function Q3(n,t,e,i){if(!0===t&&!0===i)throw new Ue(be.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function X3(n){if(!ot.isDocumentKey(n))throw new Ue(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function J3(n){if(ot.isDocumentKey(n))throw new Ue(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":yt()}function En(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ue(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=xT(n);throw new Ue(be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function eG(n,t){if(t<=0)throw new Ue(be.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class tG{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ue(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ue(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Q3("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class xw{constructor(t,e,i){this._authCredentials=e,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tG({}),this._settingsFrozen=!1,t instanceof Qu?this._databaseId=t:(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Ue(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qu(r.options.projectId)}(t))}get app(){if(!this._app)throw new Ue(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ue(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tG(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new m7;switch(e.type){case"gapi":const i=e.client;return jt(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new y7(i,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Ue(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=K3.get(t);e&&($e("ComponentProvider","Removing Datastore"),K3.delete(t),e.terminate())}(this),Promise.resolve()}}class bi{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new bi(this.firestore,t,this._key)}}class Ts{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Ts(this.firestore,t,this._query)}}class Lc extends Ts{constructor(t,e,i){super(t,e,K_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new bi(this.firestore,null,new ot(t))}withConverter(t){return new Lc(this.firestore,t,this._path)}}function nG(n,t,...e){if(n=(0,L.m9)(n),iN("collection","path",t),n instanceof xw){const i=Mn.fromString(t,...e);return J3(i),new Lc(n,null,i)}{if(!(n instanceof bi||n instanceof Lc))throw new Ue(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Mn.fromString(t,...e));return J3(i),new Lc(n.firestore,null,i)}}function TT(n,t,...e){if(n=(0,L.m9)(n),1===arguments.length&&(t=CH.I()),iN("doc","path",t),n instanceof xw){const i=Mn.fromString(t,...e);return X3(i),new bi(n,null,new ot(i))}{if(!(n instanceof bi||n instanceof Lc))throw new Ue(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Mn.fromString(t,...e));return X3(i),new bi(n.firestore,n instanceof Lc?n.converter:null,new ot(i))}}function iG(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),(n instanceof bi||n instanceof Lc)&&(t instanceof bi||t instanceof Lc)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function rG(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),n instanceof Ts&&t instanceof Ts&&n.firestore===t.firestore&&rw(n._query,t._query)&&n.converter===t.converter}class vX{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new XP(this,"async_queue_retry"),this.Kc=()=>{const e=bT();e&&$e("AsyncQueue","Visibility state changed to "+e.visibilityState),this.So.Eo()};const t=bT();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Gc(),this.Qc(t)}enterRestrictedMode(t){if(!this.Fc){this.Fc=!0,this.Uc=t||!1;const e=bT();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Kc)}}enqueue(t){if(this.Gc(),this.Fc)return new Promise(()=>{});const e=new Fr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Oc.push(t),this.jc()))}jc(){var t=this;return(0,Se.Z)(function*(){if(0!==t.Oc.length){try{yield t.Oc[0](),t.Oc.shift(),t.So.reset()}catch(e){if(!Oh(e))throw e;$e("AsyncQueue","Operation failed with retryable error: "+e)}t.Oc.length>0&&t.So.Io(()=>t.jc())}})()}Qc(t){const e=this.Mc.then(()=>(this.Lc=!0,t().catch(i=>{throw this.Bc=i,this.Lc=!1,tr("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(i)),i}).then(i=>(this.Lc=!1,i))));return this.Mc=e,e}enqueueAfterDelay(t,e,i){this.Gc(),this.qc.indexOf(t)>-1&&(e=0);const r=_1.createAndSchedule(this,t,e,i,s=>this.Wc(s));return this.$c.push(r),r}Gc(){this.Bc&&yt()}verifyOperationInProgress(){}zc(){var t=this;return(0,Se.Z)(function*(){let e;do{e=t.Mc,yield e}while(e!==t.Mc)})()}Hc(t){for(const e of this.$c)if(e.timerId===t)return!0;return!1}Jc(t){return this.zc().then(()=>{this.$c.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.$c)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.zc()})}Yc(t){this.qc.push(t)}Wc(t){const e=this.$c.indexOf(t);this.$c.splice(e,1)}}function rN(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class yX{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Mi extends xw{constructor(t,e,i){super(t,e,i),this.type="firestore",this._queue=new vX,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||sG(this),this._firestoreClient.terminate()}}function ur(n){return n._firestoreClient||sG(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function sG(n){var t;const e=n._freezeSettings(),i=(s=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new k7(n._databaseId,s,n._persistenceKey,(d=e).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new aX(n._authCredentials,n._appCheckCredentials,n._queue,i)}function oG(n,t,e){const i=new Fr;return n.asyncQueue.enqueue((0,Se.Z)(function*(){try{yield z3(n,e),yield $3(n,t),i.resolve()}catch(r){const s=r;if(!("FirebaseError"===(c=s).name?c.code===be.FAILED_PRECONDITION||c.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw s;gm("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var c})).then(()=>i.promise)}function aG(n){if(n._initialized||n._terminated)throw new Ue(be.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class td{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ue(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ji(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Bc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Bc(wr.fromBase64String(t))}catch(e){throw new Ue(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Bc(wr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Pm{constructor(t){this._methodName=t}}class MT{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ue(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ue(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Xt(this._lat,t._lat)||Xt(this._long,t._long)}}const IX=/^__.*__$/;class AX{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new Ju(t,this.data,this.fieldMask,e,this.fieldTransforms):new ev(t,this.data,e,this.fieldTransforms)}}class lG{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Ju(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function cG(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt()}}class IT{constructor(t,e,i,r,s,c){this.settings=t,this.databaseId=e,this.wt=i,this.ignoreUndefinedProperties=r,void 0===s&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(t){return new IT(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ta({path:i,na:!1});return r.sa(t),r}ia(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ta({path:i,na:!1});return r.Xc(),r}ra(t){return this.ta({path:void 0,na:!0})}oa(t){return RT(t,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Xc(){if(this.path)for(let t=0;t<this.path.length;t++)this.sa(this.path.get(t))}sa(t){if(0===t.length)throw this.oa("Document fields must not be empty");if(cG(this.Zc)&&IX.test(t))throw this.oa('Document fields cannot begin and end with "__"')}}class kX{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.wt=i||Dw(t)}aa(t,e,i,r=!1){return new IT({Zc:t,methodName:e,ca:i,path:ji.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Nm(n){const t=n._freezeSettings(),e=Dw(n._databaseId);return new kX(n._databaseId,!!t.ignoreUndefinedProperties,e)}function AT(n,t,e,i,r,s={}){const c=n.aa(s.merge||s.mergeFields?2:0,t,e,r);lN("Data must be an object, but it was:",c,i);const d=hG(i,c);let f,g;if(s.merge)f=new ia(c.fieldMask),g=c.fieldTransforms;else if(s.mergeFields){const b=[];for(const E of s.mergeFields){const I=cN(t,E,e);if(!c.contains(I))throw new Ue(be.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);pG(b,I)||b.push(I)}f=new ia(b),g=c.fieldTransforms.filter(E=>f.covers(E.field))}else f=null,g=c.fieldTransforms;return new AX(new is(d),f,g)}class Tw extends Pm{_toFieldTransform(t){if(2!==t.Zc)throw t.oa(1===t.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Tw}}function uG(n,t,e){return new IT({Zc:3,ca:t.settings.ca,methodName:n._methodName,na:e},t.databaseId,t.wt,t.ignoreUndefinedProperties)}class sN extends Pm{_toFieldTransform(t){return new sw(t.path,new X_)}isEqual(t){return t instanceof sN}}class RX extends Pm{constructor(t,e){super(t),this.ha=e}_toFieldTransform(t){const e=uG(this,t,!0),i=this.ha.map(s=>Fm(s,e)),r=new Em(i);return new sw(t.path,r)}isEqual(t){return this===t}}class OX extends Pm{constructor(t,e){super(t),this.ha=e}_toFieldTransform(t){const e=uG(this,t,!0),i=this.ha.map(s=>Fm(s,e)),r=new Sm(i);return new sw(t.path,r)}isEqual(t){return this===t}}class PX extends Pm{constructor(t,e){super(t),this.la=e}_toFieldTransform(t){const e=new J_(t.wt,ej(t.wt,this.la));return new sw(t.path,e)}isEqual(t){return this===t}}function oN(n,t,e,i){const r=n.aa(1,t,e);lN("Data must be an object, but it was:",r,i);const s=[],c=is.empty();ym(i,(f,g)=>{const b=kT(t,f,e);g=(0,L.m9)(g);const E=r.ia(b);if(g instanceof Tw)s.push(b);else{const I=Fm(g,E);null!=I&&(s.push(b),c.set(b,I))}});const d=new ia(s);return new lG(c,d,r.fieldTransforms)}function aN(n,t,e,i,r,s){const c=n.aa(1,t,e),d=[cN(t,i,e)],f=[r];if(s.length%2!=0)throw new Ue(be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<s.length;I+=2)d.push(cN(t,s[I])),f.push(s[I+1]);const g=[],b=is.empty();for(let I=d.length-1;I>=0;--I)if(!pG(g,d[I])){const P=d[I];let F=f[I];F=(0,L.m9)(F);const z=c.ia(P);if(F instanceof Tw)g.push(P);else{const te=Fm(F,z);null!=te&&(g.push(P),b.set(P,te))}}const E=new ia(g);return new lG(b,E,c.fieldTransforms)}function dG(n,t,e,i=!1){return Fm(e,n.aa(i?4:3,t))}function Fm(n,t){if(fG(n=(0,L.m9)(n)))return lN("Unsupported field value:",t,n),hG(n,t);if(n instanceof Pm)return function(e,i){if(!cG(i.Zc))throw i.oa(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.oa(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const c of e){let d=Fm(c,i.ra(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,L.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ej(i.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=Ti.fromDate(e);return{timestampValue:dw(i.wt,r)}}if(e instanceof Ti){const r=new Ti(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:dw(i.wt,r)}}if(e instanceof MT)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Bc)return{bytesValue:wj(i.wt,e._byteString)};if(e instanceof bi){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:IP(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.oa(`Unsupported field value: ${xT(e)}`)}(n,t)}function hG(n,t){const e={};return AH(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ym(n,(i,r)=>{const s=Fm(r,t.ea(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function fG(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ti||n instanceof MT||n instanceof Bc||n instanceof bi||n instanceof Pm)}function lN(n,t,e){if(!fG(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=xT(e);throw t.oa("an object"===i?n+" a custom object":n+" "+i)}var i}function cN(n,t,e){if((t=(0,L.m9)(t))instanceof td)return t._internalPath;if("string"==typeof t)return kT(n,t);throw RT("Field path arguments must be of type string or ",n,!1,void 0,e)}const NX=new RegExp("[~\\*/\\[\\]]");function kT(n,t,e){if(t.search(NX)>=0)throw RT(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new td(...t.split("."))._internalPath}catch{throw RT(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function RT(n,t,e,i,r){const s=i&&!i.isEmpty(),c=void 0!==r;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(s||c)&&(f+=" (found",s&&(f+=` in field ${i}`),c&&(f+=` in document ${r}`),f+=")"),new Ue(be.INVALID_ARGUMENT,d+n+f)}function pG(n,t){return n.some(e=>e.isEqual(t))}class Mw{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new bi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new FX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(OT("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class FX extends Mw{data(){return super.data()}}function OT(n,t){return"string"==typeof t?kT(n,t):t instanceof td?t._internalPath:t._delegate._internalPath}class Lm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class nd extends Mw{constructor(t,e,i,r,s,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Iw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(OT("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class Iw extends nd{data(t={}){return super.data(t)}}class zh{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Lm(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Iw(this._firestore,this._userDataWriter,i.key,i,new Lm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ue(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new Iw(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Lm(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const d=new Iw(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Lm(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,g=-1;return 0!==c.type&&(f=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),g=s.indexOf(c.doc.key)),{type:LX(c.type),doc:d,oldIndex:f,newIndex:g}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function LX(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt()}}function mG(n,t){return n instanceof nd&&t instanceof nd?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof zh&&t instanceof zh&&n._firestore===t._firestore&&rG(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function gG(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ue(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Aw{}function $h(n,...t){for(const e of t)n=e._apply(n);return n}class BX extends Aw{constructor(t,e,i){super(),this.fa=t,this.da=e,this._a=i,this.type="where"}_apply(t){const e=Nm(t.firestore),i=function(r,s,c,d,f,g,b){let E;if(f.isKeyField()){if("array-contains"===g||"array-contains-any"===g)throw new Ue(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if("in"===g||"not-in"===g){CG(b,g);const P=[];for(const F of b)P.push(wG(d,r,F));E={arrayValue:{values:P}}}else E=wG(d,r,b)}else"in"!==g&&"not-in"!==g&&"array-contains-any"!==g||CG(b,g),E=dG(c,"where",b,"in"===g||"not-in"===g);const I=rs.create(f,g,E);return function(P,F){if(F.ht()){const te=EP(P);if(null!==te&&!te.isEqual(F.field))throw new Ue(be.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${te.toString()}' and '${F.field.toString()}'`);const Ve=DP(P);null!==Ve&&DG(0,F.field,Ve)}const z=function(te,Ve){for(const Ze of te.filters)if(Ve.indexOf(Ze.op)>=0)return Ze.op;return null}(P,function(te){switch(te){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(F.op));if(null!==z)throw new Ue(be.INVALID_ARGUMENT,z===F.op?`Invalid query. You cannot use more than one '${F.op.toString()}' filter.`:`Invalid query. You cannot use '${F.op.toString()}' filters with '${z.toString()}' filters.`)}(r,I),I}(t._query,0,e,t.firestore._databaseId,this.fa,this.da,this._a);return new Ts(t.firestore,t.converter,function(r,s){const c=r.filters.concat([s]);return new Xu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),c,r.limit,r.limitType,r.startAt,r.endAt)}(t._query,i))}}class UX extends Aw{constructor(t,e){super(),this.fa=t,this.wa=e,this.type="orderBy"}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new Ue(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ue(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Z_(r,s);return function(d,f){if(null===DP(d)){const g=EP(d);null!==g&&DG(0,g,f.field)}}(i,c),c}(t._query,this.fa,this.wa);return new Ts(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new Xu(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class _G extends Aw{constructor(t,e,i){super(),this.type=t,this.ma=e,this.ga=i}_apply(t){return new Ts(t.firestore,t.converter,tT(t._query,this.ma,this.ga))}}class vG extends Aw{constructor(t,e,i){super(),this.type=t,this.ya=e,this.pa=i}_apply(t){const e=bG(t,this.type,this.ya,this.pa);return new Ts(t.firestore,t.converter,(r=e,new Xu((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class yG extends Aw{constructor(t,e,i){super(),this.type=t,this.ya=e,this.pa=i}_apply(t){const e=bG(t,this.type,this.ya,this.pa);return new Ts(t.firestore,t.converter,(r=e,new Xu((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function bG(n,t,e,i){if(e[0]=(0,L.m9)(e[0]),e[0]instanceof Mw)return function(r,s,c,d,f){if(!d)throw new Ue(be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const g=[];for(const b of Q_(r))if(b.field.isKeyField())g.push(Cm(s,d.key));else{const E=d.data.field(b.field);if(bP(E))throw new Ue(be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===E){const I=b.field.canonicalString();throw new Ue(be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}g.push(E)}return new Lh(g,f)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Nm(n.firestore);return function(s,c,d,f,g,b){const E=s.explicitOrderBy;if(g.length>E.length)throw new Ue(be.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let P=0;P<g.length;P++){const F=g[P];if(E[P].field.isKeyField()){if("string"!=typeof F)throw new Ue(be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof F}`);if(!SP(s)&&-1!==F.indexOf("/"))throw new Ue(be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${F}' contains a slash.`);const z=s.path.child(Mn.fromString(F));if(!ot.isDocumentKey(z))throw new Ue(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${z}' is not because it contains an odd number of segments.`);const te=new ot(z);I.push(Cm(c,te))}else{const z=dG(d,f,F);I.push(z)}}return new Lh(I,b)}(n._query,n.firestore._databaseId,r,t,e,i)}}function wG(n,t,e){if("string"==typeof(e=(0,L.m9)(e))){if(""===e)throw new Ue(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SP(t)&&-1!==e.indexOf("/"))throw new Ue(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Mn.fromString(e));if(!ot.isDocumentKey(i))throw new Ue(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Cm(n,new ot(i))}if(e instanceof bi)return Cm(n,e._key);throw new Ue(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xT(e)}.`)}function CG(n,t){if(!Array.isArray(n)||0===n.length)throw new Ue(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Ue(be.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function DG(n,t,e){if(!e.isEqual(t))throw new Ue(be.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}const YX={maxAttempts:5};class uN{convertValue(t,e="none"){switch(wm(t)){case 0:return null;case 1:return t.booleanValue;case 2:return zi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(bm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw yt()}}convertObject(t,e){const i={};return ym(t.fields,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new MT(zi(t.latitude),zi(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=RH(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Q0(t));default:return null}}convertTimestamp(t){const e=Ph(t);return new Ti(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Mn.fromString(t);jt(kj(i));const r=new Qu(i.get(1),i.get(3)),s=new ot(i.popFirst(5));return r.isEqual(e)||tr(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function PT(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class ZX extends uN{constructor(t){super(),this.firestore=t}convertBytes(t){return new Bc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new bi(this.firestore,null,e)}}class EG{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Nm(t)}set(t,e,i){this._verifyNotCommitted();const r=qh(t,this._firestore),s=PT(r.converter,e,i),c=AT(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,Ni.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=qh(t,this._firestore);let c;return c="string"==typeof(e=(0,L.m9)(e))||e instanceof td?aN(this._dataReader,"WriteBatch.update",s._key,e,i,r):oN(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(c.toMutation(s._key,Ni.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=qh(t,this._firestore);return this._mutations=this._mutations.concat(new tv(e._key,Ni.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qh(n,t){if((n=(0,L.m9)(n)).firestore!==t)throw new Ue(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Bm extends uN{constructor(t){super(),this.firestore=t}convertBytes(t){return new Bc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new bi(this.firestore,null,e)}}function SG(n,t,e){n=En(n,bi);const i=En(n.firestore,Mi),r=PT(n.converter,t,e);return gv(i,[AT(Nm(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,Ni.none())])}function xG(n,t,e,...i){n=En(n,bi);const r=En(n.firestore,Mi),s=Nm(r);let c;return c="string"==typeof(t=(0,L.m9)(t))||t instanceof td?aN(s,"updateDoc",n._key,t,e,i):oN(s,"updateDoc",n._key,t),gv(r,[c.toMutation(n._key,Ni.exists(!0))])}function TG(n,...t){var e,i,r;n=(0,L.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof t[c]||rN(t[c])||(s=t[c],c++);const d={includeMetadataChanges:s.includeMetadataChanges};if(rN(t[c])){const E=t[c];t[c]=null===(e=E.next)||void 0===e?void 0:e.bind(E),t[c+1]=null===(i=E.error)||void 0===i?void 0:i.bind(E),t[c+2]=null===(r=E.complete)||void 0===r?void 0:r.bind(E)}let f,g,b;if(n instanceof bi)g=En(n.firestore,Mi),b=K_(n._key.path),f={next:E=>{t[c]&&t[c](dN(g,n,E))},error:t[c+1],complete:t[c+2]};else{const E=En(n,Ts);g=En(E.firestore,Mi),b=E._query;const I=new Bm(g);f={next:P=>{t[c]&&t[c](new zh(g,I,E,P))},error:t[c+1],complete:t[c+2]},gG(n._query)}return function(E,I,P,F){const z=new DT(F),te=new D1(I,z,P);return E.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return v1(yield mv(E),te)})),()=>{z.Tc(),E.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return b1(yield mv(E),te)}))}}(ur(g),b,d,f)}function gv(n,t){return function(e,i){const r=new Fr;return e.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function H9(n,t,e){return M1.apply(this,arguments)}(yield tN(e),i,r)})),r.promise}(ur(n),t)}function dN(n,t,e){const i=e.docs.get(t._key),r=new Bm(n);return new nd(n,r,t._key,i,new Lm(e.hasPendingWrites,e.fromCache),t.converter)}class sJ extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Nm(t)}get(t){const e=qh(t,this._firestore),i=new ZX(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return yt();const s=r[0];if(s.isFoundDocument())return new Mw(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new Mw(this._firestore,i,e._key,null,e.converter);throw yt()})}set(t,e,i){const r=qh(t,this._firestore),s=PT(r.converter,e,i),c=AT(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(t,e,i,...r){const s=qh(t,this._firestore);let c;return c="string"==typeof(e=(0,L.m9)(e))||e instanceof td?aN(this._dataReader,"Transaction.update",s._key,e,i,r):oN(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,c),this}delete(t){const e=qh(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=qh(t,this._firestore),i=new Bm(this._firestore);return super.get(t).then(r=>new nd(this._firestore,i,e._key,r._document,new Lm(!1,!1),e.converter))}}function hN(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ue("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function IG(){if(typeof Uint8Array>"u")throw new Ue("unimplemented","Uint8Arrays are not available in this environment.")}function AG(){if(!function I7(){return typeof atob<"u"}())throw new Ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){$_=zs.SDK_VERSION,(0,zs._registerComponent)(new Wl.wA("firestore",(e,{options:i})=>{const r=e.getProvider("app").getImmediate(),s=new Mi(r,new _7(e.getProvider("auth-internal")),new b7(e.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC")),(0,zs.registerVersion)(yH,"3.4.14",n),(0,zs.registerVersion)(yH,"3.4.14","esm2017")}();class kw{constructor(t){this._delegate=t}static fromBase64String(t){return AG(),new kw(Bc.fromBase64String(t))}static fromUint8Array(t){return IG(),new kw(Bc.fromUint8Array(t))}toBase64(){return AG(),this._delegate.toBase64()}toUint8Array(){return IG(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fN(n){return function pJ(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class mJ{enableIndexedDbPersistence(t,e){return function wX(n,t){aG(n=En(n,Mi));const e=ur(n),i=n._freezeSettings(),r=new Z1;return oG(e,r,new j3(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function CX(n){aG(n=En(n,Mi));const t=ur(n),e=n._freezeSettings(),i=new Z1;return oG(t,i,new iX(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function DX(n){if(n._initialized&&!n._terminated)throw new Ue(be.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Fr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(function*(){try{yield(e=(0,Se.Z)(function*(i){if(!Yl.V())return Promise.resolve();const r=i+"main";yield Yl.delete(r)}),function(i){return e.apply(this,arguments)})(jP(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class kG{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Qu||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&gm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function gX(n,t,e,i={}){var r;const s=(n=En(n,xw))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&gm("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let c,d;if("string"==typeof i.mockUserToken)c=i.mockUserToken,d=Nr.MOCK_USER;else{c=(0,L.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new Ue(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Nr(f)}n._authCredentials=new g7(new bH(c,d))}}(this._delegate,t,e,i)}enableNetwork(){return function SX(n){return function lX(n){return n.asyncQueue.enqueue((0,Se.Z)(function*(){const t=yield q3(n),e=yield W3(n);return t.setNetworkEnabled(!0),function(i){const r=dt(i);return r.lu.delete(0),Ew(r)}(e)}))}(ur(n=En(n,Mi)))}(this._delegate)}disableNetwork(){return function xX(n){return function cX(n){return n.asyncQueue.enqueue((0,Se.Z)(function*(){const t=yield q3(n),e=yield W3(n);return t.setNetworkEnabled(!1),(i=(0,Se.Z)(function*(r){const s=dt(r);s.lu.add(0),yield lv(s),s._u.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(ur(n=En(n,Mi)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,Q3("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function EX(n){return function(t){const e=new Fr;return t.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function $9(n,t){return O1.apply(this,arguments)}(yield tN(t),e)})),e.promise}(ur(n=En(n,Mi)))}(this._delegate)}onSnapshotsInSync(t){return function rJ(n,t){return function hX(n,t){const e=new DT(t);return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return i=yield mv(n),r=e,dt(i).Tu.add(r),void r.next();var i,r})),()=>{e.Tc(),n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return i=yield mv(n),r=e,void dt(i).Tu.delete(r);var i,r}))}}(ur(n=En(n,Mi)),rN(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new _v(this,nG(this._delegate,t))}catch(e){throw Zs(e,"collection()","Firestore.collection()")}}doc(t){try{return new Ja(this,TT(this._delegate,t))}catch(e){throw Zs(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Ks(this,function _X(n,t){if(n=En(n,xw),iN("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ue(be.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ts(n,null,(e=t,new Xu(Mn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw Zs(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function oJ(n,t,e){n=En(n,Mi);const i=Object.assign(Object.assign({},YX),e);return function(r){if(r.maxAttempts<1)throw new Ue(be.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function fX(n,t,e){const i=new Fr;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){const r=yield(s=n,ET(s).then(c=>c.datastore));var s;new oX(n.asyncQueue,r,e,t,i).run()})),i.promise}(ur(n),r=>t(new sJ(n,r)),i)}(this._delegate,e=>t(new RG(this,e)))}batch(){return ur(this._delegate),new OG(new EG(this._delegate,t=>gv(this._delegate,t)))}loadBundle(t){return function TX(n,t){const e=ur(n=En(n,Mi)),i=new yX;return function pX(n,t,e,i){const r=function(s,c){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,f=function(f,g){if(f instanceof Uint8Array)return G3(f,g);if(f instanceof ArrayBuffer)return G3(new Uint8Array(f),g);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new rX(f,c);var f}(e,Dw(t));n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){!function nX(n,t,e){const i=dt(n);var r;(r=(0,Se.Z)(function*(s,c,d){try{const f=yield c.getMetadata();if(yield function(I,P){const F=dt(I),z=Lr(P.createTime);return F.persistence.runTransaction("hasNewerBundle","readonly",te=>F.Ds.getBundleMetadata(te,P.id)).then(te=>!!te&&te.createTime.compareTo(z)>=0)}(s.localStore,f))return yield c.close(),d._completeWith({taskState:"Success",documentsLoaded:(I=f).totalDocuments,bytesLoaded:I.totalBytes,totalDocuments:I.totalDocuments,totalBytes:I.totalBytes}),Promise.resolve(new Set);d._updateProgress(R3(f));const g=new N9(f,s.localStore,c.wt);let b=yield c.fc();for(;b;){const I=yield g.Nu(b);I&&d._updateProgress(I),b=yield c.fc()}const E=yield g.complete();return yield ed(s,E.Ou,void 0),yield function(I,P){const F=dt(I);return F.persistence.runTransaction("Save bundle","readwrite",z=>F.Ds.saveBundleMetadata(z,P))}(s.localStore,f),d._completeWith(E.progress),Promise.resolve(E.Mu)}catch(f){return gm("SyncEngine",`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}var I}),function(s,c,d){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield tN(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function MX(n,t){return function mX(n,t){return n.asyncQueue.enqueue((0,Se.Z)(function*(){return function(e,i){const r=dt(e);return r.persistence.runTransaction("Get named query","readonly",s=>r.Ds.getNamedQuery(s,i))}(yield ST(n),t)}))}(ur(n=En(n,Mi)),t).then(e=>e?new Ts(n,null,e.query):null)}(this._delegate,t).then(e=>e?new Ks(this,e):null)}}class NT extends uN{constructor(t){super(),this.firestore=t}convertBytes(t){return new kw(new Bc(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Ja.forKey(e,this.firestore,null)}}class RG{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new NT(t)}get(t){const e=Um(t);return this._delegate.get(e).then(i=>new Rw(this._firestore,new nd(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=Um(t);return i?(hN("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Um(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Um(t);return this._delegate.delete(e),this}}class OG{constructor(t){this._delegate=t}set(t,e,i){const r=Um(t);return i?(hN("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Um(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Um(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Vm{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new Iw(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Ow(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=Vm.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new Vm(t,new NT(t),e),r.set(e,s)),s}}Vm.INSTANCES=new WeakMap;class Ja{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new NT(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Ja(e,new bi(e._delegate,i,new ot(t)))}static forKey(t,e,i){return new Ja(e,new bi(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new _v(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new _v(this.firestore,nG(this._delegate,t))}catch(e){throw Zs(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,L.m9)(t))instanceof bi&&iG(this._delegate,t)}set(t,e){e=hN("DocumentReference.set",e);try{return e?SG(this._delegate,t,e):SG(this._delegate,t)}catch(i){throw Zs(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?xG(this._delegate,t):xG(this._delegate,t,e,...i)}catch(r){throw Zs(r,"updateDoc()","DocumentReference.update()")}}delete(){return function nJ(n){return gv(En(n.firestore,Mi),[new tv(n._key,Ni.none())])}(this._delegate)}onSnapshot(...t){const e=PG(t),i=NG(t,r=>new Rw(this.firestore,new nd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return TG(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function QX(n){n=En(n,bi);const t=En(n.firestore,Mi),e=ur(t),i=new Bm(t);return function uX(n,t){const e=new Fr;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return(i=(0,Se.Z)(function*(r,s,c){try{const d=yield function(f,g){const b=dt(f);return b.persistence.runTransaction("read document","readonly",E=>b.localDocuments.getDocument(E,g))}(r,s);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new Ue(be.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=dv(d,`Failed to get document '${s} from cache`);c.reject(f)}}),function(r,s,c){return i.apply(this,arguments)})(yield ST(n),t,e);var i})),e.promise}(e,n._key).then(r=>new nd(t,i,n._key,r,new Lm(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function XX(n){n=En(n,bi);const t=En(n.firestore,Mi);return Y3(ur(t),n._key,{source:"server"}).then(e=>dN(t,n,e))}(this._delegate):function KX(n){n=En(n,bi);const t=En(n.firestore,Mi);return Y3(ur(t),n._key).then(e=>dN(t,n,e))}(this._delegate),e.then(i=>new Rw(this.firestore,new nd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new Ja(this.firestore,this._delegate.withConverter(t?Vm.getInstance(this.firestore,t):null))}}function Zs(n,t,e){return n.message=n.message.replace(t,e),n}function PG(n){for(const t of n)if("object"==typeof t&&!fN(t))return t;return{}}function NG(n,t){var e,i;let r;return r=fN(n[0])?n[0]:fN(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class Rw{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Ja(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return mG(this._delegate,t._delegate)}}class Ow extends Rw{data(t){const e=this._delegate.data(t);return function p7(n,t){n||yt()}(void 0!==e),e}}class Ks{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new NT(t)}where(t,e,i){try{return new Ks(this.firestore,$h(this._delegate,function VX(n,t,e){const i=t,r=OT("where",n);return new BX(r,i,e)}(t,e,i)))}catch(r){throw Zs(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new Ks(this.firestore,$h(this._delegate,function HX(n,t="asc"){const e=t,i=OT("orderBy",n);return new UX(i,e)}(t,e)))}catch(i){throw Zs(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Ks(this.firestore,$h(this._delegate,function jX(n){return eG("limit",n),new _G("limit",n,"F")}(t)))}catch(e){throw Zs(e,"limit()","Query.limit()")}}limitToLast(t){try{return new Ks(this.firestore,$h(this._delegate,function GX(n){return eG("limitToLast",n),new _G("limitToLast",n,"L")}(t)))}catch(e){throw Zs(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Ks(this.firestore,$h(this._delegate,function zX(...n){return new vG("startAt",n,!0)}(...t)))}catch(e){throw Zs(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Ks(this.firestore,$h(this._delegate,function $X(...n){return new vG("startAfter",n,!1)}(...t)))}catch(e){throw Zs(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Ks(this.firestore,$h(this._delegate,function qX(...n){return new yG("endBefore",n,!1)}(...t)))}catch(e){throw Zs(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Ks(this.firestore,$h(this._delegate,function WX(...n){return new yG("endAt",n,!0)}(...t)))}catch(e){throw Zs(e,"endAt()","Query.endAt()")}}isEqual(t){return rG(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function eJ(n){n=En(n,Ts);const t=En(n.firestore,Mi),e=ur(t),i=new Bm(t);return function dX(n,t){const e=new Fr;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return(i=(0,Se.Z)(function*(r,s,c){try{const d=yield _T(r,s,!0),f=new N3(s,d.ji),g=f.Ku(d.documents),b=f.applyChanges(g,!1);c.resolve(b.snapshot)}catch(d){const f=dv(d,`Failed to execute query '${s} against cache`);c.reject(f)}}),function(r,s,c){return i.apply(this,arguments)})(yield ST(n),t,e);var i})),e.promise}(e,n._query).then(r=>new zh(t,i,n,r))}(this._delegate):"server"===t?.source?function tJ(n){n=En(n,Ts);const t=En(n.firestore,Mi),e=ur(t),i=new Bm(t);return Z3(e,n._query,{source:"server"}).then(r=>new zh(t,i,n,r))}(this._delegate):function JX(n){n=En(n,Ts);const t=En(n.firestore,Mi),e=ur(t),i=new Bm(t);return gG(n._query),Z3(e,n._query).then(r=>new zh(t,i,n,r))}(this._delegate),e.then(i=>new pN(this.firestore,new zh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=PG(t),i=NG(t,r=>new pN(this.firestore,new zh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return TG(this._delegate,e,i)}withConverter(t){return new Ks(this.firestore,this._delegate.withConverter(t?Vm.getInstance(this.firestore,t):null))}}class _J{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new Ow(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class pN{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new Ks(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Ow(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new _J(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new Ow(this._firestore,i))})}isEqual(t){return mG(this._delegate,t._delegate)}}class _v extends Ks{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Ja(this.firestore,t):null}doc(t){try{return new Ja(this.firestore,void 0===t?TT(this._delegate):TT(this._delegate,t))}catch(e){throw Zs(e,"doc()","CollectionReference.doc()")}}add(t){return function iJ(n,t){const e=En(n.firestore,Mi),i=TT(n),r=PT(n.converter,t);return gv(e,[AT(Nm(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Ni.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new Ja(this.firestore,e))}isEqual(t){return iG(this._delegate,t._delegate)}withConverter(t){return new _v(this.firestore,this._delegate.withConverter(t?Vm.getInstance(this.firestore,t):null))}}function Um(n){return En(n,bi)}class mN{constructor(...t){this._delegate=new td(...t)}static documentId(){return new mN(ji.keyField().canonicalString())}isEqual(t){return(t=(0,L.m9)(t))instanceof td&&this._delegate._internalPath.isEqual(t._internalPath)}}class Hm{constructor(t){this._delegate=t}static serverTimestamp(){const t=function lJ(){return new sN("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new Hm(t)}static delete(){const t=function aJ(){return new Tw("deleteField")}();return t._methodName="FieldValue.delete",new Hm(t)}static arrayUnion(...t){const e=function cJ(...n){return new RX("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Hm(e)}static arrayRemove(...t){const e=function uJ(...n){return new OX("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Hm(e)}static increment(t){const e=function dJ(n){return new PX("increment",n)}(t);return e._methodName="FieldValue.increment",new Hm(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const vJ={Firestore:kG,GeoPoint:MT,Timestamp:Ti,Blob:kw,Transaction:RG,WriteBatch:OG,DocumentReference:Ja,DocumentSnapshot:Rw,Query:Ks,QueryDocumentSnapshot:Ow,QuerySnapshot:pN,CollectionReference:_v,FieldPath:mN,FieldValue:Hm,setLogLevel:function gJ(n){!function f7(n){kh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function bJ(n){(function yJ(n,t){n.INTERNAL.registerComponent(new Wl.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},vJ)))})(n,(t,e)=>new kG(t,e,new mJ)),n.registerVersion("@firebase/firestore-compat","0.1.23")}(CO.Z);var FT=V(5363),wJ=V(6063);class CJ extends Je.x{constructor(t=1/0,e=1/0,i=wJ.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:c}=this;e||(i.push(t),!r&&i.push(s.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const c=e.now();let d=0;for(let f=1;f<i.length&&i[f]<=c;f+=2)d=f;d&&i.splice(0,d+1)}}}function gN(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,(0,LS.B)({connector:()=>new CJ(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}const LT=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function BT(n){return(0,gi.e)((t,e)=>{let i=!1;t.subscribe((0,Gn.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function FG(n=EJ){return(0,gi.e)((t,e)=>{let i=!1;t.subscribe((0,Gn.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function EJ(){return new LT}function id(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Ln((r,s)=>n(r,s,i)):k.y,v(1),e?BT(t):FG(()=>new LT))}function LG(n,t){return(0,mo.m)(t)?Qn(()=>n,t):Qn(()=>n)}var _N=V(9468);V(5867);const VG=new Map,IJ={activated:!1,tokenObservers:[]},AJ={initialized:!1,enabled:!1};function Ur(n){return VG.get(n)||IJ}function Zl(n,t){VG.set(n,t)}function UT(){return AJ}class NJ{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Se.Z)(function*(){e.stop();try{e.pending=new L.BH,yield function FJ(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new L.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Qs=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function HG(n){if(!Ur(n).activated)throw Qs.create("use-before-activation",{appName:n.name})}function wN(n,t){return CN.apply(this,arguments)}function CN(){return CN=(0,Se.Z)(function*({url:n,body:t},e){var i,r;const s={"Content-Type":"application/json"},c=e.getImmediate({optional:!0});if(c){const P=yield c.getHeartbeatsHeader();P&&(s["X-Firebase-Client"]=P)}const d={method:"POST",body:JSON.stringify(t),headers:s};let f,g;try{f=yield fetch(n,d)}catch(P){throw Qs.create("fetch-network-error",{originalErrorMessage:null===(i=P)||void 0===i?void 0:i.message})}if(200!==f.status)throw Qs.create("fetch-status-error",{httpStatus:f.status});try{g=yield f.json()}catch(P){throw Qs.create("fetch-parse-error",{originalErrorMessage:null===(r=P)||void 0===r?void 0:r.message})}const b=g.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw Qs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const E=1e3*Number(b[1]),I=Date.now();return{token:g.token,expireTimeMillis:I+E,issuedAtTimeMillis:I}}),CN.apply(this,arguments)}function UJ(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const Pw="firebase-app-check-store";let GT=null;function GG(){return GT||(GT=new Promise((n,t)=>{var e;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var s;t(Qs.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Pw,{keyPath:"compositeKey"})}}catch(i){t(Qs.create("storage-open",{originalErrorMessage:null===(e=i)||void 0===e?void 0:e.message}))}}),GT)}function DN(){return DN=(0,Se.Z)(function*(n,t){const i=(yield GG()).transaction(Pw,"readwrite"),s=i.objectStore(Pw).put({compositeKey:n,value:t});return new Promise((c,d)=>{s.onsuccess=f=>{c()},i.onerror=f=>{var g;d(Qs.create("storage-set",{originalErrorMessage:null===(g=f.target.error)||void 0===g?void 0:g.message}))}})}),DN.apply(this,arguments)}const Nw=new ql.Yd("@firebase/app-check");function WG(n,t){return(0,L.hl)()?function zJ(n,t){return function zG(n,t){return DN.apply(this,arguments)}(function qG(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{Nw.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function YG(){return UT().enabled}function ZG(){return TN.apply(this,arguments)}function TN(){return TN=(0,Se.Z)(function*(){const n=UT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),TN.apply(this,arguments)}const KJ={error:"UNKNOWN_ERROR"};function QJ(n){return L.US.encodeString(JSON.stringify(n),!1)}function zT(n){return MN.apply(this,arguments)}function MN(){return MN=(0,Se.Z)(function*(n,t=!1){const e=n.app;HG(e);const i=Ur(e);let s,r=i.token;if(!r){const f=yield i.cachedTokenPromise;f&&$T(f)&&(r=f)}if(!t&&r&&$T(r))return{token:r.token};let d,c=!1;if(YG()){i.exchangeTokenPromise||(i.exchangeTokenPromise=wN(UJ(e,yield ZG()),n.heartbeatServiceProvider).then(g=>(i.exchangeTokenPromise=void 0,g)),c=!0);const f=yield i.exchangeTokenPromise;return yield WG(e,f),Zl(e,Object.assign(Object.assign({},i),{token:f})),{token:f.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(f=>(i.exchangeTokenPromise=void 0,f)),c=!0),r=yield i.exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?Nw.warn(f.message):Nw.error(f),s=f}return r?(d={token:r.token},Zl(e,Object.assign(Object.assign({},i),{token:r})),yield WG(e,r)):d=JJ(s),c&&QG(e,d),d}),MN.apply(this,arguments)}function AN(n,t){const e=Ur(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),Zl(n,Object.assign(Object.assign({},e),{tokenObservers:i}))}function KG(n){const{app:t}=n,e=Ur(t);let i=e.tokenRefresher;i||(i=function XJ(n){const{app:t}=n;return new NJ((0,Se.Z)(function*(){let i;if(i=Ur(t).token?yield zT(n,!0):yield zT(n),i.error)throw i.error}),()=>!0,()=>{const e=Ur(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),Zl(t,Object.assign(Object.assign({},e),{tokenRefresher:i}))),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function QG(n,t){const e=Ur(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}function $T(n){return n.expireTimeMillis-Date.now()>0}function JJ(n){return{token:QJ(KJ),error:n}}class eee{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Ur(this.app);for(const e of t)AN(this.app,e.next);return Promise.resolve()}}const sz="app-check-internal";!function pee(){(0,zs._registerComponent)(new Wl.wA("app-check",n=>function tee(n,t){return new eee(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(sz).initialize()})),(0,zs._registerComponent)(new Wl.wA(sz,n=>function nee(n){return{getToken:t=>zT(n,t),addTokenListener:t=>function IN(n,t,e,i){const{app:r}=n,s=Ur(r),c={next:e,error:i,type:t};if(Zl(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,c]})),s.token&&$T(s.token)){const d=s.token;Promise.resolve().then(()=>{e({token:d.token}),KG(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>KG(n))}(n,"INTERNAL",t),removeTokenListener:t=>AN(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,zs.registerVersion)("@firebase/app-check","0.5.12")}();class Fw{constructor(){return(0,Pn.vb)("app-check")}}typeof window<"u"&&window;var WT=V(127);const NN=new o.OlP("angularfire2.auth.use-emulator"),FN=new o.OlP("angularfire2.auth.settings"),LN=new o.OlP("angularfire2.auth.tenant-id"),BN=new o.OlP("angularfire2.auth.langugage-code"),VN=new o.OlP("angularfire2.auth.use-device-language"),UN=new o.OlP("angularfire.auth.persistence"),HN=(n,t,e,i,r,s,c,d)=>(0,br.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=t.runOutsideAngular(()=>n.auth());if(e&&f.useEmulator(...e),i&&(f.tenantId=i),f.languageCode=r,s&&f.useDeviceLanguage(),c)for(const[g,b]of Object.entries(c))f.settings[g]=b;return d&&f.setPersistence(d),f},[e,i,r,s,c,d]);let Lw=(()=>{class n{constructor(e,i,r,s,c,d,f,g,b,E,I,P){const F=new Je.x,z=ct(void 0).pipe((0,FT.Q)(c.outsideAngular),Qn(()=>s.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,5881)))),(0,w.U)(()=>(0,br.on)(e,s,i)),(0,w.U)(te=>HN(te,s,d,g,b,E,f,I)),gN({bufferSize:1,refCount:!1}));if(eu(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ct(null);else{z.pipe(id()).subscribe();const Ve=z.pipe(Qn(et=>et.getRedirectResult().then(St=>St,()=>null)),Pn.iC,gN({bufferSize:1,refCount:!1})),Ze=z.pipe(Qn(et=>new si.y(St=>({unsubscribe:s.runOutsideAngular(()=>et.onAuthStateChanged(It=>St.next(It),It=>St.error(It),()=>St.complete()))})))),rt=z.pipe(Qn(et=>new si.y(St=>({unsubscribe:s.runOutsideAngular(()=>et.onIdTokenChanged(It=>St.next(It),It=>St.error(It),()=>St.complete()))}))));this.authState=Ve.pipe(LG(Ze),(0,_N.R)(c.outsideAngular),(0,FT.Q)(c.insideAngular)),this.user=Ve.pipe(LG(rt),(0,_N.R)(c.outsideAngular),(0,FT.Q)(c.insideAngular)),this.idToken=this.user.pipe(Qn(et=>et?(0,ln.D)(et.getIdToken()):ct(null))),this.idTokenResult=this.user.pipe(Qn(et=>et?(0,ln.D)(et.getIdTokenResult()):ct(null))),this.credential=(0,_r.T)(Ve,F,this.authState.pipe(Ln(et=>!et))).pipe((0,w.U)(et=>et?.user?et:null),(0,_N.R)(c.outsideAngular),(0,FT.Q)(c.insideAngular))}return(0,br.pX)(this,z,s,{spy:{apply:(te,Ve,Ze)=>{(te.startsWith("signIn")||te.startsWith("createUser"))&&Ze.then(rt=>F.next(rt))}}})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(br.Dh),o.LFG(br.xv,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Pn.HU),o.LFG(NN,8),o.LFG(FN,8),o.LFG(LN,8),o.LFG(BN,8),o.LFG(VN,8),o.LFG(UN,8),o.LFG(Fw,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),bee=(()=>{class n{constructor(){WT.Z.registerVersion("angularfire",Pn.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Lw]}),n})();function az(n,t){return function wee(n,t=La.z){return new si.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function jN(n,t){return az(n,t).pipe((0,w.U)(e=>({payload:e,type:"query"})))}function YT(n,t){return jN(n,t).pipe(Ir(void 0),wO(),(0,w.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,d)=>{const f=r.find(b=>b.doc.ref.isEqual(c.ref)),g=e?.payload.docs.find(b=>b.ref.isEqual(c.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(c.metadata)||!f&&g&&JSON.stringify(g.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:c}})}),s}))}function lz(n,t,e){return YT(n,e).pipe(um((i,r)=>function Dee(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function Eee(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return GN(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return GN(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return GN(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),B(),(0,w.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function GN(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function cz(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class uz{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=YT(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,w.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(Ir(void 0),wO(),Ln(([i,r])=>r.length>0||!i),(0,w.U)(([i,r])=>r),Pn.iC)}auditTrail(t){return this.stateChanges(t).pipe(um((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=cz(t);return lz(this.query,e,this.afs.schedulers.outsideAngular).pipe(Pn.iC)}valueChanges(t={}){return jN(this.query,this.afs.schedulers.outsideAngular).pipe((0,w.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),Pn.iC)}get(t){return(0,ln.D)(this.query.get(t)).pipe(Pn.iC)}add(t){return this.ref.add(t)}doc(t){return new dz(this.ref.doc(t),this.afs)}}class dz{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=pz(i,e);return new uz(r,s,this.afs)}snapshotChanges(){return function Cee(n,t){return az(n,t).pipe(Ir(void 0),wO(),(0,w.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Pn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,w.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,ln.D)(this.ref.get(t)).pipe(Pn.iC)}}class See{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?YT(this.query,this.afs.schedulers.outsideAngular).pipe((0,w.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),Ln(e=>e.length>0),Pn.iC):YT(this.query,this.afs.schedulers.outsideAngular).pipe(Pn.iC)}auditTrail(t){return this.stateChanges(t).pipe(um((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=cz(t);return lz(this.query,e,this.afs.schedulers.outsideAngular).pipe(Pn.iC)}valueChanges(t={}){return jN(this.query,this.afs.schedulers.outsideAngular).pipe((0,w.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),Pn.iC)}get(t){return(0,ln.D)(this.query.get(t)).pipe(Pn.iC)}}const hz=new o.OlP("angularfire2.enableFirestorePersistence"),fz=new o.OlP("angularfire2.firestore.persistenceSettings"),xee=new o.OlP("angularfire2.firestore.settings"),Tee=new o.OlP("angularfire2.firestore.use-emulator");function pz(n,t=(e=>e)){return{query:t(n),ref:n}}let mz=(()=>{class n{constructor(e,i,r,s,c,d,f,g,b,E,I,P,F,z,te,Ve,Ze){this.schedulers=f;const rt=(0,br.on)(e,d,i),et=b;E&&HN(rt,d,I,F,z,te,P,Ve),[this.firestore,this.persistenceEnabled$]=(0,br.cc)(`${rt.name}.firestore`,"AngularFirestore",rt.name,()=>{const St=d.runOutsideAngular(()=>rt.firestore());if(s&&St.settings(s),et&&St.useEmulator(...et),r&&!eu(c)){const It=()=>{try{return(0,ln.D)(St.enablePersistence(g||void 0).then(()=>!0,()=>!1))}catch(fn){return typeof console<"u"&&console.warn(fn),ct(!1)}};return[St,d.runOutsideAngular(It)]}return[St,ct(!1)]},[s,et,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:c}=pz(r,i),d=this.schedulers.ngZone.run(()=>s);return new uz(d,c,this)}collectionGroup(e,i){const r=i||(c=>c),s=this.firestore.collectionGroup(e);return new See(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new dz(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(br.Dh),o.LFG(br.xv,8),o.LFG(hz,8),o.LFG(xee,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Pn.HU),o.LFG(fz,8),o.LFG(Tee,8),o.LFG(Lw,8),o.LFG(NN,8),o.LFG(FN,8),o.LFG(LN,8),o.LFG(BN,8),o.LFG(VN,8),o.LFG(UN,8),o.LFG(Fw,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Mee=(()=>{class n{constructor(){WT.Z.registerVersion("angularfire",Pn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:hz,useValue:!0},{provide:fz,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[mz]}),n})();var Iee=V(9635);function zN(){return(0,gi.e)((n,t)=>{let e=null;n._refCount++;const i=(0,Gn.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class gz extends si.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,gi.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Cn.w0;const e=this.getSubject();t.add(this.source.subscribe((0,Gn.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Cn.w0.EMPTY)}return t}refCount(){return zN()(this)}}function $N(n){return n<=0?()=>_.E:(0,gi.e)((t,e)=>{let i=[];t.subscribe((0,Gn.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function _z(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Ln((r,s)=>n(r,s,i)):k.y,$N(1),e?BT(t):FG(()=>new LT))}const un="primary";class kee{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function vv(n){return new kee(n)}function Ree(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const c=i[s],d=n[s];if(c.startsWith(":"))r[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Vc(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!vz(n[r],t[r]))return!1;return!0}function vz(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function yz(n){return Array.prototype.concat.apply([],n)}function bz(n){return n.length>0?n[n.length-1]:null}function ss(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function rd(n){return(0,o.CqO)(n)?n:(0,o.QGY)(n)?(0,ln.D)(Promise.resolve(n)):ct(n)}const Nee={exact:function Dz(n,t,e){if(!Gm(n.segments,t.segments)||!ZT(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!Dz(n.children[i],t.children[i],e))return!1;return!0},subset:Ez},wz={exact:function Fee(n,t){return Vc(n,t)},subset:function Lee(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>vz(n[e],t[e]))},ignored:()=>!0};function Cz(n,t,e){return Nee[e.paths](n.root,t.root,e.matrixParams)&&wz[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function Ez(n,t,e){return Sz(n,t,t.segments,e)}function Sz(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Gm(r,e)||t.hasChildren()||!ZT(r,e,i))}if(n.segments.length===e.length){if(!Gm(n.segments,e)||!ZT(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!Ez(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(Gm(n.segments,r)&&ZT(n.segments,r,i)&&n.children[un])&&Sz(n.children[un],t,s,i)}}function ZT(n,t,e){return t.every((i,r)=>wz[e](n[r].parameters,i.parameters))}class jm{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vv(this.queryParams)),this._queryParamMap}toString(){return Uee.serialize(this)}}class vn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ss(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return KT(this)}}class Bw{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=vv(this.parameters)),this._parameterMap}toString(){return Iz(this)}}function Gm(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let xz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return new WN},providedIn:"root"}),n})();class WN{parse(t){const e=new Zee(t);return new jm(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Vw(t.root,!0)}`,i=function Gee(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${QT(e)}=${QT(r)}`).join("&"):`${QT(e)}=${QT(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams),r="string"==typeof t.fragment?`#${function Hee(n){return encodeURI(n)}(t.fragment)}`:"";return`${e}${i}${r}`}}const Uee=new WN;function KT(n){return n.segments.map(t=>Iz(t)).join("/")}function Vw(n,t){if(!n.hasChildren())return KT(n);if(t){const e=n.children[un]?Vw(n.children[un],!1):"",i=[];return ss(n.children,(r,s)=>{s!==un&&i.push(`${s}:${Vw(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function Vee(n,t){let e=[];return ss(n.children,(i,r)=>{r===un&&(e=e.concat(t(i,r)))}),ss(n.children,(i,r)=>{r!==un&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===un?[Vw(n.children[un],!1)]:[`${r}:${Vw(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[un]?`${KT(n)}/${e[0]}`:`${KT(n)}/(${e.join("//")})`}}function Tz(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function QT(n){return Tz(n).replace(/%3B/gi,";")}function YN(n){return Tz(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function XT(n){return decodeURIComponent(n)}function Mz(n){return XT(n.replace(/\+/g,"%20"))}function Iz(n){return`${YN(n.path)}${function jee(n){return Object.keys(n).map(t=>`;${YN(t)}=${YN(n[t])}`).join("")}(n.parameters)}`}const zee=/^[^\/()?;=#]+/;function JT(n){const t=n.match(zee);return t?t[0]:""}const $ee=/^[^=?&#]+/,Wee=/^[^&#]+/;class Zee{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vn([],{}):new vn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[un]=new vn(t,e)),i}parseSegment(){const t=JT(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new o.vHH(4009,!1);return this.capture(t),new Bw(XT(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=JT(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=JT(this.remaining);r&&(i=r,this.capture(i))}t[XT(e)]=XT(i)}parseQueryParam(t){const e=function qee(n){const t=n.match($ee);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const c=function Yee(n){const t=n.match(Wee);return t?t[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=Mz(e),s=Mz(i);if(t.hasOwnProperty(r)){let c=t[r];Array.isArray(c)||(c=[c],t[r]=c),c.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=JT(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new o.vHH(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=un);const c=this.parseChildren();e[s]=1===Object.keys(c).length?c[un]:new vn([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new o.vHH(4011,!1)}}function ZN(n){return n.segments.length>0?new vn([],{[un]:n}):n}function eM(n){const t={};for(const i of Object.keys(n.children)){const s=eM(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function Kee(n){if(1===n.numberOfChildren&&n.children[un]){const t=n.children[un];return new vn(n.segments.concat(t.segments),t.children)}return n}(new vn(n.segments,t))}function zm(n){return n instanceof jm}function Jee(n,t,e,i,r){if(0===e.length)return yv(t.root,t.root,t.root,i,r);const s=function Rz(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new kz(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return ss(s.outlets,(f,g)=>{d[g]="string"==typeof f?f.split("/"):f}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===c?(s.split("/").forEach((d,f)=>{0==f&&"."===d||(0==f&&""===d?e=!0:".."===d?t++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new kz(e,t,i)}(e);return s.toRoot()?yv(t.root,t.root,new vn([],{}),i,r):function c(f){const g=function tte(n,t,e,i){if(n.isAbsolute)return new bv(t.root,!0,0);if(-1===i)return new bv(e,e===t.root,0);return function Oz(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new o.vHH(4005,!1);r=i.segments.length}return new bv(i,!1,r-s)}(e,i+(Uw(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,t,n.snapshot?._urlSegment,f),b=g.processChildren?jw(g.segmentGroup,g.index,s.commands):QN(g.segmentGroup,g.index,s.commands);return yv(t.root,g.segmentGroup,b,i,r)}(n.snapshot?._lastPathIndex)}function Uw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Hw(n){return"object"==typeof n&&null!=n&&n.outlets}function yv(n,t,e,i,r){let c,s={};i&&ss(i,(f,g)=>{s[g]=Array.isArray(f)?f.map(b=>`${b}`):`${f}`}),c=n===t?e:Az(n,t,e);const d=ZN(eM(c));return new jm(d,s,r)}function Az(n,t,e){const i={};return ss(n.children,(r,s)=>{i[s]=r===t?e:Az(r,t,e)}),new vn(n.segments,i)}class kz{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Uw(i[0]))throw new o.vHH(4003,!1);const r=i.find(Hw);if(r&&r!==bz(i))throw new o.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class bv{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function QN(n,t,e){if(n||(n=new vn([],{})),0===n.segments.length&&n.hasChildren())return jw(n,t,e);const i=function ite(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const c=n.segments[r],d=e[i];if(Hw(d))break;const f=`${d}`,g=i<e.length-1?e[i+1]:null;if(r>0&&void 0===f)break;if(f&&g&&"object"==typeof g&&void 0===g.outlets){if(!Nz(f,g,c))return s;i+=2}else{if(!Nz(f,{},c))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new vn(n.segments.slice(0,i.pathIndex),{});return s.children[un]=new vn(n.segments.slice(i.pathIndex),n.children),jw(s,0,r)}return i.match&&0===r.length?new vn(n.segments,{}):i.match&&!n.hasChildren()?XN(n,t,e):i.match?jw(n,0,r):XN(n,t,e)}function jw(n,t,e){if(0===e.length)return new vn(n.segments,{});{const i=function nte(n){return Hw(n[0])?n[0].outlets:{[un]:n}}(e),r={};return ss(i,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[c]=QN(n.children[c],t,s))}),ss(n.children,(s,c)=>{void 0===i[c]&&(r[c]=s)}),new vn(n.segments,r)}}function XN(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(Hw(s)){const f=rte(s.outlets);return new vn(i,f)}if(0===r&&Uw(e[0])){i.push(new Bw(n.segments[t].path,Pz(e[0]))),r++;continue}const c=Hw(s)?s.outlets[un]:`${s}`,d=r<e.length-1?e[r+1]:null;c&&d&&Uw(d)?(i.push(new Bw(c,Pz(d))),r+=2):(i.push(new Bw(c,{})),r++)}return new vn(i,{})}function rte(n){const t={};return ss(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=XN(new vn([],{}),0,e))}),t}function Pz(n){const t={};return ss(n,(e,i)=>t[i]=`${e}`),t}function Nz(n,t,e){return n==e.path&&Vc(t,e.parameters)}class sd{constructor(t,e){this.id=t,this.url=e}}class JN extends sd{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $m extends sd{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class tM extends sd{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Fz extends sd{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ste extends sd{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ote extends sd{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ate extends sd{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class lte extends sd{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cte extends sd{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ute{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class dte{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hte{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fte{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pte{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mte{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lz{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Bz{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=eF(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=eF(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=tF(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return tF(t,this._root).map(e=>e.value)}}function eF(n,t){if(n===t.value)return t;for(const e of t.children){const i=eF(n,e);if(i)return i}return null}function tF(n,t){if(n===t.value)return[t];for(const e of t.children){const i=tF(n,e);if(i.length)return i.unshift(t),i}return[]}class od{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function wv(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Vz extends Bz{constructor(t,e){super(t),this.snapshot=e,nF(this,t)}toString(){return this.snapshot.toString()}}function Uz(n,t){const e=function _te(n,t){const c=new nM([],{},{},"",{},un,t,null,n.root,-1,{});return new jz("",new od(c,[]))}(n,t),i=new Oi([new Bw("",{})]),r=new Oi({}),s=new Oi({}),c=new Oi({}),d=new Oi(""),f=new Wh(i,r,c,d,s,un,t,e.root);return f.snapshot=e.root,new Vz(new od(f,[]),e)}class Wh{constructor(t,e,i,r,s,c,d,f){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,w.U)(t=>vv(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,w.U)(t=>vv(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Hz(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function vte(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class nM{constructor(t,e,i,r,s,c,d,f,g,b,E,I){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this.routeConfig=f,this._urlSegment=g,this._lastPathIndex=b,this._correctedLastPathIndex=I??b,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class jz extends Bz{constructor(t,e){super(e),this.url=t,nF(this,e)}toString(){return Gz(this._root)}}function nF(n,t){t.value._routerState=n,t.children.forEach(e=>nF(n,e))}function Gz(n){const t=n.children.length>0?` { ${n.children.map(Gz).join(", ")} } `:"";return`${n.value}${t}`}function iF(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Vc(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Vc(t.params,e.params)||n.params.next(e.params),function Oee(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Vc(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Vc(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function rF(n,t){const e=Vc(n.params,t.params)&&function Bee(n,t){return Gm(n,t)&&n.every((e,i)=>Vc(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||rF(n.parent,t.parent))}function Gw(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function bte(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Gw(n,i,r);return Gw(n,i)})}(n,t,e);return new od(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(d=>Gw(n,d)),c}}const i=function wte(n){return new Wh(new Oi(n.url),new Oi(n.params),new Oi(n.queryParams),new Oi(n.fragment),new Oi(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>Gw(n,s));return new od(i,r)}}const sF="ngNavigationCancelingError";function zz(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=zm(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=$z(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function $z(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[sF]=!0,i.cancellationCode=t,e&&(i.url=e),i}function qz(n){return Wz(n)&&zm(n.url)}function Wz(n){return n&&n[sF]}class Cte{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new zw,this.attachRef=null}}let zw=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Cte,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const iM=!1;let oF=(()=>{class n{constructor(e,i,r,s,c){this.parentContexts=e,this.location=i,this.changeDetector=s,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.attachEvents=new o.vpe,this.detachEvents=new o.vpe,this.name=r||un,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new o.vHH(4012,iM);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new o.vHH(4012,iM);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new o.vHH(4012,iM);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new o.vHH(4013,iM);this._activatedRoute=e;const r=this.location,c=e._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,f=new Dte(e,d,r.injector);if(i&&function Ete(n){return!!n.resolveComponentFactory}(i)){const g=i.resolveComponentFactory(c);this.activated=r.createComponent(g,r.length,f)}else this.activated=r.createComponent(c,{index:r.length,injector:f,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(zw),o.Y36(o.s_b),o.$8M("name"),o.Y36(o.sBO),o.Y36(o.lqb))},n.\u0275dir=o.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Dte{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Wh?this.route:t===zw?this.childContexts:this.parent.get(t,e)}}let Yz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,i){1&e&&o._UZ(0,"router-outlet")},dependencies:[oF],encapsulation:2}),n})();function Zz(n,t){return n.providers&&!n._injector&&(n._injector=(0,o.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}function lF(n){const t=n.children&&n.children.map(lF),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==un&&(e.component=Yz),e}function el(n){return n.outlet||un}function Kz(n,t){const e=n.filter(i=>el(i)===t);return e.push(...n.filter(i=>el(i)!==t)),e}function Qz(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class Ite{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),iF(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=wv(e);t.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,r[c],i),delete r[c]}),ss(r,(s,c)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=wv(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);if(i&&i.outlet){const c=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=wv(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=wv(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new mte(s.value.snapshot))}),t.children.length&&this.forwardEvent(new fte(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(iF(r),r===s)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),iF(d.route.value),this.activateChildRoutes(t,null,c.children)}else{const d=Qz(r.snapshot),f=d?.get(o._Vd)??null;c.attachRef=null,c.route=r,c.resolver=f,c.injector=d,c.outlet&&c.outlet.activateWith(r,c.injector),this.activateChildRoutes(t,null,c.children)}}else this.activateChildRoutes(t,null,i)}}class Xz{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class rM{constructor(t,e){this.component=t,this.route=e}}function Ate(n,t,e){const i=n._root;return $w(i,t?t._root:null,e,[i.value])}function sM(n,t,e){return(Qz(t)??e).get(n)}function $w(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=wv(t);return n.children.forEach(c=>{(function Rte(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const f=function Ote(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Gm(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Gm(n.url,t.url)||!Vc(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rF(n,t)||!Vc(n.queryParams,t.queryParams);default:return!rF(n,t)}}(c,s,s.routeConfig.runGuardsAndResolvers);f?r.canActivateChecks.push(new Xz(i)):(s.data=c.data,s._resolvedData=c._resolvedData),$w(n,t,s.component?d?d.children:null:e,i,r),f&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new rM(d.outlet.component,c))}else c&&qw(t,d,r),r.canActivateChecks.push(new Xz(i)),$w(n,null,s.component?d?d.children:null:e,i,r)})(c,s[c.value.outlet],e,i.concat([c.value]),r),delete s[c.value.outlet]}),ss(s,(c,d)=>qw(c,e.getContext(d),r)),r}function qw(n,t,e){const i=wv(n),r=n.value;ss(i,(s,c)=>{qw(s,r.component?t?t.children.getContext(c):null:t,e)}),e.canDeactivateChecks.push(new rM(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Ww(n){return"function"==typeof n}function cF(n){return n instanceof LT||"EmptyError"===n?.name}const oM=Symbol("INITIAL_VALUE");function Cv(){return Qn(n=>oy(n.map(t=>t.pipe(v(1),Ir(oM)))).pipe((0,w.U)(t=>{for(const e of t)if(!0!==e){if(e===oM)return oM;if(!1===e||e instanceof jm)return e}return!0}),Ln(t=>t!==oM),v(1)))}function Jz(n){return(0,Iee.z)((0,ii.b)(t=>{if(zm(t))throw zz(0,t)}),(0,w.U)(t=>!0===t))}const uF={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function e$(n,t,e,i,r){const s=dF(n,t,e);return s.matched?function Kte(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?ct(r.map(c=>{const d=n.get(c),f=function Vte(n){return n&&Ww(n.canMatch)}(d)?d.canMatch(t,e):d(t,e);return rd(f)})).pipe(Cv(),Jz()):ct(!0)}(i=Zz(t,i),t,e).pipe((0,w.U)(c=>!0===c?s:{...uF})):ct(s)}function dF(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...uF}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||Ree)(e,n,t);if(!r)return{...uF};const s={};ss(r.posParams,(d,f)=>{s[f]=d.path});const c=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:c,positionalParamSegments:r.posParams??{}}}function aM(n,t,e,i,r="corrected"){if(e.length>0&&function Jte(n,t,e){return e.some(i=>lM(n,t,i)&&el(i)!==un)}(n,e,i)){const c=new vn(t,function Xte(n,t,e,i){const r={};r[un]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&el(s)!==un){const c=new vn([],{});c._sourceSegment=n,c._segmentIndexShift=t.length,r[el(s)]=c}return r}(n,t,i,new vn(e,n.children)));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:[]}}if(0===e.length&&function ene(n,t,e){return e.some(i=>lM(n,t,i))}(n,e,i)){const c=new vn(n.segments,function Qte(n,t,e,i,r,s){const c={};for(const d of i)if(lM(n,e,d)&&!r[el(d)]){const f=new vn([],{});f._sourceSegment=n,f._segmentIndexShift="legacy"===s?n.segments.length:t.length,c[el(d)]=f}return{...r,...c}}(n,t,e,i,n.children,r));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}const s=new vn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function lM(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function t$(n,t,e,i){return!!(el(n)===i||i!==un&&lM(t,e,n))&&("**"===n.path||dF(t,n,e).matched)}function n$(n,t,e){return 0===t.length&&!n.children[e]}const cM=!1;class uM{constructor(t){this.segmentGroup=t||null}}class i${constructor(t){this.urlTree=t}}function Yw(n){return tm(new uM(n))}function r$(n){return tm(new i$(n))}class rne{constructor(t,e,i,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=aM(this.urlTree.root,[],[],this.config).segmentGroup,e=new vn(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,un).pipe((0,w.U)(s=>this.createUrlTree(eM(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ka(s=>{if(s instanceof i$)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof uM?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,un).pipe((0,w.U)(r=>this.createUrlTree(eM(r),t.queryParams,t.fragment))).pipe(Ka(r=>{throw r instanceof uM?this.noMatchError(r):r}))}noMatchError(t){return new o.vHH(4002,cM)}createUrlTree(t,e,i){const r=ZN(t);return new jm(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,w.U)(s=>new vn([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,ln.D)(r).pipe(Gu(s=>{const c=i.children[s],d=Kz(e,s);return this.expandSegmentGroup(t,d,c,s).pipe((0,w.U)(f=>({segment:f,outlet:s})))}),um((s,c)=>(s[c.outlet]=c.segment,s),{}),_z())}expandSegment(t,e,i,r,s,c){return(0,ln.D)(i).pipe(Gu(d=>this.expandSegmentAgainstRoute(t,e,i,d,r,s,c).pipe(Ka(g=>{if(g instanceof uM)return ct(null);throw g}))),id(d=>!!d),Ka((d,f)=>{if(cF(d))return n$(e,r,s)?ct(new vn([],{})):Yw(e);throw d}))}expandSegmentAgainstRoute(t,e,i,r,s,c,d){return t$(r,e,s,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c):Yw(e):Yw(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?r$(s):this.lineralizeSegments(i,s).pipe((0,Ui.z)(c=>{const d=new vn(c,{});return this.expandSegment(t,d,e,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){const{matched:d,consumedSegments:f,remainingSegments:g,positionalParamSegments:b}=dF(e,r,s);if(!d)return Yw(e);const E=this.applyRedirectCommands(f,r.redirectTo,b);return r.redirectTo.startsWith("/")?r$(E):this.lineralizeSegments(r,E).pipe((0,Ui.z)(I=>this.expandSegment(t,e,i,I.concat(g),c,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){return"**"===i.path?(t=Zz(i,t),i.loadChildren?(i._loadedRoutes?ct({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,w.U)(d=>(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,new vn(r,{})))):ct(new vn(r,{}))):e$(e,i,r,t).pipe(Qn(({matched:c,consumedSegments:d,remainingSegments:f})=>c?this.getChildConfig(t=i._injector??t,i,r).pipe((0,Ui.z)(b=>{const E=b.injector??t,I=b.routes,{segmentGroup:P,slicedSegments:F}=aM(e,d,f,I),z=new vn(P.segments,P.children);if(0===F.length&&z.hasChildren())return this.expandChildren(E,I,z).pipe((0,w.U)(rt=>new vn(d,rt)));if(0===I.length&&0===F.length)return ct(new vn(d,{}));const te=el(i)===s;return this.expandSegment(E,z,I,F,te?un:s,!0).pipe((0,w.U)(Ze=>new vn(d.concat(Ze.segments),Ze.children)))})):Yw(e)))}getChildConfig(t,e,i){return e.children?ct({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?ct({routes:e._loadedRoutes,injector:e._loadedInjector}):function Zte(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?ct(!0):ct(r.map(c=>{const d=n.get(c),f=function Nte(n){return n&&Ww(n.canLoad)}(d)?d.canLoad(t,e):d(t,e);return rd(f)})).pipe(Cv(),Jz())}(t,e,i).pipe((0,Ui.z)(r=>r?this.configLoader.loadChildren(t,e).pipe((0,ii.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function nne(n){return tm($z(cM,3))}())):ct({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ct(i);if(r.numberOfChildren>1||!r.children[un])return tm(new o.vHH(4e3,cM));r=r.children[un]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new jm(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return ss(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[s]=e[d]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let c={};return ss(e.children,(d,f)=>{c[f]=this.createSegmentGroup(t,d,i,r)}),new vn(s,c)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new o.vHH(4001,cM);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}class one{}class cne{constructor(t,e,i,r,s,c,d,f){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=d,this.urlSerializer=f}recognize(){const t=aM(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,un).pipe((0,w.U)(e=>{if(null===e)return null;const i=new nM([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},un,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new od(i,e),s=new jz(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,i=Hz(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r)}processChildren(t,e,i){return(0,ln.D)(Object.keys(i.children)).pipe(Gu(r=>{const s=i.children[r],c=Kz(e,r);return this.processSegmentGroup(t,c,s,r)}),um((r,s)=>r&&s?(r.push(...s),r):null),function Aee(n,t=!1){return(0,gi.e)((e,i)=>{let r=0;e.subscribe((0,Gn.x)(i,s=>{const c=n(s,r++);(c||t)&&i.next(s),!c&&i.complete()}))})}(r=>null!==r),BT(null),_z(),(0,w.U)(r=>{if(null===r)return null;const s=s$(r);return function une(n){n.sort((t,e)=>t.value.outlet===un?-1:e.value.outlet===un?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,i,r,s){return(0,ln.D)(e).pipe(Gu(c=>this.processSegmentAgainstRoute(c._injector??t,c,i,r,s)),id(c=>!!c),Ka(c=>{if(cF(c))return n$(i,r,s)?ct([]):ct(null);throw c}))}processSegmentAgainstRoute(t,e,i,r,s){if(e.redirectTo||!t$(e,i,r,s))return ct(null);let c;if("**"===e.path){const d=r.length>0?bz(r).parameters:{},f=a$(i)+r.length;c=ct({snapshot:new nM(r,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,c$(e),el(e),e.component??e._loadedComponent??null,e,o$(i),f,u$(e),f),consumedSegments:[],remainingSegments:[]})}else c=e$(i,e,r,t).pipe((0,w.U)(({matched:d,consumedSegments:f,remainingSegments:g,parameters:b})=>{if(!d)return null;const E=a$(i)+f.length;return{snapshot:new nM(f,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,c$(e),el(e),e.component??e._loadedComponent??null,e,o$(i),E,u$(e),E),consumedSegments:f,remainingSegments:g}}));return c.pipe(Qn(d=>{if(null===d)return ct(null);const{snapshot:f,consumedSegments:g,remainingSegments:b}=d;t=e._injector??t;const E=e._loadedInjector??t,I=function dne(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:P,slicedSegments:F}=aM(i,g,b,I.filter(te=>void 0===te.redirectTo),this.relativeLinkResolution);if(0===F.length&&P.hasChildren())return this.processChildren(E,I,P).pipe((0,w.U)(te=>null===te?null:[new od(f,te)]));if(0===I.length&&0===F.length)return ct([new od(f,[])]);const z=el(e)===s;return this.processSegment(E,I,P,F,z?un:s).pipe((0,w.U)(te=>null===te?null:[new od(f,te)]))}))}}function hne(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function s$(n){const t=[],e=new Set;for(const i of n){if(!hne(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=s$(i.children);t.push(new od(i.value,r))}return t.filter(i=>!e.has(i))}function o$(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function a$(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function c$(n){return n.data||{}}function u$(n){return n.resolve||{}}const hF=Symbol("RouteTitle");function d$(n){return"string"==typeof n.title||null===n.title}function fF(n){return Qn(t=>{const e=n(t);return e?(0,ln.D)(e).pipe((0,w.U)(()=>t)):ct(t)})}let h$=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===un);return i}getResolvedTitleForRoute(e){return e.data[hF]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(f$)},providedIn:"root"}),n})(),f$=(()=>{class n extends h${constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ed))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class bne{}class Cne extends class wne{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const pF=new o.OlP("",{providedIn:"root",factory:()=>({})}),mF=new o.OlP("ROUTES");let gF=(()=>{class n{constructor(e,i){this.injector=e,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ct(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=rd(e.loadComponent()).pipe((0,ii.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),g0(()=>{this.componentLoaders.delete(e)})),r=new gz(i,()=>new Je.x).pipe(zN());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ct({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,w.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(i);let f,g,b=!1;Array.isArray(d)?g=d:(f=d.create(e).injector,g=yz(f.get(mF,[],o.XFs.Self|o.XFs.Optional)));return{routes:g.map(lF),injector:f}}),g0(()=>{this.childrenLoaders.delete(i)})),c=new gz(s,()=>new Je.x).pipe(zN());return this.childrenLoaders.set(i,c),c}loadModuleFactoryOrRoutes(e){return rd(e()).pipe((0,Ui.z)(i=>i instanceof o.YKP||Array.isArray(i)?ct(i):(0,ln.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.zs3),o.LFG(o.Sil))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ene{}class Sne{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function xne(n){throw n}function Tne(n,t,e){return t.parse("/")}const Mne={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ine={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function m$(){const n=(0,o.f3M)(xz),t=(0,o.f3M)(zw),e=(0,o.f3M)(Ne),i=(0,o.f3M)(o.zs3),r=(0,o.f3M)(o.Sil),s=(0,o.f3M)(mF,{optional:!0})??[],c=(0,o.f3M)(pF,{optional:!0})??{},d=(0,o.f3M)(f$),f=(0,o.f3M)(h$,{optional:!0}),g=(0,o.f3M)(Ene,{optional:!0}),b=(0,o.f3M)(bne,{optional:!0}),E=new $i(null,n,t,e,i,r,yz(s));return g&&(E.urlHandlingStrategy=g),b&&(E.routeReuseStrategy=b),E.titleStrategy=f??d,function Ane(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(c,E),E}let $i=(()=>{class n{constructor(e,i,r,s,c,d,f){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=f,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Je.x,this.errorHandler=xne,this.malformedUriErrorHandler=Tne,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ct(void 0),this.urlHandlingStrategy=new Sne,this.routeReuseStrategy=new Cne,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(gF),this.configLoader.onLoadEndListener=I=>this.triggerEvent(new dte(I)),this.configLoader.onLoadStartListener=I=>this.triggerEvent(new ute(I)),this.ngModule=c.get(o.h0i),this.console=c.get(o.c2e);const E=c.get(o.R0b);this.isNgZoneEnabled=E instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(f),this.currentUrlTree=function Pee(){return new jm(new vn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Uz(this.currentUrlTree,this.rootComponentType),this.transitions=new Oi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(Ln(r=>0!==r.id),(0,w.U)(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Qn(r=>{let s=!1,c=!1;return ct(r).pipe((0,ii.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Qn(d=>{const f=this.browserUrlTree.toString(),g=!this.navigated||d.extractedUrl.toString()!==f||f!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||g)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return g$(d.source)&&(this.browserUrlTree=d.extractedUrl),ct(d).pipe(Qn(E=>{const I=this.transitions.getValue();return i.next(new JN(E.id,this.serializeUrl(E.extractedUrl),E.source,E.restoredState)),I!==this.transitions.getValue()?_.E:Promise.resolve(E)}),function sne(n,t,e,i){return Qn(r=>function ine(n,t,e,i,r){return new rne(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,w.U)(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ii.b)(E=>{this.currentNavigation={...this.currentNavigation,finalUrl:E.urlAfterRedirects},r.urlAfterRedirects=E.urlAfterRedirects}),function pne(n,t,e,i,r,s){return(0,Ui.z)(c=>function lne(n,t,e,i,r,s,c="emptyOnly",d="legacy"){return new cne(n,t,e,i,r,c,d,s).recognize().pipe(Qn(f=>null===f?function ane(n){return new si.y(t=>t.error(n))}(new one):ct(f)))}(n,t,e,c.urlAfterRedirects,i.serialize(c.urlAfterRedirects),i,r,s).pipe((0,w.U)(d=>({...c,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ii.b)(E=>{if(r.targetSnapshot=E.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!E.extras.skipLocationChange){const P=this.urlHandlingStrategy.merge(E.urlAfterRedirects,E.rawUrl);this.setBrowserUrl(P,E)}this.browserUrlTree=E.urlAfterRedirects}const I=new ste(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);i.next(I)}));if(g&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:I,extractedUrl:P,source:F,restoredState:z,extras:te}=d,Ve=new JN(I,this.serializeUrl(P),F,z);i.next(Ve);const Ze=Uz(P,this.rootComponentType).snapshot;return ct(r={...d,targetSnapshot:Ze,urlAfterRedirects:P,extras:{...te,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),_.E}),(0,ii.b)(d=>{const f=new ote(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(f)}),(0,w.U)(d=>r={...d,guards:Ate(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function Hte(n,t){return(0,Ui.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:c}}=e;return 0===c.length&&0===s.length?ct({...e,guardsResult:!0}):function jte(n,t,e,i){return(0,ln.D)(n).pipe((0,Ui.z)(r=>function Yte(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?ct(s.map(d=>{const f=sM(d,t,r);return rd(function Bte(n){return n&&Ww(n.canDeactivate)}(f)?f.canDeactivate(n,t,e,i):f(n,t,e,i)).pipe(id())})).pipe(Cv()):ct(!0)}(r.component,r.route,e,t,i)),id(r=>!0!==r,!0))}(c,i,r,n).pipe((0,Ui.z)(d=>d&&function Pte(n){return"boolean"==typeof n}(d)?function Gte(n,t,e,i){return(0,ln.D)(t).pipe(Gu(r=>$f(function $te(n,t){return null!==n&&t&&t(new hte(n)),ct(!0)}(r.route.parent,i),function zte(n,t){return null!==n&&t&&t(new pte(n)),ct(!0)}(r.route,i),function Wte(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(c=>function kte(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(c)).filter(c=>null!==c).map(c=>Jd(()=>ct(c.guards.map(f=>{const g=sM(f,c.node,e);return rd(function Lte(n){return n&&Ww(n.canActivateChild)}(g)?g.canActivateChild(i,n):g(i,n)).pipe(id())})).pipe(Cv())));return ct(s).pipe(Cv())}(n,r.path,e),function qte(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return ct(!0);const r=i.map(s=>Jd(()=>{const c=sM(s,t,e);return rd(function Fte(n){return n&&Ww(n.canActivate)}(c)?c.canActivate(t,n):c(t,n)).pipe(id())}));return ct(r).pipe(Cv())}(n,r.route,e))),id(r=>!0!==r,!0))}(i,s,n,t):ct(d)),(0,w.U)(d=>({...e,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,ii.b)(d=>{if(r.guardsResult=d.guardsResult,zm(d.guardsResult))throw zz(0,d.guardsResult);const f=new ate(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(f)}),Ln(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),fF(d=>{if(d.guards.canActivateChecks.length)return ct(d).pipe((0,ii.b)(f=>{const g=new lte(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(g)}),Qn(f=>{let g=!1;return ct(f).pipe(function mne(n,t){return(0,Ui.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return ct(e);let s=0;return(0,ln.D)(r).pipe(Gu(c=>function gne(n,t,e,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!d$(r)&&(s[hF]=r.title),function _ne(n,t,e,i){const r=function vne(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return ct({});const s={};return(0,ln.D)(r).pipe((0,Ui.z)(c=>function yne(n,t,e,i){const r=sM(n,t,i);return rd(r.resolve?r.resolve(t,e):r(t,e))}(n[c],t,e,i).pipe(id(),(0,ii.b)(d=>{s[c]=d}))),$N(1),r0(s),Ka(c=>cF(c)?_.E:tm(c)))}(s,n,t,i).pipe((0,w.U)(c=>(n._resolvedData=c,n.data=Hz(n,e).resolve,r&&d$(r)&&(n.data[hF]=r.title),null)))}(c.route,i,n,t)),(0,ii.b)(()=>s++),$N(1),(0,Ui.z)(c=>s===r.length?ct(e):_.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ii.b)({next:()=>g=!0,complete:()=>{g||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,ii.b)(f=>{const g=new cte(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(g)}))}),fF(d=>{const f=g=>{const b=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(g.routeConfig).pipe((0,ii.b)(E=>{g.component=E}),(0,w.U)(()=>{})));for(const E of g.children)b.push(...f(E));return b};return oy(f(d.targetSnapshot.root)).pipe(BT(),v(1))}),fF(()=>this.afterPreactivation()),(0,w.U)(d=>{const f=function yte(n,t,e){const i=Gw(n,t._root,e?e._root:void 0);return new Vz(i,t)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return r={...d,targetRouterState:f}}),(0,ii.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,t,e)=>(0,w.U)(i=>(new Ite(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,ii.b)({next(){s=!0},complete(){s=!0}}),g0(()=>{s||c||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Ka(d=>{if(c=!0,Wz(d)){qz(d)||(this.navigated=!0,this.restoreHistory(r,!0));const f=new tM(r.id,this.serializeUrl(r.extractedUrl),d.message,d.cancellationCode);if(i.next(f),qz(d)){const g=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||g$(r.source)};this.scheduleNavigation(g,"imperative",null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const f=new Fz(r.id,this.serializeUrl(r.extractedUrl),d,r.targetSnapshot??void 0);i.next(f);try{r.resolve(this.errorHandler(d))}catch(g){r.reject(g)}}return _.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const d={...s};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(r.state=d)}const c=this.parseUrl(e.url);this.scheduleNavigation(c,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(lF),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:c,queryParamsHandling:d,preserveFragment:f}=i,g=r||this.routerState.root,b=f?this.currentUrlTree.fragment:c;let E=null;switch(d){case"merge":E={...this.currentUrlTree.queryParams,...s};break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=s||null}return null!==E&&(E=this.removeEmptyProps(E)),Jee(g,this.currentUrlTree,e,E,b??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=zm(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function kne(n){for(let t=0;t<n.length;t++){if(null==n[t])throw new o.vHH(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...Mne}:!1===i?{...Ine}:i,zm(e))return Cz(this.currentUrlTree,e,r);const s=this.parseUrl(e);return Cz(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new $m(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,s,c){if(this.disposed)return Promise.resolve(!1);let d,f,g;c?(d=c.resolve,f=c.reject,g=c.promise):g=new Promise((I,P)=>{d=I,f=P});const b=++this.navigationId;let E;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),E=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):E=0,this.setTransition({id:b,targetPageId:E,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:d,reject:f,promise:g,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),g.catch(I=>Promise.reject(I))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i,r){const s=new tM(e.id,this.serializeUrl(e.extractedUrl),i,r);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:function(){return m$()},providedIn:"root"}),n})();function g$(n){return"imperative"!==n}let tl=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=c,this.commands=null,this.onChanges=new Je.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==e?i.setAttribute(r,"tabindex",e):i.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:(0,o.D6c)(this.skipLocationChange),replaceUrl:(0,o.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,o.D6c)(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36($i),o.Y36(Wh),o.$8M("tabindex"),o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&o.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[o.TTD]}),n})(),fM=(()=>{class n{constructor(e,i,r){this.router=e,this.route=i,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new Je.x,this.subscription=e.events.subscribe(s=>{s instanceof $m&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,i,r,s,c){if(0!==e||i||r||s||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const d={skipLocationChange:(0,o.D6c)(this.skipLocationChange),replaceUrl:(0,o.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,d),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,o.D6c)(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36($i),o.Y36(Wh),o.Y36(De))},n.\u0275dir=o.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,i){1&e&&o.NdJ("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&o.uIk("target",i.target)("href",i.href,o.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[o.TTD]}),n})();class _${}let v$=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Ln(e=>e instanceof $m),Gu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,o.MMx)(s.providers,e,`Route: ${s.path}`));const c=s._injector??e,d=s._loadedInjector??c;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(c,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,ln.D)(r).pipe((0,zf.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):ct(null);const s=r.pipe((0,Ui.z)(c=>null===c?ct(void 0):(i._loadedRoutes=c.routes,i._loadedInjector=c.injector,this.processRoutes(c.injector??e,c.routes))));if(i.loadComponent&&!i._loadedComponent){const c=this.loader.loadComponent(i);return(0,ln.D)([s,c]).pipe((0,zf.J)())}return s})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG($i),o.LFG(o.Sil),o.LFG(o.lqb),o.LFG(_$),o.LFG(gF))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const y$=new o.OlP("");let Pne=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof JN?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof $m&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Lz&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new Lz(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const b$=new o.OlP("ROUTER_FORROOT_GUARD"),w$=new o.OlP(""),Nne=[Ne,{provide:xz,useClass:WN},{provide:$i,useFactory:m$},zw,{provide:Wh,useFactory:function Fne(n){return n.routerState.root},deps:[$i]},gF];function Lne(){return new o.PXZ("Router",$i)}let C$=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[Nne,[],D$(e),{provide:b$,useFactory:Hne,deps:[[$i,new o.FiY,new o.tp0]]},{provide:pF,useValue:i||{}},i?.useHash?{provide:De,useClass:lt}:{provide:De,useClass:at},{provide:y$,useFactory:()=>{const n=(0,o.f3M)($i),t=(0,o.f3M)(ml),e=(0,o.f3M)(pF);return e.scrollOffset&&t.setOffset(e.scrollOffset),new Pne(n,t,e)}},i?.preloadingStrategy?Yne(i.preloadingStrategy):[],{provide:o.PXZ,multi:!0,useFactory:Lne},i?.initialNavigation?Gne(i):[],[{provide:E$,useFactory:jne},{provide:o.tb,multi:!0,useExisting:E$}]]}}static forChild(e){return{ngModule:n,providers:[D$(e)]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(b$,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();function Hne(n){return"guarded"}function D$(n){return[{provide:mF,multi:!0,useValue:n}]}function jne(){const n=(0,o.f3M)(o.zs3);return t=>{const e=n.get(o.z2F);if(t!==e.components[0])return;const i=n.get($i),r=n.get(S$);1===n.get(_F)&&i.initialNavigation(),n.get(w$,null,o.XFs.Optional)?.setUpPreloading(),n.get(y$,null,o.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.next(),r.complete()}}const E$=new o.OlP("");function Gne(n){return["disabled"===n.initialNavigation?[{provide:o.ip1,multi:!0,useFactory:()=>{const n=(0,o.f3M)($i);return()=>{n.setUpLocationChangeListener()}}},{provide:_F,useValue:2}]:[],"enabledBlocking"===n.initialNavigation?[{provide:_F,useValue:0},{provide:o.ip1,multi:!0,deps:[o.zs3],useFactory:n=>{const t=n.get(W,Promise.resolve(null));let e=!1;return()=>t.then(()=>new Promise(r=>{const s=n.get($i),c=n.get(S$);(function i(r){n.get($i).events.pipe(Ln(c=>c instanceof $m||c instanceof tM||c instanceof Fz),(0,w.U)(c=>c instanceof $m||c instanceof tM&&(0===c.code||1===c.code)&&null),Ln(c=>null!==c),v(1)).subscribe(()=>{r()})})(()=>{r(!0),e=!0}),s.afterPreactivation=()=>(r(!0),e||c.closed?ct(void 0):c),s.initialNavigation()}))}}]:[]]}const S$=new o.OlP("",{factory:()=>new Je.x}),_F=new o.OlP("",{providedIn:"root",factory:()=>1});function Yne(n){return[v$,{provide:w$,useExisting:v$},{provide:_$,useExisting:n}]}let nl=(()=>{class n{constructor(e,i,r){if(this.afs=e,this.afAuth=i,this.router=r,!this.userData)try{this.userData=JSON.parse(localStorage.getItem("user"))}catch{}this.afAuth.authState.subscribe(s=>{s?(this.userData=s,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}authState(){return this.afAuth.authState}signIn(e,i){return this.afAuth.signInWithEmailAndPassword(e,i).then(r=>{this.setUserData(r.user),this.afAuth.authState.subscribe(s=>{s&&this.router.navigate(["dashboard"])})}).catch(r=>{window.alert(r.message)})}signUp(e,i){return this.afAuth.createUserWithEmailAndPassword(e,i).then(r=>{this.sendVerificationMail(),this.setUserData(r.user)}).catch(r=>{window.alert(r.message)})}sendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email"])})}forgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(i=>{window.alert(i)})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null!==e&&!1!==e.emailVerified}googleAuth(){return this.authLogin(new ZZ.Q).then(e=>{this.router.navigate(["dashboard"])})}authLogin(e){return this.afAuth.signInWithPopup(e).then(i=>{this.setUserData(i.user),this.router.navigate(["dashboard"])}).catch(i=>{window.alert(i)})}setUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}setShareBot(e){return this.afs.doc(`share-bot/${e.uid}`).set({tgName:e.tgName,tgKey:e.tgKey,uid:e.uid,active:!1},{merge:!0})}getShareBot(e){return this.afs.doc(`share-bot/${e.uid}`).get()}getUser(e){return this.afs.doc(`users/${e.uid}`).get()}writeMessage(e="",i){const r=iU();return this.afs.doc(`texts/${r}`).set({text:i.text,title:i.title,summary:i.summary,tid:r,uid:e.uid},{merge:!0}).then(()=>({uid:r}))}updateMessage(e,i="",r){return this.afs.doc(`texts/${e}`).set({text:r.text,title:r.title,summary:r.summary,tid:e,uid:i.uid},{merge:!0}).then(()=>({uid:e}))}getTexts(e){return this.afs.collection("texts",r=>r.where("uid","==",e.uid)).get()}getText(e,i){return this.afs.doc(`texts/${i}`).get()}getLinks(e){return this.afs.collection("links",r=>r.where("uid","==",e.uid)).get()}signOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["/"])})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(mz),o.LFG(Lw),o.LFG($i))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var vF=V(655);const Zne=o.GuJ,Qne=Symbol("__destroy"),x$=Symbol("__decoratorApplied");function T$(n){return"string"==typeof n?Symbol(`__destroy__${n}`):Qne}function M$(n,t){n[t]||(n[t]=new Je.x)}function I$(n,t){n[t]&&(n[t].next(),n[t].complete(),n[t]=null)}function A$(n){n instanceof Cn.w0&&n.unsubscribe()}function k$(n,t){return function(){if(n&&n.call(this),I$(this,T$()),t.arrayName&&function Jne(n){Array.isArray(n)&&n.forEach(A$)}(this[t.arrayName]),t.checkProperties)for(const e in this)t.blackList?.includes(e)||A$(this[e])}}function yF(n={}){return t=>{!function Kne(n){return!!n[Zne]}(t)?function eie(n,t){n.prototype.ngOnDestroy=k$(n.prototype.ngOnDestroy,t)}(t,n):function tie(n,t){const e=n.\u0275pipe;e.onDestroy=k$(e.onDestroy,t)}(t,n),function Xne(n){n.prototype[x$]=!0}(t)}}function bF(n,t){return e=>{const i=T$(t);return"string"==typeof t?function rie(n,t,e){const i=n[t];M$(n,e),n[t]=function(){i.apply(this,arguments),I$(this,e),n[t]=i}}(n,t,i):M$(n,i),e.pipe(Ke(n[i]))}}function sie(n,t){if(1&n&&(o.TgZ(0,"option",24),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.Q6J("value",e),o.xp6(1),o.hij(" ",e," ")}}function oie(n,t){1&n&&o._UZ(0,"th",25)}function aie(n,t){if(1&n&&(o.TgZ(0,"td",26),o._UZ(1,"img",27),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Q6J("src","https://www.google.com/s2/favicons?domain="+e.icon,o.LSH)}}function lie(n,t){1&n&&(o.TgZ(0,"th",28),o._uU(1," Name "),o.qZA())}function cie(n,t){if(1&n&&(o.TgZ(0,"td",26)(1,"a",29),o._uU(2),o.qZA()()),2&n){const e=t.$implicit;o.xp6(1),o.s9C("href",e.url,o.LSH),o.xp6(1),o.Oqu(e.title)}}function uie(n,t){1&n&&(o.TgZ(0,"th",30),o._uU(1," Date "),o.qZA())}function die(n,t){if(1&n&&(o.TgZ(0,"td",26),o._uU(1),o.ALo(2,"date"),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.hij(" ",o.xi3(2,1,e.date,"dd.MM.YYYY HH:mm")," ")}}function hie(n,t){1&n&&(o.TgZ(0,"th",30),o._uU(1," Count "),o.qZA())}function fie(n,t){if(1&n&&(o.TgZ(0,"td",26),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.hij(" ",e.count," ")}}function pie(n,t){1&n&&(o.TgZ(0,"th",30),o._uU(1," Count "),o.qZA())}function mie(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"td",26)(1,"button",31),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw();return o.KtG(c.editLink(s))}),o.TgZ(2,"mat-icon"),o._uU(3,"edit"),o.qZA()()()}}function gie(n,t){1&n&&o._UZ(0,"tr",32)}function _ie(n,t){1&n&&o._UZ(0,"tr",33)}Symbol("CheckerHasBeenSet");let qm=class{constructor(t,e){this.authService=t,this._liveAnnouncer=e,this.displayedColumns=["icon","title","date","count","edit"],this.dataSource=[],this.filteredSource=[],this.origins=new Set,this.selectedOrigin="---"}ngOnInit(){this.userData=this.authService.userData;try{this.authService.authState().subscribe(t=>{this.userData=t?.toJSON()})}catch(t){console.log(t)}try{this.authService.getLinks(this.userData).pipe(bF(this)).subscribe(t=>{t.forEach(e=>{const i=e.data(),r=new URL(i.message);this.dataSource.some(c=>i.message===c.url)?this.dataSource.map(c=>(i.message===c.url&&(c.count=c.count+1),c)):(this.dataSource.push({url:i.message,title:i.title||"no title",icon:r.origin,date:new Date(i.date),count:1}),this.origins.add(r.origin))}),this.filteredSource=[...this.dataSource],this.filteredSource.sort((e,i)=>i.date.getTime()-e.date.getTime()),this.table.renderRows()})}catch(t){console.log(t)}}originsToArray(){return["---",...Array.from(this.origins)]}filterOrigin(t){this.filteredSource="---"===t?[...this.dataSource]:[...this.dataSource.filter(e=>e.icon===t)],this.filteredSource.sort((e,i)=>i.date.getTime()-e.date.getTime()),this.table.renderRows()}logout(){this.authService.signOut()}ngAfterViewInit(){this.dataSource.sort=this.sort}announceSortChange(t){this._liveAnnouncer.announce(t.direction?`Sorted ${t.direction}ending`:"Sorting cleared")}editLink(t){console.log(t)}};function vie(n,t){if(1&n&&o._UZ(0,"img",11),2&n){const e=o.oxw(2);o.s9C("src",e.userData.photoURL,o.LSH)}}function yie(n,t){if(1&n&&(o.TgZ(0,"mat-card-title"),o._uU(1),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Oqu(e.userData.email)}}function bie(n,t){if(1&n&&(o.TgZ(0,"mat-card-title"),o._uU(1),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Oqu(e.userData.displayName)}}function wie(n,t){if(1&n&&(o.TgZ(0,"mat-card-subtitle"),o._uU(1),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Oqu(e.userData.email)}}function Cie(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"span")(1,"mat-form-field",12)(2,"mat-label"),o._uU(3,"tgKey:"),o.qZA(),o.TgZ(4,"textarea",13),o._uU(5),o.qZA()(),o.TgZ(6,"button",14),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2);return o.KtG(r.copy())}),o._uU(7,"Copy"),o.qZA()()}if(2&n){const e=o.oxw(2);o.xp6(5),o.Oqu(e.userData.tgKey)}}function Die(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"span")(1,"mat-form-field",15)(2,"mat-label"),o._uU(3,"You TG name"),o.qZA(),o.TgZ(4,"input",16),o.NdJ("ngModelChange",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.tgName=r)}),o.qZA()(),o.TgZ(5,"button",17),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2);return o.KtG(r.generateTgKey())}),o._uU(6,"Generate tg integration key"),o.qZA(),o.TgZ(7,"mat-form-field",15)(8,"mat-label"),o._uU(9,"Tg key"),o.qZA(),o._UZ(10,"input",18),o.qZA()()}if(2&n){const e=o.oxw(2);o.xp6(4),o.Q6J("ngModel",e.tgName),o.xp6(6),o.Q6J("value",e.tgKey)}}function Eie(n,t){if(1&n&&(o.TgZ(0,"mat-card",8)(1,"mat-card-header"),o.YNc(2,vie,1,1,"img",9),o.YNc(3,yie,2,1,"mat-card-title",10),o.YNc(4,bie,2,1,"mat-card-title",10),o.YNc(5,wie,2,1,"mat-card-subtitle",10),o.qZA(),o.TgZ(6,"mat-card-content")(7,"p"),o._uU(8," uid: "),o.TgZ(9,"strong"),o._uU(10),o.qZA(),o._UZ(11,"br"),o._uU(12," emailVerified: "),o.TgZ(13,"strong"),o._uU(14),o.qZA(),o._UZ(15,"br"),o._uU(16," isAnonymous: "),o.TgZ(17,"strong"),o._uU(18),o.qZA(),o._UZ(19,"br"),o._uU(20," createdAt: "),o.TgZ(21,"strong"),o._uU(22),o.ALo(23,"date"),o.qZA(),o._UZ(24,"br"),o._uU(25," lastLoginAt: "),o.TgZ(26,"strong"),o._uU(27),o.ALo(28,"date"),o.qZA(),o._UZ(29,"br"),o._uU(30," provider: "),o.TgZ(31,"strong"),o._uU(32),o.qZA(),o._UZ(33,"br"),o._uU(34," tgName: "),o.TgZ(35,"strong"),o._uU(36),o.qZA(),o._UZ(37,"br"),o.YNc(38,Cie,8,1,"span",10),o.qZA(),o.YNc(39,Die,11,2,"span",10),o.qZA()()),2&n){const e=o.oxw();o.xp6(2),o.Q6J("ngIf",e.userData.photoUrl),o.xp6(1),o.Q6J("ngIf",!e.userData.displayName),o.xp6(1),o.Q6J("ngIf",e.userData.displayName),o.xp6(1),o.Q6J("ngIf",e.userData.displayName),o.xp6(5),o.Oqu(e.userData.uid),o.xp6(4),o.Oqu(e.userData.emailVerified),o.xp6(4),o.Oqu(e.userData.isAnonymous),o.xp6(4),o.Oqu(o.xi3(23,13,e.userData.createdAt,"HH:mm - dd.MM.yy")),o.xp6(5),o.Oqu(o.xi3(28,16,e.userData.lastLoginAt,"HH:mm - dd.MM.yy")),o.xp6(5),o.Oqu(e.userData.providerData[0].providerId||""),o.xp6(4),o.Oqu(e.userData.tgName),o.xp6(2),o.Q6J("ngIf",e.userData.tgKey),o.xp6(1),o.Q6J("ngIf",!e.userData.tgKey)}}qm.\u0275fac=function(t){return new(t||qm)(o.Y36(nl),o.Y36(NI))},qm.\u0275cmp=o.Xpm({type:qm,selectors:[["app-links-page"]],viewQuery:function(t,e){if(1&t&&(o.Gf(hO,5),o.Gf(fO,5)),2&t){let i;o.iGM(i=o.CRH())&&(e.sort=i.first),o.iGM(i=o.CRH())&&(e.table=i.first)}},decls:44,vars:5,consts:[["color","primary"],[1,"spacer"],["routerLink","/dashboard","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["routerLink","/user","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["routerLink","/links","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["routerLink","/editor/add","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"],[1,"container"],[1,"entry-card","link"],["appearance","fill"],["matNativeControl","","name","car",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","icon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by name",4,"matHeaderCellDef"],["matColumnDef","date"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight",4,"matHeaderCellDef"],["matColumnDef","count"],["matColumnDef","edit"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["height","16","width","16",3,"src"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by name"],["target","_blank",3,"href"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by weight"],["mat-icon-button","","aria-label","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(o.TgZ(0,"mat-toolbar",0)(1,"span"),o._uU(2,"TR"),o.qZA(),o._UZ(3,"span",1),o.TgZ(4,"button",2)(5,"mat-icon"),o._uU(6,"home"),o.qZA()(),o.TgZ(7,"button",3)(8,"mat-icon"),o._uU(9,"face"),o.qZA()(),o.TgZ(10,"button",4)(11,"mat-icon"),o._uU(12,"link"),o.qZA()(),o.TgZ(13,"button",5)(14,"mat-icon"),o._uU(15,"add"),o.qZA()(),o.TgZ(16,"button",6),o.NdJ("click",function(){return e.logout()}),o.TgZ(17,"mat-icon"),o._uU(18,"logout"),o.qZA()()(),o.TgZ(19,"div",7)(20,"mat-card",8)(21,"mat-form-field",9)(22,"mat-label"),o._uU(23,"Filter by origin"),o.qZA(),o.TgZ(24,"select",10),o.NdJ("ngModelChange",function(r){return e.selectedOrigin=r})("ngModelChange",function(r){return e.filterOrigin(r)}),o.YNc(25,sie,2,2,"option",11),o.qZA()()(),o.TgZ(26,"table",12),o.NdJ("matSortChange",function(r){return e.announceSortChange(r)}),o.ynx(27,13),o.YNc(28,oie,1,0,"th",14),o.YNc(29,aie,2,1,"td",15),o.BQk(),o.ynx(30,16),o.YNc(31,lie,2,0,"th",17),o.YNc(32,cie,3,2,"td",15),o.BQk(),o.ynx(33,18),o.YNc(34,uie,2,0,"th",19),o.YNc(35,die,3,4,"td",15),o.BQk(),o.ynx(36,20),o.YNc(37,hie,2,0,"th",19),o.YNc(38,fie,2,1,"td",15),o.BQk(),o.ynx(39,21),o.YNc(40,pie,2,0,"th",19),o.YNc(41,mie,4,0,"td",15),o.BQk(),o.YNc(42,gie,1,0,"tr",22),o.YNc(43,_ie,1,0,"tr",23),o.qZA()()),2&t&&(o.xp6(24),o.Q6J("ngModel",e.selectedOrigin),o.xp6(1),o.Q6J("ngForOf",e.originsToArray()),o.xp6(1),o.Q6J("dataSource",e.filteredSource),o.xp6(16),o.Q6J("matHeaderRowDef",e.displayedColumns),o.xp6(1),o.Q6J("matRowDefColumns",e.displayedColumns))},dependencies:[zr,tl,ea,_o,Rc,ju,Gs,Eh,hO,mZ,fO,mO,J2,gO,pO,eU,_O,vO,tU,nU,Wu,qb,RE,Gp,Kn,fh,Ao],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.link[_ngcontent-%COMP%]{flex-direction:column;margin:10px}@media only screen and (max-width: 600px){.link[_ngcontent-%COMP%]{width:100%}}.dashboard-card[_ngcontent-%COMP%]{min-width:100px}.dashboard-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%}th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000}"]}),qm=(0,vF.gn)([yF()],qm);let Sie=(()=>{class n{constructor(e){this.authService=e,this.tgKey="",this.tgName=""}ngOnInit(){this.userData=this.authService.userData;try{this.authService.authState().subscribe(e=>{this.userData=e?.toJSON()})}catch(e){console.log(e)}try{this.authService.getShareBot(this.userData).subscribe(e=>{const i=e.data();this.userData={...this.userData,...i},this.tgKey=this.userData.tgKey,this.tgName=this.userData.tgName})}catch(e){console.log(e)}}generateTgKey(){this.tgKey=btoa(JSON.stringify({code:iU(),name:this.tgName.trim()})),this.authService.setShareBot({...this.userData,tgKey:this.tgKey,tgName:this.tgName.trim()}).then(e=>{console.log(e)})}copy(){navigator.clipboard.writeText(this.tgKey)}logout(){this.authService.signOut()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(nl))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-user-page"]],decls:20,vars:1,consts:[["color","primary"],[1,"spacer"],["routerLink","/dashboard","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["routerLink","/user","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["routerLink","/links","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["routerLink","/editor/add","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"],["class","dashboard-card note",4,"ngIf"],[1,"dashboard-card","note"],["mat-card-avatar","","class","header-image",3,"src",4,"ngIf"],[4,"ngIf"],["mat-card-avatar","",1,"header-image",3,"src"],["appearance","fill",1,"full-width"],["matInput","","wrap","soft"],["mat-stroked-button","","color","primary",3,"click"],[1,"full-width"],["matInput","",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],["matInput","",3,"value"]],template:function(e,i){1&e&&(o.TgZ(0,"mat-toolbar",0)(1,"span"),o._uU(2,"TR"),o.qZA(),o._UZ(3,"span",1),o.TgZ(4,"button",2)(5,"mat-icon"),o._uU(6,"home"),o.qZA()(),o.TgZ(7,"button",3)(8,"mat-icon"),o._uU(9,"face"),o.qZA()(),o.TgZ(10,"button",4)(11,"mat-icon"),o._uU(12,"link"),o.qZA()(),o.TgZ(13,"button",5)(14,"mat-icon"),o._uU(15,"add"),o.qZA()(),o.TgZ(16,"button",6),o.NdJ("click",function(){return i.logout()}),o.TgZ(17,"mat-icon"),o._uU(18,"logout"),o.qZA()()(),o.YNc(19,Eie,40,19,"mat-card",7)),2&e&&(o.xp6(19),o.Q6J("ngIf",null!==i.userData))},dependencies:[Fn,tl,ea,_o,wR,gR,Or,yh,bR,Rc,ju,Gs,Eh,Wu,Hl,Kn,fh,Ao],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.note[_ngcontent-%COMP%]{flex-direction:column;margin:10px;min-width:150px}@media only screen and (max-width: 600px){.note[_ngcontent-%COMP%]{width:100%}}.dashboard-card[_ngcontent-%COMP%]{max-width:400px;min-width:100px}.dashboard-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}"]}),n})(),xie=(()=>{class n{constructor(e,i){this.authService=e,this.activatedRoute=i,this.fontSize=100,this.step=10}ngOnInit(){this.userData=this.authService.userData,this.activatedRoute.params.subscribe(i=>{this.pageId=i.id,this.authService.getText(this.userData,i.id).subscribe(r=>{this.data=r.data()})});let e=localStorage.getItem("fontSize");null!==e&&(this.fontSize=+e)}increase(){this.fontSize=this.fontSize+this.step,localStorage.setItem("fontSize",this.fontSize.toString())}decrease(){this.fontSize=this.fontSize-this.step,localStorage.setItem("fontSize",this.fontSize.toString())}reset(){this.fontSize=100,localStorage.setItem("fontSize",this.fontSize.toString())}logout(){this.authService.signOut()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(nl),o.Y36(Wh))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-viewer-page"]],decls:38,vars:8,consts:[["color","primary"],["mat-flat-button","",3,"click"],[1,"spacer"],["routerLink","/dashboard","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["routerLink","/user","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["routerLink","/links","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["routerLink","/editor/add","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"],[1,"dashboard-card"],[3,"innerHTML"]],template:function(e,i){1&e&&(o.TgZ(0,"mat-toolbar",0)(1,"span"),o._uU(2,"TR"),o.qZA(),o._uU(3,"\xa0 "),o.TgZ(4,"button",1),o.NdJ("click",function(){return i.increase()}),o._uU(5,"+"),o.qZA(),o._uU(6,"\xa0 "),o.TgZ(7,"button",1),o.NdJ("click",function(){return i.decrease()}),o._uU(8,"-"),o.qZA(),o._uU(9,"\xa0 "),o.TgZ(10,"button",1),o.NdJ("click",function(){return i.reset()}),o._uU(11,"reset"),o.qZA(),o._uU(12,"\xa0 "),o.TgZ(13,"span"),o._uU(14),o.qZA(),o._UZ(15,"span",2),o.TgZ(16,"button",3)(17,"mat-icon"),o._uU(18,"home"),o.qZA()(),o.TgZ(19,"button",4)(20,"mat-icon"),o._uU(21,"face"),o.qZA()(),o.TgZ(22,"button",5)(23,"mat-icon"),o._uU(24,"link"),o.qZA()(),o.TgZ(25,"button",6)(26,"mat-icon"),o._uU(27,"add"),o.qZA()(),o.TgZ(28,"button",7),o.NdJ("click",function(){return i.logout()}),o.TgZ(29,"mat-icon"),o._uU(30,"logout"),o.qZA()()(),o.TgZ(31,"mat-card",8)(32,"div"),o._UZ(33,"span",9)(34,"br")(35,"span",9)(36,"br")(37,"span",9),o.qZA()()),2&e&&(o.xp6(14),o.hij("font-size: ",i.fontSize,"%"),o.xp6(18),o.Udp("font-size",i.fontSize+"%")("line-height",i.fontSize/100),o.xp6(1),o.Q6J("innerHTML",null==i.data?null:i.data.title,o.oJD),o.xp6(2),o.Q6J("innerHTML",null==i.data?null:i.data.summary,o.oJD),o.xp6(2),o.Q6J("innerHTML",null==i.data?null:i.data.text,o.oJD))},dependencies:[tl,ea,_o,Rc,Wu]}),n})();function Tie(n,t){}const pM=()=>{const n=typeof window<"u"?window:void 0;return n&&n.tinymce?n.tinymce:null};let Mie=(()=>{class n{constructor(){this.onBeforePaste=new o.vpe,this.onBlur=new o.vpe,this.onClick=new o.vpe,this.onContextMenu=new o.vpe,this.onCopy=new o.vpe,this.onCut=new o.vpe,this.onDblclick=new o.vpe,this.onDrag=new o.vpe,this.onDragDrop=new o.vpe,this.onDragEnd=new o.vpe,this.onDragGesture=new o.vpe,this.onDragOver=new o.vpe,this.onDrop=new o.vpe,this.onFocus=new o.vpe,this.onFocusIn=new o.vpe,this.onFocusOut=new o.vpe,this.onKeyDown=new o.vpe,this.onKeyPress=new o.vpe,this.onKeyUp=new o.vpe,this.onMouseDown=new o.vpe,this.onMouseEnter=new o.vpe,this.onMouseLeave=new o.vpe,this.onMouseMove=new o.vpe,this.onMouseOut=new o.vpe,this.onMouseOver=new o.vpe,this.onMouseUp=new o.vpe,this.onPaste=new o.vpe,this.onSelectionChange=new o.vpe,this.onActivate=new o.vpe,this.onAddUndo=new o.vpe,this.onBeforeAddUndo=new o.vpe,this.onBeforeExecCommand=new o.vpe,this.onBeforeGetContent=new o.vpe,this.onBeforeRenderUI=new o.vpe,this.onBeforeSetContent=new o.vpe,this.onChange=new o.vpe,this.onClearUndos=new o.vpe,this.onDeactivate=new o.vpe,this.onDirty=new o.vpe,this.onExecCommand=new o.vpe,this.onGetContent=new o.vpe,this.onHide=new o.vpe,this.onInit=new o.vpe,this.onInitNgModel=new o.vpe,this.onLoadContent=new o.vpe,this.onNodeChange=new o.vpe,this.onPostProcess=new o.vpe,this.onPostRender=new o.vpe,this.onPreInit=new o.vpe,this.onPreProcess=new o.vpe,this.onProgressState=new o.vpe,this.onRedo=new o.vpe,this.onRemove=new o.vpe,this.onReset=new o.vpe,this.onResizeEditor=new o.vpe,this.onSaveContent=new o.vpe,this.onSetAttrib=new o.vpe,this.onObjectResizeStart=new o.vpe,this.onObjectResized=new o.vpe,this.onObjectSelected=new o.vpe,this.onSetContent=new o.vpe,this.onShow=new o.vpe,this.onSubmit=new o.vpe,this.onUndo=new o.vpe,this.onVisualAid=new o.vpe}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),n})();const N$=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],mM=(n,t,e)=>Va(n,t).pipe(Ke(e)),F$=(n,t)=>"string"==typeof n?n.split(",").map(e=>e.trim()):Array.isArray(n)?n:t;let L$=0;const B$=n=>typeof n<"u"&&"textarea"===n.tagName.toLowerCase(),V$=n=>typeof n>"u"||""===n?[]:Array.isArray(n)?n:n.split(" "),Rie=(n,t)=>V$(n).concat(V$(t)),Oie=()=>{},U$=n=>null==n,Pie=(()=>{let n={script$:null};return{load:(i,r)=>n.script$||(n.script$=Jd(()=>{const s=i.createElement("script");return s.referrerPolicy="origin",s.type="application/javascript",s.src=r,i.head.appendChild(s),Va(s,"load").pipe(v(1),r0(void 0))}).pipe(gN({bufferSize:1,refCount:!0}))),reinitialize:()=>{n={script$:null}}}})(),Nie=new o.OlP("TINYMCE_SCRIPT_SRC"),Fie={provide:Hi,useExisting:(0,o.Gpc)(()=>CF),multi:!0};let CF=(()=>{class n extends Mie{constructor(e,i,r,s){super(),this.platformId=r,this.tinymceScriptSrc=s,this.cloudChannel="6",this.apiKey="no-api-key",this.id="",this.modelEvents="change input undo redo",this.onTouchedCallback=Oie,this.destroy$=new Je.x,this.initialise=()=>{const c={...this.init,selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,plugins:Rie(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:d=>{this._editor=d,mM(d,"init",this.destroy$).subscribe(()=>{this.initEditor(d)}),((n,t,e)=>{(n=>{const t=F$(n.ignoreEvents,[]);return F$(n.allowedEvents,N$).filter(i=>N$.includes(i)&&!t.includes(i))})(n).forEach(r=>{const s=n[r];mM(t,r.substring(2),e).subscribe(c=>{s.observers.length>0&&n.ngZone.run(()=>s.emit({event:c,editor:t}))})})})(this,d,this.destroy$),this.init&&"function"==typeof this.init.setup&&this.init.setup(d)}};B$(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{pM().init(c)})},this._elementRef=e,this.ngZone=i}set disabled(e){this._disabled=e,this._editor&&this._editor.initialized&&("function"==typeof this._editor.mode?.set?this._editor.mode.set(e?"readonly":"design"):this._editor.setMode(e?"readonly":"design"))}get disabled(){return this._disabled}get editor(){return this._editor}writeValue(e){this._editor&&this._editor.initialized?this._editor.setContent(U$(e)?"":e):this.initialValue=null===e?void 0:e}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}ngAfterViewInit(){fr(this.platformId)&&(this.id=this.id||(n=>{const e=(new Date).getTime(),i=Math.floor(1e9*Math.random());return L$++,"tiny-angular_"+i+L$+String(e)})(),this.inline=void 0!==this.inline?!1!==this.inline:!!this.init?.inline,this.createElement(),null!==pM()?this.initialise():this._element&&this._element.ownerDocument&&Pie.load(this._element.ownerDocument,this.getScriptSrc()).pipe(Ke(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),null!==pM()&&pM().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,B$(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}getScriptSrc(){return U$(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(e){mM(e,"blur",this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.onTouchedCallback())}),mM(e,this.modelEvents,this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.emitOnChange(e))}),"string"==typeof this.initialValue&&this.ngZone.run(()=>{e.setContent(this.initialValue),e.getContent()!==this.initialValue&&this.emitOnChange(e),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(e)})}emitOnChange(e){this.onChangeCallback&&this.onChangeCallback(e.getContent({format:this.outputFormat}))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(o.Lbi),o.Y36(Nie,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},standalone:!0,features:[o._Bn([Fie]),o.qOj,o.jDz],decls:1,vars:0,template:function(e,i){1&e&&o.YNc(0,Tie,0,0,"ng-template")},dependencies:[fi,Xb],styles:["[_nghost-%COMP%]{display:block}"]}),n})(),Lie=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[CF]}),n})();const Bie=function(){return{icons:"material",plugins:"wordcount code",min_height:150}};let Vie=(()=>{class n{constructor(e,i,r,s){this.authService=e,this.fb=i,this.activatedRoute=r,this.route=s,this.tinyApi="1o3d924t3ruuy9fupm20cvrr56wdfdg4h8g3pmsyt5rlr0da",this.isNew=!0,this.form=this.fb.group({title:[null,[]],summary:[null,[]],message:[null,[]]})}ngOnInit(){this.userData=this.authService.userData,this.activatedRoute.params.subscribe(e=>{this.pageId=e.id,"add"!==e.id&&(this.isNew=!1,this.authService.getText(this.userData,e.id).subscribe(i=>{const r=i.data();this.form.setValue({title:r.title||"",summary:r.summary||"",message:r.text||""})}))})}logout(){this.authService.signOut()}sendFormData(e){const i={text:e.value.message,summary:e.value.summary,title:e.value.title};this.isNew?this.authService.writeMessage(this.userData,i).then(r=>{this.route.navigate(["editor",r.uid])}):this.authService.updateMessage(this.pageId,this.userData,i).then(r=>{})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(nl),o.Y36(qp),o.Y36(Wh),o.Y36($i))},n.\u0275cmp=o.Xpm({type:n,selectors:[["text-edit-page"]],decls:39,vars:5,consts:[["color","primary"],[1,"spacer"],["routerLink","/dashboard","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["routerLink","/user","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["routerLink","/links","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["routerLink","/editor/add","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"],[1,"dashboard-card"],[1,"form-layout",3,"formGroup","ngSubmit"],[1,"example-full-width"],["formControlName","title","type","text","matInput",""],[1,"form-field"],["cdkTextareaAutosize","","formControlName","summary","matInput","",1,"textarea"],["formControlName","message",1,"textarea",3,"apiKey","init"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(e,i){1&e&&(o.TgZ(0,"mat-toolbar",0)(1,"span"),o._uU(2,"TR"),o.qZA(),o._UZ(3,"span",1),o.TgZ(4,"button",2)(5,"mat-icon"),o._uU(6,"home"),o.qZA()(),o.TgZ(7,"button",3)(8,"mat-icon"),o._uU(9,"face"),o.qZA()(),o.TgZ(10,"button",4)(11,"mat-icon"),o._uU(12,"link"),o.qZA()(),o.TgZ(13,"button",5)(14,"mat-icon"),o._uU(15,"add"),o.qZA()(),o.TgZ(16,"button",6),o.NdJ("click",function(){return i.logout()}),o.TgZ(17,"mat-icon"),o._uU(18,"logout"),o.qZA()()(),o.TgZ(19,"mat-card",7)(20,"form",8),o.NdJ("ngSubmit",function(){return i.sendFormData(i.form)}),o.TgZ(21,"mat-form-field",9)(22,"mat-label"),o._uU(23,"Title"),o.qZA(),o._UZ(24,"input",10),o.qZA(),o.TgZ(25,"mat-accordion")(26,"mat-expansion-panel")(27,"mat-expansion-panel-header")(28,"mat-panel-title"),o._uU(29," Summary "),o.qZA()(),o.TgZ(30,"mat-form-field",11)(31,"mat-label"),o._uU(32,"Message"),o.qZA(),o._UZ(33,"textarea",12),o.qZA()()(),o._UZ(34,"br")(35,"editor",13),o.TgZ(36,"div",14)(37,"button",15),o._uU(38,"Save"),o.qZA()()()()),2&e&&(o.xp6(20),o.Q6J("formGroup",i.form),o.xp6(15),o.Q6J("apiKey",i.tinyApi)("init",o.DdM(4,Bie)),o.xp6(2),o.Q6J("disabled",!i.form.valid))},dependencies:[tl,ea,_o,wY,B2,V2,bY,Rc,nO,ju,Gs,Eh,Wu,Fu,Hl,Kn,lh,jl,Bu,CF],styles:[".dashboard-card[_ngcontent-%COMP%]{max-width:60%;min-height:60%;margin:10px auto}.dashboard-card[_ngcontent-%COMP%]   .form-layout[_ngcontent-%COMP%]{width:100%;max-width:100%}.dashboard-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .dashboard-card[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:100%}@media only screen and (max-width: 600px){.dashboard-card[_ngcontent-%COMP%]{max-width:100%;min-height:100%;margin:10px}.dashboard-card[_ngcontent-%COMP%]   .form-layout[_ngcontent-%COMP%]{width:100%;max-width:100%}.dashboard-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .dashboard-card[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:100%}}"]}),n})();function Uie(n,t){1&n&&(o.TgZ(0,"mat-error"),o._uU(1," This field is required "),o.qZA())}function Hie(n,t){1&n&&(o.TgZ(0,"mat-error"),o._uU(1,' Email has format like "foo@bar.com" '),o.qZA())}function jie(n,t){1&n&&(o.TgZ(0,"mat-error"),o._uU(1," This field is required "),o.qZA())}let Gie=(()=>{class n{constructor(e,i,r){this.fb=e,this.router=i,this.authService=r,this.formDataEmitter=new o.vpe,this.loginForm=this.fb.group({email:[null,[Xo.required,Xo.email]],password:[null,[Xo.required]],remember:[!1,[]]})}set formData(e){let i=e.email||"",r=e.rememeber||!1;localStorage.getItem("saved_email")&&""===i&&(i=localStorage.getItem("saved_email"),r=!0),this.loginForm.setValue({email:i,password:e.password,remember:r})}sendFormData(e){this.authService.signIn(e.value.email,e.value.password)}loginByGoogle(e){this.authService.googleAuth()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(qp),o.Y36($i),o.Y36(nl))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-sign-in"]],inputs:{formData:"formData"},outputs:{formDataEmitter:"formDataEmitter"},decls:34,vars:5,consts:[["color","primary"],[1,"entry-card"],[1,"form-layout"],[3,"formGroup","ngSubmit"],[1,"form-field"],["matInput","","inputmode","text","placeholder","Email","formControlName","email"],[4,"ngIf"],["matInput","","type","password","placeholder","Type password","formControlName","password"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","color","basic",3,"click"],["mat-stroked-button","","routerLink","/forgot-password","color","basic"],["mat-stroked-button","","routerLink","/register-user","color","basic"]],template:function(e,i){if(1&e&&(o.TgZ(0,"mat-toolbar",0)(1,"span"),o._uU(2,"text-reader"),o.qZA()(),o.TgZ(3,"mat-card",1)(4,"h3"),o._uU(5,"Sign in"),o.qZA(),o.TgZ(6,"span")(7,"div",2)(8,"form",3),o.NdJ("ngSubmit",function(){return i.sendFormData(i.loginForm)}),o.TgZ(9,"mat-form-field",4)(10,"mat-label"),o._uU(11,"Email"),o.qZA(),o._UZ(12,"input",5),o.TgZ(13,"mat-error"),o._uU(14,"Email is required"),o.qZA(),o.YNc(15,Uie,2,0,"mat-error",6),o.YNc(16,Hie,2,0,"mat-error",6),o.qZA(),o.TgZ(17,"mat-form-field",4)(18,"mat-label"),o._uU(19,"Password"),o.qZA(),o._UZ(20,"input",7),o.TgZ(21,"mat-error"),o._uU(22,"Password is required"),o.qZA(),o.YNc(23,jie,2,0,"mat-error",6),o.qZA(),o.TgZ(24,"div",8)(25,"button",9),o._uU(26,"Sign Up"),o.qZA()()(),o.TgZ(27,"div",8)(28,"button",10),o.NdJ("click",function(s){return i.loginByGoogle(s)}),o._uU(29,"Login by Google"),o.qZA()()(),o.TgZ(30,"button",11),o._uU(31,"Forgot password?"),o.qZA(),o.TgZ(32,"button",12),o._uU(33,"Don't have an account?"),o.qZA()()()),2&e){let r,s,c;o.xp6(8),o.Q6J("formGroup",i.loginForm),o.xp6(7),o.Q6J("ngIf",null==(r=i.loginForm.get("email"))||null==r.errors?null:r.errors.required),o.xp6(1),o.Q6J("ngIf",null==(s=i.loginForm.get("email"))||null==s.errors?null:s.errors.email),o.xp6(7),o.Q6J("ngIf",null==(c=i.loginForm.get("password"))||null==c.errors?null:c.errors.required),o.xp6(2),o.Q6J("disabled",!i.loginForm.valid)}},dependencies:[Fn,tl,ea,_o,Zp,ju,Gs,Eh,Wu,Fu,Hl,Kn,lh,jl,Bu]}),n})();function zie(n,t){1&n&&(o.TgZ(0,"mat-error"),o._uU(1," This field is required "),o.qZA())}function $ie(n,t){1&n&&(o.TgZ(0,"mat-error"),o._uU(1,' Email has format like "foo@bar.com" '),o.qZA())}function qie(n,t){1&n&&(o.TgZ(0,"mat-error"),o._uU(1," This field is required "),o.qZA())}let Wie=(()=>{class n{constructor(e,i,r){this.fb=e,this.router=i,this.authService=r,this.formDataEmitter=new o.vpe,this.loginForm=this.fb.group({email:[null,[Xo.required,Xo.email]],password:[null,[Xo.required]],remember:[!1,[]]})}set formData(e){let i=e.email||"",r=e.rememeber||!1;localStorage.getItem("saved_email")&&""===i&&(i=localStorage.getItem("saved_email"),r=!0),this.loginForm.setValue({email:i,password:e.password,remember:r})}sendFormData(e){this.authService.signUp(e.value.email,e.value.password)}loginByGoogle(e){this.authService.googleAuth()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(qp),o.Y36($i),o.Y36(nl))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-sign-up"]],inputs:{formData:"formData"},outputs:{formDataEmitter:"formDataEmitter"},decls:32,vars:5,consts:[[1,"main-area"],[1,"login-card"],[1,"form-layout"],[3,"formGroup","ngSubmit"],[1,"form-field"],["matInput","","inputmode","text","placeholder","Email","formControlName","email"],[4,"ngIf"],["matInput","","type","password","placeholder","Type password","formControlName","password"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","color","basic",3,"click"],["mat-stroked-button","","routerLink","/forgot-password","color","basic"],["mat-stroked-button","","routerLink","/register-user","color","basic"]],template:function(e,i){if(1&e&&(o.TgZ(0,"div",0)(1,"mat-card",1)(2,"h3"),o._uU(3,"Sign Up"),o.qZA(),o.TgZ(4,"span")(5,"div",2)(6,"form",3),o.NdJ("ngSubmit",function(){return i.sendFormData(i.loginForm)}),o.TgZ(7,"mat-form-field",4)(8,"mat-label"),o._uU(9,"Email"),o.qZA(),o._UZ(10,"input",5),o.TgZ(11,"mat-error"),o._uU(12,"Email is required"),o.qZA(),o.YNc(13,zie,2,0,"mat-error",6),o.YNc(14,$ie,2,0,"mat-error",6),o.qZA(),o.TgZ(15,"mat-form-field",4)(16,"mat-label"),o._uU(17,"Password"),o.qZA(),o._UZ(18,"input",7),o.TgZ(19,"mat-error"),o._uU(20,"Password is required"),o.qZA(),o.YNc(21,qie,2,0,"mat-error",6),o.qZA(),o.TgZ(22,"div",8)(23,"button",9),o._uU(24,"Register"),o.qZA()(),o.TgZ(25,"div",8)(26,"button",10),o.NdJ("click",function(s){return i.loginByGoogle(s)}),o._uU(27,"Continue by Google"),o.qZA()()()(),o.TgZ(28,"button",11),o._uU(29,"Forgot password?"),o.qZA(),o.TgZ(30,"button",12),o._uU(31,"Don't have an account?"),o.qZA()()()()),2&e){let r,s,c;o.xp6(6),o.Q6J("formGroup",i.loginForm),o.xp6(7),o.Q6J("ngIf",null==(r=i.loginForm.get("email"))||null==r.errors?null:r.errors.required),o.xp6(1),o.Q6J("ngIf",null==(s=i.loginForm.get("email"))||null==s.errors?null:s.errors.email),o.xp6(7),o.Q6J("ngIf",null==(c=i.loginForm.get("password"))||null==c.errors?null:c.errors.required),o.xp6(2),o.Q6J("disabled",!i.loginForm.valid)}},dependencies:[Fn,tl,ea,_o,Zp,ju,Gs,Eh,Fu,Hl,Kn,lh,jl,Bu]}),n})();function Yie(n,t){1&n&&(o.TgZ(0,"mat-error"),o._uU(1," This field is required "),o.qZA())}function Zie(n,t){1&n&&(o.TgZ(0,"mat-error"),o._uU(1,' Email has format like "foo@bar.com" '),o.qZA())}let Kie=(()=>{class n{constructor(e,i,r){this.fb=e,this.router=i,this.authService=r,this.formDataEmitter=new o.vpe,this.loginForm=this.fb.group({email:[null,[Xo.required,Xo.email]]})}set formData(e){this.loginForm.setValue({email:e.email||""})}sendFormData(e){this.authService.forgotPassword(e.value.email)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(qp),o.Y36($i),o.Y36(nl))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-forgot-password"]],inputs:{formData:"formData"},outputs:{formDataEmitter:"formDataEmitter"},decls:24,vars:4,consts:[["color","primary"],[1,"entry-card"],[1,"form-layout"],[3,"formGroup","ngSubmit"],[1,"form-field"],["matInput","","inputmode","text","placeholder","Email","formControlName","email"],[4,"ngIf"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-stroked-button","","routerLink","/sign-in","color","basic"],["mat-stroked-button","","routerLink","/register-user","color","basic"]],template:function(e,i){if(1&e&&(o.TgZ(0,"mat-toolbar",0)(1,"span"),o._uU(2,"text-reader"),o.qZA()(),o.TgZ(3,"mat-card",1)(4,"h3"),o._uU(5,"Reset password"),o.qZA(),o.TgZ(6,"span")(7,"div",2)(8,"form",3),o.NdJ("ngSubmit",function(){return i.sendFormData(i.loginForm)}),o.TgZ(9,"mat-form-field",4)(10,"mat-label"),o._uU(11,"Email"),o.qZA(),o._UZ(12,"input",5),o.TgZ(13,"mat-error"),o._uU(14,"Email is required"),o.qZA(),o.YNc(15,Yie,2,0,"mat-error",6),o.YNc(16,Zie,2,0,"mat-error",6),o.qZA(),o.TgZ(17,"div",7)(18,"button",8),o._uU(19,"Reset password"),o.qZA()()()(),o.TgZ(20,"button",9),o._uU(21,"Sign in"),o.qZA(),o.TgZ(22,"button",10),o._uU(23,"Don't have an account?"),o.qZA()()()),2&e){let r,s;o.xp6(8),o.Q6J("formGroup",i.loginForm),o.xp6(7),o.Q6J("ngIf",null==(r=i.loginForm.get("email"))||null==r.errors?null:r.errors.required),o.xp6(1),o.Q6J("ngIf",null==(s=i.loginForm.get("email"))||null==s.errors?null:s.errors.email),o.xp6(2),o.Q6J("disabled",!i.loginForm.valid)}},dependencies:[Fn,tl,ea,_o,Zp,ju,Gs,Eh,Wu,Fu,Hl,Kn,lh,jl,Bu]}),n})(),Qie=(()=>{class n{constructor(e){this.authService=e,this.email=""}ngOnInit(){this.email=this.authService.userData.email}sendVerification(){this.authService.sendVerificationMail()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(nl))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-verify-email"]],decls:19,vars:1,consts:[["color","primary"],[1,"entry-card"],["mat-raised-button","","color","basic",3,"click"],[2,"text-align","center","font-weight","bold"],["mat-raised-button","","color","basic","routerLink","/login"]],template:function(e,i){1&e&&(o.TgZ(0,"mat-toolbar",0)(1,"span"),o._uU(2,"text-reader"),o.qZA()(),o.TgZ(3,"mat-card",1)(4,"h3"),o._uU(5,"Verification email"),o.qZA(),o.TgZ(6,"p"),o._uU(7,"We have sent a confirmation email to "),o.TgZ(8,"strong"),o._uU(9),o.qZA(),o._uU(10,"."),o.qZA(),o.TgZ(11,"p"),o._uU(12,"Please check your email and click on the link to verfiy your email address."),o.qZA(),o.TgZ(13,"button",2),o.NdJ("click",function(){return i.sendVerification()}),o._uU(14,"Resend verification email"),o.qZA(),o.TgZ(15,"p",3),o._uU(16,"or"),o.qZA(),o.TgZ(17,"button",4),o._uU(18,"Login"),o.qZA()()),2&e&&(o.xp6(9),o.Oqu(i.email))},dependencies:[tl,ea,_o,Wu]}),n})(),Zw=(()=>{class n{constructor(e,i){this.authService=e,this.router=i}canActivate(e,i){return this.authService.isLoggedIn||this.router.navigate(["/"]),!0}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(nl),o.LFG($i))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wm=class{constructor(t,e){this.authService=t,this.router=e,this.messages=[]}ngOnInit(){this.authService.isLoggedIn&&this.router.navigate(["/dashboard"]),this.authService.authState().pipe(bF(this)).subscribe(t=>{t&&this.router.navigate(["/dashboard"])})}};function Xie(n,t){if(1&n&&(o.TgZ(0,"mat-card",9)(1,"mat-card-title"),o._uU(2),o.qZA(),o._UZ(3,"span",10),o.TgZ(4,"mat-card-actions",11)(5,"button",12),o._uU(6,"View"),o.qZA(),o.TgZ(7,"button",12),o._uU(8,"Edit"),o.qZA()()()),2&n){const e=t.$implicit;o.xp6(2),o.Oqu(e.title),o.xp6(1),o.Q6J("innerHTML",e.summary,o.oJD),o.xp6(2),o.Q6J("routerLink","/text/"+e.tid),o.xp6(2),o.Q6J("routerLink","/editor/"+e.tid)}}Wm.\u0275fac=function(t){return new(t||Wm)(o.Y36(nl),o.Y36($i))},Wm.\u0275cmp=o.Xpm({type:Wm,selectors:[["app-entry-page"]],decls:13,vars:0,consts:[["color","primary"],[1,"entry-card"],["routerLink","/login"],["routerLink","/registration"],["routerLink","forgot-password"]],template:function(t,e){1&t&&(o.TgZ(0,"mat-toolbar",0)(1,"span"),o._uU(2,"text-reader"),o.qZA()(),o.TgZ(3,"mat-card",1),o._uU(4," This is a simple demo project where you can create user by Firebase auth, confirm email and look at user data. Follow these links to "),o.TgZ(5,"a",2),o._uU(6,"log in"),o.qZA(),o._uU(7,", "),o.TgZ(8,"a",3),o._uU(9,"registeration"),o.qZA(),o._uU(10," or "),o.TgZ(11,"a",4),o._uU(12,"restoring password"),o.qZA()())},dependencies:[fM,_o,Wu]}),Wm=(0,vF.gn)([yF()],Wm);let Ym=class{constructor(t,e){this.authService=t,this.fb=e,this.messages=[],this.tgKey="",this.tgName="",this.form=this.fb.group({message:[null,[]]})}ngOnInit(){this.userData=this.authService.userData;try{this.authService.authState().subscribe(t=>{this.userData=t?.toJSON()})}catch(t){console.log(t)}try{this.authService.getTexts(this.userData).pipe(bF(this)).subscribe(t=>{t.forEach(e=>{this.messages.push(e.data())})})}catch(t){console.log(t)}try{this.authService.getShareBot(this.userData).subscribe(t=>{const e=t.data();this.userData={...this.userData,...e}})}catch(t){console.log(t)}}sendFormData(t){this.authService.writeMessage(this.userData,t.value.message)}logout(){this.authService.signOut()}};Ym.\u0275fac=function(t){return new(t||Ym)(o.Y36(nl),o.Y36(qp))},Ym.\u0275cmp=o.Xpm({type:Ym,selectors:[["app-dashboard-page"]],decls:21,vars:1,consts:[["color","primary"],[1,"spacer"],["routerLink","/dashboard","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["routerLink","/user","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["routerLink","/links","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["routerLink","/editor/add","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"],[1,"container"],["class","entry-card note",4,"ngFor","ngForOf"],[1,"entry-card","note"],[3,"innerHTML"],["align","end"],["mat-button","",3,"routerLink"]],template:function(t,e){1&t&&(o.TgZ(0,"mat-toolbar",0)(1,"span"),o._uU(2,"TR"),o.qZA(),o._UZ(3,"span",1),o.TgZ(4,"button",2)(5,"mat-icon"),o._uU(6,"home"),o.qZA()(),o.TgZ(7,"button",3)(8,"mat-icon"),o._uU(9,"face"),o.qZA()(),o.TgZ(10,"button",4)(11,"mat-icon"),o._uU(12,"link"),o.qZA()(),o.TgZ(13,"button",5)(14,"mat-icon"),o._uU(15,"add"),o.qZA()(),o.TgZ(16,"button",6),o.NdJ("click",function(){return e.logout()}),o.TgZ(17,"mat-icon"),o._uU(18,"logout"),o.qZA()()(),o.TgZ(19,"div",7),o.YNc(20,Xie,9,4,"mat-card",8),o.qZA()),2&t&&(o.xp6(20),o.Q6J("ngForOf",e.messages))},dependencies:[zr,tl,ea,_o,Or,_R,Rc,Wu],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.note[_ngcontent-%COMP%]{flex-direction:column;margin:10px;min-width:150px}@media only screen and (max-width: 600px){.note[_ngcontent-%COMP%]{width:100%}}.dashboard-card[_ngcontent-%COMP%]{min-width:100px}.dashboard-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}"]}),Ym=(0,vF.gn)([yF()],Ym);const Jie=[{path:"",component:Wm},{path:"dashboard",component:Ym,canActivate:[Zw]},{path:"links",component:qm,canActivate:[Zw]},{path:"editor/:id",component:Vie,canActivate:[Zw]},{path:"text/:id",component:xie,canActivate:[Zw]},{path:"user",component:Sie,canActivate:[Zw]},{path:"login",component:Gie},{path:"registration",component:Wie},{path:"forgot-password",component:Kie},{path:"verify-email",component:Qie},{path:"**",redirectTo:"/",pathMatch:"full"}];let ere=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[C$.forRoot(Jie),C$]}),n})(),tre=(()=>{class n{constructor(){this.title="text-reader"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){1&e&&o._UZ(0,"router-outlet")},dependencies:[oF]}),n})();function j$(n){return new o.vHH(3e3,!1)}function Fre(){return typeof window<"u"&&typeof window.document<"u"}function DF(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Zh(n){switch(n.length){case 0:return new Wp;case 1:return n[0];default:return new zE(n)}}function G$(n,t,e,i,r=new Map,s=new Map){const c=[],d=[];let f=-1,g=null;if(i.forEach(b=>{const E=b.get("offset"),I=E==f,P=I&&g||new Map;b.forEach((F,z)=>{let te=z,Ve=F;if("offset"!==z)switch(te=t.normalizePropertyName(te,c),Ve){case"!":Ve=r.get(z);break;case Gl:Ve=s.get(z);break;default:Ve=t.normalizeStyleValue(z,te,Ve,c)}P.set(te,Ve)}),I||d.push(P),g=P,f=E}),c.length)throw function Ere(n){return new o.vHH(3502,!1)}();return d}function EF(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&SF(e,"start",n)));break;case"done":n.onDone(()=>i(e&&SF(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&SF(e,"destroy",n)))}}function SF(n,t,e){const s=xF(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),c=n._data;return null!=c&&(s._data=c),s}function xF(n,t,e,i,r="",s=0,c){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!c}}function ra(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function z$(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}let TF=(n,t)=>!1,$$=(n,t,e)=>[],q$=null;function MF(n){const t=n.parentNode||n.host;return t===q$?null:t}(DF()||typeof Element<"u")&&(Fre()?(q$=(()=>document.documentElement)(),TF=(n,t)=>{for(;t;){if(t===n)return!0;t=MF(t)}return!1}):TF=(n,t)=>n.contains(t),$$=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let Zm=null,W$=!1;const Y$=TF,Z$=$$;let K$=(()=>{class n{validateStyleProperty(e){return function Bre(n){Zm||(Zm=function Vre(){return typeof document<"u"?document.body:null}()||{},W$=!!Zm.style&&"WebkitAppearance"in Zm.style);let t=!0;return Zm.style&&!function Lre(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Zm.style,!t&&W$&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Zm.style)),t}(e)}matchesElement(e,i){return!1}containsElement(e,i){return Y$(e,i)}getParentElement(e){return MF(e)}query(e,i,r){return Z$(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,c,d=[],f){return new Wp(r,s)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),IF=(()=>{class n{}return n.NOOP=new K$,n})();const AF="ng-enter",gM="ng-leave",_M="ng-trigger",vM=".ng-trigger",X$="ng-animating",kF=".ng-animating";function Kh(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:RF(parseFloat(t[1]),t[2])}function RF(n,t){return"s"===t?1e3*n:n}function yM(n,t,e){return n.hasOwnProperty("duration")?n:function jre(n,t,e){let r,s=0,c="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return t.push(j$()),{duration:0,delay:0,easing:""};r=RF(parseFloat(d[1]),d[2]);const f=d[3];null!=f&&(s=RF(parseFloat(f),d[4]));const g=d[5];g&&(c=g)}else r=n;if(!e){let d=!1,f=t.length;r<0&&(t.push(function nre(){return new o.vHH(3100,!1)}()),d=!0),s<0&&(t.push(function ire(){return new o.vHH(3101,!1)}()),d=!0),d&&t.splice(f,0,j$())}return{duration:r,delay:s,easing:c}}(n,t,e)}function Kw(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function J$(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function Qh(n,t=new Map,e){if(e)for(let[i,r]of e)t.set(i,r);for(let[i,r]of n)t.set(i,r);return t}function t6(n,t,e){return e?t+":"+e+";":""}function n6(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=t6(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=t6(0,qre(e),n.style[e]));n.setAttribute("style",t)}function Uc(n,t,e){n.style&&(t.forEach((i,r)=>{const s=PF(r);e&&!e.has(r)&&e.set(r,n.style[s]),n.style[s]=i}),DF()&&n6(n))}function Km(n,t){n.style&&(t.forEach((e,i)=>{const r=PF(i);n.style[r]=""}),DF()&&n6(n))}function Qw(n){return Array.isArray(n)?1==n.length?n[0]:Jb(n):n}const OF=new RegExp("{{\\s*(.+?)\\s*}}","g");function r6(n){let t=[];if("string"==typeof n){let e;for(;e=OF.exec(n);)t.push(e[1]);OF.lastIndex=0}return t}function bM(n,t,e){const i=n.toString(),r=i.replace(OF,(s,c)=>{let d=t[c];return null==d&&(e.push(function sre(n){return new o.vHH(3003,!1)}()),d=""),d.toString()});return r==i?n:r}function wM(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const $re=/-+([a-z0-9])/g;function PF(n){return n.replace($re,(...t)=>t[1].toUpperCase())}function qre(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function sa(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function ore(n){return new o.vHH(3004,!1)}()}}function s6(n,t){return window.getComputedStyle(n)[t]}function Xre(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Jre(n,t,e){if(":"==n[0]){const f=function ese(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function bre(n){return new o.vHH(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof f)return void t.push(f);n=f}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function yre(n){return new o.vHH(3015,!1)}()),t;const r=i[1],s=i[2],c=i[3];t.push(o6(r,c));"<"==s[0]&&!("*"==r&&"*"==c)&&t.push(o6(c,r))}(i,e,t)):e.push(n),e}const SM=new Set(["true","1"]),xM=new Set(["false","0"]);function o6(n,t){const e=SM.has(n)||xM.has(n),i=SM.has(t)||xM.has(t);return(r,s)=>{let c="*"==n||n==r,d="*"==t||t==s;return!c&&e&&"boolean"==typeof r&&(c=r?SM.has(n):xM.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?SM.has(t):xM.has(t)),c&&d}}const tse=new RegExp("s*:selfs*,?","g");function NF(n,t,e,i){return new nse(n).build(t,e,i)}class nse{constructor(t){this._driver=t}build(t,e,i){const r=new sse(e);return this._resetContextStyleTimingState(r),sa(this,Qw(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],c=[];return"@"==t.name.charAt(0)&&e.errors.push(function lre(){return new o.vHH(3006,!1)}()),t.definitions.forEach(d=>{if(this._resetContextStyleTimingState(e),0==d.type){const f=d,g=f.name;g.toString().split(/\s*,\s*/).forEach(b=>{f.name=b,s.push(this.visitState(f,e))}),f.name=g}else if(1==d.type){const f=this.visitTransition(d,e);i+=f.queryCount,r+=f.depCount,c.push(f)}else e.errors.push(function cre(){return new o.vHH(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:c,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,c=r||{};i.styles.forEach(d=>{d instanceof Map&&d.forEach(f=>{r6(f).forEach(g=>{c.hasOwnProperty(g)||s.add(g)})})}),s.size&&(wM(s.values()),e.errors.push(function ure(n,t){return new o.vHH(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=sa(this,Qw(t.animation),e);return{type:1,matchers:Xre(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Qm(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>sa(this,i,e)),options:Qm(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(c=>{e.currentTime=i;const d=sa(this,c,e);return r=Math.max(r,e.currentTime),d});return e.currentTime=r,{type:3,steps:s,options:Qm(t.options)}}visitAnimate(t,e){const i=function ase(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return FF(yM(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=FF(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=yM(e,t);return FF(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:ft({});if(5==s.type)r=this.visitKeyframes(s,e);else{let c=t.styles,d=!1;if(!c){d=!0;const g={};i.easing&&(g.easing=i.easing),c=ft(g)}e.currentTime+=i.duration+i.delay;const f=this.visitStyle(c,e);f.isEmptyStep=d,r=f}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let d of r)"string"==typeof d?d===Gl?i.push(d):e.errors.push(new o.vHH(3002,!1)):i.push(J$(d));let s=!1,c=null;return i.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(c=d.get("easing"),d.delete("easing")),!s))for(let f of d.values())if(f.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:c,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(c=>{"string"!=typeof c&&c.forEach((d,f)=>{const g=e.collectedStyles.get(e.currentQuerySelector),b=g.get(f);let E=!0;b&&(s!=r&&s>=b.startTime&&r<=b.endTime&&(e.errors.push(function hre(n,t,e,i,r){return new o.vHH(3010,!1)}()),E=!1),s=b.startTime),E&&g.set(f,{startTime:s,endTime:r}),e.options&&function zre(n,t,e){const i=t.params||{},r=r6(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function rre(n){return new o.vHH(3001,!1)}())})}(d,e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function fre(){return new o.vHH(3011,!1)}()),i;let s=0;const c=[];let d=!1,f=!1,g=0;const b=t.steps.map(Ve=>{const Ze=this._makeStyleAst(Ve,e);let rt=null!=Ze.offset?Ze.offset:function ose(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(Ze.styles),et=0;return null!=rt&&(s++,et=Ze.offset=rt),f=f||et<0||et>1,d=d||et<g,g=et,c.push(et),Ze});f&&e.errors.push(function pre(){return new o.vHH(3012,!1)}()),d&&e.errors.push(function mre(){return new o.vHH(3200,!1)}());const E=t.steps.length;let I=0;s>0&&s<E?e.errors.push(function gre(){return new o.vHH(3202,!1)}()):0==s&&(I=1/(E-1));const P=E-1,F=e.currentTime,z=e.currentAnimateTimings,te=z.duration;return b.forEach((Ve,Ze)=>{const rt=I>0?Ze==P?1:I*Ze:c[Ze],et=rt*te;e.currentTime=F+z.delay+et,z.duration=et,this._validateStyleAst(Ve,e),Ve.offset=rt,i.styles.push(Ve)}),i}visitReference(t,e){return{type:8,animation:sa(this,Qw(t.animation),e),options:Qm(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Qm(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Qm(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,c]=function ise(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(tse,"")),n=n.replace(/@\*/g,vM).replace(/@\w+/g,e=>vM+"-"+e.slice(1)).replace(/:animating/g,kF),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,ra(e.collectedStyles,e.currentQuerySelector,new Map);const d=sa(this,Qw(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:c,animation:d,originalSelector:t.selector,options:Qm(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function _re(){return new o.vHH(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:yM(t.timings,e.errors,!0);return{type:12,animation:sa(this,Qw(t.animation),e),timings:i,options:null}}}class sse{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Qm(n){return n?(n=Kw(n)).params&&(n.params=function rse(n){return n?Kw(n):null}(n.params)):n={},n}function FF(n,t,e){return{duration:n,delay:t,easing:e}}function LF(n,t,e,i,r,s,c=null,d=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:c,subTimeline:d}}class TM{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const use=new RegExp(":enter","g"),hse=new RegExp(":leave","g");function BF(n,t,e,i,r,s=new Map,c=new Map,d,f,g=[]){return(new fse).buildKeyframes(n,t,e,i,r,s,c,d,f,g)}class fse{buildKeyframes(t,e,i,r,s,c,d,f,g,b=[]){g=g||new TM;const E=new VF(t,e,g,r,s,b,[]);E.options=f;const I=f.delay?Kh(f.delay):0;E.currentTimeline.delayNextStep(I),E.currentTimeline.setStyles([c],null,E.errors,f),sa(this,i,E);const P=E.timelines.filter(F=>F.containsAnimation());if(P.length&&d.size){let F;for(let z=P.length-1;z>=0;z--){const te=P[z];if(te.element===e){F=te;break}}F&&!F.allowOnlyTimelineStyles()&&F.setStyles([d],null,E.errors,f)}return P.length?P.map(F=>F.buildKeyframes()):[LF(e,[],[],[],0,I,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,c=this._visitSubInstructions(i,r,r.options);s!=c&&e.transformIntoNewTimeline(c)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const c=null!=i.duration?Kh(i.duration):null,d=null!=i.delay?Kh(i.delay):null;return 0!==c&&t.forEach(f=>{const g=e.appendInstructionToTimeline(f,c,d);s=Math.max(s,g.duration+g.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),sa(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=MM);const c=Kh(s.delay);r.delayNextStep(c)}t.steps.length&&(t.steps.forEach(c=>sa(this,c,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?Kh(t.options.delay):0;t.steps.forEach(c=>{const d=e.createSubContext(t.options);s&&d.delayNextStep(s),sa(this,c,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(c=>e.currentTimeline.mergeTimelineCollectedStyles(c)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return yM(e.params?bM(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,d=e.createSubContext().currentTimeline;d.easing=i.easing,t.styles.forEach(f=>{d.forwardTime((f.offset||0)*s),d.setStyles(f.styles,f.easing,e.errors,e.options),d.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(d),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?Kh(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=MM);let c=i;const d=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=d.length;let f=null;d.forEach((g,b)=>{e.currentQueryIndex=b;const E=e.createSubContext(t.options,g);s&&E.delayNextStep(s),g===e.element&&(f=E.currentTimeline),sa(this,t.animation,E),E.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,E.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(c),f&&(e.currentTimeline.mergeTimelineCollectedStyles(f),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,c=Math.abs(s.duration),d=c*(e.currentQueryTotal-1);let f=c*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":f=d-f;break;case"full":f=i.currentStaggerTime}const b=e.currentTimeline;f&&b.delayNextStep(f);const E=b.currentTime;sa(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-E+(r.startTime-i.currentTimeline.startTime)}}const MM={};class VF{constructor(t,e,i,r,s,c,d,f){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=c,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=MM,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new IM(this._driver,e,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=Kh(i.duration)),null!=i.delay&&(r.delay=Kh(i.delay));const s=i.params;if(s){let c=r.params;c||(c=this.options.params={}),Object.keys(s).forEach(d=>{(!e||!c.hasOwnProperty(d))&&(c[d]=bM(s[d],c,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new VF(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=MM,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new pse(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,c){let d=[];if(r&&d.push(this.element),t.length>0){t=(t=t.replace(use,"."+this._enterClassName)).replace(hse,"."+this._leaveClassName);let g=this._driver.query(this.element,t,1!=i);0!==i&&(g=i<0?g.slice(g.length+i,g.length):g.slice(0,i)),d.push(...g)}return!s&&0==d.length&&c.push(function vre(n){return new o.vHH(3014,!1)}()),d}}class IM{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new IM(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Gl),this._currentKeyframe.set(e,Gl);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},c=function mse(n,t){const e=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||t.keys();for(let s of i)e.set(s,Gl)}else Qh(r,e)}),e}(t,this._globalTimelineStyles);for(let[d,f]of c){const g=bM(f,s,i);this._pendingStyles.set(d,g),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??Gl),this._updateStyle(d,g)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,f)=>{const g=Qh(d,new Map,this._backFill);g.forEach((b,E)=>{"!"===b?t.add(E):b===Gl&&e.add(E)}),i||g.set("offset",f/this.duration),r.push(g)});const s=t.size?wM(t.values()):[],c=e.size?wM(e.values()):[];if(i){const d=r[0],f=new Map(d);d.set("offset",0),f.set("offset",1),r=[d,f]}return LF(this.element,r,s,c,this.duration,this.startTime,this.easing,!1)}}class pse extends IM{constructor(t,e,i,r,s,c,d=!1){super(t,e,c.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],c=i+e,d=e/c,f=Qh(t[0]);f.set("offset",0),s.push(f);const g=Qh(t[0]);g.set("offset",c6(d)),s.push(g);const b=t.length-1;for(let E=1;E<=b;E++){let I=Qh(t[E]);const P=I.get("offset");I.set("offset",c6((e+P*i)/c)),s.push(I)}i=c,e=0,r="",t=s}return LF(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function c6(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class UF{}const gse=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class _se extends UF{normalizePropertyName(t,e){return PF(t)}normalizeStyleValue(t,e,i,r){let s="";const c=i.toString().trim();if(gse.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function are(n,t){return new o.vHH(3005,!1)}())}return c+s}}function u6(n,t,e,i,r,s,c,d,f,g,b,E,I){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:c,timelines:d,queriedElements:f,preStyleProps:g,postStyleProps:b,totalTime:E,errors:I}}const HF={};class d6{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function vse(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,s,c,d,f,g,b){const E=[],I=this.ast.options&&this.ast.options.params||HF,F=this.buildStyles(i,d&&d.params||HF,E),z=f&&f.params||HF,te=this.buildStyles(r,z,E),Ve=new Set,Ze=new Map,rt=new Map,et="void"===r,St={params:yse(z,I),delay:this.ast.options?.delay},It=b?[]:BF(t,e,this.ast.animation,s,c,F,te,St,g,E);let fn=0;if(It.forEach(ca=>{fn=Math.max(ca.duration+ca.delay,fn)}),E.length)return u6(e,this._triggerName,i,r,et,F,te,[],[],Ze,rt,fn,E);It.forEach(ca=>{const dd=ca.element,k5=ra(Ze,dd,new Set);ca.preStyleProps.forEach(ug=>k5.add(ug));const RC=ra(rt,dd,new Set);ca.postStyleProps.forEach(ug=>RC.add(ug)),dd!==e&&Ve.add(dd)});const nr=wM(Ve.values());return u6(e,this._triggerName,i,r,et,F,te,It,nr,Ze,rt,fn)}}function yse(n,t){const e=Kw(t);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(e[i]=n[i]);return e}class bse{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i=new Map,r=Kw(this.defaultParams);return Object.keys(t).forEach(s=>{const c=t[s];null!==c&&(r[s]=c)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((c,d)=>{c&&(c=bM(c,r,e));const f=this.normalizer.normalizePropertyName(d,e);c=this.normalizer.normalizeStyleValue(d,f,c,e),i.set(f,c)})}),i}}class Cse{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new bse(r.style,r.options&&r.options.params||{},i))}),h6(this.states,"true","1"),h6(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new d6(t,r,this.states))}),this.fallbackTransition=function Dse(n,t,e){return new d6(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,d)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(c=>c.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function h6(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const Ese=new TM;class Sse{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const i=[],s=NF(this._driver,e,i,[]);if(i.length)throw function Sre(n){return new o.vHH(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,i){const r=t.element,s=G$(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations.get(t);let c;const d=new Map;if(s?(c=BF(this._driver,e,s,AF,gM,new Map,new Map,i,Ese,r),c.forEach(b=>{const E=ra(d,b.element,new Map);b.postStyleProps.forEach(I=>E.set(I,null))})):(r.push(function xre(){return new o.vHH(3300,!1)}()),c=[]),r.length)throw function Tre(n){return new o.vHH(3504,!1)}();d.forEach((b,E)=>{b.forEach((I,P)=>{b.set(P,this._driver.computeStyle(E,P,Gl))})});const g=Zh(c.map(b=>{const E=d.get(b.element);return this._buildPlayer(b,new Map,E)}));return this._playersById.set(t,g),g.onDestroy(()=>this.destroy(t)),this.players.push(g),g}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function Mre(n){return new o.vHH(3301,!1)}();return e}listen(t,e,i,r){const s=xF(e,"","","");return EF(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const f6="ng-animate-queued",jF="ng-animate-disabled",Ase=[],p6={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},kse={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},il="__ng_removed";class GF{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function Nse(n){return n??null}(i?t.value:t),i){const s=Kw(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const Xw="void",zF=new GF(Xw);class Rse{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,rl(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw function Ire(n,t){return new o.vHH(3302,!1)}();if(null==i||0==i.length)throw function Are(n){return new o.vHH(3303,!1)}();if(!function Fse(n){return"start"==n||"done"==n}(i))throw function kre(n,t){return new o.vHH(3400,!1)}();const s=ra(this._elementListeners,t,[]),c={name:e,phase:i,callback:r};s.push(c);const d=ra(this._engine.statesByElement,t,new Map);return d.has(e)||(rl(t,_M),rl(t,_M+"-"+e),d.set(e,zF)),()=>{this._engine.afterFlush(()=>{const f=s.indexOf(c);f>=0&&s.splice(f,1),this._triggers.has(e)||d.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function Rre(n){return new o.vHH(3401,!1)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),c=new $F(this.id,e,t);let d=this._engine.statesByElement.get(t);d||(rl(t,_M),rl(t,_M+"-"+e),this._engine.statesByElement.set(t,d=new Map));let f=d.get(e);const g=new GF(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&f&&g.absorbOptions(f.options),d.set(e,g),f||(f=zF),g.value!==Xw&&f.value===g.value){if(!function Vse(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(f.params,g.params)){const z=[],te=s.matchStyles(f.value,f.params,z),Ve=s.matchStyles(g.value,g.params,z);z.length?this._engine.reportError(z):this._engine.afterFlush(()=>{Km(t,te),Uc(t,Ve)})}return}const I=ra(this._engine.playersByElement,t,[]);I.forEach(z=>{z.namespaceId==this.id&&z.triggerName==e&&z.queued&&z.destroy()});let P=s.matchTransition(f.value,g.value,t,g.params),F=!1;if(!P){if(!r)return;P=s.fallbackTransition,F=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:P,fromState:f,toState:g,player:c,isFallbackTransition:F}),F||(rl(t,f6),c.onStart(()=>{Dv(t,f6)})),c.onDone(()=>{let z=this.players.indexOf(c);z>=0&&this.players.splice(z,1);const te=this._engine.playersByElement.get(t);if(te){let Ve=te.indexOf(c);Ve>=0&&te.splice(Ve,1)}}),this.players.push(c),I.push(c),c}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,vM,!0);i.forEach(r=>{if(r[il])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(c=>c.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),c=new Map;if(s){const d=[];if(s.forEach((f,g)=>{if(c.set(g,f.value),this._triggers.has(g)){const b=this.trigger(t,g,Xw,r);b&&d.push(b)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,c),i&&Zh(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const c=s.name;if(r.has(c))return;r.add(c);const f=this._triggers.get(c).fallbackTransition,g=i.get(c)||zF,b=new GF(Xw),E=new $F(this.id,c,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:c,transition:f,fromState:g,toState:b,player:E,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let c=t;for(;c=c.parentNode;)if(i.statesByElement.get(c)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[il];(!s||s===p6)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){rl(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,c=this._elementListeners.get(s);c&&c.forEach(d=>{if(d.name==i.triggerName){const f=xF(s,i.triggerName,i.fromState.value,i.toState.value);f._data=t,EF(i.player,d.phase,f,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,c=r.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class Ose{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new Rse(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let c=!1,d=this.driver.getParentElement(e);for(;d;){const f=r.get(d);if(f){const g=i.indexOf(f);i.splice(g+1,0,t),c=!0;break}d=this.driver.getParentElement(d)}c||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,i,r){if(AM(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!AM(e))return;const s=e[il];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(e);c>=0&&this.collectedLeaveElements.splice(c,1)}if(t){const c=this._fetchNamespace(t);c&&c.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),rl(t,jF)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Dv(t,jF))}removeNode(t,e,i,r){if(AM(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const c=this.namespacesByHostElement.get(e);c&&c.id!==t&&c.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[il]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return AM(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,vM,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,kF,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Zh(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[il];if(e&&e.setForRemoval){if(t[il]=p6,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(jF)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)rl(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Zh(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function Ore(n){return new o.vHH(3402,!1)}()}_flushAnimations(t,e){const i=new TM,r=[],s=new Map,c=[],d=new Map,f=new Map,g=new Map,b=new Set;this.disabledNodes.forEach(wt=>{b.add(wt);const Rt=this.driver.query(wt,".ng-animate-queued",!0);for(let Vt=0;Vt<Rt.length;Vt++)b.add(Rt[Vt])});const E=this.bodyNode,I=Array.from(this.statesByElement.keys()),P=_6(I,this.collectedEnterElements),F=new Map;let z=0;P.forEach((wt,Rt)=>{const Vt=AF+z++;F.set(Rt,Vt),wt.forEach(On=>rl(On,Vt))});const te=[],Ve=new Set,Ze=new Set;for(let wt=0;wt<this.collectedLeaveElements.length;wt++){const Rt=this.collectedLeaveElements[wt],Vt=Rt[il];Vt&&Vt.setForRemoval&&(te.push(Rt),Ve.add(Rt),Vt.hasAnimation?this.driver.query(Rt,".ng-star-inserted",!0).forEach(On=>Ve.add(On)):Ze.add(Rt))}const rt=new Map,et=_6(I,Array.from(Ve));et.forEach((wt,Rt)=>{const Vt=gM+z++;rt.set(Rt,Vt),wt.forEach(On=>rl(On,Vt))}),t.push(()=>{P.forEach((wt,Rt)=>{const Vt=F.get(Rt);wt.forEach(On=>Dv(On,Vt))}),et.forEach((wt,Rt)=>{const Vt=rt.get(Rt);wt.forEach(On=>Dv(On,Vt))}),te.forEach(wt=>{this.processLeaveNode(wt)})});const St=[],It=[];for(let wt=this._namespaceList.length-1;wt>=0;wt--)this._namespaceList[wt].drainQueuedTransitions(e).forEach(Vt=>{const On=Vt.player,Gr=Vt.element;if(St.push(On),this.collectedEnterElements.length){const As=Gr[il];if(As&&As.setForMove){if(As.previousTriggersValues&&As.previousTriggersValues.has(Vt.triggerName)){const dg=As.previousTriggersValues.get(Vt.triggerName),cl=this.statesByElement.get(Vt.element);if(cl&&cl.has(Vt.triggerName)){const CI=cl.get(Vt.triggerName);CI.value=dg,cl.set(Vt.triggerName,CI)}}return void On.destroy()}}const Yc=!E||!this.driver.containsElement(E,Gr),ua=rt.get(Gr),df=F.get(Gr),Li=this._buildInstruction(Vt,i,df,ua,Yc);if(Li.errors&&Li.errors.length)return void It.push(Li);if(Yc)return On.onStart(()=>Km(Gr,Li.fromStyles)),On.onDestroy(()=>Uc(Gr,Li.toStyles)),void r.push(On);if(Vt.isFallbackTransition)return On.onStart(()=>Km(Gr,Li.fromStyles)),On.onDestroy(()=>Uc(Gr,Li.toStyles)),void r.push(On);const P5=[];Li.timelines.forEach(As=>{As.stretchStartingKeyframe=!0,this.disabledNodes.has(As.element)||P5.push(As)}),Li.timelines=P5,i.append(Gr,Li.timelines),c.push({instruction:Li,player:On,element:Gr}),Li.queriedElements.forEach(As=>ra(d,As,[]).push(On)),Li.preStyleProps.forEach((As,dg)=>{if(As.size){let cl=f.get(dg);cl||f.set(dg,cl=new Set),As.forEach((CI,gB)=>cl.add(gB))}}),Li.postStyleProps.forEach((As,dg)=>{let cl=g.get(dg);cl||g.set(dg,cl=new Set),As.forEach((CI,gB)=>cl.add(gB))})});if(It.length){const wt=[];It.forEach(Rt=>{wt.push(function Pre(n,t){return new o.vHH(3505,!1)}())}),St.forEach(Rt=>Rt.destroy()),this.reportError(wt)}const fn=new Map,nr=new Map;c.forEach(wt=>{const Rt=wt.element;i.has(Rt)&&(nr.set(Rt,Rt),this._beforeAnimationBuild(wt.player.namespaceId,wt.instruction,fn))}),r.forEach(wt=>{const Rt=wt.element;this._getPreviousPlayers(Rt,!1,wt.namespaceId,wt.triggerName,null).forEach(On=>{ra(fn,Rt,[]).push(On),On.destroy()})});const ca=te.filter(wt=>y6(wt,f,g)),dd=new Map;g6(dd,this.driver,Ze,g,Gl).forEach(wt=>{y6(wt,f,g)&&ca.push(wt)});const RC=new Map;P.forEach((wt,Rt)=>{g6(RC,this.driver,new Set(wt),f,"!")}),ca.forEach(wt=>{const Rt=dd.get(wt),Vt=RC.get(wt);dd.set(wt,new Map([...Array.from(Rt?.entries()??[]),...Array.from(Vt?.entries()??[])]))});const ug=[],R5=[],O5={};c.forEach(wt=>{const{element:Rt,player:Vt,instruction:On}=wt;if(i.has(Rt)){if(b.has(Rt))return Vt.onDestroy(()=>Uc(Rt,On.toStyles)),Vt.disabled=!0,Vt.overrideTotalTime(On.totalTime),void r.push(Vt);let Gr=O5;if(nr.size>1){let ua=Rt;const df=[];for(;ua=ua.parentNode;){const Li=nr.get(ua);if(Li){Gr=Li;break}df.push(ua)}df.forEach(Li=>nr.set(Li,Gr))}const Yc=this._buildAnimation(Vt.namespaceId,On,fn,s,RC,dd);if(Vt.setRealPlayer(Yc),Gr===O5)ug.push(Vt);else{const ua=this.playersByElement.get(Gr);ua&&ua.length&&(Vt.parentPlayer=Zh(ua)),r.push(Vt)}}else Km(Rt,On.fromStyles),Vt.onDestroy(()=>Uc(Rt,On.toStyles)),R5.push(Vt),b.has(Rt)&&r.push(Vt)}),R5.forEach(wt=>{const Rt=s.get(wt.element);if(Rt&&Rt.length){const Vt=Zh(Rt);wt.setRealPlayer(Vt)}}),r.forEach(wt=>{wt.parentPlayer?wt.syncPlayerEvents(wt.parentPlayer):wt.destroy()});for(let wt=0;wt<te.length;wt++){const Rt=te[wt],Vt=Rt[il];if(Dv(Rt,gM),Vt&&Vt.hasAnimation)continue;let On=[];if(d.size){let Yc=d.get(Rt);Yc&&Yc.length&&On.push(...Yc);let ua=this.driver.query(Rt,kF,!0);for(let df=0;df<ua.length;df++){let Li=d.get(ua[df]);Li&&Li.length&&On.push(...Li)}}const Gr=On.filter(Yc=>!Yc.destroyed);Gr.length?Lse(this,Rt,Gr):this.processLeaveNode(Rt)}return te.length=0,ug.forEach(wt=>{this.players.push(wt),wt.onDone(()=>{wt.destroy();const Rt=this.players.indexOf(wt);this.players.splice(Rt,1)}),wt.play()}),ug}elementContainsData(t,e){let i=!1;const r=e[il];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let c=[];if(e){const d=this.playersByQueriedElement.get(t);d&&(c=d)}else{const d=this.playersByElement.get(t);if(d){const f=!s||s==Xw;d.forEach(g=>{g.queued||!f&&g.triggerName!=r||c.push(g)})}}return(i||r)&&(c=c.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),c}_beforeAnimationBuild(t,e,i){const s=e.element,c=e.isRemovalTransition?void 0:t,d=e.isRemovalTransition?void 0:e.triggerName;for(const f of e.timelines){const g=f.element,b=g!==s,E=ra(i,g,[]);this._getPreviousPlayers(g,b,c,d,e.toState).forEach(P=>{const F=P.getRealPlayer();F.beforeDestroy&&F.beforeDestroy(),P.destroy(),E.push(P)})}Km(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,c){const d=e.triggerName,f=e.element,g=[],b=new Set,E=new Set,I=e.timelines.map(F=>{const z=F.element;b.add(z);const te=z[il];if(te&&te.removedBeforeQueried)return new Wp(F.duration,F.delay);const Ve=z!==f,Ze=function Bse(n){const t=[];return v6(n,t),t}((i.get(z)||Ase).map(fn=>fn.getRealPlayer())).filter(fn=>!!fn.element&&fn.element===z),rt=s.get(z),et=c.get(z),St=G$(0,this._normalizer,0,F.keyframes,rt,et),It=this._buildPlayer(F,St,Ze);if(F.subTimeline&&r&&E.add(z),Ve){const fn=new $F(t,d,z);fn.setRealPlayer(It),g.push(fn)}return It});g.forEach(F=>{ra(this.playersByQueriedElement,F.element,[]).push(F),F.onDone(()=>function Pse(n,t,e){let i=n.get(t);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}return i}(this.playersByQueriedElement,F.element,F))}),b.forEach(F=>rl(F,X$));const P=Zh(I);return P.onDestroy(()=>{b.forEach(F=>Dv(F,X$)),Uc(f,e.toStyles)}),E.forEach(F=>{ra(r,F,[]).push(P)}),P}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new Wp(t.duration,t.delay)}}class $F{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new Wp,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>EF(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ra(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function AM(n){return n&&1===n.nodeType}function m6(n,t){const e=n.style.display;return n.style.display=t??"none",e}function g6(n,t,e,i,r){const s=[];e.forEach(f=>s.push(m6(f)));const c=[];i.forEach((f,g)=>{const b=new Map;f.forEach(E=>{const I=t.computeStyle(g,E,r);b.set(E,I),(!I||0==I.length)&&(g[il]=kse,c.push(g))}),n.set(g,b)});let d=0;return e.forEach(f=>m6(f,s[d++])),c}function _6(n,t){const e=new Map;if(n.forEach(d=>e.set(d,[])),0==t.length)return e;const r=new Set(t),s=new Map;function c(d){if(!d)return 1;let f=s.get(d);if(f)return f;const g=d.parentNode;return f=e.has(g)?g:r.has(g)?1:c(g),s.set(d,f),f}return t.forEach(d=>{const f=c(d);1!==f&&e.get(f).push(d)}),e}function rl(n,t){n.classList?.add(t)}function Dv(n,t){n.classList?.remove(t)}function Lse(n,t,e){Zh(e).onDone(()=>n.processLeaveNode(t))}function v6(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof zE?v6(i.players,t):t.push(i)}}function y6(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class kM{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Ose(t,e,i),this._timelineEngine=new Sse(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const c=t+"-"+r;let d=this._triggerCache[c];if(!d){const f=[],b=NF(this._driver,s,f,[]);if(f.length)throw function Dre(n,t){return new o.vHH(3404,!1)}();d=function wse(n,t,e){return new Cse(n,t,e)}(r,b,this._normalizer),this._triggerCache[c]=d}this._transitionEngine.registerTrigger(e,r,d)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,c]=z$(i);this._timelineEngine.command(s,e,c,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[c,d]=z$(i);return this._timelineEngine.listen(c,e,d,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Hse=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Uc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Uc(this._element,this._initialStyles),this._endStyles&&(Uc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Km(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Km(this._element,this._endStyles),this._endStyles=null),Uc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function qF(n){let t=null;return n.forEach((e,i)=>{(function jse(n){return"display"===n||"position"===n})(i)&&(t=t||new Map,t.set(i,e))}),t}class b6{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:s6(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class Gse{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return Y$(t,e)}getParentElement(t){return MF(t)}query(t,e,i){return Z$(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,c=[]){const f={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(f.easing=s);const g=new Map,b=c.filter(P=>P instanceof b6);(function Wre(n,t){return 0===n||0===t})(i,r)&&b.forEach(P=>{P.currentSnapshot.forEach((F,z)=>g.set(z,F))});let E=function Gre(n){return n.length?n[0]instanceof Map?n:n.map(t=>J$(t)):[]}(e).map(P=>Qh(P));E=function Yre(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((s,c)=>{i.has(c)||r.push(c),i.set(c,s)}),r.length)for(let s=1;s<t.length;s++){let c=t[s];r.forEach(d=>c.set(d,s6(n,d)))}}return t}(t,E,g);const I=function Use(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=qF(t[0]),t.length>1&&(i=qF(t[t.length-1]))):t instanceof Map&&(e=qF(t)),e||i?new Hse(n,e,i):null}(t,E);return new b6(t,E,f,I)}}let zse=(()=>{class n extends HE{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:o.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?Jb(e):e;return w6(this._renderer,null,i,"register",[r]),new $se(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.FYo),o.LFG(oe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class $se extends class jE{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new qse(this._id,t,e||{},this._renderer)}}class qse{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return w6(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function w6(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const C6="@.disabled";let Wse=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,c)=>{const d=c?.parentNode(s);d&&c.removeChild(d,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let b=this._rendererCache.get(s);return b||(b=new D6("",s,this.engine),this._rendererCache.set(s,b)),b}const c=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,e);const f=b=>{Array.isArray(b)?b.forEach(f):this.engine.registerTrigger(c,d,e,b.name,b)};return i.data.animation.forEach(f),new Yse(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,d]=s;c(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.FYo),o.LFG(kM),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class D6{constructor(t,e,i){this.namespaceId=t,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==C6?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Yse extends D6{constructor(t,e,i,r){super(e,i,r),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==C6?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function Zse(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.slice(1),c="";return"@"!=s.charAt(0)&&([s,c]=function Kse(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,c,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(t,e,i)}}let Qse=(()=>{class n extends kM{constructor(e,i,r,s){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(oe),o.LFG(IF),o.LFG(UF),o.LFG(o.z2F))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const E6=[{provide:HE,useClass:zse},{provide:UF,useFactory:function Xse(){return new _se}},{provide:kM,useClass:Qse},{provide:o.FYo,useFactory:function Jse(n,t,e){return new Wse(n,t,e)},deps:[Wr,kM,o.R0b]}],WF=[{provide:IF,useFactory:()=>new Gse},{provide:o.QbO,useValue:"BrowserAnimations"},...E6],S6=[{provide:IF,useClass:K$},{provide:o.QbO,useValue:"NoopAnimations"},...E6];let eoe=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?S6:WF}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:WF,imports:[Tn]}),n})();const x6="firebasestorage.googleapis.com",T6="storageBucket";class qi extends L.ZR{constructor(t,e){super(YF(t),`Firebase Storage: ${e} (${YF(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qi.prototype)}_codeEquals(t){return YF(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function YF(n){return"storage/"+n}function ZF(){return new qi("unknown","An unknown error occurred, please check the error payload for server response.")}function M6(){return new qi("canceled","User canceled the upload/download.")}function I6(){return new qi("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ev(n){return new qi("invalid-argument",n)}function A6(){return new qi("app-deleted","The Firebase app was deleted.")}function k6(n){return new qi("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Jw(n,t){return new qi("invalid-format","String does not match format '"+n+"': "+t)}function eC(n){throw new qi("internal-error","Internal error: "+n)}class Ms{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=Ms.makeFromUrl(t,e)}catch{return new Ms(t,"")}if(""===i.path)return i;throw function uoe(n){return new qi("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function g(et){et.path_=decodeURIComponent(et.path)}const E=e.replace(/[.]/g,"\\."),rt=[{regex:d,indices:{bucket:1,path:3},postModify:function s(et){"/"===et.path.charAt(et.path.length-1)&&(et.path_=et.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${E}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:g},{regex:new RegExp(`^https?://${e===x6?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:g}];for(let et=0;et<rt.length;et++){const St=rt[et],It=St.regex.exec(t);if(It){let nr=It[St.indices.path];nr||(nr=""),i=new Ms(It[St.indices.bucket],nr),St.postModify(i);break}}if(null==i)throw function coe(n){return new qi("invalid-url","Invalid URL '"+n+"'.")}(t);return i}}class poe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function OM(n){return"string"==typeof n||n instanceof String}function R6(n){return KF()&&n instanceof Blob}function KF(){return typeof Blob<"u"}function QF(n,t,e,i){if(i<t)throw Ev(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw Ev(`Invalid value for '${n}'. Expected ${e} or less.`)}function ad(n,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function O6(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}var Xh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Xh||(Xh={})),Xh))();class boe{constructor(t,e,i,r,s,c,d,f,g,b,E){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=f,this.timeout_=g,this.progressCallback_=b,this.connectionFactory_=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,P)=>{this.resolve_=I,this.reject_=P,this.start_()})}start_(){const e=(i,r)=>{const s=this.resolve_,c=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());!function _oe(n){return void 0!==n}(f)?s():s(f)}catch(f){c(f)}else if(null!==d){const f=ZF();f.serverResponse=d.getErrorText(),c(this.errorCallback_?this.errorCallback_(d,f):f)}else c(r.canceled?this.appDelete_?A6():M6():function loe(){return new qi("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?e(0,new PM(!1,null,!0)):this.backoffId_=function moe(n,t,e){let i=1,r=null,s=null,c=!1,d=0;function f(){return 2===d}let g=!1;function b(...te){g||(g=!0,t.apply(null,te))}function E(te){r=setTimeout(()=>{r=null,n(P,f())},te)}function I(){s&&clearTimeout(s)}function P(te,...Ve){if(g)return void I();if(te)return I(),void b.call(null,te,...Ve);if(f()||c)return I(),void b.call(null,te,...Ve);let rt;i<64&&(i*=2),1===d?(d=2,rt=0):rt=1e3*(i+Math.random()),E(rt)}let F=!1;function z(te){F||(F=!0,I(),!g&&(null!==r?(te||(d=2),clearTimeout(r),E(0)):te||(d=1)))}return E(0),s=setTimeout(()=>{c=!0,z(!0)},e),z}((i,r)=>{if(r)return void i(!1,new PM(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const d=s.getErrorCode()===Xh.NO_ERROR,f=s.getStatus();if(!d||this.isRetryStatusCode_(f)){const b=s.getErrorCode()===Xh.ABORT;return void i(!1,new PM(!1,null,b))}const g=-1!==this.successCodes_.indexOf(f);i(!0,new PM(g,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function goe(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,r=-1!==[408,429].indexOf(t),s=-1!==this.additionalRetryCodes_.indexOf(t);return e||r||s}}class PM{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function Toe(...n){const t=function xoe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}if(KF())return new Blob(n);throw new qi("unsupported-environment","This browser doesn't seem to support creating Blobs")}const oa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class XF{constructor(t,e){this.data=t,this.contentType=e||null}}function JF(n,t){switch(n){case oa.RAW:return new XF(P6(t));case oa.BASE64:case oa.BASE64URL:return new XF(N6(n,t));case oa.DATA_URL:return new XF(function koe(n){const t=new F6(n);return t.base64?N6(oa.BASE64,t.rest):function Aoe(n){let t;try{t=decodeURIComponent(n)}catch{throw Jw(oa.DATA_URL,"Malformed data URL.")}return P6(t)}(t.rest)}(t),function Roe(n){return new F6(n).contentType}(t))}throw ZF()}function P6(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function N6(n,t){switch(n){case oa.BASE64:{const r=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(r||s)throw Jw(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case oa.BASE64URL:{const r=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(r||s)throw Jw(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function Ioe(n){return atob(n)}(t)}catch{throw Jw(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}class F6{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw Jw(oa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function Ooe(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class Hc{constructor(t,e){let i=0,r="";R6(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(R6(this.data_)){const r=function Moe(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===r?null:new Hc(r)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new Hc(i,!0)}}static getBlob(...t){if(KF()){const e=t.map(i=>i instanceof Hc?i.data_:i);return new Hc(Toe.apply(null,e))}{const e=t.map(c=>OM(c)?JF(oa.RAW,c).data:c.data_);let i=0;e.forEach(c=>{i+=c.byteLength});const r=new Uint8Array(i);let s=0;return e.forEach(c=>{for(let d=0;d<c.length;d++)r[s++]=c[d]}),new Hc(r,!0)}}uploadData(){return this.data_}}function eL(n){let t;try{t=JSON.parse(n)}catch{return null}return function yoe(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function L6(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function Foe(n,t){return t}class Xs{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||Foe}}let NM=null;function tC(){if(NM)return NM;const n=[];n.push(new Xs("bucket")),n.push(new Xs("generation")),n.push(new Xs("metageneration")),n.push(new Xs("name","fullPath",!0));const e=new Xs("name");e.xform=function t(s,c){return function Loe(n){return!OM(n)||n.length<2?n:L6(n)}(c)},n.push(e);const r=new Xs("size");return r.xform=function i(s,c){return void 0!==c?Number(c):c},n.push(r),n.push(new Xs("timeCreated")),n.push(new Xs("updated")),n.push(new Xs("md5Hash",null,!0)),n.push(new Xs("cacheControl",null,!0)),n.push(new Xs("contentDisposition",null,!0)),n.push(new Xs("contentEncoding",null,!0)),n.push(new Xs("contentLanguage",null,!0)),n.push(new Xs("contentType",null,!0)),n.push(new Xs("metadata","customMetadata",!0)),NM=n,NM}function B6(n,t,e){const i=eL(t);return null===i?null:function Voe(n,t,e){const i={type:"file"},r=e.length;for(let s=0;s<r;s++){const c=e[s];i[c.local]=c.xform(i,t[c.server])}return function Boe(n,t){Object.defineProperty(n,"ref",{get:function e(){const s=new Ms(n.bucket,n.fullPath);return t._makeStorageReference(s)}})}(i,n),i}(n,i,e)}function tL(n,t){const e={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}const V6="prefixes";class jc{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Gc(n){if(!n)throw ZF()}function FM(n,t){return function e(i,r){const s=B6(n,r,t);return Gc(null!==s),s}}function Sv(n){return function t(e,i){let r;return r=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function ooe(){return new qi("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function soe(){return new qi("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function roe(n){return new qi("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function aoe(n){return new qi("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.serverResponse=i.serverResponse,r}}function nC(n){const t=Sv(n);return function e(i,r){let s=t(i,r);return 404===i.getStatus()&&(s=function ioe(n){return new qi("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function H6(n,t,e){const r=ad(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new jc(r,"GET",FM(n,e),c);return d.errorHandler=nC(t),d}function $oe(n,t,e,i,r){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),r&&(s.maxResults=r);const d=ad(t.bucketOnlyServerUrl(),n.host,n._protocol),g=n.maxOperationRetryTime,b=new jc(d,"GET",function Goe(n,t){return function e(i,r){const s=function joe(n,t,e){const i=eL(e);return null===i?null:function Hoe(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[V6])for(const r of e[V6]){const s=r.replace(/\/$/,""),c=n._makeStorageReference(new Ms(t,s));i.prefixes.push(c)}if(e.items)for(const r of e.items){const s=n._makeStorageReference(new Ms(t,r.name));i.items.push(s)}return i}(n,t,i)}(n,t,r);return Gc(null!==s),s}}(n,t.bucket),g);return b.urlParams=s,b.errorHandler=Sv(t),b}function G6(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=function Zoe(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class LM{constructor(t,e,i,r){this.current=t,this.total=e,this.finalized=!!i,this.metadata=r||null}}function nL(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{Gc(!1)}return Gc(!!e&&-1!==(t||["active"]).indexOf(e)),e}const Joe={STATE_CHANGED:"state_changed"},Js={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function iL(n){switch(n){case"running":case"pausing":case"canceling":return Js.RUNNING;case"paused":return Js.PAUSED;case"success":return Js.SUCCESS;case"canceled":return Js.CANCELED;default:return Js.ERROR}}class eae{constructor(t,e,i){if(function voe(n){return"function"==typeof n}(t)||null!=e||null!=i)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function xv(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class nae extends class tae{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xh.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xh.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xh.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw eC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw eC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw eC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw eC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw eC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function Kl(){return new nae}class W6{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=tC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=r,this._transition("error"))},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function Koe(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c=G6(t,i,r),d={name:c.fullPath},f=ad(s,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},E=tL(c,e),F=new jc(f,"POST",function P(z){let te;nL(z);try{te=z.getResponseHeader("X-Goog-Upload-URL")}catch{Gc(!1)}return Gc(OM(te)),te},n.maxUploadRetryTime);return F.urlParams=d,F.headers=b,F.body=E,F.errorHandler=Sv(t),F}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Kl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const r=function Qoe(n,t,e,i){const f=new jc(e,"POST",function s(g){const b=nL(g,["active","final"]);let E=null;try{E=g.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Gc(!1)}E||Gc(!1);const I=Number(E);return Gc(!isNaN(I)),new LM(I,i.size(),"final"===b)},n.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=Sv(t),f}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(r,Kl,e,i);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new LM(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let c;try{c=function Xoe(n,t,e,i,r,s,c,d){const f=new LM(0,0);if(c?(f.current=c.current,f.total=c.total):(f.current=0,f.total=i.size()),i.size()!==f.total)throw function hoe(){return new qi("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const g=f.total-f.current;let b=g;r>0&&(b=Math.min(b,r));const E=f.current,F={"X-Goog-Upload-Command":b===g?"upload, finalize":"upload","X-Goog-Upload-Offset":`${f.current}`},z=i.slice(E,E+b);if(null===z)throw I6();const rt=new jc(e,"POST",function te(et,St){const It=nL(et,["active","final"]),fn=f.current+b,nr=i.size();let ca;return ca="final"===It?FM(t,s)(et,St):null,new LM(fn,nr,"final"===It,ca)},t.maxUploadRetryTime);return rt.headers=F,rt.body=z.uploadData(),rt.progressCallback=d||null,rt.errorHandler=Sv(n),rt}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const d=this._ref.storage._makeRequest(c,Kl,r,s);this._request=d,d.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=H6(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Kl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function z6(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},f=function d(){let rt="";for(let et=0;et<2;et++)rt+=Math.random().toString().slice(2);return rt}();c["Content-Type"]="multipart/related; boundary="+f;const g=G6(t,i,r),b=tL(g,e),P=Hc.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+f+"\r\nContent-Type: "+g.contentType+"\r\n\r\n",i,"\r\n--"+f+"--");if(null===P)throw I6();const F={name:g.fullPath},z=ad(s,n.host,n._protocol),Ve=n.maxUploadRetryTime,Ze=new jc(z,"POST",FM(n,e),Ve);return Ze.urlParams=F,Ze.headers=c,Ze.body=P.uploadData(),Ze.errorHandler=Sv(t),Ze}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Kl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=M6(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=iL(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,r){const s=new eae(e||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(iL(this._state)){case Js.SUCCESS:xv(this._resolve.bind(null,this.snapshot))();break;case Js.CANCELED:case Js.ERROR:xv(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(iL(this._state)){case Js.RUNNING:case Js.PAUSED:t.next&&xv(t.next.bind(t,this.snapshot))();break;case Js.SUCCESS:t.complete&&xv(t.complete.bind(t))();break;default:t.error&&xv(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class Xm{constructor(t,e){this._service=t,this._location=e instanceof Ms?e:Ms.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Xm(t,e)}get root(){const t=new Ms(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return L6(this._location.path)}get storage(){return this._service}get parent(){const t=function Poe(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Ms(this._location.bucket,t);return new Xm(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw k6(t)}}function Z6(n,t,e){return rL.apply(this,arguments)}function rL(){return rL=(0,Se.Z)(function*(n,t,e){const r=yield K6(n,{pageToken:e});t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield Z6(n,t,r.nextPageToken))}),rL.apply(this,arguments)}function K6(n,t){null!=t&&"number"==typeof t.maxResults&&QF("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=$oe(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,Kl)}function pae(n){n._throwIfRoot("getDownloadURL");const t=function qoe(n,t,e){const r=ad(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new jc(r,"GET",function zoe(n,t){return function e(i,r){const s=B6(n,r,t);return Gc(null!==s),function Uoe(n,t,e,i){const r=eL(t);if(null===r||!OM(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(g=>{const E=n.fullPath;return ad("/b/"+c(n.bucket)+"/o/"+c(E),e,i)+O6({alt:"media",token:g})})[0]}(s,r,n.host,n._protocol)}}(n,e),c);return d.errorHandler=nC(t),d}(n.storage,n._location,tC());return n.storage.makeRequestWithTokens(t,Kl).then(e=>{if(null===e)throw function foe(){return new qi("no-download-url","The given file does not have any download URLs.")}();return e})}function Q6(n,t){const e=function Noe(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),i=new Ms(n._location.bucket,e);return new Xm(n.storage,i)}function X6(n,t){if(n instanceof sL){const e=n;if(null==e._bucket)throw function doe(){return new qi("no-default-bucket","No default bucket found. Did you set the '"+T6+"' property when initializing the app?")}();const i=new Xm(e,e._bucket);return null!=t?X6(i,t):i}return void 0!==t?Q6(n,t):n}function vae(n,t){if(t&&function gae(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof sL)return function _ae(n,t){return new Xm(n,t)}(n,t);throw Ev("To use ref(service, url), the first argument must be a Storage instance.")}return X6(n,t)}function J6(n,t){const e=t?.[T6];return null==e?null:Ms.makeFromBucketSpec(e,n)}class sL{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=x6,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Ms.makeFromBucketSpec(r,this._host):J6(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Ms.makeFromBucketSpec(this._url,t):J6(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){QF("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){QF("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,Se.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,Se.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Xm(this,t)}_makeRequest(t,e,i,r){if(this._deleted)return new poe(A6());{const s=function Soe(n,t,e,i,r,s){const c=O6(n.urlParams),d=n.url+c,f=Object.assign({},n.headers);return function Doe(n,t){t&&(n["X-Firebase-GMPID"]=t)}(f,t),function woe(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(f,e),function Coe(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(f,s),function Eoe(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(f,i),new boe(d,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r)}(t,this._appId,i,r,e,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(t,e){var i=this;return(0,Se.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,s).getPromise()})()}}const eq="@firebase/storage";function iq(n,t){return vae(n=(0,L.m9)(n),t)}function Iae(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new sL(e,i,r,t,zs.SDK_VERSION)}!function Aae(){(0,zs._registerComponent)(new Wl.wA("storage",Iae,"PUBLIC").setMultipleInstances(!0)),(0,zs.registerVersion)(eq,"0.9.9",""),(0,zs.registerVersion)(eq,"0.9.9","esm2017")}();class BM{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class rq{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new BM(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new BM(i,this,this._ref))},e)}on(t,e,i,r){let s;return e&&(s="function"==typeof e?c=>e(new BM(c,this,this._ref)):{next:e.next?c=>e.next(new BM(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,r||void 0)}}class sq{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new ld(t,this._service))}get items(){return this._delegate.items.map(t=>new ld(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ld{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function Tae(n,t){return Q6(n,t)}(this._delegate,t);return new ld(e,this.storage)}get root(){return new ld(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new ld(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new rq(function bae(n,t,e){return function cae(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new W6(n,new Hc(t),e)}(n=(0,L.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=oa.RAW,i){this._throwIfRoot("putString");const r=JF(e,t),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new rq(new W6(this._delegate,new Hc(r.data,!0),s),this)}listAll(){return function Eae(n){return function dae(n){const t={prefixes:[],items:[]};return Z6(n,t).then(()=>t)}(n=(0,L.m9)(n))}(this._delegate).then(t=>new sq(t,this.storage))}list(t){return function Dae(n,t){return K6(n=(0,L.m9)(n),t)}(this._delegate,t||void 0).then(e=>new sq(e,this.storage))}getMetadata(){return function wae(n){return function hae(n){n._throwIfRoot("getMetadata");const t=H6(n.storage,n._location,tC());return n.storage.makeRequestWithTokens(t,Kl)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(t){return function Cae(n,t){return function fae(n,t){n._throwIfRoot("updateMetadata");const e=function Woe(n,t,e,i){const s=ad(t.fullServerUrl(),n.host,n._protocol),d=tL(e,i),g=n.maxOperationRetryTime,b=new jc(s,"PATCH",FM(n,i),g);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=d,b.errorHandler=nC(t),b}(n.storage,n._location,t,tC());return n.storage.makeRequestWithTokens(e,Kl)}(n=(0,L.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function Sae(n){return pae(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function xae(n){return function mae(n){n._throwIfRoot("deleteObject");const t=function Yoe(n,t){const i=ad(t.fullServerUrl(),n.host,n._protocol),d=new jc(i,"DELETE",function c(f,g){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=nC(t),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,Kl)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw k6(t)}}class oq{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(aq(t))throw Ev("ref() expected a child path but got a URL, use refFromURL instead.");return new ld(iq(this._delegate,t),this)}refFromURL(t){if(!aq(t))throw Ev("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ms.makeFromUrl(t,this._delegate.host)}catch{throw Ev("refFromUrl() expected a valid full URL but got an invalid one.")}return new ld(iq(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function Mae(n,t,e,i={}){!function yae(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,L.Sg)(r,n.app.options.projectId))}(n,t,e,i)}(this._delegate,t,e,i)}}function aq(n){return/^[A-Za-z]+:\/\//.test(n)}function Pae(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new oq(e,i)}function lq(n){const t=function Fae(n){return new si.y(t=>{const e=c=>t.next(c);e(n.snapshot);const s=n.on("state_changed",e);return n.then(c=>{e(c),t.complete()},c=>{e(n.snapshot),(c=>{t.error(c)})(c)}),function(){s()}}).pipe(Nd(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,w.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function VM(n){return{getDownloadURL:()=>ct(void 0).pipe(Pn.fc,Qn(()=>n.getDownloadURL()),Pn.iC),getMetadata:()=>ct(void 0).pipe(Pn.fc,Qn(()=>n.getMetadata()),Pn.iC),delete:()=>(0,ln.D)(n.delete()),child:t=>VM(n.child(t)),updateMetadata:t=>(0,ln.D)(n.updateMetadata(t)),put:(t,e)=>lq(n.put(t,e)),putString:(t,e,i)=>lq(n.putString(t,e,i)),list:t=>(0,ln.D)(n.list(t)),listAll:()=>(0,ln.D)(n.listAll())}}!function Nae(n){const t={TaskState:Js,TaskEvent:Joe,StringFormat:oa,Storage:oq,Reference:ld};n.INTERNAL.registerComponent(new Wl.wA("storage-compat",Pae,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(CO.Z);const Lae=new o.OlP("angularfire2.storageBucket"),Bae=new o.OlP("angularfire2.storage.maxUploadRetryTime"),Vae=new o.OlP("angularfire2.storage.maxOperationRetryTime"),Uae=new o.OlP("angularfire2.storage.use-emulator");let Hae=(()=>{class n{constructor(e,i,r,s,c,d,f,g,b,E){const I=(0,br.on)(e,c,i);this.storage=(0,br.cc)(`${I.name}.storage.${r}`,"AngularFireStorage",I.name,()=>{const P=c.runOutsideAngular(()=>I.storage(r||void 0)),F=b;return F&&P.useEmulator(...F),f&&P.setMaxUploadRetryTime(f),g&&P.setMaxOperationRetryTime(g),P},[f,g])}ref(e){return VM(this.storage.ref(e))}refFromURL(e){return VM(this.storage.refFromURL(e))}upload(e,i,r){return VM(this.storage.ref(e)).put(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(br.Dh),o.LFG(br.xv,8),o.LFG(Lae,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Pn.HU),o.LFG(Bae,8),o.LFG(Vae,8),o.LFG(Uae,8),o.LFG(Fw,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jae=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),Gae=(()=>{class n{constructor(){WT.Z.registerVersion("angularfire",Pn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Hae],imports:[jae]}),n})();const cq="@firebase/database";let oL="";function dq(n){oL=n}class qae{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,L.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,L.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class Wae{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,L.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const hq=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new qae(t)}}catch{}return new Wae},Jm=hq("localStorage"),aL=hq("sessionStorage"),Tv=new ql.Yd("@firebase/database"),fq=function(){let n=1;return function(){return n++}}(),pq=function(n){const t=(0,L.dS)(n),e=new L.gQ;e.update(t);const i=e.digest();return L.US.encodeByteArray(i)},iC=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=iC.apply(null,i):t+="object"==typeof i?(0,L.Pz)(i):i,t+=" "}return t};let eg=null,mq=!0;const gq=function(n,t){(0,L.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Tv.logLevel=ql.in.VERBOSE,eg=Tv.log.bind(Tv),t&&aL.set("logging_enabled",!0)):"function"==typeof n?eg=n:(eg=null,aL.remove("logging_enabled"))},Hr=function(...n){if(!0===mq&&(mq=!1,null===eg&&!0===aL.get("logging_enabled")&&gq(!0)),eg){const t=iC.apply(null,n);eg(t)}},rC=function(n){return function(...t){Hr(n,...t)}},lL=function(...n){const t="FIREBASE INTERNAL ERROR: "+iC(...n);Tv.error(t)},zc=function(...n){const t=`FIREBASE FATAL ERROR: ${iC(...n)}`;throw Tv.error(t),new Error(t)},Is=function(...n){const t="FIREBASE WARNING: "+iC(...n);Tv.warn(t)},UM=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},cd="[MIN_NAME]",$c="[MAX_NAME]",tg=function(n,t){if(n===t)return 0;if(n===cd||t===$c)return-1;if(t===cd||n===$c)return 1;{const e=HM(n),i=HM(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},Kae=function(n,t){return n===t?0:n<t?-1:1},sC=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Pz)(t))},cL=function(n){if("object"!=typeof n||null===n)return(0,L.Pz)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,L.Pz)(t[i]),e+=":",e+=cL(n[t[i]]);return e+="}",e},_q=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function jr(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const vq=function(n){(0,L.hu)(!UM(n),"Invalid JSON number");const i=1023;let r,s,c,d,f;0===n?(s=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,c=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const g=[];for(f=52;f;f-=1)g.push(c%2?1:0),c=Math.floor(c/2);for(f=11;f;f-=1)g.push(s%2?1:0),s=Math.floor(s/2);g.push(r?1:0),g.reverse();const b=g.join("");let E="";for(f=0;f<64;f+=8){let I=parseInt(b.substr(f,8),2).toString(16);1===I.length&&(I="0"+I),E+=I}return E.toLowerCase()},ele=new RegExp("^-?(0*)\\d{1,10}$"),yq=-2147483648,uL=2147483647,HM=function(n){if(ele.test(n)){const t=Number(n);if(t>=yq&&t<=uL)return t}return null},Mv=function(n){try{n()}catch(t){setTimeout(()=>{throw Is("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},oC=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class nle{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Is(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ile{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Hr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Is(t)}}let aC=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Eq=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Tq="websocket",Mq="long_polling";class hL{constructor(t,e,i,r,s=!1,c="",d=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Jm.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Jm.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Iq(n,t,e){let i;if((0,L.hu)("string"==typeof t,"typeof type must == string"),(0,L.hu)("object"==typeof e,"typeof params must == object"),t===Tq)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==Mq)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function rle(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return jr(e,(s,c)=>{r.push(s+"="+c)}),i+r.join("&")}class sle{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,L.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,L.p$)(this.counters_)}}const fL={},pL={};function mL(n){const t=n.toString();return fL[t]||(fL[t]=new sle),fL[t]}class ale{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Mv(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Jh{constructor(t,e,i,r,s,c,d){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=rC(t),this.stats_=mL(e),this.urlFn=f=>(this.appCheckToken&&(f.ac=this.appCheckToken),Iq(e,Mq,f))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new ale(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gL((...s)=>{const[c,d,f,g,b]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=d,this.password=f;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Eq.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Jh.forceAllow_=!0}static forceDisallow(){Jh.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!Jh.forceAllow_&&(Jh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,L.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,L.h$)(e),r=_q(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,L.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class gL{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=fq(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=gL.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){Hr("frame writing exception"),d.stack&&Hr(d.stack),Hr(d)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Hr("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,L.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Hr("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let GM=null;typeof MozWebSocket<"u"?GM=MozWebSocket:typeof WebSocket<"u"&&(GM=WebSocket);let Iv=(()=>{class n{constructor(e,i,r,s,c,d,f){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=rC(this.connId),this.stats_=mL(i),this.connURL=n.connectionURL_(i,d,f,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,c){const d={v:"5"};return!(0,L.Yr)()&&typeof location<"u"&&location.hostname&&Eq.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),c&&(d.p=c),Iq(e,Tq,d)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Jm.set("previous_websocket_failure",!0);try{let r;if((0,L.Yr)()){r={headers:{"User-Agent":`Firebase/5/${oL}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,d=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new GM(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==GM&&!n.forceDisallow_}static previouslyFailed(){return Jm.isInMemoryStorage||!0===Jm.get("previous_websocket_failure")}markConnectionHealthy(){Jm.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,L.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,L.Pz)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=_q(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Fq=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Jh,Iv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=Iv&&Iv.isAvailable();let r=i&&!Iv.previouslyFailed();if(e.webSocketOnly&&(i||Is("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Iv];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Gq{constructor(t,e,i,r,s,c,d,f,g,b){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=f,this.onKill_=g,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=rC("c:"+this.id+":"),this.transportManager_=new Fq(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=oC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=sC("t",t),i=sC("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=sC("t",t),i=sC("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=sC("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?lL("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):lL("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Is("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),oC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):oC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Jm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class zq{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class $q{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,L.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,L.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class zM extends $q{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new zM}getInitialEvent(t){return(0,L.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Bn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function Nn(){return new Bn("")}function dn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ef(n){return n.pieces_.length-n.pieceNum_}function Xn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Bn(n.pieces_,t)}function vL(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function lC(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function Yq(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Bn(t,0)}function Ii(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Bn)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new Bn(e,0)}function hn(n){return n.pieceNum_>=n.pieces_.length}function eo(n,t){const e=dn(n),i=dn(t);if(null===e)return t;if(e===i)return eo(Xn(n),Xn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function Ile(n,t){const e=lC(n,0),i=lC(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=tg(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function yL(n,t){if(ef(n)!==ef(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function sl(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(ef(n)>ef(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class Ale{constructor(t,e){this.errorPrefix_=e,this.parts_=lC(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,L.ug)(this.parts_[i]);Zq(this)}}function Zq(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ng(n))}function ng(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class bL extends $q{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new bL}getInitialEvent(t){return(0,L.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const cC=1e3;let qM,ig=(()=>{class n extends zq{constructor(e,i,r,s,c,d,f,g){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=g,this.id=n.nextPersistentConnectionId_++,this.log_=rC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=cC,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");bL.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&zM.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,c={r:s,a:e,b:i};this.log_((0,L.Pz)(c)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new L.BH,r={p:e._path.toString(),q:e._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:d=>{const f=d.d;"ok"===d.s?i.resolve(f):i.reject(f)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,r,s){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const f={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(d).set(c,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const c={p:r};e.tag&&(c.q=i._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,f=>{const g=f.d,b=f.s;n.warnOnListenWarnings_(g,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",f),"ok"!==b&&this.removeListen_(r,s),e.onComplete&&e.onComplete(b,g))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,L.r3)(e,"w")){const r=(0,L.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();Is(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,L.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,L.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const c=s.s,d=s.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const c={p:e};s&&(c.q=r,c.t=s),this.sendRequest("n",c)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const c={p:i,d:r};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,c){this.initConnection_();const d={p:i,d:r};void 0!==c&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,L.Pz)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):lL("Unrecognized action received from server: "+(0,L.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=cC,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=cC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=cC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Se.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+n.nextConnectionId_++,d=e.lastSessionId;let f=!1,g=null;const b=function(){g?g.close():(f=!0,s())};e.realtime_={close:b,sendRequest:function(P){(0,L.hu)(g,"sendRequest call when we're not connected not allowed."),g.sendRequest(P)}};const I=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[P,F]=yield Promise.all([e.authTokenProvider_.getToken(I),e.appCheckTokenProvider_.getToken(I)]);f?Hr("getToken() completed but was canceled"):(Hr("getToken() completed. Creating connection."),e.authToken_=P&&P.accessToken,e.appCheckToken_=F&&F.token,g=new Gq(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,z=>{Is(z+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},d))}catch(P){e.log_("Failed to get token: "+P),f||(e.repoInfo_.nodeAdmin&&Is(P),b())}}})()}interrupt(e){Hr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Hr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=cC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(c=>cL(c)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new Bn(e).toString();let s;if(this.listens.has(r)){const c=this.listens.get(r);s=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){Hr("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Hr("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,L.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+oL.replace(/\./g,"-")]=1,(0,L.uI)()?e["framework.cordova"]=1:(0,L.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=zM.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class yn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new yn(t,e)}}class $M{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new yn(cd,t),r=new yn(cd,e);return 0!==this.compare(i,r)}minPost(){return yn.MIN}}class Xq extends $M{static get __EMPTY_NODE(){return qM}static set __EMPTY_NODE(t){qM=t}compare(t,e){return tg(t.name,e.name)}isDefinedOn(t){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return yn.MIN}maxPost(){return new yn($c,qM)}makePost(t,e){return(0,L.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new yn(t,qM)}toString(){return".key"}}const qc=new Xq;class WM{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(c=e?i(t.key,e):1,r&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let CL,Ql=(()=>{class n{constructor(e,i,r,s,c){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??Do.EMPTY_NODE,this.right=c??Do.EMPTY_NODE}copy(e,i,r,s,c){return new n(e??this.key,i??this.value,r??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const c=r(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===c?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Do.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return Do.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Do{constructor(t,e=Do.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Do(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Ql.BLACK,null,null))}remove(t){return new Do(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ql.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new WM(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new WM(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new WM(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new WM(this.root_,null,this.comparator_,!0,t)}}function Ble(n,t){return tg(n.name,t.name)}function wL(n,t){return tg(n,t)}Do.EMPTY_NODE=new class Lle{copy(t,e,i,r,s){return this}insert(t,e,i){return new Ql(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Jq=function(n){return"number"==typeof n?"number:"+vq(n):"string:"+n},e4=function(n){if(n.isLeafNode()){const t=n.val();(0,L.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,L.r3)(t,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===CL||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===CL||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let t4,n4,r4,Av=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),e4(this.priorityNode_)}static set __childrenNodeConstructor(e){t4=e}static get __childrenNodeConstructor(){return t4}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return hn(e)?this:".priority"===dn(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=dn(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,L.hu)(".priority"!==r||1===ef(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xn(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Jq(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?vq(this.value_):this.value_,this.lazyHash_=pq(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,L.hu)(s>=0,"Unknown leaf type: "+i),(0,L.hu)(c>=0,"Unknown leaf type: "+r),s===c?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const li=new class jle extends $M{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?tg(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return yn.MIN}maxPost(){return new yn($c,new Av("[PRIORITY-POST]",r4))}makePost(t,e){const i=n4(t);return new yn(e,new Av("[PRIORITY-POST]",i))}toString(){return".priority"}},Gle=Math.log(2);class zle{constructor(t){this.count=parseInt(Math.log(t+1)/Gle,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const YM=function(n,t,e,i){n.sort(t);const r=function(f,g){const b=g-f;let E,I;if(0===b)return null;if(1===b)return E=n[f],I=e?e(E):E,new Ql(I,E.node,Ql.BLACK,null,null);{const P=parseInt(b/2,10)+f,F=r(f,P),z=r(P+1,g);return E=n[P],I=e?e(E):E,new Ql(I,E.node,Ql.BLACK,F,z)}},d=function(f){let g=null,b=null,E=n.length;const I=function(F,z){const te=E-F,Ve=E;E-=F;const Ze=r(te+1,Ve),rt=n[te],et=e?e(rt):rt;P(new Ql(et,rt.node,z,null,Ze))},P=function(F){g?(g.left=F,g=F):(b=F,g=F)};for(let F=0;F<f.count;++F){const z=f.nextBitIsOne(),te=Math.pow(2,f.count-(F+1));z?I(te,Ql.BLACK):(I(te,Ql.BLACK),I(te,Ql.RED))}return b}(new zle(n.length));return new Do(i||t,d)};let DL;const kv={};class ud{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,L.hu)(kv&&li,"ChildrenNode.ts has not been loaded"),DL=DL||new ud({".priority":kv},{".priority":li}),DL}get(t){const e=(0,L.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Do?e:null}hasIndex(t){return(0,L.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,L.hu)(t!==qc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(yn.Wrap);let d,c=s.getNext();for(;c;)r=r||t.isDefinedOn(c.node),i.push(c),c=s.getNext();d=r?YM(i,t.getCompare()):kv;const f=t.toString(),g=Object.assign({},this.indexSet_);g[f]=t;const b=Object.assign({},this.indexes_);return b[f]=d,new ud(b,g)}addToIndexes(t,e){const i=(0,L.UI)(this.indexes_,(r,s)=>{const c=(0,L.DV)(this.indexSet_,s);if((0,L.hu)(c,"Missing index implementation for "+s),r===kv){if(c.isDefinedOn(t.node)){const d=[],f=e.getIterator(yn.Wrap);let g=f.getNext();for(;g;)g.name!==t.name&&d.push(g),g=f.getNext();return d.push(t),YM(d,c.getCompare())}return kv}{const d=e.get(t.name);let f=r;return d&&(f=f.remove(new yn(t.name,d))),f.insert(t,t.node)}});return new ud(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,L.UI)(this.indexes_,r=>{if(r===kv)return r;{const s=e.get(t.name);return s?r.remove(new yn(t.name,s)):r}});return new ud(i,this.indexSet_)}}let uC,rn=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&e4(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return uC||(uC=new n(new Do(wL),null,ud.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||uC}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?uC:i}}getChild(e){const i=dn(e);return null===i?this:this.getImmediateChild(i).getChild(Xn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,L.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new yn(e,i);let s,c;i.isEmpty()?(s=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),c=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?uC:this.priorityNode_;return new n(s,d,c)}}updateChild(e,i){const r=dn(e);if(null===r)return i;{(0,L.hu)(".priority"!==dn(e)||1===ef(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Xn(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,c=!0;if(this.forEachChild(li,(d,f)=>{i[d]=f.val(e),r++,c&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):c=!1}),!e&&c&&s<2*r){const d=[];for(const f in i)d[f]=i[f];return d}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Jq(this.getPriority().val())+":"),this.forEachChild(li,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":pq(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const c=s.getPredecessorKey(new yn(e,i));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new yn(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new yn(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,yn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,yn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)>0;)s.getNext(),c=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===dC?-1:0}withIndex(e){if(e===qc||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===qc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(li),s=i.getIterator(li);let c=r.getNext(),d=s.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=r.getNext(),d=s.getNext()}return null===c&&null===d}return!1}return!1}}resolveIndex_(e){return e===qc?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const dC=new class $le extends rn{constructor(){super(new Do(wL),rn.EMPTY_NODE,ud.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return rn.EMPTY_NODE}isEmpty(){return!1}};function Fi(n,t=null){if(null===n)return rn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,L.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Av(n,Fi(t));if(n instanceof Array){let e=rn.EMPTY_NODE;return jr(n,(i,r)=>{if((0,L.r3)(n,i)&&"."!==i.substring(0,1)){const s=Fi(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(Fi(t))}{const e=[];let i=!1;if(jr(n,(c,d)=>{if("."!==c.substring(0,1)){const f=Fi(d);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),e.push(new yn(c,f)))}}),0===e.length)return rn.EMPTY_NODE;const s=YM(e,Ble,c=>c.name,wL);if(i){const c=YM(e,li.getCompare());return new rn(s,Fi(t),new ud({".priority":c},{".priority":li}))}return new rn(s,Fi(t),ud.Default)}}Object.defineProperties(yn,{MIN:{value:new yn(cd,rn.EMPTY_NODE)},MAX:{value:new yn($c,dC)}}),Xq.__EMPTY_NODE=rn.EMPTY_NODE,Av.__childrenNodeConstructor=rn,function Vle(n){CL=n}(dC),function Hle(n){r4=n}(dC),function Ule(n){n4=n}(Fi);class EL extends $M{constructor(t){super(),this.indexPath_=t,(0,L.hu)(!hn(t)&&".priority"!==dn(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?tg(t.name,e.name):s}makePost(t,e){const i=Fi(t),r=rn.EMPTY_NODE.updateChild(this.indexPath_,i);return new yn(e,r)}maxPost(){const t=rn.EMPTY_NODE.updateChild(this.indexPath_,dC);return new yn($c,t)}toString(){return lC(this.indexPath_,0).join("/")}}const SL=new class Wle extends $M{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?tg(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return yn.MIN}maxPost(){return yn.MAX}makePost(t,e){const i=Fi(t);return new yn(e,i)}toString(){return".value"}},Rv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Yle=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=Rv.charAt(e%64),e=Math.floor(e/64);(0,L.hu)(0===e,"Cannot push at time == 0");let c=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)c+=Rv.charAt(t[r]);return(0,L.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),a4=function(n){if(n===""+uL)return"-";const t=HM(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let c=0;c<e.length;c++)e[c]=n.charAt(c);if(e.length<786)return e.push("-"),e.join("");let i=e.length-1;for(;i>=0&&"z"===e[i];)i--;if(-1===i)return $c;const s=Rv.charAt(Rv.indexOf(e[i])+1);return e[i]=s,e.slice(0,i+1).join("")},l4=function(n){if(n===""+yq)return cd;const t=HM(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let i=0;i<e.length;i++)e[i]=n.charAt(i);return"-"===e[e.length-1]?1===e.length?""+uL:(delete e[e.length-1],e.join("")):(e[e.length-1]=Rv.charAt(Rv.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function c4(n){return{type:"value",snapshotNode:n}}function Ov(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function hC(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function fC(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class TL{constructor(t){this.index_=t}updateChild(t,e,i,r,s,c){(0,L.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=t.getImmediateChild(e);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?t.hasChild(e)?c.trackChildChange(hC(e,d)):(0,L.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(Ov(e,i)):c.trackChildChange(fC(e,i,d))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(li,(r,s)=>{e.hasChild(r)||i.trackChildChange(hC(r,s))}),e.isLeafNode()||e.forEachChild(li,(r,s)=>{if(t.hasChild(r)){const c=t.getImmediateChild(r);c.equals(s)||i.trackChildChange(fC(r,s,c))}else i.trackChildChange(Ov(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?rn.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class pC{constructor(t){this.indexedFilter_=new TL(t.getIndex()),this.index_=t.getIndex(),this.startPost_=pC.getStartPost_(t),this.endPost_=pC.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,i,r,s,c){return this.matches(new yn(e,i))||(i=rn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,c)}updateFullNode(t,e,i){e.isLeafNode()&&(e=rn.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(rn.EMPTY_NODE);const s=this;return e.forEachChild(li,(c,d)=>{s.matches(new yn(c,d))||(r=r.updateImmediateChild(c,rn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class Kle{constructor(t){this.rangedFilter_=new pC(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,i,r,s,c){return this.rangedFilter_.matches(new yn(e,i))||(i=rn.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,c):this.fullLimitUpdateChild_(t,e,i,s,c)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=rn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=rn.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const d=s.getNext();let f;if(f=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!f)break;r=r.updateImmediateChild(d.name,d.node),c++}}else{let s,c,d,f;if(r=e.withIndex(this.index_),r=r.updatePriority(rn.EMPTY_NODE),this.reverse_){f=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const E=this.index_.getCompare();d=(I,P)=>E(P,I)}else f=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let g=0,b=!1;for(;f.hasNext();){const E=f.getNext();!b&&d(s,E)<=0&&(b=!0),b&&g<this.limit_&&d(E,c)<=0?g++:r=r.updateImmediateChild(E.name,rn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let c;if(this.reverse_){const E=this.index_.getCompare();c=(I,P)=>E(P,I)}else c=this.index_.getCompare();const d=t;(0,L.hu)(d.numChildren()===this.limit_,"");const f=new yn(e,i),g=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),b=this.rangedFilter_.matches(f);if(d.hasChild(e)){const E=d.getImmediateChild(e);let I=r.getChildAfterChild(this.index_,g,this.reverse_);for(;null!=I&&(I.name===e||d.hasChild(I.name));)I=r.getChildAfterChild(this.index_,I,this.reverse_);const P=null==I?1:c(I,f);if(b&&!i.isEmpty()&&P>=0)return s?.trackChildChange(fC(e,i,E)),d.updateImmediateChild(e,i);{s?.trackChildChange(hC(e,E));const z=d.updateImmediateChild(e,rn.EMPTY_NODE);return null!=I&&this.rangedFilter_.matches(I)?(s?.trackChildChange(Ov(I.name,I.node)),z.updateImmediateChild(I.name,I.node)):z}}return i.isEmpty()?t:b&&c(g,f)>=0?(null!=s&&(s.trackChildChange(hC(g.name,g.node)),s.trackChildChange(Ov(e,i))),d.updateImmediateChild(e,i).updateImmediateChild(g.name,rn.EMPTY_NODE)):t}}class ZM{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=li}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:cd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$c}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===li}copy(){const t=new ZM;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function ML(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function IL(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function KM(n,t){const e=n.copy();return e.index_=t,e}function u4(n){const t={};if(n.isDefault())return t;let e;return n.index_===li?e="$priority":n.index_===SL?e="$value":n.index_===qc?e="$key":((0,L.hu)(n.index_ instanceof EL,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,L.Pz)(e),n.startSet_&&(t.startAt=(0,L.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,L.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,L.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,L.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function d4(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==li&&(t.i=n.index_.toString()),t}class QM extends zq{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=rC("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,L.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const c=QM.getListenId_(t,i),d={};this.listens_[c]=d;const f=u4(t._queryParams);this.restRequest_(s+".json",f,(g,b)=>{let E=b;if(404===g&&(E=null,g=null),null===g&&this.onDataUpdate_(s,E,!1,i),(0,L.DV)(this.listens_,c)===d){let I;I=g?401===g?"permission_denied":"rest_error:"+g:"ok",r(I,null)}})}unlisten(t,e){const i=QM.getListenId_(t,e);delete this.listens_[i]}get(t){const e=u4(t._queryParams),i=t._path.toString(),r=new L.BH;return this.restRequest_(i+".json",e,(s,c)=>{let d=c;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,L.xO)(e);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=(0,L.cI)(d.responseText)}catch{Is("Failed to parse JSON response for "+c+": "+d.responseText)}i(null,f)}else 401!==d.status&&404!==d.status&&Is("Got unsuccessful REST response for "+c+" Status: "+d.status),i(d.status);i=null}},d.open("GET",c,!0),d.send()})}}class nce{constructor(){this.rootNode_=rn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function XM(){return{value:null,children:new Map}}function Pv(n,t,e){if(hn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=dn(t);n.children.has(i)||n.children.set(i,XM()),Pv(n.children.get(i),t=Xn(t),e)}}function AL(n,t){if(hn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(li,(i,r)=>{Pv(n,new Bn(i),r)}),AL(n,t)}}if(n.children.size>0){const e=dn(t);return t=Xn(t),n.children.has(e)&&AL(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function kL(n,t,e){null!==n.value?e(t,n.value):function ice(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{kL(r,new Bn(t.toString()+"/"+i),e)})}class rce{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&jr(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class ace{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new rce(t);const i=1e4+2e4*Math.random();oC(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;jr(t,(r,s)=>{s>0&&(0,L.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),oC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ol=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ol||(ol={})),ol))();function PL(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class JM{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=ol.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(hn(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Bn(t));return new JM(Nn(),e,this.revert)}}return(0,L.hu)(dn(this.path)===t,"operationForChild called for unrelated child."),new JM(Xn(this.path),this.affectedTree,this.revert)}}class mC{constructor(t,e){this.source=t,this.path=e,this.type=ol.LISTEN_COMPLETE}operationForChild(t){return hn(this.path)?new mC(this.source,Nn()):new mC(this.source,Xn(this.path))}}class rg{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=ol.OVERWRITE}operationForChild(t){return hn(this.path)?new rg(this.source,Nn(),this.snap.getImmediateChild(t)):new rg(this.source,Xn(this.path),this.snap)}}class Nv{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=ol.MERGE}operationForChild(t){if(hn(this.path)){const e=this.children.subtree(new Bn(t));return e.isEmpty()?null:e.value?new rg(this.source,Nn(),e.value):new Nv(this.source,Nn(),e)}return(0,L.hu)(dn(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Nv(this.source,Xn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class tf{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(hn(t))return this.isFullyInitialized()&&!this.filtered_;const e=dn(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class lce{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function gC(n,t,e,i,r,s){const c=i.filter(d=>d.type===e);c.sort((d,f)=>function dce(n,t,e){if(null==t.childName||null==e.childName)throw(0,L.g5)("Should only compare child_ events.");const i=new yn(t.childName,t.snapshotNode),r=new yn(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,d,f)),c.forEach(d=>{const f=function uce(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,d,s);r.forEach(g=>{g.respondsTo(d.type)&&t.push(g.createEvent(f,n.query_))})})}function eI(n,t){return{eventCache:n,serverCache:t}}function _C(n,t,e,i){return eI(new tf(t,e,i),n.serverCache)}function f4(n,t,e,i){return eI(n.eventCache,new tf(t,e,i))}function tI(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function sg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let NL;class ci{constructor(t,e=(()=>(NL||(NL=new Do(Kae)),NL))()){this.value=t,this.children=e}static fromObject(t){let e=new ci(null);return jr(t,(i,r)=>{e=e.set(new Bn(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:Nn(),value:this.value};if(hn(t))return null;{const i=dn(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Xn(t),e);return null!=s?{path:Ii(new Bn(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(hn(t))return this;{const e=dn(t),i=this.children.get(e);return null!==i?i.subtree(Xn(t)):new ci(null)}}set(t,e){if(hn(t))return new ci(e,this.children);{const i=dn(t),s=(this.children.get(i)||new ci(null)).set(Xn(t),e),c=this.children.insert(i,s);return new ci(this.value,c)}}remove(t){if(hn(t))return this.children.isEmpty()?new ci(null):new ci(null,this.children);{const e=dn(t),i=this.children.get(e);if(i){const r=i.remove(Xn(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new ci(null):new ci(this.value,s)}return this}}get(t){if(hn(t))return this.value;{const e=dn(t),i=this.children.get(e);return i?i.get(Xn(t)):null}}setTree(t,e){if(hn(t))return e;{const i=dn(t),s=(this.children.get(i)||new ci(null)).setTree(Xn(t),e);let c;return c=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new ci(this.value,c)}}fold(t){return this.fold_(Nn(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Ii(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,Nn(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(hn(t))return null;{const s=dn(t),c=this.children.get(s);return c?c.findOnPath_(Xn(t),Ii(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Nn(),e)}foreachOnPath_(t,e,i){if(hn(t))return this;{this.value&&i(e,this.value);const r=dn(t),s=this.children.get(r);return s?s.foreachOnPath_(Xn(t),Ii(e,r),i):new ci(null)}}foreach(t){this.foreach_(Nn(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(Ii(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class Xl{constructor(t){this.writeTree_=t}static empty(){return new Xl(new ci(null))}}function vC(n,t,e){if(hn(t))return new Xl(new ci(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const c=eo(r,t);return s=s.updateChild(c,e),new Xl(n.writeTree_.set(r,s))}{const r=new ci(e),s=n.writeTree_.setTree(t,r);return new Xl(s)}}}function FL(n,t,e){let i=n;return jr(e,(r,s)=>{i=vC(i,Ii(t,r),s)}),i}function p4(n,t){if(hn(t))return Xl.empty();{const e=n.writeTree_.setTree(t,new ci(null));return new Xl(e)}}function LL(n,t){return null!=og(n,t)}function og(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(eo(e.path,t)):null}function m4(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(li,(i,r)=>{t.push(new yn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new yn(i,r.value))}),t}function nf(n,t){if(hn(t))return n;{const e=og(n,t);return new Xl(null!=e?new ci(e):n.writeTree_.subtree(t))}}function BL(n){return n.writeTree_.isEmpty()}function Fv(n,t){return g4(Nn(),n.writeTree_,t)}function g4(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,L.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=g4(Ii(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(Ii(n,".priority"),i)),e}}function nI(n,t){return w4(t,n)}function _ce(n,t){if(n.snap)return sl(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&sl(Ii(n.path,e),t))return!0;return!1}function yce(n){return n.visible}function _4(n,t,e){let i=Xl.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const c=s.path;let d;if(s.snap)sl(e,c)?(d=eo(e,c),i=vC(i,d,s.snap)):sl(c,e)&&(d=eo(c,e),i=vC(i,Nn(),s.snap.getChild(d)));else{if(!s.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(sl(e,c))d=eo(e,c),i=FL(i,d,s.children);else if(sl(c,e))if(d=eo(c,e),hn(d))i=FL(i,Nn(),s.children);else{const f=(0,L.DV)(s.children,dn(d));if(f){const g=f.getChild(Xn(d));i=vC(i,Nn(),g)}}}}}return i}function v4(n,t,e,i,r){if(i||r){const s=nf(n.visibleWrites,t);return!r&&BL(s)?e:r||null!=e||LL(s,Nn())?Fv(_4(n.allWrites,function(g){return(g.visible||r)&&(!i||!~i.indexOf(g.writeId))&&(sl(g.path,t)||sl(t,g.path))},t),e||rn.EMPTY_NODE):null}{const s=og(n.visibleWrites,t);if(null!=s)return s;{const c=nf(n.visibleWrites,t);return BL(c)?e:null!=e||LL(c,Nn())?Fv(c,e||rn.EMPTY_NODE):null}}}function iI(n,t,e,i){return v4(n.writeTree,n.treePath,t,e,i)}function VL(n,t){return function bce(n,t,e){let i=rn.EMPTY_NODE;const r=og(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(li,(s,c)=>{i=i.updateImmediateChild(s,c)}),i;if(e){const s=nf(n.visibleWrites,t);return e.forEachChild(li,(c,d)=>{const f=Fv(nf(s,new Bn(c)),d);i=i.updateImmediateChild(c,f)}),m4(s).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return m4(nf(n.visibleWrites,t)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,t)}function y4(n,t,e,i){return function wce(n,t,e,i,r){(0,L.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Ii(t,e);if(LL(n.visibleWrites,s))return null;{const c=nf(n.visibleWrites,s);return BL(c)?r.getChild(e):Fv(c,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function rI(n,t){return function Dce(n,t){return og(n.visibleWrites,t)}(n.writeTree,Ii(n.treePath,t))}function UL(n,t,e){return function Cce(n,t,e,i){const r=Ii(t,e),s=og(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?Fv(nf(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function b4(n,t){return w4(Ii(n.treePath,t),n.writeTree)}function w4(n,t){return{treePath:n,writeTree:t}}class Tce{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,L.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,fC(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,hC(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,Ov(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,L.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,fC(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const C4=new class Mce{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class HL{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new tf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return UL(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:sg(this.viewCache_),s=function xce(n,t,e,i,r,s){return function Ece(n,t,e,i,r,s,c){let d;const f=nf(n.visibleWrites,t),g=og(f,Nn());if(null!=g)d=g;else{if(null==e)return[];d=Fv(f,e)}if(d=d.withIndex(c),d.isEmpty()||d.isLeafNode())return[];{const b=[],E=c.getCompare(),I=s?d.getReverseIteratorFrom(i,c):d.getIteratorFrom(i,c);let P=I.getNext();for(;P&&b.length<r;)0!==E(P,i)&&b.push(P),P=I.getNext();return b}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function D4(n,t,e,i,r,s){const c=t.eventCache;if(null!=rI(i,e))return t;{let d,f;if(hn(e))if((0,L.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const g=sg(t),E=VL(i,g instanceof rn?g:rn.EMPTY_NODE);d=n.filter.updateFullNode(t.eventCache.getNode(),E,s)}else{const g=iI(i,sg(t));d=n.filter.updateFullNode(t.eventCache.getNode(),g,s)}else{const g=dn(e);if(".priority"===g){(0,L.hu)(1===ef(e),"Can't have a priority with additional path components");const b=c.getNode();f=t.serverCache.getNode();const E=y4(i,e,b,f);d=null!=E?n.filter.updatePriority(b,E):c.getNode()}else{const b=Xn(e);let E;if(c.isCompleteForChild(g)){f=t.serverCache.getNode();const I=y4(i,e,c.getNode(),f);E=null!=I?c.getNode().getImmediateChild(g).updateChild(b,I):c.getNode().getImmediateChild(g)}else E=UL(i,g,t.serverCache);d=null!=E?n.filter.updateChild(c.getNode(),g,E,b,r,s):c.getNode()}}return _C(t,d,c.isFullyInitialized()||hn(e),n.filter.filtersNodes())}}function sI(n,t,e,i,r,s,c,d){const f=t.serverCache;let g;const b=c?n.filter:n.filter.getIndexedFilter();if(hn(e))g=b.updateFullNode(f.getNode(),i,null);else if(b.filtersNodes()&&!f.isFiltered()){const P=f.getNode().updateChild(e,i);g=b.updateFullNode(f.getNode(),P,null)}else{const P=dn(e);if(!f.isCompleteForPath(e)&&ef(e)>1)return t;const F=Xn(e),te=f.getNode().getImmediateChild(P).updateChild(F,i);g=".priority"===P?b.updatePriority(f.getNode(),te):b.updateChild(f.getNode(),P,te,F,C4,null)}const E=f4(t,g,f.isFullyInitialized()||hn(e),b.filtersNodes());return D4(n,E,e,r,new HL(r,E,s),d)}function jL(n,t,e,i,r,s,c){const d=t.eventCache;let f,g;const b=new HL(r,t,s);if(hn(e))g=n.filter.updateFullNode(t.eventCache.getNode(),i,c),f=_C(t,g,!0,n.filter.filtersNodes());else{const E=dn(e);if(".priority"===E)g=n.filter.updatePriority(t.eventCache.getNode(),i),f=_C(t,g,d.isFullyInitialized(),d.isFiltered());else{const I=Xn(e),P=d.getNode().getImmediateChild(E);let F;if(hn(I))F=i;else{const z=b.getCompleteChild(E);F=null!=z?".priority"===vL(I)&&z.getChild(Yq(I)).isEmpty()?z:z.updateChild(I,i):rn.EMPTY_NODE}f=P.equals(F)?t:_C(t,n.filter.updateChild(d.getNode(),E,F,I,b,c),d.isFullyInitialized(),n.filter.filtersNodes())}}return f}function E4(n,t){return n.eventCache.isCompleteForChild(t)}function S4(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function GL(n,t,e,i,r,s,c,d){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let g,f=t;g=hn(e)?i:new ci(null).setTree(e,i);const b=t.serverCache.getNode();return g.children.inorderTraversal((E,I)=>{if(b.hasChild(E)){const F=S4(0,t.serverCache.getNode().getImmediateChild(E),I);f=sI(n,f,new Bn(E),F,r,s,c,d)}}),g.children.inorderTraversal((E,I)=>{const P=!t.serverCache.isCompleteForChild(E)&&null===I.value;if(!b.hasChild(E)&&!P){const z=S4(0,t.serverCache.getNode().getImmediateChild(E),I);f=sI(n,f,new Bn(E),z,r,s,c,d)}}),f}class Lce{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new TL(i.getIndex()),s=function Qle(n){return n.loadsAllData()?new TL(n.getIndex()):n.hasLimit()?new Kle(n):new pC(n)}(i);this.processor_=function Ice(n){return{filter:n}}(s);const c=e.serverCache,d=e.eventCache,f=r.updateFullNode(rn.EMPTY_NODE,c.getNode(),null),g=s.updateFullNode(rn.EMPTY_NODE,d.getNode(),null),b=new tf(f,c.isFullyInitialized(),r.filtersNodes()),E=new tf(g,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=eI(E,b),this.eventGenerator_=new lce(this.query_)}get query(){return this.query_}}function Uce(n,t){const e=sg(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!hn(t)&&!e.getImmediateChild(dn(t)).isEmpty())?e.getChild(t):null}function x4(n){return 0===n.eventRegistrations_.length}function T4(n,t,e){const i=[];if(e){(0,L.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(e,r);c&&i.push(c)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(c)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function M4(n,t,e,i){t.type===ol.MERGE&&null!==t.source.queryId&&((0,L.hu)(sg(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(tI(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function kce(n,t,e,i,r){const s=new Tce;let c,d;if(e.type===ol.OVERWRITE){const g=e;g.source.fromUser?c=jL(n,t,g.path,g.snap,i,r,s):((0,L.hu)(g.source.fromServer,"Unknown source."),d=g.source.tagged||t.serverCache.isFiltered()&&!hn(g.path),c=sI(n,t,g.path,g.snap,i,r,d,s))}else if(e.type===ol.MERGE){const g=e;g.source.fromUser?c=function Oce(n,t,e,i,r,s,c){let d=t;return i.foreach((f,g)=>{const b=Ii(e,f);E4(t,dn(b))&&(d=jL(n,d,b,g,r,s,c))}),i.foreach((f,g)=>{const b=Ii(e,f);E4(t,dn(b))||(d=jL(n,d,b,g,r,s,c))}),d}(n,t,g.path,g.children,i,r,s):((0,L.hu)(g.source.fromServer,"Unknown source."),d=g.source.tagged||t.serverCache.isFiltered(),c=GL(n,t,g.path,g.children,i,r,d,s))}else if(e.type===ol.ACK_USER_WRITE){const g=e;c=g.revert?function Fce(n,t,e,i,r,s){let c;if(null!=rI(i,e))return t;{const d=new HL(i,t,r),f=t.eventCache.getNode();let g;if(hn(e)||".priority"===dn(e)){let b;if(t.serverCache.isFullyInitialized())b=iI(i,sg(t));else{const E=t.serverCache.getNode();(0,L.hu)(E instanceof rn,"serverChildren would be complete if leaf node"),b=VL(i,E)}g=n.filter.updateFullNode(f,b,s)}else{const b=dn(e);let E=UL(i,b,t.serverCache);null==E&&t.serverCache.isCompleteForChild(b)&&(E=f.getImmediateChild(b)),g=null!=E?n.filter.updateChild(f,b,E,Xn(e),d,s):t.eventCache.getNode().hasChild(b)?n.filter.updateChild(f,b,rn.EMPTY_NODE,Xn(e),d,s):f,g.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=iI(i,sg(t)),c.isLeafNode()&&(g=n.filter.updateFullNode(g,c,s)))}return c=t.serverCache.isFullyInitialized()||null!=rI(i,Nn()),_C(t,g,c,n.filter.filtersNodes())}}(n,t,g.path,i,r,s):function Pce(n,t,e,i,r,s,c){if(null!=rI(r,e))return t;const d=t.serverCache.isFiltered(),f=t.serverCache;if(null!=i.value){if(hn(e)&&f.isFullyInitialized()||f.isCompleteForPath(e))return sI(n,t,e,f.getNode().getChild(e),r,s,d,c);if(hn(e)){let g=new ci(null);return f.getNode().forEachChild(qc,(b,E)=>{g=g.set(new Bn(b),E)}),GL(n,t,e,g,r,s,d,c)}return t}{let g=new ci(null);return i.foreach((b,E)=>{const I=Ii(e,b);f.isCompleteForPath(I)&&(g=g.set(b,f.getNode().getChild(I)))}),GL(n,t,e,g,r,s,d,c)}}(n,t,g.path,g.affectedTree,i,r,s)}else{if(e.type!==ol.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+e.type);c=function Nce(n,t,e,i,r){const s=t.serverCache;return D4(n,f4(t,s.getNode(),s.isFullyInitialized()||hn(e),s.isFiltered()),e,i,C4,r)}(n,t,e.path,i,s)}const f=s.getChanges();return function Rce(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=tI(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(c4(tI(t)))}}(t,c,f),{viewCache:c,changes:f}}(n.processor_,r,t,e,i);return function Ace(n,t){(0,L.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,L.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,I4(n,s.changes,s.viewCache.eventCache.getNode(),null)}function I4(n,t,e,i){return function cce(n,t,e,i){const r=[],s=[];return t.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function Zle(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(c.childName,c.snapshotNode))}),gC(n,r,"child_removed",t,i,e),gC(n,r,"child_added",t,i,e),gC(n,r,"child_moved",s,i,e),gC(n,r,"child_changed",t,i,e),gC(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let oI,lI;class A4{constructor(){this.views=new Map}}function zL(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,L.hu)(null!=s,"SyncTree gave us an op for an invalid query."),M4(s,t,e,i)}{let s=[];for(const c of n.views.values())s=s.concat(M4(c,t,e,i));return s}}function k4(n,t,e,i,r){const c=n.views.get(t._queryIdentifier);if(!c){let d=iI(e,r?i:null),f=!1;d?f=!0:i instanceof rn?(d=VL(e,i),f=!1):(d=rn.EMPTY_NODE,f=!1);const g=eI(new tf(d,f,!1),new tf(i,r,!1));return new Lce(t,g)}return c}function R4(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function rf(n,t){let e=null;for(const i of n.views.values())e=e||Uce(i,t);return e}function O4(n,t){return t._queryParams.loadsAllData()?aI(n):n.views.get(t._queryIdentifier)}function P4(n,t){return null!=O4(n,t)}function sf(n){return null!=aI(n)}function aI(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Kce=1;class N4{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ci(null),this.pendingWriteTree_=function Sce(){return{visibleWrites:Xl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function $L(n,t,e,i,r){return function fce(n,t,e,i,r){(0,L.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=vC(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?Lv(n,new rg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function af(n,t,e=!1){const i=function mce(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function gce(n,t){const e=n.allWrites.findIndex(d=>d.writeId===t);(0,L.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=e&&_ce(d,i.path)?r=!1:sl(i.path,d.path)&&(s=!0)),c--}return!!r&&(s?(function vce(n){n.visibleWrites=_4(n.allWrites,yce,Nn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=p4(n.visibleWrites,i.path):jr(i.children,f=>{n.visibleWrites=p4(n.visibleWrites,Ii(i.path,f))}),!0))}(n.pendingWriteTree_,t)){let s=new ci(null);return null!=i.snap?s=s.set(Nn(),!0):jr(i.children,c=>{s=s.set(new Bn(c),!0)}),Lv(n,new JM(i.path,s,e))}return[]}function yC(n,t,e){return Lv(n,new rg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function cI(n,t,e,i,r=!1){const s=t._path,c=n.syncPointTree_.get(s);let d=[];if(c&&("default"===t._queryIdentifier||P4(c,t))){const f=function Wce(n,t,e,i){const r=t._queryIdentifier,s=[];let c=[];const d=sf(n);if("default"===r)for(const[f,g]of n.views.entries())c=c.concat(T4(g,e,i)),x4(g)&&(n.views.delete(f),g.query._queryParams.loadsAllData()||s.push(g.query));else{const f=n.views.get(r);f&&(c=c.concat(T4(f,e,i)),x4(f)&&(n.views.delete(r),f.query._queryParams.loadsAllData()||s.push(f.query)))}return d&&!sf(n)&&s.push(new(function zce(){return(0,L.hu)(oI,"Reference.ts has not been loaded"),oI}())(t._repo,t._path)),{removed:s,events:c}}(c,t,e,i);(function $ce(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const g=f.removed;if(d=f.events,!r){const b=-1!==g.findIndex(I=>I._queryParams.loadsAllData()),E=n.syncPointTree_.findOnPath(s,(I,P)=>sf(P));if(b&&!E){const I=n.syncPointTree_.subtree(s);if(!I.isEmpty()){const P=function iue(n){return n.fold((t,e,i)=>{if(e&&sf(e))return[aI(e)];{let r=[];return e&&(r=R4(e)),jr(i,(s,c)=>{r=r.concat(c)}),r}})}(I);for(let F=0;F<P.length;++F){const z=P[F],te=z.query,Ve=V4(n,z);n.listenProvider_.startListening(wC(te),bC(n,te),Ve.hashFn,Ve.onComplete)}}}!E&&g.length>0&&!i&&(b?n.listenProvider_.stopListening(wC(t),null):g.forEach(I=>{const P=n.queryToTagMap.get(dI(I));n.listenProvider_.stopListening(wC(I),P)}))}!function rue(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=dI(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,g)}return d}function F4(n,t,e,i){const r=WL(n,i);if(null!=r){const s=YL(r),c=s.path,d=s.queryId,f=eo(c,t);return ZL(n,c,new rg(PL(d),f,e))}return[]}function qL(n,t,e,i=!1){const r=t._path;let s=null,c=!1;n.syncPointTree_.foreachOnPath(r,(I,P)=>{const F=eo(I,r);s=s||rf(P,F),c=c||sf(P)});let f,d=n.syncPointTree_.get(r);d?(c=c||sf(d),s=s||rf(d,Nn())):(d=new A4,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=s?f=!0:(f=!1,s=rn.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((P,F)=>{const z=rf(F,Nn());z&&(s=s.updateImmediateChild(P,z))}));const g=P4(d,t);if(!g&&!t._queryParams.loadsAllData()){const I=dI(t);(0,L.hu)(!n.queryToTagMap.has(I),"View does not exist, but we have a tag");const P=function sue(){return Kce++}();n.queryToTagMap.set(I,P),n.tagToQueryMap.set(P,I)}let E=function qce(n,t,e,i,r,s){const c=k4(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),function Hce(n,t){n.eventRegistrations_.push(t)}(c,e),function jce(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(li,(s,c)=>{i.push(Ov(s,c))}),e.isFullyInitialized()&&i.push(c4(e.getNode())),I4(n,i,e.getNode(),t)}(c,e)}(d,t,e,nI(n.pendingWriteTree_,r),s,f);if(!g&&!c&&!i){const I=O4(d,t);E=E.concat(function oue(n,t,e){const i=t._path,r=bC(n,t),s=V4(n,e),c=n.listenProvider_.startListening(wC(t),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,L.hu)(!sf(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((g,b,E)=>{if(!hn(g)&&b&&sf(b))return[aI(b).query];{let I=[];return b&&(I=I.concat(R4(b).map(P=>P.query))),jr(E,(P,F)=>{I=I.concat(F)}),I}});for(let g=0;g<f.length;++g){const b=f[g];n.listenProvider_.stopListening(wC(b),bC(n,b))}}return c}(n,t,I))}return E}function uI(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(c,d)=>{const g=rf(d,eo(c,t));if(g)return g});return v4(r,t,s,e,!0)}function Lv(n,t){return L4(t,n.syncPointTree_,null,nI(n.pendingWriteTree_,Nn()))}function L4(n,t,e,i){if(hn(n.path))return B4(n,t,e,i);{const r=t.get(Nn());null==e&&null!=r&&(e=rf(r,Nn()));let s=[];const c=dn(n.path),d=n.operationForChild(c),f=t.children.get(c);if(f&&d){const g=e?e.getImmediateChild(c):null,b=b4(i,c);s=s.concat(L4(d,f,g,b))}return r&&(s=s.concat(zL(r,n,i,e))),s}}function B4(n,t,e,i){const r=t.get(Nn());null==e&&null!=r&&(e=rf(r,Nn()));let s=[];return t.children.inorderTraversal((c,d)=>{const f=e?e.getImmediateChild(c):null,g=b4(i,c),b=n.operationForChild(c);b&&(s=s.concat(B4(b,d,f,g)))}),r&&(s=s.concat(zL(r,n,i,e))),s}function V4(n,t){const e=t.query,i=bC(n,e);return{hashFn:()=>(function Bce(n){return n.viewCache_.serverCache.getNode()}(t)||rn.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function eue(n,t,e){const i=WL(n,e);if(i){const r=YL(i),s=r.path,c=r.queryId,d=eo(s,t);return ZL(n,s,new mC(PL(c),d))}return[]}(n,e._path,i):function Jce(n,t){return Lv(n,new mC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function Jae(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return cI(n,e,null,s)}}}}function bC(n,t){const e=dI(t);return n.queryToTagMap.get(e)}function dI(n){return n._path.toString()+"$"+n._queryIdentifier}function WL(n,t){return n.tagToQueryMap.get(t)}function YL(n){const t=n.indexOf("$");return(0,L.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Bn(n.substr(0,t))}}function ZL(n,t,e){const i=n.syncPointTree_.get(t);return(0,L.hu)(i,"Missing sync point for query tag that we're tracking"),zL(i,e,nI(n.pendingWriteTree_,t),null)}function wC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Zce(){return(0,L.hu)(lI,"Reference.ts has not been loaded"),lI}())(n._repo,n._path):n}class KL{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new KL(e)}node(){return this.node_}}class QL{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Ii(this.path_,t);return new QL(this.syncTree_,e)}node(){return uI(this.syncTree_,this.path_)}}const U4=function(n,t,e){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?lue(n[".sv"],t,e):"object"==typeof n[".sv"]?cue(n[".sv"],t):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},lue=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},cue=function(n,t,e){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,L.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,L.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},H4=function(n,t,e,i){return JL(t,new QL(e,n),i)},XL=function(n,t,e){return JL(n,new KL(t),e)};function JL(n,t,e){const i=n.getPriority().val(),r=U4(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const c=n,d=U4(c.getValue(),t,e);return d!==c.getValue()||r!==c.getPriority().val()?new Av(d,Fi(r)):n}{const c=n;return s=c,r!==c.getPriority().val()&&(s=s.updatePriority(new Av(r))),c.forEachChild(li,(d,f)=>{const g=JL(f,t.getImmediateChild(d),e);g!==f&&(s=s.updateImmediateChild(d,g))}),s}}class eB{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function hI(n,t){let e=t instanceof Bn?t:new Bn(t),i=n,r=dn(e);for(;null!==r;){const s=(0,L.DV)(i.node.children,r)||{children:{},childCount:0};i=new eB(r,i,s),e=Xn(e),r=dn(e)}return i}function ag(n){return n.node.value}function tB(n,t){n.node.value=t,nB(n)}function j4(n){return n.node.childCount>0}function fI(n,t){jr(n.node.children,(e,i)=>{t(new eB(e,n,i))})}function G4(n,t,e,i){e&&!i&&t(n),fI(n,r=>{G4(r,t,!0,i)}),e&&i&&t(n)}function CC(n){return new Bn(null===n.parent?n.name:CC(n.parent)+"/"+n.name)}function nB(n){null!==n.parent&&function hue(n,t,e){const i=function uue(n){return void 0===ag(n)&&!j4(n)}(e),r=(0,L.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,nB(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,nB(n))}(n.parent,n.name,n)}const fue=/[\[\].#$\/\u0000-\u001F\u007F]/,pue=/[\[\].#$\u0000-\u001F\u007F]/,iB=10485760,pI=function(n){return"string"==typeof n&&0!==n.length&&!fue.test(n)},z4=function(n){return"string"==typeof n&&0!==n.length&&!pue.test(n)},DC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!UM(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},Wc=function(n,t,e,i){i&&void 0===t||EC((0,L.gK)(n,"value"),t,e)},EC=function(n,t,e){const i=e instanceof Bn?new Ale(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+ng(i));if("function"==typeof t)throw new Error(n+"contains a function "+ng(i)+" with contents = "+t.toString());if(UM(t))throw new Error(n+"contains "+t.toString()+" "+ng(i));if("string"==typeof t&&t.length>iB/3&&(0,L.ug)(t)>iB)throw new Error(n+"contains a string greater than "+iB+" utf8 bytes "+ng(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(jr(t,(c,d)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!pI(c)))throw new Error(n+" contains an invalid key ("+c+") "+ng(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function kle(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,L.ug)(t),Zq(n)})(i,c),EC(n,d,i),function Rle(n){const t=n.parts_.pop();n.byteLength_-=(0,L.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+ng(i)+" in addition to actual children.")}},$4=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,L.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];jr(t,(c,d)=>{const f=new Bn(c);if(EC(r,d,Ii(e,f)),".priority"===vL(f)&&!DC(d))throw new Error(r+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(f)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=lC(i);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!pI(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Ile);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&sl(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},rB=function(n,t,e){if(!e||void 0!==t){if(UM(t))throw new Error((0,L.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!DC(t))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},SC=function(n,t,e,i){if(!(i&&void 0===e||pI(e)))throw new Error((0,L.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},xC=function(n,t,e,i){if(!(i&&void 0===e||z4(e)))throw new Error((0,L.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},al=function(n,t){if(".info"===dn(t))throw new Error(n+" failed = Can't modify data under /.info/")},q4=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!pI(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),z4(n)}(e))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class vue{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function mI(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!yL(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function W4(n,t,e){mI(n,e),Y4(n,i=>yL(i,t))}function aa(n,t,e){mI(n,e),Y4(n,i=>sl(i,t)||sl(t,i))}function Y4(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(yue(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function yue(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();eg&&Hr("event: "+e.toString()),Mv(i)}}}const Z4="repo_interrupt";class wue{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=XM(),this.transactionQueueTree_=new eB,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function K4(n){const e=n.infoData_.getNode(new Bn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function TC(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:K4(n)})}function Q4(n,t,e,i,r){n.dataUpdateCount++;const s=new Bn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(r)if(i){const f=(0,L.UI)(e,g=>Fi(g));c=function tue(n,t,e,i){const r=WL(n,i);if(r){const s=YL(r),c=s.path,d=s.queryId,f=eo(c,t),g=ci.fromObject(e);return ZL(n,c,new Nv(PL(d),f,g))}return[]}(n.serverSyncTree_,s,f,r)}else{const f=Fi(e);c=F4(n.serverSyncTree_,s,f,r)}else if(i){const f=(0,L.UI)(e,g=>Fi(g));c=function Xce(n,t,e){const i=ci.fromObject(e);return Lv(n,new Nv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,f)}else{const f=Fi(e);c=yC(n.serverSyncTree_,s,f)}let d=s;c.length>0&&(d=Vv(n,s)),aa(n.eventQueue_,d,c)}function X4(n,t){sB(n,"connected",t),!1===t&&function xue(n){Bv(n,"onDisconnectEvents");const t=TC(n),e=XM();kL(n.onDisconnect_,Nn(),(r,s)=>{const c=H4(r,s,n.serverSyncTree_,t);Pv(e,r,c)});let i=[];kL(e,Nn(),(r,s)=>{i=i.concat(yC(n.serverSyncTree_,r,s));const c=cB(n,r);Vv(n,c)}),n.onDisconnect_=XM(),aa(n.eventQueue_,Nn(),i)}(n)}function sB(n,t,e){const i=new Bn("/.info/"+t),r=Fi(e);n.infoData_.updateSnapshot(i,r);const s=yC(n.infoSyncTree_,i,r);aa(n.eventQueue_,i,s)}function gI(n){return n.nextWriteId_++}function oB(n,t,e,i,r){Bv(n,"set",{path:t.toString(),value:e,priority:i});const s=TC(n),c=Fi(e,i),d=uI(n.serverSyncTree_,t),f=XL(c,d,s),g=gI(n),b=$L(n.serverSyncTree_,t,f,g,!0);mI(n.eventQueue_,b),n.server_.put(t.toString(),c.val(!0),(I,P)=>{const F="ok"===I;F||Is("set at "+t+" failed: "+I);const z=af(n.serverSyncTree_,g,!F);aa(n.eventQueue_,t,z),lf(0,r,I,P)});const E=cB(n,t);Vv(n,E),aa(n.eventQueue_,E,[])}function Tue(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&AL(n.onDisconnect_,t),lf(0,e,i,r)})}function J4(n,t,e,i){const r=Fi(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,c)=>{"ok"===s&&Pv(n.onDisconnect_,t,r),lf(0,i,s,c)})}function aB(n,t,e){let i;i=".info"===dn(t._path)?cI(n.infoSyncTree_,t,e):cI(n.serverSyncTree_,t,e),W4(n.eventQueue_,t._path,i)}function e5(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Z4)}function Bv(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Hr(e,...t)}function lf(n,t,e,i){t&&Mv(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const c=new Error(s);c.code=r,t(c)}})}function lB(n,t,e){return uI(n.serverSyncTree_,t,e)||rn.EMPTY_NODE}function _I(n,t=n.transactionQueueTree_){if(t||vI(n,t),ag(t)){const e=n5(n,t);(0,L.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function Oue(n,t,e){const i=e.map(g=>g.currentWriteId),r=lB(n,t,i);let s=r;const c=r.hash();for(let g=0;g<e.length;g++){const b=e[g];(0,L.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const E=eo(t,b.path);s=s.updateChild(E,b.currentOutputSnapshotRaw)}const d=s.val(!0),f=t;n.server_.put(f.toString(),d,g=>{Bv(n,"transaction put response",{path:f.toString(),status:g});let b=[];if("ok"===g){const E=[];for(let I=0;I<e.length;I++)e[I].status=2,b=b.concat(af(n.serverSyncTree_,e[I].currentWriteId)),e[I].onComplete&&E.push(()=>e[I].onComplete(null,!0,e[I].currentOutputSnapshotResolved)),e[I].unwatcher();vI(n,hI(n.transactionQueueTree_,t)),_I(n,n.transactionQueueTree_),aa(n.eventQueue_,t,b);for(let I=0;I<E.length;I++)Mv(E[I])}else{if("datastale"===g)for(let E=0;E<e.length;E++)e[E].status=3===e[E].status?4:0;else{Is("transaction at "+f.toString()+" failed: "+g);for(let E=0;E<e.length;E++)e[E].status=4,e[E].abortReason=g}Vv(n,t)}},c)}(n,CC(t),e)}else j4(t)&&fI(t,e=>{_I(n,e)})}function Vv(n,t){const e=t5(n,t),i=CC(e);return function Pue(n,t,e){if(0===t.length)return;const i=[];let r=[];const c=t.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<t.length;d++){const f=t[d],g=eo(e,f.path);let E,b=!1;if((0,L.hu)(null!==g,"rerunTransactionsUnderNode_: relativePath should not be null."),4===f.status)b=!0,E=f.abortReason,r=r.concat(af(n.serverSyncTree_,f.currentWriteId,!0));else if(0===f.status)if(f.retryCount>=25)b=!0,E="maxretry",r=r.concat(af(n.serverSyncTree_,f.currentWriteId,!0));else{const I=lB(n,f.path,c);f.currentInputSnapshot=I;const P=t[d].update(I.val());if(void 0!==P){EC("transaction failed: Data returned ",P,f.path);let F=Fi(P);"object"==typeof P&&null!=P&&(0,L.r3)(P,".priority")||(F=F.updatePriority(I.getPriority()));const te=f.currentWriteId,Ve=TC(n),Ze=XL(F,I,Ve);f.currentOutputSnapshotRaw=F,f.currentOutputSnapshotResolved=Ze,f.currentWriteId=gI(n),c.splice(c.indexOf(te),1),r=r.concat($L(n.serverSyncTree_,f.path,Ze,f.currentWriteId,f.applyLocally)),r=r.concat(af(n.serverSyncTree_,te,!0))}else b=!0,E="nodata",r=r.concat(af(n.serverSyncTree_,f.currentWriteId,!0))}aa(n.eventQueue_,e,r),r=[],b&&(t[d].status=2,setTimeout(t[d].unwatcher,Math.floor(0)),t[d].onComplete&&i.push("nodata"===E?()=>t[d].onComplete(null,!1,t[d].currentInputSnapshot):()=>t[d].onComplete(new Error(E),!1,null)))}vI(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)Mv(i[d]);_I(n,n.transactionQueueTree_)}(n,n5(n,e),i),i}function t5(n,t){let e,i=n.transactionQueueTree_;for(e=dn(t);null!==e&&void 0===ag(i);)i=hI(i,e),e=dn(t=Xn(t));return i}function n5(n,t){const e=[];return r5(n,t,e),e.sort((i,r)=>i.order-r.order),e}function r5(n,t,e){const i=ag(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);fI(t,r=>{r5(n,r,e)})}function vI(n,t){const e=ag(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,tB(t,e.length>0?e:void 0)}fI(t,i=>{vI(n,i)})}function cB(n,t){const e=CC(t5(n,t)),i=hI(n.transactionQueueTree_,t);return function due(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{uB(n,r)}),uB(n,i),G4(i,r=>{uB(n,r)}),e}function uB(n,t){const e=ag(t);if(e){const i=[];let r=[],s=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,L.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,e[c].status=3,e[c].abortReason="set"):((0,L.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),r=r.concat(af(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&i.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?tB(t,void 0):e.length=s+1,aa(n.eventQueue_,CC(t),r);for(let c=0;c<i.length;c++)Mv(i[c])}}const dB=function(n,t){const e=Lue(n),i=e.namespace;return"firebase.com"===e.domain&&zc(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&zc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Is("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new hL(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Bn(e.pathString)}},Lue=function(n){let t="",e="",i="",r="",s="",c=!0,d="https",f=443;if("string"==typeof n){let g=n.indexOf("//");g>=0&&(d=n.substring(0,g-1),n=n.substring(g+2));let b=n.indexOf("/");-1===b&&(b=n.length);let E=n.indexOf("?");-1===E&&(E=n.length),t=n.substring(0,Math.min(b,E)),b<E&&(r=function Nue(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}(n.substring(b,E)));const I=function Fue(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Is(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,E)));g=t.indexOf(":"),g>=0?(c="https"===d||"wss"===d,f=parseInt(t.substring(g+1),10)):g=t.length;const P=t.slice(0,g);if("localhost"===P.toLowerCase())e="localhost";else if(P.split(".").length<=2)e=P;else{const F=t.indexOf(".");i=t.substring(0,F).toLowerCase(),e=t.substring(F+1),s=i}"ns"in I&&(s=I.ns)}return{host:t,port:f,domain:e,subdomain:i,secure:c,scheme:d,pathString:r,namespace:s}};class s5{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Pz)(this.snapshot.exportVal())}}class o5{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class hB{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class a5{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new L.BH;return Tue(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){al("OnDisconnect.remove",this._path);const t=new L.BH;return J4(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){al("OnDisconnect.set",this._path),Wc("OnDisconnect.set",t,this._path,!1);const e=new L.BH;return J4(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){al("OnDisconnect.setWithPriority",this._path),Wc("OnDisconnect.setWithPriority",t,this._path,!1),rB("OnDisconnect.setWithPriority",e,!1);const i=new L.BH;return function Mue(n,t,e,i,r){const s=Fi(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(c,d)=>{"ok"===c&&Pv(n.onDisconnect_,t,s),lf(0,r,c,d)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){al("OnDisconnect.update",this._path),$4("OnDisconnect.update",t,this._path,!1);const e=new L.BH;return function Iue(n,t,e,i){if((0,L.xb)(e))return Hr("onDisconnect().update() called with empty data.  Don't do anything."),void lf(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&jr(e,(c,d)=>{const f=Fi(d);Pv(n.onDisconnect_,Ii(t,c),f)}),lf(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Eo{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return hn(this._path)?null:vL(this._path)}get ref(){return new ll(this._repo,this._path)}get _queryIdentifier(){const t=d4(this._queryParams),e=cL(t);return"{}"===e?"default":e}get _queryObject(){return d4(this._queryParams)}isEqual(t){if(!((t=(0,L.m9)(t))instanceof Eo))return!1;const e=this._repo===t._repo,i=yL(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Mle(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function yI(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function cf(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===qc){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==cd)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==$c)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===li){if(null!=t&&!DC(t)||null!=e&&!DC(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof EL||n.getIndex()===SL,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function bI(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ll extends Eo{constructor(t,e){super(t,e,new ZM,!1)}get parent(){const t=Yq(this._path);return null===t?null:new ll(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class lg{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Bn(t),i=cg(this.ref,t);return new lg(this._node.getChild(e),i,li)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new lg(r,cg(this.ref,i),li)))}hasChild(t){const e=new Bn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function l5(n,t){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==t?cg(n._root,t):n._root}function c5(n,t){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const e=dB(t,n._repo.repoInfo_.nodeAdmin);q4("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&zc("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),l5(n,e.path.toString())}function cg(n,t){return null===dn((n=(0,L.m9)(n))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),xC("child","path",e,!1)):xC("child","path",t,!1),new ll(n._repo,Ii(n._path,t));var e}function fB(n,t){n=(0,L.m9)(n),al("set",n._path),Wc("set",t,n._path,!1);const e=new L.BH;return oB(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function jue(n,t){$4("update",t,n._path,!1);const e=new L.BH;return function Sue(n,t,e,i){Bv(n,"update",{path:t.toString(),value:e});let r=!0;const s=TC(n),c={};if(jr(e,(d,f)=>{r=!1,c[d]=H4(Ii(t,d),Fi(f),n.serverSyncTree_,s)}),r)Hr("update() called with empty data.  Don't do anything."),lf(0,i,"ok",void 0);else{const d=gI(n),f=function Qce(n,t,e,i){!function pce(n,t,e,i){(0,L.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=FL(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=ci.fromObject(e);return Lv(n,new Nv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,c,d);mI(n.eventQueue_,f),n.server_.merge(t.toString(),e,(g,b)=>{const E="ok"===g;E||Is("update at "+t+" failed: "+g);const I=af(n.serverSyncTree_,d,!E),P=I.length>0?Vv(n,t):t;aa(n.eventQueue_,P,I),lf(0,i,g,b)}),jr(e,g=>{const b=cB(n,Ii(t,g));Vv(n,b)}),aa(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function Gue(n){n=(0,L.m9)(n);const t=new hB(()=>{}),e=new MC(t);return function Eue(n,t,e){const i=function nue(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(g,b)=>{const E=eo(g,e);i=i||rf(b,E)});let r=n.syncPointTree_.get(e);r?i=i||rf(r,Nn()):(r=new A4,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,c=s?new tf(i,!0,!1):null;return function Vce(n){return tI(n.viewCache_)}(k4(r,t,nI(n.pendingWriteTree_,t._path),s?c.getNode():rn.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(r=>{const s=Fi(r).withIndex(t._queryParams.getIndex());let c;if(qL(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())c=yC(n.serverSyncTree_,t._path,s);else{const d=bC(n.serverSyncTree_,t);c=F4(n.serverSyncTree_,t._path,s,d)}return aa(n.eventQueue_,t._path,c),cI(n.serverSyncTree_,t,e,null,!0),s},r=>(Bv(n,"get for query "+(0,L.Pz)(t)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,e).then(i=>new lg(i,new ll(n._repo,n._path),n._queryParams.getIndex()))}class MC{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new s5("value",this,new lg(t.snapshotNode,new ll(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new o5(this,t,e):null}matches(t){return t instanceof MC&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class wI{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new o5(this,t,e):null}createEvent(t,e){(0,L.hu)(null!=t.childName,"Child events should have a childName.");const i=cg(new ll(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new s5(t.type,this,new lg(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof wI&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function IC(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const f=e,g=(b,E)=>{aB(n._repo,n,d),f(b,E)};g.userCallback=e.userCallback,g.context=e.context,e=g}const c=new hB(e,s||void 0),d="value"===t?new MC(c):new wI(t,c);return function Aue(n,t,e){let i;i=".info"===dn(t._path)?qL(n.infoSyncTree_,t,e):qL(n.serverSyncTree_,t,e),W4(n.eventQueue_,t._path,i)}(n._repo,n,d),()=>aB(n._repo,n,d)}function pB(n,t,e,i){return IC(n,"value",t,e,i)}function u5(n,t,e,i){return IC(n,"child_added",t,e,i)}function d5(n,t,e,i){return IC(n,"child_changed",t,e,i)}function h5(n,t,e,i){return IC(n,"child_moved",t,e,i)}function f5(n,t,e,i){return IC(n,"child_removed",t,e,i)}function p5(n,t,e){let i=null;const r=e?new hB(e):null;"value"===t?i=new MC(r):t&&(i=new wI(t,r)),aB(n._repo,n,i)}class Jl{}class m5 extends Jl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Wc("endAt",this._value,t._path,!0);const e=IL(t._queryParams,this._value,this._key);if(bI(e),cf(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Eo(t._repo,t._path,e,t._orderByCalled)}}class $ue extends Jl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Wc("endBefore",this._value,t._path,!1);const e=function tce(n,t,e){let i,r;return n.index_===qc?("string"==typeof t&&(t=l4(t)),r=IL(n,t,e)):(i=null==e?cd:l4(e),r=IL(n,t,i)),r.endBeforeSet_=!0,r}(t._queryParams,this._value,this._key);if(bI(e),cf(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Eo(t._repo,t._path,e,t._orderByCalled)}}class g5 extends Jl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Wc("startAt",this._value,t._path,!0);const e=ML(t._queryParams,this._value,this._key);if(bI(e),cf(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Eo(t._repo,t._path,e,t._orderByCalled)}}class Yue extends Jl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Wc("startAfter",this._value,t._path,!1);const e=function ece(n,t,e){let i;if(n.index_===qc)"string"==typeof t&&(t=a4(t)),i=ML(n,t,e);else{let r;r=null==e?$c:a4(e),i=ML(n,t,r)}return i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(bI(e),cf(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Eo(t._repo,t._path,e,t._orderByCalled)}}class Kue extends Jl{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Eo(t._repo,t._path,function Xle(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class Xue extends Jl{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Eo(t._repo,t._path,function Jle(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class ede extends Jl{constructor(t){super(),this._path=t}_apply(t){yI(t,"orderByChild");const e=new Bn(this._path);if(hn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new EL(e),r=KM(t._queryParams,i);return cf(r),new Eo(t._repo,t._path,r,!0)}}class nde extends Jl{_apply(t){yI(t,"orderByKey");const e=KM(t._queryParams,qc);return cf(e),new Eo(t._repo,t._path,e,!0)}}class rde extends Jl{_apply(t){yI(t,"orderByPriority");const e=KM(t._queryParams,li);return cf(e),new Eo(t._repo,t._path,e,!0)}}class ode extends Jl{_apply(t){yI(t,"orderByValue");const e=KM(t._queryParams,SL);return cf(e),new Eo(t._repo,t._path,e,!0)}}class lde extends Jl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Wc("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new m5(this._value,this._key)._apply(new g5(this._value,this._key)._apply(t))}}function ec(n,...t){let e=(0,L.m9)(n);for(const i of t)e=i._apply(e);return e}(function Gce(n){(0,L.hu)(!oI,"__referenceConstructor has already been defined"),oI=n})(ll),function Yce(n){(0,L.hu)(!lI,"__referenceConstructor has already been defined"),lI=n}(ll);const mB={};function v5(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||zc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let f,g,c=dB(s,r),d=c.repoInfo;typeof process<"u"&&process.env&&(g=process.env.FIREBASE_DATABASE_EMULATOR_HOST),g?(f=!0,s=`http://${g}?ns=${d.namespace}`,c=dB(s,r),d=c.repoInfo):f=!c.repoInfo.secure;const b=r&&f?new aC(aC.OWNER):new ile(n.name,n.options,t);q4("Invalid Firebase Database URL",c),hn(c.path)||zc("Database URL must point to the root of a Firebase Database (not including a child path).");const E=function fde(n,t,e,i){let r=mB[t.name];r||(r={},mB[t.name]=r);let s=r[n.toURLString()];return s&&zc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new wue(n,false,e,i),r[n.toURLString()]=s,s}(d,n,b,new nle(n.name,e));return new mde(E,n)}class mde{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Cue(n,t,e){if(n.stats_=mL(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new QM(n.repoInfo_,(i,r,s,c)=>{Q4(n,i,r,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>X4(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Pz)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new ig(n.repoInfo_,t,(i,r,s,c)=>{Q4(n,i,r,s,c)},i=>{X4(n,i)},i=>{!function Due(n,t){jr(t,(e,i)=>{sB(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function ole(n,t){const e=n.toString();return pL[e]||(pL[e]=t()),pL[e]}(n.repoInfo_,()=>new ace(n.stats_,n.server_)),n.infoData_=new nce,n.infoSyncTree_=new N4({startListening:(i,r,s,c)=>{let d=[];const f=n.infoData_.getNode(i._path);return f.isEmpty()||(d=yC(n.infoSyncTree_,i._path,f),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),sB(n,"connected",!1),n.serverSyncTree_=new N4({startListening:(i,r,s,c)=>(n.server_.listen(i,s,r,(d,f)=>{const g=c(d,f);aa(n.eventQueue_,i._path,g)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ll(this._repo,Nn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function hde(n,t){const e=mB[t];(!e||e[n.key]!==n)&&zc(`Database ${t}(${n.repoInfo_}) has already been deleted.`),e5(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&zc("Cannot call "+t+" on a deleted database.")}}function y5(){Fq.IS_TRANSPORT_INITIALIZED&&Is("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function gde(){y5(),Jh.forceDisallow()}function _de(){y5(),Iv.forceDisallow(),Jh.forceAllow()}function wde(n,t){gq(n,t)}const Dde={".sv":"timestamp"};class xde{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ig.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},ig.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function Cde(n){dq(zs.SDK_VERSION),(0,zs._registerComponent)(new Wl.wA("database",(t,{instanceIdentifier:e})=>v5(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,zs.registerVersion)(cq,"0.13.5",n),(0,zs.registerVersion)(cq,"0.13.5","esm2017")}();const Ade=new ql.Yd("@firebase/database-compat"),b5=function(n){Ade.warn("FIREBASE WARNING: "+n)};class Ode{constructor(t){this._delegate=t}cancel(t){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,b5("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class Pde{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class uf{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),xC("DataSnapshot.child","path",t,!1),new uf(this._database,this._delegate.child(t))}hasChild(t){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),xC("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new uf(this._database,e)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new la(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class os{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",e,!1);const c=os.getCancelAndContextArgs_("Query.on",i,r),d=(g,b)=>{e.call(c.context,new uf(this.database,g),b)};d.userCallback=e,d.context=c.context;const f=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(t){case"value":return pB(this._delegate,d,f),e;case"child_added":return u5(this._delegate,d,f),e;case"child_removed":return f5(this._delegate,d,f),e;case"child_changed":return d5(this._delegate,d,f),e;case"child_moved":return h5(this._delegate,d,f),e;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,L.Wj)("Query.off","callback",e,!0),(0,L.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,p5(this._delegate,t,r)}else p5(this._delegate,t)}get(){return Gue(this._delegate).then(t=>new uf(this.database,t))}once(t,e,i,r){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",e,!0);const s=os.getCancelAndContextArgs_("Query.once",i,r),c=new L.BH,d=(g,b)=>{const E=new uf(this.database,g);e&&e.call(s.context,E,b),c.resolve(E)};d.userCallback=e,d.context=s.context;const f=g=>{s.cancel&&s.cancel.call(s.context,g),c.reject(g)};switch(t){case"value":pB(this._delegate,d,f,{onlyOnce:!0});break;case"child_added":u5(this._delegate,d,f,{onlyOnce:!0});break;case"child_removed":f5(this._delegate,d,f,{onlyOnce:!0});break;case"child_changed":d5(this._delegate,d,f,{onlyOnce:!0});break;case"child_moved":h5(this._delegate,d,f,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(t){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new os(this.database,ec(this._delegate,function Que(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Kue(n)}(t)))}limitToLast(t){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new os(this.database,ec(this._delegate,function Jue(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Xue(n)}(t)))}orderByChild(t){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new os(this.database,ec(this._delegate,function tde(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return xC("orderByChild","path",n,!1),new ede(n)}(t)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new os(this.database,ec(this._delegate,function ide(){return new nde}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new os(this.database,ec(this._delegate,function sde(){return new rde}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new os(this.database,ec(this._delegate,function ade(){return new ode}()))}startAt(t=null,e){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new os(this.database,ec(this._delegate,function Wue(n=null,t){return SC("startAt","key",t,!0),new g5(n,t)}(t,e)))}startAfter(t=null,e){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new os(this.database,ec(this._delegate,function Zue(n,t){return SC("startAfter","key",t,!0),new Yue(n,t)}(t,e)))}endAt(t=null,e){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new os(this.database,ec(this._delegate,function zue(n,t){return SC("endAt","key",t,!0),new m5(n,t)}(t,e)))}endBefore(t=null,e){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new os(this.database,ec(this._delegate,function que(n,t){return SC("endBefore","key",t,!0),new $ue(n,t)}(t,e)))}equalTo(t,e){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new os(this.database,ec(this._delegate,function cde(n,t){return SC("equalTo","key",t,!0),new lde(n,t)}(t,e)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof os))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,L.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,L.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,L.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new la(this.database,new ll(this._delegate._repo,this._delegate._path))}}class la extends os{constructor(t,e){super(t,new Eo(e._repo,e._path,new ZM,!1)),this.database=t,this._delegate=e}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new la(this.database,cg(this._delegate,t))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new la(this.database,t):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new la(this.database,this._delegate.root)}set(t,e){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",e,!0);const i=fB(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,b5("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}al("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",e,!0);const i=jue(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function Hue(n,t,e){if(al("setWithPriority",n._path),Wc("setWithPriority",t,n._path,!1),rB("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new L.BH;return oB(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",t,!0);const e=function Vue(n){return al("remove",n._path),fB(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,L.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function Tde(n,t,e){var i;if(n=(0,L.m9)(n),al("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=e?.applyLocally)||void 0===i||i,s=new L.BH,d=pB(n,()=>{});return function Rue(n,t,e,i,r,s){Bv(n,"transaction on "+t);const c={path:t,update:e,onComplete:i,status:null,order:fq(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=lB(n,t,void 0);c.currentInputSnapshot=d;const f=c.update(d.val());if(void 0===f)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{EC("transaction failed: Data returned ",f,c.path),c.status=0;const g=hI(n.transactionQueueTree_,t),b=ag(g)||[];let E;b.push(c),tB(g,b),"object"==typeof f&&null!==f&&(0,L.r3)(f,".priority")?(E=(0,L.DV)(f,".priority"),(0,L.hu)(DC(E),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):E=(uI(n.serverSyncTree_,t)||rn.EMPTY_NODE).getPriority().val();const I=TC(n),P=Fi(f,E),F=XL(P,d,I);c.currentOutputSnapshotRaw=P,c.currentOutputSnapshotResolved=F,c.currentWriteId=gI(n);const z=$L(n.serverSyncTree_,t,F,c.currentWriteId,c.applyLocally);aa(n.eventQueue_,t,z),_I(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(f,g,b)=>{let E=null;f?s.reject(f):(E=new lg(b,new ll(n._repo,n._path),li),s.resolve(new xde(g,E)))},d,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new Pde(s.committed,new uf(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",e,!0);const i=function Uue(n,t){n=(0,L.m9)(n),al("setPriority",n._path),rB("setPriority",t,!1);const e=new L.BH;return oB(n._repo,Ii(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",e,!0);const i=function Bue(n,t){n=(0,L.m9)(n),al("push",n._path),Wc("push",t,n._path,!0);const e=K4(n._repo),i=Yle(e),r=cg(n,i),s=cg(n,i);let c;return c=null!=t?fB(s,t).then(()=>s):Promise.resolve(s),r.then=c.then.bind(c),r.catch=c.then.bind(c,void 0),r}(this._delegate,t),r=i.then(c=>new la(this.database,c));e&&r.then(()=>e(null),c=>e(c));const s=new la(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return al("Reference.onDisconnect",this._delegate._path),new Ode(new a5(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class AC{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:gde,forceLongPolling:_de}}useEmulator(t,e,i={}){!function vde(n,t,e,i={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&zc("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&zc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new aC(aC.OWNER);else if(i.mockUserToken){const c="string"==typeof i.mockUserToken?i.mockUserToken:(0,L.Sg)(i.mockUserToken,n.app.options.projectId);s=new aC(c)}!function dde(n,t,e,i){n.repoInfo_=new hL(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,L.Dv)("database.ref",0,1,arguments.length),t instanceof la){const e=c5(this._delegate,t.toString());return new la(this,e)}{const e=l5(this._delegate,t);return new la(this,e)}}refFromURL(t){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const i=c5(this._delegate,t);return new la(this,i)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function yde(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),e5(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function bde(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function kue(n){n.persistentConnection_&&n.persistentConnection_.resume(Z4)}(n._repo)}(this._delegate)}}AC.ServerValue={TIMESTAMP:function Ede(){return Dde}(),increment:n=>function Sde(n){return{".sv":{increment:n}}}(n)};var Fde=Object.freeze({__proto__:null,initStandalone:function Nde({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){dq(e);const c=new Wl.zt("auth-internal",new Wl.H0("database-standalone"));return c.setComponent(new Wl.wA("auth-internal",()=>i,"PRIVATE")),{instance:new AC(v5(n,c,void 0,t,s),n),namespace:r}}});const Lde=AC.ServerValue;function w5(n){return null==n}function C5(n){return"function"==typeof n.set}function D5(n,t){return C5(t)?t:n.ref(t)}function E5(n,t){if(function Vde(n){return"string"==typeof n}(n))return t.stringCase();if(C5(n))return t.firebaseCase();if(function Ude(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function kC(n,t,e="on",i=La.z){return new si.y(r=>{let s=null;return s=n[e](t,(c,d)=>{i.schedule(()=>{r.next({snapshot:c,prevKey:d})}),"once"===e&&i.schedule(()=>r.complete())},c=>{i.schedule(()=>r.error(c))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,w.U)(r=>{const{snapshot:s,prevKey:c}=r;let d=null;return s.exists()&&(d=s.key),{type:t,payload:s,prevKey:c,key:d}}),(0,LS.B)())}function S5(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function Gde(n,t){const{payload:e,prevKey:i,key:r}=t,s=S5(n,r),c=function jde(n,t){if(w5(t))return 0;{const e=S5(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let d=null;t.payload.forEach(f=>{const g={payload:f,type:"value",prevKey:d,key:f.key};return d=f.key,n=[...n,g],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(f=>f.payload.key!==e.key)).splice(c,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(c,0,t)}return n;case"child_removed":return n.filter(d=>d.payload.key!==e.key);case"child_changed":return n.map(d=>d.payload.key===r?t:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,d),n}return n;default:return n}}function x5(n){return(w5(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function T5(n,t,e){return function Hde(n,t,e){return kC(n,"value","once",e).pipe(Qn(i=>{const r=[ct(i)];return t.forEach(s=>r.push(kC(n,s,"on",e))),(0,_r.T)(...r).pipe(um(Gde,[]))}),B())}(n,t=x5(t),e)}function M5(n,t,e){const i=(t=x5(t)).map(r=>kC(n,r,"on",e));return(0,_r.T)(...i)}function I5(n,t){return function(i,r){return E5(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function Wde(n){return function(e){return e?E5(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function A5(n,t){return function(){return kC(n,"value","on",t)}}!function Bde(n){n.INTERNAL.registerComponent(new Wl.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new AC(r,i)},"PUBLIC").setServiceProps({Reference:la,Query:os,Database:AC,DataSnapshot:uf,enableLogging:wde,INTERNAL:Fde,ServerValue:Lde}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.5")}(CO.Z);const Kde=new o.OlP("angularfire2.realtimeDatabaseURL"),Qde=new o.OlP("angularfire2.database.use-emulator");let Xde=(()=>{class n{constructor(e,i,r,s,c,d,f,g,b,E,I,P,F,z,te){this.schedulers=d;const Ve=f,Ze=(0,br.on)(e,c,i);g&&HN(Ze,c,b,I,P,F,E,z),this.database=(0,br.cc)(`${Ze.name}.database.${r}`,"AngularFireDatabase",Ze.name,()=>{const rt=c.runOutsideAngular(()=>Ze.database(r||void 0));return Ve&&rt.useEmulator(...Ve),rt},[Ve])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>D5(this.database,e));let s=r;return i&&(s=i(r)),function Yde(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:I5(i,"update"),set:I5(i,"set"),push:r=>i.push(r),remove:Wde(i),snapshotChanges:r=>T5(n,r,e).pipe(Pn.iC),stateChanges:r=>M5(n,r,e).pipe(Pn.iC),auditTrail:r=>function zde(n,t,e){return function qde(n,t,e){return function $de(n,t){return kC(n,"value","on",t).pipe((0,w.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(function zae(...n){const t=(0,Fs.jO)(n);return(0,gi.e)((e,i)=>{const r=n.length,s=new Array(r);let c=n.map(()=>!1),d=!1;for(let f=0;f<r;f++)(0,Me.Xf)(n[f]).subscribe((0,Gn.x)(i,g=>{s[f]=g,!d&&!c[f]&&(c[f]=!0,(d=c.every(k.y))&&(c=null))},it.Z));e.subscribe((0,Gn.x)(i,f=>{if(d){const g=[f,...s];i.next(t?t(...g):g)}}))})}(t),(0,w.U)(([r,s])=>{const c=r.lastKeyToLoad,d=s.map(f=>f.key);return{actions:s,lastKeyToLoad:c,loadedKeys:d}}),function $ae(n){return(0,gi.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,Gn.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,w.U)(r=>r.actions))}(n,M5(n,t).pipe(um((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(Pn.iC),valueChanges:(r,s)=>T5(n,r,e).pipe((0,w.U)(d=>d.map(f=>s&&s.idField?Object.assign(Object.assign({},f.payload.val()),{[s.idField]:f.key}):f.payload.val())),Pn.iC)}}(s,this)}object(e){return function Zde(n,t){return{query:n,snapshotChanges:()=>A5(n,t.schedulers.outsideAngular)().pipe(Pn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>A5(n,t.schedulers.outsideAngular)().pipe(Pn.iC,(0,w.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>D5(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(br.Dh),o.LFG(br.xv,8),o.LFG(Kde,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Pn.HU),o.LFG(Qde,8),o.LFG(Lw,8),o.LFG(NN,8),o.LFG(FN,8),o.LFG(LN,8),o.LFG(BN,8),o.LFG(VN,8),o.LFG(UN,8),o.LFG(Fw,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Jde=(()=>{class n{constructor(){WT.Z.registerVersion("angularfire",Pn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Xde]}),n})();const ehe=[br.hO.initializeApp({apiKey:"AIzaSyDcEfZawwErcyWkLTOs5CR_VRusdxKEgbw",authDomain:"text-reader-9b298.firebaseapp.com",databaseURL:"https://text-reader-9b298.firebaseio.com",projectId:"text-reader-9b298",storageBucket:"text-reader-9b298.appspot.com",messagingSenderId:"758992454318",appId:"1:758992454318:web:eb6a3261e254c44d02633f",measurementId:"G-NK0BMCG77Q"}),bee,Mee,Gae,Jde];let the=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n,bootstrap:[tre]}),n.\u0275inj=o.cJS({providers:[nl,Ao],imports:[Tn,ere,eoe,ehe,YZ,Xb,gh,Lie]}),n})();(0,o.G48)(),_f().bootstrapModule(the).catch(n=>console.error(n))},5867:(vt,Oe,V)=>{V.d(Oe,{C6:()=>o.getApps,Mq:()=>o.getApp});var o=V(9681);(0,o.registerVersion)("firebase","9.9.3","app")},127:(vt,Oe,V)=>{V.d(Oe,{Z:()=>o.Z});var o=V(3942);o.Z.registerVersion("firebase","9.9.3","app-compat")},5881:(vt,Oe,V)=>{V.r(Oe);var o=V(5861),j=V(3942),N=V(6457),ue=V(2090),oe=(V(9681),V(1877),V(4859));function ge(){return window}function Y(){return(Y=(0,o.Z)(function*(J,Z,$){var Ee;const{BuildInfo:We}=ge();(0,N.aq)(Z.sessionId,"AuthEvent did not contain a session ID");const ke=yield ve(Z.sessionId),Xe={};return(0,N.ar)()?Xe.ibi=We.packageName:(0,N.as)()?Xe.apn=We.packageName:(0,N.at)(J,"operation-not-supported-in-this-environment"),We.displayName&&(Xe.appDisplayName=We.displayName),Xe.sessionId=ke,(0,N.au)(J,$,Z.type,void 0,null!==(Ee=Z.eventId)&&void 0!==Ee?Ee:void 0,Xe)})).apply(this,arguments)}function qe(){return(qe=(0,o.Z)(function*(J){const{BuildInfo:Z}=ge(),$={};(0,N.ar)()?$.iosBundleId=Z.packageName:(0,N.as)()?$.androidPackageName=Z.packageName:(0,N.at)(J,"operation-not-supported-in-this-environment"),yield(0,N.av)(J,$)})).apply(this,arguments)}function ht(){return(ht=(0,o.Z)(function*(J,Z,$){const{cordova:Ee}=ge();let We=()=>{};try{yield new Promise((ke,Xe)=>{let Dt=null;function qt(){var Ut;ke();const gn=null===(Ut=Ee.plugins.browsertab)||void 0===Ut?void 0:Ut.close;"function"==typeof gn&&gn(),"function"==typeof $?.close&&$.close()}function di(){Dt||(Dt=window.setTimeout(()=>{Xe((0,N.aw)(J,"redirect-cancelled-by-user"))},2e3))}function xn(){"visible"===document?.visibilityState&&di()}Z.addPassiveListener(qt),document.addEventListener("resume",di,!1),(0,N.as)()&&document.addEventListener("visibilitychange",xn,!1),We=()=>{Z.removePassiveListener(qt),document.removeEventListener("resume",di,!1),document.removeEventListener("visibilitychange",xn,!1),Dt&&window.clearTimeout(Dt)}})}finally{We()}})).apply(this,arguments)}function ve(J){return at.apply(this,arguments)}function at(){return(at=(0,o.Z)(function*(J){const Z=lt(J),$=yield crypto.subtle.digest("SHA-256",Z);return Array.from(new Uint8Array($)).map(We=>We.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function lt(J){if((0,N.aq)(/[0-9a-zA-Z]+/.test(J),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(J);const Z=new ArrayBuffer(J.length),$=new Uint8Array(Z);for(let Ee=0;Ee<J.length;Ee++)$[Ee]=J.charCodeAt(Ee);return $}class Pe extends N.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Z=>{this.resolveInialized=Z})}addPassiveListener(Z){this.passiveListeners.add(Z)}removePassiveListener(Z){this.passiveListeners.delete(Z)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Z){return this.resolveInialized(),this.passiveListeners.forEach($=>$(Z)),super.onEvent(Z)}initialized(){var Z=this;return(0,o.Z)(function*(){yield Z.initPromise})()}}function ce(J){return pe.apply(this,arguments)}function pe(){return(pe=(0,o.Z)(function*(J){const Z=yield se()._get(_e(J));return Z&&(yield se()._remove(_e(J))),Z})).apply(this,arguments)}function ne(){const J=[],Z="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let $=0;$<20;$++){const Ee=Math.floor(Math.random()*Z.length);J.push(Z.charAt(Ee))}return J.join("")}function se(){return(0,N.ay)(N.b)}function _e(J){return(0,N.az)("authEvent",J.config.apiKey,J.name)}function je(J){if(!J?.includes("?"))return{};const[Z,...$]=J.split("?");return(0,ue.zd)($.join("?"))}function tt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function en(){var J;return(null===(J=self?.location)||void 0===J?void 0:J.protocol)||null}function Wi(J=(0,ue.z$)()){return!("file:"!==en()&&"ionic:"!==en()&&"capacitor:"!==en()||!J.toLowerCase().match(/iphone|ipad|ipod|android/))}function Cr(){try{const J=self.localStorage,Z=N.aI();if(J)return J.setItem(Z,"1"),J.removeItem(Z),!function as(J=(0,ue.z$)()){return function Yi(){return(0,ue.w1)()&&11===document?.documentMode}()||function Vn(J=(0,ue.z$)()){return/Edge\/\d+/.test(J)}(J)}()||(0,ue.hl)()}catch{return Dr()&&(0,ue.hl)()}return!1}function Dr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Jn(){return(function Gt(){return"http:"===en()||"https:"===en()}()||(0,ue.ru)()||Wi())&&!function to(){return(0,ue.b$)()||(0,ue.UG)()}()&&Cr()&&!Dr()}function ls(){return Wi()&&typeof document<"u"}function kn(){return(kn=(0,o.Z)(function*(){return!!ls()&&new Promise(J=>{const Z=setTimeout(()=>{J(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Z),J(!0)})})})).apply(this,arguments)}const mn={LOCAL:"local",NONE:"none",SESSION:"session"},wi=N.ax,Ki="persistence";function Sn(J){return ir.apply(this,arguments)}function ir(){return(ir=(0,o.Z)(function*(J){yield J._initializationPromise;const Z=pt(),$=N.az(Ki,J.config.apiKey,J.name);Z&&Z.setItem($,J._getPersistence())})).apply(this,arguments)}function pt(){var J;try{return(null===(J=function Zi(){return typeof window<"u"?window:null}())||void 0===J?void 0:J.sessionStorage)||null}catch{return null}}const ut=N.ax;class Un{constructor(){this.browserResolver=N.ay(N.k),this.cordovaResolver=N.ay(class an{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(Z){var $=this;return(0,o.Z)(function*(){const Ee=Z._key();let We=$.eventManagers.get(Ee);return We||(We=new Pe(Z),$.eventManagers.set(Ee,We),$.attachCallbackListeners(Z,We)),We})()}_openPopup(Z){(0,N.at)(Z,"operation-not-supported-in-this-environment")}_openRedirect(Z,$,Ee,We){var ke=this;return(0,o.Z)(function*(){!function De(J){var Z,$,Ee,We,ke,Xe,Dt,qt,di,xn;const Ut=ge();(0,N.ax)("function"==typeof(null===(Z=Ut?.universalLinks)||void 0===Z?void 0:Z.subscribe),J,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(typeof(null===($=Ut?.BuildInfo)||void 0===$?void 0:$.packageName)<"u",J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(ke=null===(We=null===(Ee=Ut?.cordova)||void 0===Ee?void 0:Ee.plugins)||void 0===We?void 0:We.browsertab)||void 0===ke?void 0:ke.openUrl),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(qt=null===(Dt=null===(Xe=Ut?.cordova)||void 0===Xe?void 0:Xe.plugins)||void 0===Dt?void 0:Dt.browsertab)||void 0===qt?void 0:qt.isAvailable),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(xn=null===(di=Ut?.cordova)||void 0===di?void 0:di.InAppBrowser)||void 0===xn?void 0:xn.open),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Z);const Xe=yield ke._initialize(Z);yield Xe.initialized(),Xe.resetRedirect(),(0,N.aD)(),yield ke._originValidation(Z);const Dt=function Te(J,Z,$=null){return{type:Z,eventId:$,urlResponse:null,sessionId:ne(),postBody:null,tenantId:J.tenantId,error:(0,N.aw)(J,"no-auth-event")}}(Z,Ee,We);yield function Qe(J,Z){return se()._set(_e(J),Z)}(Z,Dt);const qt=yield function W(J,Z,$){return Y.apply(this,arguments)}(Z,Dt,$),di=yield function Fe(J){const{cordova:Z}=ge();return new Promise($=>{Z.plugins.browsertab.isAvailable(Ee=>{let We=null;Ee?Z.plugins.browsertab.openUrl(J):We=Z.InAppBrowser.open(J,(0,N.ap)()?"_blank":"_system","location=yes"),$(We)})})}(qt);return function xe(J,Z,$){return ht.apply(this,arguments)}(Z,Xe,di)})()}_isIframeWebStorageSupported(Z,$){throw new Error("Method not implemented.")}_originValidation(Z){const $=Z._key();return this.originValidationPromises[$]||(this.originValidationPromises[$]=function re(J){return qe.apply(this,arguments)}(Z)),this.originValidationPromises[$]}attachCallbackListeners(Z,$){const{universalLinks:Ee,handleOpenURL:We,BuildInfo:ke}=ge(),Xe=setTimeout((0,o.Z)(function*(){yield ce(Z),$.onEvent(tt())}),500),Dt=function(){var xn=(0,o.Z)(function*(Ut){clearTimeout(Xe);const gn=yield ce(Z);let So=null;gn&&Ut?.url&&(So=function we(J,Z){var $,Ee;const We=function He(J){const Z=je(J),$=Z.link?decodeURIComponent(Z.link):void 0,Ee=je($).link,We=Z.deep_link_id?decodeURIComponent(Z.deep_link_id):void 0;return je(We).link||We||Ee||$||J}(Z);if(We.includes("/__/auth/callback")){const ke=je(We),Xe=ke.firebaseError?function de(J){try{return JSON.parse(J)}catch{return null}}(decodeURIComponent(ke.firebaseError)):null,Dt=null===(Ee=null===($=Xe?.code)||void 0===$?void 0:$.split("auth/"))||void 0===Ee?void 0:Ee[1],qt=Dt?(0,N.aw)(Dt):null;return qt?{type:J.type,eventId:J.eventId,tenantId:J.tenantId,error:qt,urlResponse:null,sessionId:null,postBody:null}:{type:J.type,eventId:J.eventId,tenantId:J.tenantId,sessionId:J.sessionId,urlResponse:We,postBody:null}}return null}(gn,Ut.url)),$.onEvent(So||tt())});return function(gn){return xn.apply(this,arguments)}}();typeof Ee<"u"&&"function"==typeof Ee.subscribe&&Ee.subscribe(null,Dt);const qt=We,di=`${ke.packageName.toLowerCase()}://`;ge().handleOpenURL=function(){var xn=(0,o.Z)(function*(Ut){if(Ut.toLowerCase().startsWith(di)&&Dt({url:Ut}),"function"==typeof qt)try{qt(Ut)}catch(gn){console.error(gn)}});return function(Ut){return xn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(Z){var $=this;return(0,o.Z)(function*(){return yield $.selectUnderlyingResolver(),$.assertedUnderlyingResolver._initialize(Z)})()}_openPopup(Z,$,Ee,We){var ke=this;return(0,o.Z)(function*(){return yield ke.selectUnderlyingResolver(),ke.assertedUnderlyingResolver._openPopup(Z,$,Ee,We)})()}_openRedirect(Z,$,Ee,We){var ke=this;return(0,o.Z)(function*(){return yield ke.selectUnderlyingResolver(),ke.assertedUnderlyingResolver._openRedirect(Z,$,Ee,We)})()}_isIframeWebStorageSupported(Z,$){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Z,$)}_originValidation(Z){return this.assertedUnderlyingResolver._originValidation(Z)}get _shouldInitProactively(){return ls()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ut(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Z=this;return(0,o.Z)(function*(){if(Z.underlyingResolver)return;const $=yield function bt(){return kn.apply(this,arguments)}();Z.underlyingResolver=$?Z.cordovaResolver:Z.browserResolver})()}}function rr(J){return J.unwrap()}function zt(J){return sr(J)}function sr(J){const{_tokenResponse:Z}=J instanceof ue.ZR?J.customData:J;if(!Z)return null;if(!(J instanceof ue.ZR)&&"temporaryProof"in Z&&"phoneNumber"in Z)return N.P.credentialFromResult(J);const $=Z.providerId;if(!$||$===N.o.PASSWORD)return null;let Ee;switch($){case N.o.GOOGLE:Ee=N.Q;break;case N.o.FACEBOOK:Ee=N.N;break;case N.o.GITHUB:Ee=N.T;break;case N.o.TWITTER:Ee=N.W;break;default:const{oauthIdToken:We,oauthAccessToken:ke,oauthTokenSecret:Xe,pendingToken:Dt,nonce:qt}=Z;return ke||Xe||We||Dt?Dt?$.startsWith("saml.")?N.aL._create($,Dt):N.J._fromParams({providerId:$,signInMethod:$,pendingToken:Dt,idToken:We,accessToken:ke}):new N.U($).credential({idToken:We,accessToken:ke,rawNonce:qt}):null}return J instanceof ue.ZR?Ee.credentialFromError(J):Ee.credentialFromResult(J)}function Pt(J,Z){return Z.catch($=>{throw $ instanceof ue.ZR&&function jn(J,Z){var $,Ee;const We=null===($=Z.customData)||void 0===$?void 0:$._tokenResponse;if("auth/multi-factor-auth-required"===(null===(Ee=Z)||void 0===Ee?void 0:Ee.code))Z.resolver=new ee(J,N.an(J,Z));else if(We){const ke=sr(Z),Xe=Z;ke&&(Xe.credential=ke,Xe.tenantId=We.tenantId||void 0,Xe.email=We.email||void 0,Xe.phoneNumber=We.phoneNumber||void 0)}}(J,$),$}).then($=>{const We=$.user;return{operationType:$.operationType,credential:zt($),additionalUserInfo:N.al($),user:q.getOrCreate(We)}})}function Er(J,Z){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,o.Z)(function*(J,Z){const $=yield Z;return{verificationId:$.verificationId,confirm:Ee=>Pt(J,$.confirm(Ee))}})).apply(this,arguments)}class ee{constructor(Z,$){this.resolver=$,this.auth=function Hn(J){return J.wrapped()}(Z)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Z){return Pt(rr(this.auth),this.resolver.resolveSignIn(Z))}}class q{constructor(Z){this._delegate=Z,this.multiFactor=N.ao(Z)}static getOrCreate(Z){return q.USER_MAP.has(Z)||q.USER_MAP.set(Z,new q(Z)),q.USER_MAP.get(Z)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Z){return this._delegate.getIdTokenResult(Z)}getIdToken(Z){return this._delegate.getIdToken(Z)}linkAndRetrieveDataWithCredential(Z){return this.linkWithCredential(Z)}linkWithCredential(Z){var $=this;return(0,o.Z)(function*(){return Pt($.auth,N.Z($._delegate,Z))})()}linkWithPhoneNumber(Z,$){var Ee=this;return(0,o.Z)(function*(){return Er(Ee.auth,N.l(Ee._delegate,Z,$))})()}linkWithPopup(Z){var $=this;return(0,o.Z)(function*(){return Pt($.auth,N.d($._delegate,Z,Un))})()}linkWithRedirect(Z){var $=this;return(0,o.Z)(function*(){return yield Sn(N.aE($.auth)),N.g($._delegate,Z,Un)})()}reauthenticateAndRetrieveDataWithCredential(Z){return this.reauthenticateWithCredential(Z)}reauthenticateWithCredential(Z){var $=this;return(0,o.Z)(function*(){return Pt($.auth,N._($._delegate,Z))})()}reauthenticateWithPhoneNumber(Z,$){return Er(this.auth,N.r(this._delegate,Z,$))}reauthenticateWithPopup(Z){return Pt(this.auth,N.e(this._delegate,Z,Un))}reauthenticateWithRedirect(Z){var $=this;return(0,o.Z)(function*(){return yield Sn(N.aE($.auth)),N.h($._delegate,Z,Un)})()}sendEmailVerification(Z){return N.ab(this._delegate,Z)}unlink(Z){var $=this;return(0,o.Z)(function*(){return yield N.ak($._delegate,Z),$})()}updateEmail(Z){return N.ag(this._delegate,Z)}updatePassword(Z){return N.ah(this._delegate,Z)}updatePhoneNumber(Z){return N.u(this._delegate,Z)}updateProfile(Z){return N.af(this._delegate,Z)}verifyBeforeUpdateEmail(Z,$){return N.ac(this._delegate,Z,$)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}q.USER_MAP=new WeakMap;const G=N.ax;let K=(()=>{class J{constructor($,Ee){if(this.app=$,Ee.isInitialized())return this._delegate=Ee.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:We}=$.options;G(We,"invalid-api-key",{appName:$.name}),G(We,"invalid-api-key",{appName:$.name});const ke=typeof window<"u"?Un:void 0;this._delegate=Ee.initialize({options:{persistence:Ae(We,$.name),popupRedirectResolver:ke}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?q.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode($){this._delegate.languageCode=$}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId($){this._delegate.tenantId=$}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator($,Ee){N.G(this._delegate,$,Ee)}applyActionCode($){return N.a2(this._delegate,$)}checkActionCode($){return N.a3(this._delegate,$)}confirmPasswordReset($,Ee){return N.a1(this._delegate,$,Ee)}createUserWithEmailAndPassword($,Ee){var We=this;return(0,o.Z)(function*(){return Pt(We._delegate,N.a5(We._delegate,$,Ee))})()}fetchProvidersForEmail($){return this.fetchSignInMethodsForEmail($)}fetchSignInMethodsForEmail($){return N.aa(this._delegate,$)}isSignInWithEmailLink($){return N.a8(this._delegate,$)}getRedirectResult(){var $=this;return(0,o.Z)(function*(){G(Jn(),$._delegate,"operation-not-supported-in-this-environment");const Ee=yield N.j($._delegate,Un);return Ee?Pt($._delegate,Promise.resolve(Ee)):{credential:null,user:null}})()}addFrameworkForLogging($){!function An(J,Z){(0,N.aE)(J)._logFramework(Z)}(this._delegate,$)}onAuthStateChanged($,Ee,We){const{next:ke,error:Xe,complete:Dt}=X($,Ee,We);return this._delegate.onAuthStateChanged(ke,Xe,Dt)}onIdTokenChanged($,Ee,We){const{next:ke,error:Xe,complete:Dt}=X($,Ee,We);return this._delegate.onIdTokenChanged(ke,Xe,Dt)}sendSignInLinkToEmail($,Ee){return N.a7(this._delegate,$,Ee)}sendPasswordResetEmail($,Ee){return N.a0(this._delegate,$,Ee||void 0)}setPersistence($){var Ee=this;return(0,o.Z)(function*(){let We;switch(function Ci(J,Z){wi(Object.values(mn).includes(Z),J,"invalid-persistence-type"),(0,ue.b$)()?wi(Z!==mn.SESSION,J,"unsupported-persistence-type"):(0,ue.UG)()?wi(Z===mn.NONE,J,"unsupported-persistence-type"):Dr()?wi(Z===mn.NONE||Z===mn.LOCAL&&(0,ue.hl)(),J,"unsupported-persistence-type"):wi(Z===mn.NONE||Cr(),J,"unsupported-persistence-type")}(Ee._delegate,$),$){case mn.SESSION:We=N.a;break;case mn.LOCAL:We=(yield N.ay(N.i)._isAvailable())?N.i:N.b;break;case mn.NONE:We=N.L;break;default:return N.at("argument-error",{appName:Ee._delegate.name})}return Ee._delegate.setPersistence(We)})()}signInAndRetrieveDataWithCredential($){return this.signInWithCredential($)}signInAnonymously(){return Pt(this._delegate,N.X(this._delegate))}signInWithCredential($){return Pt(this._delegate,N.Y(this._delegate,$))}signInWithCustomToken($){return Pt(this._delegate,N.$(this._delegate,$))}signInWithEmailAndPassword($,Ee){return Pt(this._delegate,N.a6(this._delegate,$,Ee))}signInWithEmailLink($,Ee){return Pt(this._delegate,N.a9(this._delegate,$,Ee))}signInWithPhoneNumber($,Ee){return Er(this._delegate,N.s(this._delegate,$,Ee))}signInWithPopup($){var Ee=this;return(0,o.Z)(function*(){return G(Jn(),Ee._delegate,"operation-not-supported-in-this-environment"),Pt(Ee._delegate,N.c(Ee._delegate,$,Un))})()}signInWithRedirect($){var Ee=this;return(0,o.Z)(function*(){return G(Jn(),Ee._delegate,"operation-not-supported-in-this-environment"),yield Sn(Ee._delegate),N.f(Ee._delegate,$,Un)})()}updateCurrentUser($){return this._delegate.updateCurrentUser($)}verifyPasswordResetCode($){return N.a4(this._delegate,$)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return J.Persistence=mn,J})();function X(J,Z,$){let Ee=J;"function"!=typeof J&&({next:Ee,error:Z,complete:$}=J);const We=Ee;return{next:Xe=>We(Xe&&q.getOrCreate(Xe)),error:Z,complete:$}}function Ae(J,Z){const $=function Rn(J,Z){const $=pt();if(!$)return[];const Ee=N.az(Ki,J,Z);switch($.getItem(Ee)){case mn.NONE:return[N.L];case mn.LOCAL:return[N.i,N.a];case mn.SESSION:return[N.a];default:return[]}}(J,Z);if(typeof self<"u"&&!$.includes(N.i)&&$.push(N.i),typeof window<"u")for(const Ee of[N.b,N.a])$.includes(Ee)||$.push(Ee);return $.includes(N.L)||$.push(N.L),$}class Ye{constructor(){this.providerId="phone",this._delegate=new N.P(rr(j.Z.auth()))}static credential(Z,$){return N.P.credential(Z,$)}verifyPhoneNumber(Z,$){return this._delegate.verifyPhoneNumber(Z,$)}unwrap(){return this._delegate}}Ye.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,Ye.PROVIDER_ID=N.P.PROVIDER_ID;const Tt=N.ax;class bn{constructor(Z,$,Ee=j.Z.app()){var We;Tt(null===(We=Ee.options)||void 0===We?void 0:We.apiKey,"invalid-api-key",{appName:Ee.name}),this._delegate=new N.R(Z,$,Ee.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ui(J){J.INTERNAL.registerComponent(new oe.wA("auth-compat",Z=>{const $=Z.getProvider("app-compat").getImmediate(),Ee=Z.getProvider("auth");return new K($,Ee)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:Ye,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:bn,TwitterAuthProvider:N.W,Auth:K,AuthCredential:N.H,Error:ue.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),J.registerVersion("@firebase/auth-compat","0.2.18")}(j.Z)},9751:(vt,Oe,V)=>{V.d(Oe,{y:()=>ge});var o=V(930),j=V(727),N=V(8822),ue=V(9635),he=V(2416),ye=V(576),oe=V(2806);let ge=(()=>{class re{constructor(Fe){Fe&&(this._subscribe=Fe)}lift(Fe){const xe=new re;return xe.source=this,xe.operator=Fe,xe}subscribe(Fe,xe,ht){const De=function Y(re){return re&&re instanceof o.Lv||function W(re){return re&&(0,ye.m)(re.next)&&(0,ye.m)(re.error)&&(0,ye.m)(re.complete)}(re)&&(0,j.Nn)(re)}(Fe)?Fe:new o.Hp(Fe,xe,ht);return(0,oe.x)(()=>{const{operator:ve,source:at}=this;De.add(ve?ve.call(De,at):at?this._subscribe(De):this._trySubscribe(De))}),De}_trySubscribe(Fe){try{return this._subscribe(Fe)}catch(xe){Fe.error(xe)}}forEach(Fe,xe){return new(xe=Ce(xe))((ht,De)=>{const ve=new o.Hp({next:at=>{try{Fe(at)}catch(lt){De(lt),ve.unsubscribe()}},error:De,complete:ht});this.subscribe(ve)})}_subscribe(Fe){var xe;return null===(xe=this.source)||void 0===xe?void 0:xe.subscribe(Fe)}[N.L](){return this}pipe(...Fe){return(0,ue.U)(Fe)(this)}toPromise(Fe){return new(Fe=Ce(Fe))((xe,ht)=>{let De;this.subscribe(ve=>De=ve,ve=>ht(ve),()=>xe(De))})}}return re.create=qe=>new re(qe),re})();function Ce(re){var qe;return null!==(qe=re??he.v.Promise)&&void 0!==qe?qe:Promise}},7579:(vt,Oe,V)=>{V.d(Oe,{x:()=>oe});var o=V(9751),j=V(727);const ue=(0,V(3888).d)(Ce=>function(){Ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=V(8737),ye=V(2806);let oe=(()=>{class Ce extends o.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Y){const re=new ge(this,this);return re.operator=Y,re}_throwIfClosed(){if(this.closed)throw new ue}next(Y){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const re of this.currentObservers)re.next(Y)}})}error(Y){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Y;const{observers:re}=this;for(;re.length;)re.shift().error(Y)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Y}=this;for(;Y.length;)Y.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Y;return(null===(Y=this.observers)||void 0===Y?void 0:Y.length)>0}_trySubscribe(Y){return this._throwIfClosed(),super._trySubscribe(Y)}_subscribe(Y){return this._throwIfClosed(),this._checkFinalizedStatuses(Y),this._innerSubscribe(Y)}_innerSubscribe(Y){const{hasError:re,isStopped:qe,observers:Fe}=this;return re||qe?j.Lc:(this.currentObservers=null,Fe.push(Y),new j.w0(()=>{this.currentObservers=null,(0,he.P)(Fe,Y)}))}_checkFinalizedStatuses(Y){const{hasError:re,thrownError:qe,isStopped:Fe}=this;re?Y.error(qe):Fe&&Y.complete()}asObservable(){const Y=new o.y;return Y.source=this,Y}}return Ce.create=(W,Y)=>new ge(W,Y),Ce})();class ge extends oe{constructor(W,Y){super(),this.destination=W,this.source=Y}next(W){var Y,re;null===(re=null===(Y=this.destination)||void 0===Y?void 0:Y.next)||void 0===re||re.call(Y,W)}error(W){var Y,re;null===(re=null===(Y=this.destination)||void 0===Y?void 0:Y.error)||void 0===re||re.call(Y,W)}complete(){var W,Y;null===(Y=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===Y||Y.call(W)}_subscribe(W){var Y,re;return null!==(re=null===(Y=this.source)||void 0===Y?void 0:Y.subscribe(W))&&void 0!==re?re:j.Lc}}},930:(vt,Oe,V)=>{V.d(Oe,{Hp:()=>ht,Lv:()=>re});var o=V(576),j=V(727),N=V(2416),ue=V(7849),he=V(5032);const ye=Ce("C",void 0,void 0);function Ce(Ne,Pe,Te){return{kind:Ne,value:Pe,error:Te}}var W=V(3410),Y=V(2806);class re extends j.w0{constructor(Pe){super(),this.isStopped=!1,Pe?(this.destination=Pe,(0,j.Nn)(Pe)&&Pe.add(this)):this.destination=lt}static create(Pe,Te,Qe){return new ht(Pe,Te,Qe)}next(Pe){this.isStopped?at(function ge(Ne){return Ce("N",Ne,void 0)}(Pe),this):this._next(Pe)}error(Pe){this.isStopped?at(function oe(Ne){return Ce("E",void 0,Ne)}(Pe),this):(this.isStopped=!0,this._error(Pe))}complete(){this.isStopped?at(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Pe){this.destination.next(Pe)}_error(Pe){try{this.destination.error(Pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Fe(Ne,Pe){return qe.call(Ne,Pe)}class xe{constructor(Pe){this.partialObserver=Pe}next(Pe){const{partialObserver:Te}=this;if(Te.next)try{Te.next(Pe)}catch(Qe){De(Qe)}}error(Pe){const{partialObserver:Te}=this;if(Te.error)try{Te.error(Pe)}catch(Qe){De(Qe)}else De(Pe)}complete(){const{partialObserver:Pe}=this;if(Pe.complete)try{Pe.complete()}catch(Te){De(Te)}}}class ht extends re{constructor(Pe,Te,Qe){let ce;if(super(),(0,o.m)(Pe)||!Pe)ce={next:Pe??void 0,error:Te??void 0,complete:Qe??void 0};else{let pe;this&&N.v.useDeprecatedNextContext?(pe=Object.create(Pe),pe.unsubscribe=()=>this.unsubscribe(),ce={next:Pe.next&&Fe(Pe.next,pe),error:Pe.error&&Fe(Pe.error,pe),complete:Pe.complete&&Fe(Pe.complete,pe)}):ce=Pe}this.destination=new xe(ce)}}function De(Ne){N.v.useDeprecatedSynchronousErrorHandling?(0,Y.O)(Ne):(0,ue.h)(Ne)}function at(Ne,Pe){const{onStoppedNotification:Te}=N.v;Te&&W.z.setTimeout(()=>Te(Ne,Pe))}const lt={closed:!0,next:he.Z,error:function ve(Ne){throw Ne},complete:he.Z}},727:(vt,Oe,V)=>{V.d(Oe,{Lc:()=>ye,w0:()=>he,Nn:()=>oe});var o=V(576);const N=(0,V(3888).d)(Ce=>function(Y){Ce(this),this.message=Y?`${Y.length} errors occurred during unsubscription:\n${Y.map((re,qe)=>`${qe+1}) ${re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Y});var ue=V(8737);class he{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:Y}=this;if(Y)if(this._parentage=null,Array.isArray(Y))for(const Fe of Y)Fe.remove(this);else Y.remove(this);const{initialTeardown:re}=this;if((0,o.m)(re))try{re()}catch(Fe){W=Fe instanceof N?Fe.errors:[Fe]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Fe of qe)try{ge(Fe)}catch(xe){W=W??[],xe instanceof N?W=[...W,...xe.errors]:W.push(xe)}}if(W)throw new N(W)}}add(W){var Y;if(W&&W!==this)if(this.closed)ge(W);else{if(W instanceof he){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(Y=this._finalizers)&&void 0!==Y?Y:[]).push(W)}}_hasParent(W){const{_parentage:Y}=this;return Y===W||Array.isArray(Y)&&Y.includes(W)}_addParent(W){const{_parentage:Y}=this;this._parentage=Array.isArray(Y)?(Y.push(W),Y):Y?[Y,W]:W}_removeParent(W){const{_parentage:Y}=this;Y===W?this._parentage=null:Array.isArray(Y)&&(0,ue.P)(Y,W)}remove(W){const{_finalizers:Y}=this;Y&&(0,ue.P)(Y,W),W instanceof he&&W._removeParent(this)}}he.EMPTY=(()=>{const Ce=new he;return Ce.closed=!0,Ce})();const ye=he.EMPTY;function oe(Ce){return Ce instanceof he||Ce&&"closed"in Ce&&(0,o.m)(Ce.remove)&&(0,o.m)(Ce.add)&&(0,o.m)(Ce.unsubscribe)}function ge(Ce){(0,o.m)(Ce)?Ce():Ce.unsubscribe()}},2416:(vt,Oe,V)=>{V.d(Oe,{v:()=>o});const o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(vt,Oe,V)=>{V.d(Oe,{E:()=>j});const j=new(V(9751).y)(he=>he.complete())},8996:(vt,Oe,V)=>{V.d(Oe,{D:()=>Pe});var o=V(8421),j=V(5363),N=V(9468),ye=V(9751),ge=V(2202),Ce=V(576),W=V(9672);function re(Te,Qe){if(!Te)throw new Error("Iterable cannot be null");return new ye.y(ce=>{(0,W.f)(ce,Qe,()=>{const pe=Te[Symbol.asyncIterator]();(0,W.f)(ce,Qe,()=>{pe.next().then(we=>{we.done?ce.complete():ce.next(we.value)})},0,!0)})})}var qe=V(3670),Fe=V(8239),xe=V(1144),ht=V(6495),De=V(2206),ve=V(4532),at=V(3260);function Pe(Te,Qe){return Qe?function Ne(Te,Qe){if(null!=Te){if((0,qe.c)(Te))return function ue(Te,Qe){return(0,o.Xf)(Te).pipe((0,N.R)(Qe),(0,j.Q)(Qe))}(Te,Qe);if((0,xe.z)(Te))return function oe(Te,Qe){return new ye.y(ce=>{let pe=0;return Qe.schedule(function(){pe===Te.length?ce.complete():(ce.next(Te[pe++]),ce.closed||this.schedule())})})}(Te,Qe);if((0,Fe.t)(Te))return function he(Te,Qe){return(0,o.Xf)(Te).pipe((0,N.R)(Qe),(0,j.Q)(Qe))}(Te,Qe);if((0,De.D)(Te))return re(Te,Qe);if((0,ht.T)(Te))return function Y(Te,Qe){return new ye.y(ce=>{let pe;return(0,W.f)(ce,Qe,()=>{pe=Te[ge.h](),(0,W.f)(ce,Qe,()=>{let we,ne;try{({value:we,done:ne}=pe.next())}catch(se){return void ce.error(se)}ne?ce.complete():ce.next(we)},0,!0)}),()=>(0,Ce.m)(pe?.return)&&pe.return()})}(Te,Qe);if((0,at.L)(Te))return function lt(Te,Qe){return re((0,at.Q)(Te),Qe)}(Te,Qe)}throw(0,ve.z)(Te)}(Te,Qe):(0,o.Xf)(Te)}},8421:(vt,Oe,V)=>{V.d(Oe,{Xf:()=>qe});var o=V(655),j=V(1144),N=V(8239),ue=V(9751),he=V(3670),ye=V(2206),oe=V(4532),ge=V(6495),Ce=V(3260),W=V(576),Y=V(7849),re=V(8822);function qe(Ne){if(Ne instanceof ue.y)return Ne;if(null!=Ne){if((0,he.c)(Ne))return function Fe(Ne){return new ue.y(Pe=>{const Te=Ne[re.L]();if((0,W.m)(Te.subscribe))return Te.subscribe(Pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ne);if((0,j.z)(Ne))return function xe(Ne){return new ue.y(Pe=>{for(let Te=0;Te<Ne.length&&!Pe.closed;Te++)Pe.next(Ne[Te]);Pe.complete()})}(Ne);if((0,N.t)(Ne))return function ht(Ne){return new ue.y(Pe=>{Ne.then(Te=>{Pe.closed||(Pe.next(Te),Pe.complete())},Te=>Pe.error(Te)).then(null,Y.h)})}(Ne);if((0,ye.D)(Ne))return ve(Ne);if((0,ge.T)(Ne))return function De(Ne){return new ue.y(Pe=>{for(const Te of Ne)if(Pe.next(Te),Pe.closed)return;Pe.complete()})}(Ne);if((0,Ce.L)(Ne))return function at(Ne){return ve((0,Ce.Q)(Ne))}(Ne)}throw(0,oe.z)(Ne)}function ve(Ne){return new ue.y(Pe=>{(function lt(Ne,Pe){var Te,Qe,ce,pe;return(0,o.mG)(this,void 0,void 0,function*(){try{for(Te=(0,o.KL)(Ne);!(Qe=yield Te.next()).done;)if(Pe.next(Qe.value),Pe.closed)return}catch(we){ce={error:we}}finally{try{Qe&&!Qe.done&&(pe=Te.return)&&(yield pe.call(Te))}finally{if(ce)throw ce.error}}Pe.complete()})})(Ne,Pe).catch(Te=>Pe.error(Te))})}},6451:(vt,Oe,V)=>{V.d(Oe,{T:()=>ye});var o=V(8189),j=V(8421),N=V(515),ue=V(3269),he=V(8996);function ye(...oe){const ge=(0,ue.yG)(oe),Ce=(0,ue._6)(oe,1/0),W=oe;return W.length?1===W.length?(0,j.Xf)(W[0]):(0,o.J)(Ce)((0,he.D)(W,ge)):N.E}},5403:(vt,Oe,V)=>{V.d(Oe,{x:()=>j});var o=V(930);function j(ue,he,ye,oe,ge){return new N(ue,he,ye,oe,ge)}class N extends o.Lv{constructor(he,ye,oe,ge,Ce,W){super(he),this.onFinalize=Ce,this.shouldUnsubscribe=W,this._next=ye?function(Y){try{ye(Y)}catch(re){he.error(re)}}:super._next,this._error=ge?function(Y){try{ge(Y)}catch(re){he.error(re)}finally{this.unsubscribe()}}:super._error,this._complete=oe?function(){try{oe()}catch(Y){he.error(Y)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},4004:(vt,Oe,V)=>{V.d(Oe,{U:()=>N});var o=V(4482),j=V(5403);function N(ue,he){return(0,o.e)((ye,oe)=>{let ge=0;ye.subscribe((0,j.x)(oe,Ce=>{oe.next(ue.call(he,Ce,ge++))}))})}},8189:(vt,Oe,V)=>{V.d(Oe,{J:()=>N});var o=V(5577),j=V(4671);function N(ue=1/0){return(0,o.z)(j.y,ue)}},5577:(vt,Oe,V)=>{V.d(Oe,{z:()=>ge});var o=V(4004),j=V(8421),N=V(4482),ue=V(9672),he=V(5403),oe=V(576);function ge(Ce,W,Y=1/0){return(0,oe.m)(W)?ge((re,qe)=>(0,o.U)((Fe,xe)=>W(re,Fe,qe,xe))((0,j.Xf)(Ce(re,qe))),Y):("number"==typeof W&&(Y=W),(0,N.e)((re,qe)=>function ye(Ce,W,Y,re,qe,Fe,xe,ht){const De=[];let ve=0,at=0,lt=!1;const Ne=()=>{lt&&!De.length&&!ve&&W.complete()},Pe=Qe=>ve<re?Te(Qe):De.push(Qe),Te=Qe=>{Fe&&W.next(Qe),ve++;let ce=!1;(0,j.Xf)(Y(Qe,at++)).subscribe((0,he.x)(W,pe=>{qe?.(pe),Fe?Pe(pe):W.next(pe)},()=>{ce=!0},void 0,()=>{if(ce)try{for(ve--;De.length&&ve<re;){const pe=De.shift();xe?(0,ue.f)(W,xe,()=>Te(pe)):Te(pe)}Ne()}catch(pe){W.error(pe)}}))};return Ce.subscribe((0,he.x)(W,Pe,()=>{lt=!0,Ne()})),()=>{ht?.()}}(re,qe,Ce,Y)))}},5363:(vt,Oe,V)=>{V.d(Oe,{Q:()=>ue});var o=V(9672),j=V(4482),N=V(5403);function ue(he,ye=0){return(0,j.e)((oe,ge)=>{oe.subscribe((0,N.x)(ge,Ce=>(0,o.f)(ge,he,()=>ge.next(Ce),ye),()=>(0,o.f)(ge,he,()=>ge.complete(),ye),Ce=>(0,o.f)(ge,he,()=>ge.error(Ce),ye)))})}},3099:(vt,Oe,V)=>{V.d(Oe,{B:()=>he});var o=V(8421),j=V(7579),N=V(930),ue=V(4482);function he(oe={}){const{connector:ge=(()=>new j.x),resetOnError:Ce=!0,resetOnComplete:W=!0,resetOnRefCountZero:Y=!0}=oe;return re=>{let qe,Fe,xe,ht=0,De=!1,ve=!1;const at=()=>{Fe?.unsubscribe(),Fe=void 0},lt=()=>{at(),qe=xe=void 0,De=ve=!1},Ne=()=>{const Pe=qe;lt(),Pe?.unsubscribe()};return(0,ue.e)((Pe,Te)=>{ht++,!ve&&!De&&at();const Qe=xe=xe??ge();Te.add(()=>{ht--,0===ht&&!ve&&!De&&(Fe=ye(Ne,Y))}),Qe.subscribe(Te),!qe&&ht>0&&(qe=new N.Hp({next:ce=>Qe.next(ce),error:ce=>{ve=!0,at(),Fe=ye(lt,Ce,ce),Qe.error(ce)},complete:()=>{De=!0,at(),Fe=ye(lt,W),Qe.complete()}}),(0,o.Xf)(Pe).subscribe(qe))})(re)}}function ye(oe,ge,...Ce){if(!0===ge)return void oe();if(!1===ge)return;const W=new N.Hp({next:()=>{W.unsubscribe(),oe()}});return ge(...Ce).subscribe(W)}},9468:(vt,Oe,V)=>{V.d(Oe,{R:()=>j});var o=V(4482);function j(N,ue=0){return(0,o.e)((he,ye)=>{ye.add(N.schedule(()=>he.subscribe(ye),ue))})}},8505:(vt,Oe,V)=>{V.d(Oe,{b:()=>he});var o=V(576),j=V(4482),N=V(5403),ue=V(4671);function he(ye,oe,ge){const Ce=(0,o.m)(ye)||oe||ge?{next:ye,error:oe,complete:ge}:ye;return Ce?(0,j.e)((W,Y)=>{var re;null===(re=Ce.subscribe)||void 0===re||re.call(Ce);let qe=!0;W.subscribe((0,N.x)(Y,Fe=>{var xe;null===(xe=Ce.next)||void 0===xe||xe.call(Ce,Fe),Y.next(Fe)},()=>{var Fe;qe=!1,null===(Fe=Ce.complete)||void 0===Fe||Fe.call(Ce),Y.complete()},Fe=>{var xe;qe=!1,null===(xe=Ce.error)||void 0===xe||xe.call(Ce,Fe),Y.error(Fe)},()=>{var Fe,xe;qe&&(null===(Fe=Ce.unsubscribe)||void 0===Fe||Fe.call(Ce)),null===(xe=Ce.finalize)||void 0===xe||xe.call(Ce)}))}):ue.y}},4408:(vt,Oe,V)=>{V.d(Oe,{o:()=>he});var o=V(727);class j extends o.w0{constructor(oe,ge){super()}schedule(oe,ge=0){return this}}const N={setInterval(ye,oe,...ge){const{delegate:Ce}=N;return Ce?.setInterval?Ce.setInterval(ye,oe,...ge):setInterval(ye,oe,...ge)},clearInterval(ye){const{delegate:oe}=N;return(oe?.clearInterval||clearInterval)(ye)},delegate:void 0};var ue=V(8737);class he extends j{constructor(oe,ge){super(oe,ge),this.scheduler=oe,this.work=ge,this.pending=!1}schedule(oe,ge=0){if(this.closed)return this;this.state=oe;const Ce=this.id,W=this.scheduler;return null!=Ce&&(this.id=this.recycleAsyncId(W,Ce,ge)),this.pending=!0,this.delay=ge,this.id=this.id||this.requestAsyncId(W,this.id,ge),this}requestAsyncId(oe,ge,Ce=0){return N.setInterval(oe.flush.bind(oe,this),Ce)}recycleAsyncId(oe,ge,Ce=0){if(null!=Ce&&this.delay===Ce&&!1===this.pending)return ge;N.clearInterval(ge)}execute(oe,ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ce=this._execute(oe,ge);if(Ce)return Ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,ge){let W,Ce=!1;try{this.work(oe)}catch(Y){Ce=!0,W=Y||new Error("Scheduled action threw falsy error")}if(Ce)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:oe,scheduler:ge}=this,{actions:Ce}=ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(Ce,this),null!=oe&&(this.id=this.recycleAsyncId(ge,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(vt,Oe,V)=>{V.d(Oe,{v:()=>N});var o=V(6063);class j{constructor(he,ye=j.now){this.schedulerActionCtor=he,this.now=ye}schedule(he,ye=0,oe){return new this.schedulerActionCtor(this,he).schedule(oe,ye)}}j.now=o.l.now;class N extends j{constructor(he,ye=j.now){super(he,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(he){const{actions:ye}=this;if(this._active)return void ye.push(he);let oe;this._active=!0;do{if(oe=he.execute(he.state,he.delay))break}while(he=ye.shift());if(this._active=!1,oe){for(;he=ye.shift();)he.unsubscribe();throw oe}}}},4986:(vt,Oe,V)=>{V.d(Oe,{P:()=>ue,z:()=>N});var o=V(4408);const N=new(V(7565).v)(o.o),ue=N},6063:(vt,Oe,V)=>{V.d(Oe,{l:()=>o});const o={now:()=>(o.delegate||Date).now(),delegate:void 0}},3410:(vt,Oe,V)=>{V.d(Oe,{z:()=>o});const o={setTimeout(j,N,...ue){const{delegate:he}=o;return he?.setTimeout?he.setTimeout(j,N,...ue):setTimeout(j,N,...ue)},clearTimeout(j){const{delegate:N}=o;return(N?.clearTimeout||clearTimeout)(j)},delegate:void 0}},2202:(vt,Oe,V)=>{V.d(Oe,{h:()=>j});const j=function o(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(vt,Oe,V)=>{V.d(Oe,{L:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(vt,Oe,V)=>{V.d(Oe,{_6:()=>ye,jO:()=>ue,yG:()=>he});var o=V(576),j=V(3532);function N(oe){return oe[oe.length-1]}function ue(oe){return(0,o.m)(N(oe))?oe.pop():void 0}function he(oe){return(0,j.K)(N(oe))?oe.pop():void 0}function ye(oe,ge){return"number"==typeof N(oe)?oe.pop():ge}},8737:(vt,Oe,V)=>{function o(j,N){if(j){const ue=j.indexOf(N);0<=ue&&j.splice(ue,1)}}V.d(Oe,{P:()=>o})},3888:(vt,Oe,V)=>{function o(j){const ue=j(he=>{Error.call(he),he.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}V.d(Oe,{d:()=>o})},2806:(vt,Oe,V)=>{V.d(Oe,{O:()=>ue,x:()=>N});var o=V(2416);let j=null;function N(he){if(o.v.useDeprecatedSynchronousErrorHandling){const ye=!j;if(ye&&(j={errorThrown:!1,error:null}),he(),ye){const{errorThrown:oe,error:ge}=j;if(j=null,oe)throw ge}}else he()}function ue(he){o.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=he)}},9672:(vt,Oe,V)=>{function o(j,N,ue,he=0,ye=!1){const oe=N.schedule(function(){ue(),ye?j.add(this.schedule(null,he)):this.unsubscribe()},he);if(j.add(oe),!ye)return oe}V.d(Oe,{f:()=>o})},4671:(vt,Oe,V)=>{function o(j){return j}V.d(Oe,{y:()=>o})},1144:(vt,Oe,V)=>{V.d(Oe,{z:()=>o});const o=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(vt,Oe,V)=>{V.d(Oe,{D:()=>j});var o=V(576);function j(N){return Symbol.asyncIterator&&(0,o.m)(N?.[Symbol.asyncIterator])}},576:(vt,Oe,V)=>{function o(j){return"function"==typeof j}V.d(Oe,{m:()=>o})},3670:(vt,Oe,V)=>{V.d(Oe,{c:()=>N});var o=V(8822),j=V(576);function N(ue){return(0,j.m)(ue[o.L])}},6495:(vt,Oe,V)=>{V.d(Oe,{T:()=>N});var o=V(2202),j=V(576);function N(ue){return(0,j.m)(ue?.[o.h])}},8239:(vt,Oe,V)=>{V.d(Oe,{t:()=>j});var o=V(576);function j(N){return(0,o.m)(N?.then)}},3260:(vt,Oe,V)=>{V.d(Oe,{L:()=>ue,Q:()=>N});var o=V(655),j=V(576);function N(he){return(0,o.FC)(this,arguments,function*(){const oe=he.getReader();try{for(;;){const{value:ge,done:Ce}=yield(0,o.qq)(oe.read());if(Ce)return yield(0,o.qq)(void 0);yield yield(0,o.qq)(ge)}}finally{oe.releaseLock()}})}function ue(he){return(0,j.m)(he?.getReader)}},3532:(vt,Oe,V)=>{V.d(Oe,{K:()=>j});var o=V(576);function j(N){return N&&(0,o.m)(N.schedule)}},4482:(vt,Oe,V)=>{V.d(Oe,{A:()=>j,e:()=>N});var o=V(576);function j(ue){return(0,o.m)(ue?.lift)}function N(ue){return he=>{if(j(he))return he.lift(function(ye){try{return ue(ye,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(vt,Oe,V)=>{function o(){}V.d(Oe,{Z:()=>o})},9635:(vt,Oe,V)=>{V.d(Oe,{U:()=>N,z:()=>j});var o=V(4671);function j(...ue){return N(ue)}function N(ue){return 0===ue.length?o.y:1===ue.length?ue[0]:function(ye){return ue.reduce((oe,ge)=>ge(oe),ye)}}},7849:(vt,Oe,V)=>{V.d(Oe,{h:()=>N});var o=V(2416),j=V(3410);function N(ue){j.z.setTimeout(()=>{const{onUnhandledError:he}=o.v;if(!he)throw ue;he(ue)})}},4532:(vt,Oe,V)=>{function o(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Oe,{z:()=>o})},655:(vt,Oe,V)=>{function ue(ne,se){var _e={};for(var de in ne)Object.prototype.hasOwnProperty.call(ne,de)&&se.indexOf(de)<0&&(_e[de]=ne[de]);if(null!=ne&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(de=Object.getOwnPropertySymbols(ne);He<de.length;He++)se.indexOf(de[He])<0&&Object.prototype.propertyIsEnumerable.call(ne,de[He])&&(_e[de[He]]=ne[de[He]])}return _e}function he(ne,se,_e,de){var Ct,He=arguments.length,je=He<3?se:null===de?de=Object.getOwnPropertyDescriptor(se,_e):de;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)je=Reflect.decorate(ne,se,_e,de);else for(var an=ne.length-1;an>=0;an--)(Ct=ne[an])&&(je=(He<3?Ct(je):He>3?Ct(se,_e,je):Ct(se,_e))||je);return He>3&&je&&Object.defineProperty(se,_e,je),je}function ge(ne,se,_e,de){return new(_e||(_e=Promise))(function(je,Ct){function an(An){try{tt(de.next(An))}catch($n){Ct($n)}}function Jt(An){try{tt(de.throw(An))}catch($n){Ct($n)}}function tt(An){An.done?je(An.value):function He(je){return je instanceof _e?je:new _e(function(Ct){Ct(je)})}(An.value).then(an,Jt)}tt((de=de.apply(ne,se||[])).next())})}function De(ne){return this instanceof De?(this.v=ne,this):new De(ne)}function ve(ne,se,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,de=_e.apply(ne,se||[]),je=[];return He={},Ct("next"),Ct("throw"),Ct("return"),He[Symbol.asyncIterator]=function(){return this},He;function Ct(pn){de[pn]&&(He[pn]=function(cn){return new Promise(function(en,Gt){je.push([pn,cn,en,Gt])>1||an(pn,cn)})})}function an(pn,cn){try{!function Jt(pn){pn.value instanceof De?Promise.resolve(pn.value.v).then(tt,An):$n(je[0][2],pn)}(de[pn](cn))}catch(en){$n(je[0][3],en)}}function tt(pn){an("next",pn)}function An(pn){an("throw",pn)}function $n(pn,cn){pn(cn),je.shift(),je.length&&an(je[0][0],je[0][1])}}function lt(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,se=ne[Symbol.asyncIterator];return se?se.call(ne):(ne=function re(ne){var se="function"==typeof Symbol&&Symbol.iterator,_e=se&&ne[se],de=0;if(_e)return _e.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&de>=ne.length&&(ne=void 0),{value:ne&&ne[de++],done:!ne}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),_e={},de("next"),de("throw"),de("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function de(je){_e[je]=ne[je]&&function(Ct){return new Promise(function(an,Jt){!function He(je,Ct,an,Jt){Promise.resolve(Jt).then(function(tt){je({value:tt,done:an})},Ct)}(an,Jt,(Ct=ne[je](Ct)).done,Ct.value)})}}}V.d(Oe,{FC:()=>ve,KL:()=>lt,_T:()=>ue,gn:()=>he,mG:()=>ge,qq:()=>De})},4650:(vt,Oe,V)=>{V.d(Oe,{$8M:()=>Il,$Z:()=>FD,AFp:()=>im,ALo:()=>aS,AaK:()=>ge,BQk:()=>Rp,CHM:()=>Lo,CRH:()=>vS,CZH:()=>nm,CqO:()=>yb,D6c:()=>oO,DdM:()=>Yk,EEQ:()=>Ji,EJc:()=>HS,EiD:()=>UC,EpF:()=>_b,F$t:()=>Db,F4k:()=>vb,FYo:()=>KC,FiY:()=>fe,G48:()=>YR,Gf:()=>gS,GfV:()=>XC,GkF:()=>o_,Gpc:()=>Y,GuJ:()=>Pt,Hsn:()=>c_,Ikx:()=>fh,JOm:()=>Ll,JVY:()=>ii,KtG:()=>Bo,L6k:()=>La,LAX:()=>Gn,LFG:()=>Zn,LSH:()=>ay,Lbi:()=>US,Lck:()=>jk,MAs:()=>Hl,MMx:()=>t0,NdJ:()=>l_,O4$:()=>Cd,OlP:()=>$t,Oqu:()=>hh,PXZ:()=>KS,Q6J:()=>mb,QGY:()=>a_,QP$:()=>bh,QbO:()=>PR,Qsj:()=>QC,R0b:()=>vo,RDi:()=>NC,Rgc:()=>T_,SBq:()=>Du,Sil:()=>NR,Suo:()=>_S,TTD:()=>Tr,TgZ:()=>Si,Udp:()=>f_,VKq:()=>Zk,WFA:()=>ah,X6Q:()=>WR,XFs:()=>bt,Xpm:()=>G,Xts:()=>cy,Y36:()=>qd,YKP:()=>XE,YNc:()=>nE,Yjl:()=>ui,Yz7:()=>cn,ZZ4:()=>cx,_Bn:()=>Hk,_UZ:()=>gb,_Vd:()=>Pg,_c5:()=>I2,_uU:()=>Lp,aQg:()=>T0,c2e:()=>rm,cJS:()=>Gt,cg1:()=>Gb,d8E:()=>Fu,dDg:()=>f2,dqk:()=>ut,eBb:()=>gi,eFA:()=>$R,ekj:()=>Rb,eoX:()=>jR,f3M:()=>Rd,g9A:()=>VS,h0i:()=>Gs,hGG:()=>sO,hij:()=>y_,iGM:()=>mS,ifc:()=>pt,ip1:()=>BS,jDz:()=>iS,kL8:()=>EE,kcU:()=>Dd,lG2:()=>wn,lqb:()=>Ba,lri:()=>UR,mCW:()=>ae,n5z:()=>Fs,n_E:()=>em,oAB:()=>Ye,oJD:()=>HC,oxw:()=>sE,pB0:()=>Nd,q3G:()=>Ei,q4F:()=>JC,qLn:()=>Xf,qOj:()=>db,qZA:()=>Qo,qzn:()=>Fa,rWj:()=>HR,s9C:()=>u_,sBO:()=>v2,sIi:()=>th,s_b:()=>l0,soG:()=>P_,tb:()=>v0,tp0:()=>nt,uIk:()=>XD,vHH:()=>xe,vpe:()=>Jo,wAp:()=>kt,xi3:()=>x_,xp6:()=>dA,ynx:()=>kp,z2F:()=>F_,z3N:()=>Na,zSh:()=>Rg,zs3:()=>zd});var o=V(7579),j=V(727),N=V(9751),ue=V(6451),he=V(3099);function ye(a){for(let l in a)if(a[l]===ye)return l;throw Error("Could not find renamed property on target object.")}function oe(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function ge(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(ge).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function Ce(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const W=ye({__forward_ref__:ye});function Y(a){return a.__forward_ref__=Y,a.toString=function(){return ge(this())},a}function re(a){return qe(a)?a():a}function qe(a){return"function"==typeof a&&a.hasOwnProperty(W)&&a.__forward_ref__===Y}class xe extends Error{constructor(l,u){super(function ht(a,l){return`NG0${Math.abs(a)}${l?": "+l.trim():""}`}(l,u)),this.code=l}}function De(a){return"string"==typeof a?a:null==a?"":String(a)}function Pe(a,l){throw new xe(-201,!1)}function Jt(a,l){null==a&&function tt(a,l,u,h){throw new Error(`ASSERTION ERROR: ${a}`+(null==h?"":` [Expected=> ${u} ${h} ${l} <=Actual]`))}(l,a,null,"!=")}function cn(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function Gt(a){return{providers:a.providers||[],imports:a.imports||[]}}function Wi(a){return to(a,Cr)||to(a,Jn)}function to(a,l){return a.hasOwnProperty(l)?a[l]:null}function as(a){return a&&(a.hasOwnProperty(Dr)||a.hasOwnProperty(ls))?a[Dr]:null}const Cr=ye({\u0275prov:ye}),Dr=ye({\u0275inj:ye}),Jn=ye({ngInjectableDef:ye}),ls=ye({ngInjectorDef:ye});var bt=(()=>((bt=bt||{})[bt.Default=0]="Default",bt[bt.Host=1]="Host",bt[bt.Self=2]="Self",bt[bt.SkipSelf=4]="SkipSelf",bt[bt.Optional=8]="Optional",bt))();let kn;function mn(a){const l=kn;return kn=a,l}function wi(a,l,u){const h=Wi(a);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&bt.Optional?null:void 0!==l?l:void Pe(ge(a))}function Ci(a){return{toString:a}.toString()}var Sn=(()=>((Sn=Sn||{})[Sn.OnPush=0]="OnPush",Sn[Sn.Default=1]="Default",Sn))(),pt=(()=>{return(a=pt||(pt={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",pt;var a})();const ut=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Hn={},zt=[],jn=ye({\u0275cmp:ye}),sr=ye({\u0275dir:ye}),Pt=ye({\u0275pipe:ye}),Er=ye({\u0275mod:ye}),Nt=ye({\u0275fac:ye}),ee=ye({__NG_ELEMENT_ID__:ye});let q=0;function G(a){return Ci(()=>{const u=!0===a.standalone,h={},p={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===Sn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&a.dependencies||null,getStandaloneInjector:null,selectors:a.selectors||zt,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||pt.Emulated,id:"c"+q++,styles:a.styles||zt,_:null,setInput:null,schemas:a.schemas||null,tView:null},m=a.dependencies,y=a.features;return p.inputs=bn(a.inputs,h),p.outputs=bn(a.outputs),y&&y.forEach(C=>C(p)),p.directiveDefs=m?()=>("function"==typeof m?m():m).map(X).filter(Ae):null,p.pipeDefs=m?()=>("function"==typeof m?m():m).map($).filter(Ae):null,p})}function X(a){return J(a)||Z(a)}function Ae(a){return null!==a}function Ye(a){return Ci(()=>({type:a.type,bootstrap:a.bootstrap||zt,declarations:a.declarations||zt,imports:a.imports||zt,exports:a.exports||zt,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function bn(a,l){if(null==a)return Hn;const u={};for(const h in a)if(a.hasOwnProperty(h)){let p=a[h],m=p;Array.isArray(p)&&(m=p[1],p=p[0]),u[p]=h,l&&(l[p]=m)}return u}const wn=G;function ui(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function J(a){return a[jn]||null}function Z(a){return a[sr]||null}function $(a){return a[Pt]||null}function Ee(a,l){const u=a[Er]||null;if(!u&&!0===l)throw new Error(`Type ${ge(a)} does not have '\u0275mod' property.`);return u}function Fn(a){return Array.isArray(a)&&"object"==typeof a[1]}function $r(a){return Array.isArray(a)&&!0===a[1]}function io(a){return 0!=(8&a.flags)}function dl(a){return 2==(2&a.flags)}function Rs(a){return 1==(1&a.flags)}function Sr(a){return null!==a.template}function fd(a){return 0!=(256&a[2])}function ma(a,l){return a.hasOwnProperty(Nt)?a[Nt]:null}class fl{constructor(l,u,h){this.previousValue=l,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function Tr(){return ko}function ko(a){return a.type.prototype.ngOnChanges&&(a.setInput=ff),ga}function ga(){const a=ic(this),l=a?.current;if(l){const u=a.previous;if(u===Hn)a.previous=l;else for(let h in l)u[h]=l[h];a.current=null,this.ngOnChanges(l)}}function ff(a,l,u,h){const p=ic(a)||function pf(a,l){return a[pl]=l}(a,{previous:Hn,current:null}),m=p.current||(p.current={}),y=p.previous,C=this.declaredInputs[u],S=y[C];m[C]=new fl(S&&S.currentValue,l,y===Hn),a[h]=l}Tr.ngInherit=!0;const pl="__ngSimpleChanges__";function ic(a){return a[pl]||null}function pi(a){for(;Array.isArray(a);)a=a[0];return a}function ml(a,l){return pi(l[a])}function pr(a,l){return pi(l[a.index])}function Po(a,l){return a.data[l]}function Ns(a,l){return a[l]}function Bi(a,l){const u=l[a];return Fn(u)?u:u[0]}function No(a){return 4==(4&a[2])}function us(a){return 64==(64&a[2])}function ds(a,l){return null==l?null:a[l]}function oo(a){a[18]=0}function Fo(a,l){a[5]+=l;let u=a,h=a[3];for(;null!==h&&(1===l&&1===u[5]||-1===l&&0===u[5]);)h[5]+=l,u=h,h=h[3]}const At={lFrame:Da(null),bindingsEnabled:!0};function _a(){return At.bindingsEnabled}function Re(){return At.lFrame.lView}function Yt(){return At.lFrame.tView}function Lo(a){return At.lFrame.contextLView=a,a[8]}function Bo(a){return At.lFrame.contextLView=null,a}function ti(){let a=Vo();for(;null!==a&&64===a.type;)a=a.parent;return a}function Vo(){return At.lFrame.currentTNode}function or(a,l){const u=At.lFrame;u.currentTNode=a,u.isParent=l}function tu(){return At.lFrame.isParent}function Uo(){At.lFrame.isParent=!1}function ki(){const a=At.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function Ho(){return At.lFrame.bindingIndex++}function oc(a,l){const u=At.lFrame;u.bindingIndex=u.bindingRootIndex=a,vl(l)}function vl(a){At.lFrame.currentDirectiveIndex=a}function yl(a){const l=At.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}function wa(){return At.lFrame.currentQueryIndex}function su(a){At.lFrame.currentQueryIndex=a}function bl(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function ac(a,l,u){if(u&bt.SkipSelf){let p=l,m=a;for(;!(p=p.parent,null!==p||u&bt.Host||(p=bl(m),null===p||(m=m[15],10&p.type))););if(null===p)return!1;l=p,a=m}const h=At.lFrame=bd();return h.currentTNode=l,h.lView=a,!0}function Ca(a){const l=bd(),u=a[1];At.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function bd(){const a=At.lFrame,l=null===a?null:a.child;return null===l?Da(a):l}function Da(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function wd(){const a=At.lFrame;return At.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const Ea=wd;function lc(){const a=wd();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function mi(){return At.lFrame.selectedIndex}function hs(a){At.lFrame.selectedIndex=a}function Tn(){const a=At.lFrame;return Po(a.tView,a.selectedIndex)}function Cd(){At.lFrame.currentNamespace="svg"}function Dd(){!function ou(){At.lFrame.currentNamespace=null}()}function lu(a,l){for(let u=l.directiveStart,h=l.directiveEnd;u<h;u++){const m=a.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:S,ngAfterViewChecked:M,ngOnDestroy:O}=m;y&&(a.contentHooks||(a.contentHooks=[])).push(-u,y),C&&((a.contentHooks||(a.contentHooks=[])).push(u,C),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(u,C)),S&&(a.viewHooks||(a.viewHooks=[])).push(-u,S),M&&((a.viewHooks||(a.viewHooks=[])).push(u,M),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(u,M)),null!=O&&(a.destroyHooks||(a.destroyHooks=[])).push(u,O)}}function yf(a,l,u){jo(a,l,3,u)}function bf(a,l,u,h){(3&a[2])===u&&jo(a,l,u,h)}function Cl(a,l){let u=a[2];(3&u)===l&&(u&=2047,u+=1,a[2]=u)}function jo(a,l,u,h){const m=h??-1,y=l.length-1;let C=0;for(let S=void 0!==h?65535&a[18]:0;S<y;S++)if("number"==typeof l[S+1]){if(C=l[S],null!=h&&C>=h)break}else l[S]<0&&(a[18]+=65536),(C<m||-1==m)&&(jv(a,u,l,S),a[18]=(4294901760&a[18])+S+2),S++}function jv(a,l,u,h){const p=u[h]<0,m=u[h+1],C=a[p?-u[h]:u[h]];if(p){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class Sa{constructor(l,u,h){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function Dl(a,l,u){let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const m=u[h++],y=u[h++],C=u[h++];a.setAttribute(l,y,C,m)}else{const m=p,y=u[++h];El(m)?a.setProperty(l,m,y):a.setAttribute(l,m,y),h++}}return h}function uu(a){return 3===a||4===a||6===a}function El(a){return 64===a.charCodeAt(0)}function Ma(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let h=0;h<l.length;h++){const p=l[h];"number"==typeof p?u=p:0===u||Df(a,u,p,null,-1===u||2===u?l[++h]:null)}}return a}function Df(a,l,u,h,p){let m=0,y=a.length;if(-1===l)y=-1;else for(;m<a.length;){const C=a[m++];if("number"==typeof C){if(C===l){y=-1;break}if(C>l){y=m-1;break}}}for(;m<a.length;){const C=a[m];if("number"==typeof C)break;if(C===u){if(null===h)return void(null!==p&&(a[m+1]=p));if(h===a[m+1])return void(a[m+2]=p)}m++,null!==h&&m++,null!==p&&m++}-1!==y&&(a.splice(y,0,l),m=y+1),a.splice(m++,0,u),null!==h&&a.splice(m++,0,h),null!==p&&a.splice(m++,0,p)}function Ef(a){return-1!==a}function Sl(a){return 32767&a}function Di(a,l){let u=function zv(a){return a>>16}(a),h=l;for(;u>0;)h=h[15],u--;return h}let uc=!0;function Ia(a){const l=uc;return uc=a,l}let Yn=0;const Dn={};function ps(a,l){const u=Zr(a,l);if(-1!==u)return u;const h=l[1];h.firstCreatePass&&(a.injectorIndex=l.length,xl(h.data,a),xl(l,null),xl(h.blueprint,null));const p=dc(a,l),m=a.injectorIndex;if(Ef(p)){const y=Sl(p),C=Di(p,l),S=C[1].data;for(let M=0;M<8;M++)l[m+M]=C[y+M]|S[y+M]}return l[m+8]=p,m}function xl(a,l){a.push(0,0,0,0,0,0,0,0,l)}function Zr(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function dc(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,h=null,p=l;for(;null!==p;){if(h=fc(p),null===h)return-1;if(u++,p=p[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function ar(a,l,u){!function Aa(a,l,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(ee)&&(h=u[ee]),null==h&&(h=u[ee]=Yn++);const p=255&h;l.data[a+(p>>5)]|=1<<p}(a,l,u)}function ms(a,l,u){if(u&bt.Optional)return a;Pe()}function Ml(a,l,u,h){if(u&bt.Optional&&void 0===h&&(h=null),0==(u&(bt.Self|bt.Host))){const p=a[9],m=mn(void 0);try{return p?p.get(l,h,u&bt.Optional):wi(l,h,u&bt.Optional)}finally{mn(m)}}return ms(h,0,u)}function hc(a,l,u,h=bt.Default,p){if(null!==a){if(1024&l[2]){const y=function ct(a,l,u,h,p){let m=a,y=l;for(;null!==m&&null!==y&&1024&y[2]&&!(256&y[2]);){const C=co(m,y,u,h|bt.Self,Dn);if(C!==Dn)return C;let S=m.parent;if(!S){const M=y[21];if(M){const O=M.get(u,Dn,h);if(O!==Dn)return O}S=fc(y),y=y[15]}m=S}return p}(a,l,u,h,Dn);if(y!==Dn)return y}const m=co(a,l,u,h,Dn);if(m!==Dn)return m}return Ml(l,u,h,p)}function co(a,l,u,h,p){const m=function mr(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(ee)?a[ee]:void 0;return"number"==typeof l?l>=0?255&l:Oi:l}(u);if("function"==typeof m){if(!ac(l,a,h))return h&bt.Host?ms(p,0,h):Ml(l,u,h,p);try{const y=m(h);if(null!=y||h&bt.Optional)return y;Pe()}finally{Ea()}}else if("number"==typeof m){let y=null,C=Zr(a,l),S=-1,M=h&bt.Host?l[16][6]:null;for((-1===C||h&bt.SkipSelf)&&(S=-1===C?dc(a,l):l[C+8],-1!==S&&Je(h,!1)?(y=l[1],C=Sl(S),l=Di(S,l)):C=-1);-1!==C;){const O=l[1];if(uo(m,C,O.data)){const U=ka(C,l,u,y,h,M);if(U!==Dn)return U}S=l[C+8],-1!==S&&Je(h,l[1].data[C+8]===M)&&uo(m,C,l)?(y=O,C=Sl(S),l=Di(S,l)):C=-1}}return p}function ka(a,l,u,h,p,m){const y=l[1],C=y.data[a+8],O=Go(C,y,u,null==h?dl(C)&&uc:h!=y&&0!=(3&C.type),p&bt.Host&&m===C);return null!==O?Kr(l,y,O,C):Dn}function Go(a,l,u,h,p){const m=a.providerIndexes,y=l.data,C=1048575&m,S=a.directiveStart,O=m>>20,Q=p?C+O:a.directiveEnd;for(let le=h?C:C+O;le<Q;le++){const Ie=y[le];if(le<S&&u===Ie||le>=S&&Ie.type===u)return le}if(p){const le=y[S];if(le&&Sr(le)&&le.type===u)return S}return null}function Kr(a,l,u,h){let p=a[u];const m=l.data;if(function cc(a){return a instanceof Sa}(p)){const y=p;y.resolving&&function at(a,l){const u=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new xe(-200,`Circular dependency in DI detected for ${a}${u}`)}(function ve(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():De(a)}(m[u]));const C=Ia(y.canSeeViewProviders);y.resolving=!0;const S=y.injectImpl?mn(y.injectImpl):null;ac(a,h,bt.Default);try{p=a[u]=y.factory(void 0,m,a,h),l.firstCreatePass&&u>=h.directiveStart&&function au(a,l,u){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:m}=l.type.prototype;if(h){const y=ko(l);(u.preOrderHooks||(u.preOrderHooks=[])).push(a,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,y)}p&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-a,p),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(a,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,m))}(u,m[u],l)}finally{null!==S&&mn(S),Ia(C),y.resolving=!1,Ea()}}return p}function uo(a,l,u){return!!(u[l+(a>>5)]&1<<a)}function Je(a,l){return!(a&bt.Self||a&bt.Host&&l)}class Cn{constructor(l,u){this._tNode=l,this._lView=u}get(l,u,h){return hc(this._tNode,this._lView,l,h,u)}}function Oi(){return new Cn(ti(),Re())}function Fs(a){return Ci(()=>{const l=a.prototype.constructor,u=l[Nt]||ln(l),h=Object.prototype;let p=Object.getPrototypeOf(a.prototype).constructor;for(;p&&p!==h;){const m=p[Nt]||ln(p);if(m&&m!==u)return m;p=Object.getPrototypeOf(p)}return m=>new m})}function ln(a){return qe(a)?()=>{const l=ln(re(a));return l&&l()}:ma(a)}function fc(a){const l=a[1],u=l.type;return 2===u?l.declTNode:1===u?a[6]:null}function Il(a){return function Tl(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const h=u.length;let p=0;for(;p<h;){const m=u[p];if(uu(m))break;if(0===m)p+=2;else if("number"==typeof m)for(p++;p<h&&"string"==typeof u[p];)p++;else{if(m===l)return u[p+1];p+=2}}}return null}(ti(),a)}const Al="__parameters__";function _s(a,l,u){return Ci(()=>{const h=function kl(a){return function(...u){if(a){const h=a(...u);for(const p in h)this[p]=h[p]}}}(l);function p(...m){if(this instanceof p)return h.apply(this,m),this;const y=new p(...m);return C.annotation=y,C;function C(S,M,O){const U=S.hasOwnProperty(Al)?S[Al]:Object.defineProperty(S,Al,{value:[]})[Al];for(;U.length<=O;)U.push(null);return(U[O]=U[O]||[]).push(y),S}}return u&&(p.prototype=Object.create(u.prototype)),p.prototype.ngMetadataName=a,p.annotationCls=p,p})}class $t{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=cn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Qi(a,l){void 0===l&&(l=a);for(let u=0;u<a.length;u++){let h=a[u];Array.isArray(h)?(l===a&&(l=a.slice(0,u)),Qi(h,l)):l!==a&&l.push(h)}return l}function Ls(a,l){a.forEach(u=>Array.isArray(u)?Ls(u,l):l(u))}function pu(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function mu(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function Ra(a,l){const u=[];for(let h=0;h<a;h++)u.push(l);return u}function Xi(a,l,u){let h=Ol(a,l);return h>=0?a[1|h]=u:(h=~h,function If(a,l,u,h){let p=a.length;if(p==l)a.push(u,h);else if(1===p)a.push(h,a[0]),a[0]=u;else{for(p--,a.push(a[p-1],a[p]);p>l;)a[p]=a[p-2],p--;a[l]=u,a[l+1]=h}}(a,h,l,u)),h}function _c(a,l){const u=Ol(a,l);if(u>=0)return a[1|u]}function Ol(a,l){return function Pl(a,l,u){let h=0,p=a.length>>u;for(;p!==h;){const m=h+(p-h>>1),y=a[m<<u];if(l===y)return m<<u;y>l?p=m:h=m+1}return~(p<<u)}(a,l,1)}const bc={},Qr="__NG_DI_FLAG__",wc="ngTempTokenPath",kd=/\n/gm,_u="__source";let vs;function Oa(a){const l=vs;return vs=a,l}function Dg(a,l=bt.Default){if(void 0===vs)throw new xe(-203,!1);return null===vs?wi(a,void 0,l):vs.get(a,l&bt.Optional?null:void 0,l)}function Zn(a,l=bt.Default){return(function Zi(){return kn}()||Dg)(re(a),l)}function Rd(a,l=bt.Default){return"number"!=typeof l&&(l=0|(l.optional&&8)|(l.host&&1)|(l.self&&2)|(l.skipSelf&&4)),Zn(a,l)}function Cc(a){const l=[];for(let u=0;u<a.length;u++){const h=re(a[u]);if(Array.isArray(h)){if(0===h.length)throw new xe(900,!1);let p,m=bt.Default;for(let y=0;y<h.length;y++){const C=h[y],S=T(C);"number"==typeof S?-1===S?p=C.token:m|=S:p=C}l.push(Zn(p,m))}else l.push(Zn(h))}return l}function x(a,l){return a[Qr]=l,a.prototype[Qr]=l,a}function T(a){return a[Qr]}const fe=x(_s("Optional"),8),nt=x(_s("SkipSelf"),4);let Eg,Lf,Bf;function NC(a){Eg=a}function bu(a){return function Pd(){if(void 0===Lf&&(Lf=null,ut.trustedTypes))try{Lf=ut.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return Lf}()?.createHTML(a)||a}function Jv(a){return function Vf(){if(void 0===Bf&&(Bf=null,ut.trustedTypes))try{Bf=ut.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return Bf}()?.createHTML(a)||a}class Sc{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Sg extends Sc{getTypeName(){return"HTML"}}class BC extends Sc{getTypeName(){return"Style"}}class xg extends Sc{getTypeName(){return"Script"}}class VC extends Sc{getTypeName(){return"URL"}}class ny extends Sc{getTypeName(){return"ResourceURL"}}function Na(a){return a instanceof Sc?a.changingThisBreaksApplicationSecurity:a}function Fa(a,l){const u=function bs(a){return a instanceof Sc&&a.getTypeName()||null}(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===l}function ii(a){return new Sg(a)}function La(a){return new BC(a)}function gi(a){return new xg(a)}function Gn(a){return new VC(a)}function Nd(a){return new ny(a)}class w{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const u=(new window.DOMParser).parseFromString(bu(l),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(l):(u.removeChild(u.firstChild),u)}catch{return null}}}class _{constructor(l){if(this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(l){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=bu(l),u;const h=this.inertDocument.createElement("body");return h.innerHTML=bu(l),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(l){const u=l.attributes;for(let p=u.length-1;0<p;p--){const y=u.item(p).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&l.removeAttribute(y)}let h=l.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const D=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,B=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ae(a){return(a=String(a)).match(D)||a.match(B)?a:"unsafe:"+a}function it(a){const l={};for(const u of a.split(","))l[u]=!0;return l}function Ke(...a){const l={};for(const u of a)for(const h in u)u.hasOwnProperty(h)&&(l[h]=!0);return l}const Ge=it("area,br,col,hr,img,wbr"),tn=it("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Vs=it("rp,rt"),Fd=Ke(Ge,Ke(tn,it("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ke(Vs,it("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ke(Vs,tn)),si=it("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),wu=it("srcset"),Fl=Ke(si,wu,it("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),it("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Hf=it("script,style,template");class Mg{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let u=l.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let p=this.checkClobberedElement(u,u.nextSibling);if(p){u=p;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(l){const u=l.nodeName.toLowerCase();if(!Fd.hasOwnProperty(u))return this.sanitizedSomething=!0,!Hf.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=l.attributes;for(let p=0;p<h.length;p++){const m=h.item(p),y=m.name,C=y.toLowerCase();if(!Fl.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let S=m.value;si[C]&&(S=ae(S)),wu[C]&&(a=S,S=(a=String(a)).split(",").map(l=>ae(l.trim())).join(", ")),this.buf.push(" ",y,'="',Gf(S),'"')}var a;return this.buf.push(">"),!0}endElement(l){const u=l.nodeName.toLowerCase();Fd.hasOwnProperty(u)&&!Ge.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(l){this.buf.push(Gf(l))}checkClobberedElement(l,u){if(u&&(l.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return u}}const iy=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,jf=/([^\#-~ |!])/g;function Gf(a){return a.replace(/&/g,"&amp;").replace(iy,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(jf,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ig;function UC(a,l){let u=null;try{Ig=Ig||function Ln(a){const l=new _(a);return function v(){try{return!!(new window.DOMParser).parseFromString(bu(""),"text/html")}catch{return!1}}()?new w(l):l}(a);let h=l?String(l):"";u=Ig.getInertBodyElement(h);let p=5,m=h;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,h=m,m=u.innerHTML,u=Ig.getInertBodyElement(h)}while(h!==m);return bu((new Mg).sanitizeChildren(ry(u)||u))}finally{if(u){const h=ry(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function ry(a){return"content"in a&&function sy(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var Ei=(()=>((Ei=Ei||{})[Ei.NONE=0]="NONE",Ei[Ei.HTML=1]="HTML",Ei[Ei.STYLE=2]="STYLE",Ei[Ei.SCRIPT=3]="SCRIPT",Ei[Ei.URL=4]="URL",Ei[Ei.RESOURCE_URL=5]="RESOURCE_URL",Ei))();function HC(a){const l=Wf();return l?Jv(l.sanitize(Ei.HTML,a)||""):Fa(a,"HTML")?Jv(Na(a)):UC(function Xv(){return void 0!==Eg?Eg:typeof document<"u"?document:void 0}(),De(a))}function ay(a){const l=Wf();return l?l.sanitize(Ei.URL,a)||"":Fa(a,"URL")?Na(a):ae(De(a))}function Wf(){const a=Re();return a&&a[12]}const cy=new $t("ENVIRONMENT_INITIALIZER"),jC=new $t("INJECTOR",-1),GC=new $t("INJECTOR_DEF_TYPES");class uy{get(l,u=bc){if(u===bc){const h=new Error(`NullInjectorError: No provider for ${ge(l)}!`);throw h.name="NullInjectorError",h}return u}}function vB(...a){return{\u0275providers:dy(0,a)}}function dy(a,...l){const u=[],h=new Set;let p;return Ls(l,m=>{const y=m;hy(y,u,[],h)&&(p||(p=[]),p.push(y))}),void 0!==p&&zC(p,u),u}function zC(a,l){for(let u=0;u<a.length;u++){const{providers:p}=a[u];Ls(p,m=>{l.push(m)})}}function hy(a,l,u,h){if(!(a=re(a)))return!1;let p=null,m=as(a);const y=!m&&J(a);if(m||y){if(y&&!y.standalone)return!1;p=a}else{const S=a.ngModule;if(m=as(S),!m)return!1;p=S}const C=h.has(p);if(y){if(C)return!1;if(h.add(p),y.dependencies){const S="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const M of S)hy(M,l,u,h)}}else{if(!m)return!1;{if(null!=m.imports&&!C){let M;h.add(p);try{Ls(m.imports,O=>{hy(O,l,u,h)&&(M||(M=[]),M.push(O))})}finally{}void 0!==M&&zC(M,l)}if(!C){const M=ma(p)||(()=>new p);l.push({provide:p,useFactory:M,deps:zt},{provide:GC,useValue:p,multi:!0},{provide:cy,useValue:()=>Zn(p),multi:!0})}const S=m.providers;null==S||C||Ls(S,O=>{l.push(O)})}}return p!==a&&void 0!==a.providers}const yB=ye({provide:String,useValue:ye});function Ag(a){return null!==a&&"object"==typeof a&&yB in a}function Cu(a){return"function"==typeof a}const Rg=new $t("Set Injector scope."),Og={},bB={};let Zf;function my(){return void 0===Zf&&(Zf=new uy),Zf}class Ba{}class $C extends Ba{constructor(l,u,h,p){super(),this.parent=u,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_y(l,y=>this.processProvider(y)),this.records.set(jC,Ld(void 0,this)),p.has("environment")&&this.records.set(Ba,Ld(void 0,this));const m=this.records.get(Rg);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(GC.multi,zt,bt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();for(const l of this._onDestroyHooks)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(l){this._onDestroyHooks.push(l)}runInContext(l){this.assertNotDestroyed();const u=Oa(this),h=mn(void 0);try{return l()}finally{Oa(u),mn(h)}}get(l,u=bc,h=bt.Default){this.assertNotDestroyed();const p=Oa(this),m=mn(void 0);try{if(!(h&bt.SkipSelf)){let C=this.records.get(l);if(void 0===C){const S=function YC(a){return"function"==typeof a||"object"==typeof a&&a instanceof $t}(l)&&Wi(l);C=S&&this.injectableDefInScope(S)?Ld(gy(l),Og):null,this.records.set(l,C)}if(null!=C)return this.hydrate(l,C)}return(h&bt.Self?my():this.parent).get(l,u=h&bt.Optional&&u===bc?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[wc]=y[wc]||[]).unshift(ge(l)),p)throw y;return function R(a,l,u,h){const p=a[wc];throw l[_u]&&p.unshift(l[_u]),a.message=function H(a,l,u,h=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.slice(2):a;let p=ge(l);if(Array.isArray(l))p=l.map(ge).join(" -> ");else if("object"==typeof l){let m=[];for(let y in l)if(l.hasOwnProperty(y)){let C=l[y];m.push(y+":"+("string"==typeof C?JSON.stringify(C):ge(C)))}p=`{${m.join(", ")}}`}return`${u}${h?"("+h+")":""}[${p}]: ${a.replace(kd,"\n  ")}`}("\n"+a.message,p,u,h),a.ngTokenPath=p,a[wc]=null,a}(y,l,"R3InjectorError",this.source)}throw y}finally{mn(m),Oa(p)}}resolveInjectorInitializers(){const l=Oa(this),u=mn(void 0);try{const h=this.get(cy.multi,zt,bt.Self);for(const p of h)p()}finally{Oa(l),mn(u)}}toString(){const l=[],u=this.records;for(const h of u.keys())l.push(ge(h));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processProvider(l){let u=Cu(l=re(l))?l:re(l&&l.provide);const h=function II(a){return Ag(a)?Ld(void 0,a.useValue):Ld(qC(a),Og)}(l);if(Cu(l)||!0!==l.multi)this.records.get(u);else{let p=this.records.get(u);p||(p=Ld(void 0,Og,!0),p.factory=()=>Cc(p.multi),this.records.set(u,p)),u=l,p.multi.push(l)}this.records.set(u,h)}hydrate(l,u){return u.value===Og&&(u.value=bB,u.value=u.factory()),"object"==typeof u.value&&u.value&&function WC(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(l){if(!l.providedIn)return!1;const u=re(l.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function gy(a){const l=Wi(a),u=null!==l?l.factory:ma(a);if(null!==u)return u;if(a instanceof $t)throw new xe(204,!1);if(a instanceof Function)return function MI(a){const l=a.length;if(l>0)throw Ra(l,"?"),new xe(204,!1);const u=function Yi(a){const l=a&&(a[Cr]||a[Jn]);if(l){const u=function Vn(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),l}return null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new xe(204,!1)}function qC(a,l,u){let h;if(Cu(a)){const p=re(a);return ma(p)||gy(p)}if(Ag(a))h=()=>re(a.useValue);else if(function kg(a){return!(!a||!a.useFactory)}(a))h=()=>a.useFactory(...Cc(a.deps||[]));else if(function Yf(a){return!(!a||!a.useExisting)}(a))h=()=>Zn(re(a.useExisting));else{const p=re(a&&(a.useClass||a.provide));if(!function AI(a){return!!a.deps}(a))return ma(p)||gy(p);h=()=>new p(...Cc(a.deps))}return h}function Ld(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function kI(a){return!!a.\u0275providers}function _y(a,l){for(const u of a)Array.isArray(u)?_y(u,l):kI(u)?_y(u.\u0275providers,l):l(u)}class ZC{}class wB{resolveComponentFactory(l){throw function vy(a){const l=Error(`No component factory found for ${ge(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let Pg=(()=>{class a{}return a.NULL=new wB,a})();function CB(){return Kf(ti(),Re())}function Kf(a,l){return new Du(pr(a,l))}let Du=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=CB,a})();function yy(a){return a instanceof Du?a.nativeElement:a}class KC{}let QC=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function Bd(){const a=Re(),u=Bi(ti().index,a);return(Fn(u)?u:a)[11]}(),a})(),PI=(()=>{class a{}return a.\u0275prov=cn({token:a,providedIn:"root",factory:()=>null}),a})();class XC{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const JC=new XC("14.1.3"),by={};function Ey(a){return a.ngOriginalError}class Xf{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l);this._console.error("ERROR",l),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(l){let u=l&&Ey(l);for(;u&&Ey(u);)u=Ey(u);return u||null}}const Sy=new Map;let aD=0;function $I(a){return Sy.get(a)||null}class xy{constructor(l,u,h){this.lViewId=l,this.nodeIndex=u,this.native=h}get lView(){return $I(this.lViewId)}}function Ji(a){let l=ep(a);if(l){if(Fn(l)){const u=l;let h,p,m;if(function WI(a){return a&&a.constructor&&a.constructor.\u0275cmp}(a)){if(h=function hD(a,l){const u=a[1].components;if(u)for(let h=0;h<u.length;h++){const p=u[h];if(Bi(p,a)[8]===l)return p}else if(Bi(22,a)[8]===l)return 22;return-1}(u,a),-1==h)throw new Error("The provided component was not found in the application");p=a}else if(function YI(a){return a&&a.constructor&&a.constructor.\u0275dir}(a)){if(h=function ZI(a,l){let u=a[1].firstChild;for(;u;){const p=u.directiveEnd;for(let m=u.directiveStart;m<p;m++)if(a[m]===l)return u.index;u=xB(u)}return-1}(u,a),-1==h)throw new Error("The provided directive was not found in the application");m=function fD(a,l,u){const h=l[1].data[a];let p=h.directiveStart;return 0==p?zt:(!u&&2&h.flags&&p++,l.slice(p,h.directiveEnd))}(h,u,!1)}else if(h=dD(u,a),-1==h)return null;const y=pi(u[h]),C=ep(y),S=C&&!Array.isArray(C)?C:Ng(u,h,y);if(p&&void 0===S.component&&(S.component=p,Ar(S.component,S)),m&&void 0===S.directives){S.directives=m;for(let M=0;M<m.length;M++)Ar(m[M],S)}Ar(S.native,S),l=S}}else{const u=a;let h=u;for(;h=h.parentNode;){const p=ep(h);if(p){const m=Array.isArray(p)?p:p.lView;if(!m)return null;const y=dD(m,u);if(y>=0){const C=pi(m[y]),S=Ng(m,y,C);Ar(C,S),l=S;break}}}}return l||null}function Ng(a,l,u){return new xy(a[20],l,u)}const uD="__ngContext__";function Ar(a,l){Fn(l)?(a[uD]=l[20],function lD(a){Sy.set(a[20],a)}(l)):a[uD]=l}function ep(a){const l=a[uD];return"number"==typeof l?$I(l):l||null}function Vd(a){const l=ep(a);return l?Fn(l)?l:l.lView:null}function dD(a,l){const u=a[1];for(let h=22;h<u.bindingStartIndex;h++)if(pi(a[h])===l)return h;return-1}function xB(a){if(a.child)return a.child;if(a.next)return a.next;for(;a.parent&&!a.parent.next;)a=a.parent;return a.parent&&a.parent.next}const KI=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(ut))();function xc(a){return a instanceof Function?a():a}var Ll=(()=>((Ll=Ll||{})[Ll.Important=1]="Important",Ll[Ll.DashCase=2]="DashCase",Ll))();function Ay(a,l){return undefined(a,l)}function Fg(a){const l=a[3];return $r(l)?l[3]:l}function mD(a){return nA(a[13])}function gD(a){return nA(a[4])}function nA(a){for(;null!==a&&!$r(a);)a=a[4];return a}function tp(a,l,u,h,p){if(null!=h){let m,y=!1;$r(h)?m=h:Fn(h)&&(y=!0,h=h[0]);const C=pi(h);0===a&&null!==u?null==p?CD(l,u,C):Tc(l,u,C,p||null,!0):1===a&&null!==u?Tc(l,u,C,p||null,!0):2===a?function sA(a,l,u){const h=Eu(a,l);h&&function DD(a,l,u,h){a.removeChild(l,u,h)}(a,h,l,u)}(l,C,y):3===a&&l.destroyNode(C),null!=m&&function oA(a,l,u,h,p){const m=u[7];m!==pi(u)&&tp(l,a,h,m,p);for(let C=10;C<u.length;C++){const S=u[C];lp(S[1],S,a,l,h,m)}}(l,a,m,u,p)}}function ky(a,l,u){return a.createElement(l,u)}function bD(a,l){const u=a[9],h=u.indexOf(l),p=l[3];512&l[2]&&(l[2]&=-513,Fo(p,-1)),u.splice(h,1)}function np(a,l){if(a.length<=10)return;const u=10+l,h=a[u];if(h){const p=h[17];null!==p&&p!==a&&bD(p,h),l>0&&(a[u-1][4]=h[4]);const m=mu(a,10+l);!function _r(a,l){lp(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(h[1],h);const y=m[19];null!==y&&y.detachView(m[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function Vg(a,l){if(!(128&l[2])){const u=l[11];u.destroyNode&&lp(a,l,u,3,null,null),function vD(a){let l=a[13];if(!l)return ip(a[1],a);for(;l;){let u=null;if(Fn(l))u=l[13];else{const h=l[10];h&&(u=h)}if(!u){for(;l&&!l[4]&&l!==a;)Fn(l)&&ip(l[1],l),l=l[3];null===l&&(l=a),Fn(l)&&ip(l[1],l),u=l&&l[4]}l=u}}(l)}}function ip(a,l){if(!(128&l[2])){l[2]&=-65,l[2]|=128,function wD(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let h=0;h<u.length;h+=2){const p=l[u[h]];if(!(p instanceof Sa)){const m=u[h+1];if(Array.isArray(m))for(let y=0;y<m.length;y+=2){const C=p[m[y]],S=m[y+1];try{S.call(C)}finally{}}else try{m.call(p)}finally{}}}}(a,l),function rp(a,l){const u=a.cleanup,h=l[7];let p=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const y=u[m+1],C="function"==typeof y?y(l):pi(l[y]),S=h[p=u[m+2]],M=u[m+3];"boolean"==typeof M?C.removeEventListener(u[m],S,M):M>=0?h[p=M]():h[p=-M].unsubscribe(),m+=2}else{const y=h[p=u[m+1]];u[m].call(y)}if(null!==h){for(let m=p+1;m<h.length;m++)(0,h[m])();l[7]=null}}(a,l),1===l[1].type&&l[11].destroy();const u=l[17];if(null!==u&&$r(l[3])){u!==l[3]&&bD(u,l);const h=l[19];null!==h&&h.detachView(a)}!function qI(a){Sy.delete(a[20])}(l)}}function Oy(a,l,u){return function Py(a,l,u){let h=l;for(;null!==h&&40&h.type;)h=(l=h).parent;if(null===h)return u[0];if(2&h.flags){const p=a.data[h.directiveStart].encapsulation;if(p===pt.None||p===pt.Emulated)return null}return pr(h,u)}(a,l.parent,u)}function Tc(a,l,u,h,p){a.insertBefore(l,u,h,p)}function CD(a,l,u){a.appendChild(l,u)}function Ny(a,l,u,h,p){null!==h?Tc(a,l,u,h,p):CD(a,l,u)}function Eu(a,l){return a.parentNode(l)}function Ug(a,l,u){return sp(a,l,u)}let sp=function ED(a,l,u){return 40&a.type?pr(a,u):null};function op(a,l,u,h){const p=Oy(a,h,l),m=l[11],C=Ug(h.parent||l[6],h,l);if(null!=p)if(Array.isArray(u))for(let S=0;S<u.length;S++)Ny(m,p,u[S],C,!1);else Ny(m,p,u,C,!1)}function ap(a,l){if(null!==l){const u=l.type;if(3&u)return pr(l,a);if(4&u)return xD(-1,a[l.index]);if(8&u){const h=l.child;if(null!==h)return ap(a,h);{const p=a[l.index];return $r(p)?xD(-1,p):pi(p)}}if(32&u)return Ay(l,a)()||pi(a[l.index]);{const h=SD(a,l);return null!==h?Array.isArray(h)?h[0]:ap(Fg(a[16]),h):ap(a,l.next)}}return null}function SD(a,l){return null!==l?a[16][6].projection[l.projection]:null}function xD(a,l){const u=10+a+1;if(u<l.length){const h=l[u],p=h[1].firstChild;if(null!==p)return ap(h,p)}return l[7]}function Su(a,l,u,h,p,m,y){for(;null!=u;){const C=h[u.index],S=u.type;if(y&&0===l&&(C&&Ar(pi(C),h),u.flags|=4),64!=(64&u.flags))if(8&S)Su(a,l,u.child,h,p,m,!1),tp(l,a,p,C,m);else if(32&S){const M=Ay(u,h);let O;for(;O=M();)tp(l,a,p,O,m);tp(l,a,p,C,m)}else 16&S?Fy(a,l,h,u,p,m):tp(l,a,p,C,m);u=y?u.projectionNext:u.next}}function lp(a,l,u,h,p,m){Su(u,h,a.firstChild,l,p,m,!1)}function Fy(a,l,u,h,p,m){const y=u[16],S=y[6].projection[h.projection];if(Array.isArray(S))for(let M=0;M<S.length;M++)tp(l,a,p,S[M],m);else Su(a,l,S,y[3],p,m,!0)}function Ly(a,l,u){a.setAttribute(l,"style",u)}function By(a,l,u){""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u)}function cp(a,l,u){let h=a.length;for(;;){const p=a.indexOf(l,u);if(-1===p)return p;if(0===p||a.charCodeAt(p-1)<=32){const m=l.length;if(p+m===h||a.charCodeAt(p+m)<=32)return p}u=p+1}}const ID="ng-template";function aA(a,l,u){let h=0;for(;h<a.length;){let p=a[h++];if(u&&"class"===p){if(p=a[h],-1!==cp(p.toLowerCase(),l,0))return!0}else if(1===p){for(;h<a.length&&"string"==typeof(p=a[h++]);)if(p.toLowerCase()===l)return!0;return!1}}return!1}function lA(a){return 4===a.type&&a.value!==ID}function kB(a,l,u){return l===(4!==a.type||u?a.value:ID)}function RB(a,l,u){let h=4;const p=a.attrs||[],m=function NB(a){for(let l=0;l<a.length;l++)if(uu(a[l]))return l;return a.length}(p);let y=!1;for(let C=0;C<l.length;C++){const S=l[C];if("number"!=typeof S){if(!y)if(4&h){if(h=2|1&h,""!==S&&!kB(a,S,u)||""===S&&1===l.length){if(Ua(h))return!1;y=!0}}else{const M=8&h?S:l[++C];if(8&h&&null!==a.attrs){if(!aA(a.attrs,M,u)){if(Ua(h))return!1;y=!0}continue}const U=OB(8&h?"class":S,p,lA(a),u);if(-1===U){if(Ua(h))return!1;y=!0;continue}if(""!==M){let Q;Q=U>m?"":p[U+1].toLowerCase();const le=8&h?Q:null;if(le&&-1!==cp(le,M,0)||2&h&&M!==Q){if(Ua(h))return!1;y=!0}}}}else{if(!y&&!Ua(h)&&!Ua(S))return!1;if(y&&Ua(S))continue;y=!1,h=S|1&h}}return Ua(h)||y}function Ua(a){return 0==(1&a)}function OB(a,l,u,h){if(null===l)return-1;let p=0;if(h||!u){let m=!1;for(;p<l.length;){const y=l[p];if(y===a)return p;if(3===y||6===y)m=!0;else{if(1===y||2===y){let C=l[++p];for(;"string"==typeof C;)C=l[++p];continue}if(4===y)break;if(0===y){p+=4;continue}}p+=m?1:2}return-1}return function FB(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const h=a[u];if("number"==typeof h)return-1;if(h===l)return u;u++}return-1}(l,a)}function cA(a,l,u=!1){for(let h=0;h<l.length;h++)if(RB(a,l[h],u))return!0;return!1}function LB(a,l){e:for(let u=0;u<l.length;u++){const h=l[u];if(a.length===h.length){for(let p=0;p<a.length;p++)if(a[p]!==h[p])continue e;return!0}}return!1}function uA(a,l){return a?":not("+l.trim()+")":l}function BB(a){let l=a[0],u=1,h=2,p="",m=!1;for(;u<a.length;){let y=a[u];if("string"==typeof y)if(2&h){const C=a[++u];p+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&h?p+="."+y:4&h&&(p+=" "+y);else""!==p&&!Ua(y)&&(l+=uA(m,p),p=""),h=y,m=m||!Ua(h);u++}return""!==p&&(l+=uA(m,p)),l}const Kt={};function dA(a){AD(Yt(),Re(),mi()+a,!1)}function AD(a,l,u,h){if(!h)if(3==(3&l[2])){const m=a.preOrderCheckHooks;null!==m&&yf(l,m,u)}else{const m=a.preOrderHooks;null!==m&&bf(l,m,0,u)}hs(u)}function kD(a,l=null,u=null,h){const p=jg(a,l,u,h);return p.resolveInjectorInitializers(),p}function jg(a,l=null,u=null,h,p=new Set){const m=[u||zt,vB(a)];return h=h||("object"==typeof a?void 0:ge(a)),new $C(m,l||my(),h||null,p)}let zd=(()=>{class a{static create(u,h){if(Array.isArray(u))return kD({name:""},h,u,"");{const p=u.name??"";return kD({name:p},u.parent,u.providers,p)}}}return a.THROW_IF_NOT_FOUND=bc,a.NULL=new uy,a.\u0275prov=cn({token:a,providedIn:"any",factory:()=>Zn(jC)}),a.__NG_ELEMENT_ID__=-1,a})();function qd(a,l=bt.Default){const u=Re();return null===u?Zn(a,l):hc(ti(),u,re(a),l)}function FD(){throw new Error("invalid")}function Gg(a,l){return a<<17|l<<2}function Us(a){return a>>17&32767}function Mc(a){return 2|a}function Cs(a){return(131068&a)>>2}function Wd(a,l){return-131069&a|l<<2}function qy(a){return 1|a}function Qy(a,l){const u=a.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const p=u[h],m=u[h+1];if(-1!==m){const y=a.data[m];su(p),y.contentQueries(2,l[m],m)}}}function Xy(a,l,u,h,p,m,y,C,S,M,O){const U=l.blueprint.slice();return U[0]=p,U[2]=76|h,(null!==O||a&&1024&a[2])&&(U[2]|=1024),oo(U),U[3]=U[15]=a,U[8]=u,U[10]=y||a&&a[10],U[11]=C||a&&a[11],U[12]=S||a&&a[12]||null,U[9]=M||a&&a[9]||null,U[6]=m,U[20]=function zI(){return aD++}(),U[21]=O,U[16]=2==l.type?a[16]:U,U}function Bl(a,l,u,h,p){let m=a.data[l];if(null===m)m=function Iu(a,l,u,h,p){const m=Vo(),y=tu(),S=a.data[l]=function eb(a,l,u,h,p,m){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?m:m&&m.parent,u,l,h,p);return null===a.firstChild&&(a.firstChild=S),null!==m&&(y?null==m.child&&null!==S.parent&&(m.child=S):null===m.next&&(m.next=S)),S}(a,l,u,h,p),function gf(){return At.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=h,m.attrs=p;const y=function ya(){const a=At.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();m.injectorIndex=null===y?-1:y.injectorIndex}return or(m,!0),m}function Qd(a,l,u,h){if(0===u)return-1;const p=l.length;for(let m=0;m<u;m++)l.push(h),a.blueprint.push(h),a.data.push(null);return p}function Au(a,l,u){Ca(l);try{const h=a.viewQuery;null!==h&&ab(1,h,u);const p=a.template;null!==p&&EA(a,l,p,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&Qy(a,l),a.staticViewQueries&&ab(2,a.viewQuery,u);const m=a.components;null!==m&&function sV(a,l){for(let u=0;u<l.length;u++)LA(a,l[u])}(l,m)}catch(h){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),h}finally{l[2]&=-5,lc()}}function Kg(a,l,u,h){const p=l[2];if(128!=(128&p)){Ca(l);try{oo(l),function nu(a){return At.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&EA(a,l,u,2,h);const y=3==(3&p);if(y){const M=a.preOrderCheckHooks;null!==M&&yf(l,M,null)}else{const M=a.preOrderHooks;null!==M&&bf(l,M,0,null),Cl(l,0)}if(function rb(a){for(let l=mD(a);null!==l;l=gD(l)){if(!l[2])continue;const u=l[9];for(let h=0;h<u.length;h++){const p=u[h],m=p[3];0==(512&p[2])&&Fo(m,1),p[2]|=512}}}(l),function NA(a){for(let l=mD(a);null!==l;l=gD(l))for(let u=10;u<l.length;u++){const h=l[u],p=h[1];us(h)&&Kg(p,h,p.template,h[8])}}(l),null!==a.contentQueries&&Qy(a,l),y){const M=a.contentCheckHooks;null!==M&&yf(l,M)}else{const M=a.contentHooks;null!==M&&bf(l,M,1),Cl(l,1)}!function iV(a,l){const u=a.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const p=u[h];if(p<0)hs(~p);else{const m=p,y=u[++h],C=u[++h];oc(y,m),C(2,l[m])}}}finally{hs(-1)}}(a,l);const C=a.components;null!==C&&function rV(a,l){for(let u=0;u<l.length;u++)FA(a,l[u])}(l,C);const S=a.viewQuery;if(null!==S&&ab(2,S,h),y){const M=a.viewCheckHooks;null!==M&&yf(l,M)}else{const M=a.viewHooks;null!==M&&bf(l,M,2),Cl(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),l[2]&=-41,512&l[2]&&(l[2]&=-513,Fo(l[3],-1))}finally{lc()}}}function oV(a,l,u,h){const p=l[10],y=No(l);try{!y&&p.begin&&p.begin(),y&&Au(a,l,h),Kg(a,l,u,h)}finally{!y&&p.end&&p.end()}}function EA(a,l,u,h,p){const m=mi(),y=2&h;try{hs(-1),y&&l.length>22&&AD(a,l,22,!1),u(h,p)}finally{hs(m)}}function SA(a,l,u){if(io(l)){const p=l.directiveEnd;for(let m=l.directiveStart;m<p;m++){const y=a.data[m];y.contentQueries&&y.contentQueries(1,u[m],m)}}}function HD(a,l,u){!_a()||(function AA(a,l,u,h){const p=u.directiveStart,m=u.directiveEnd;a.firstCreatePass||ps(u,l),Ar(h,l);const y=u.initialInputs;for(let C=p;C<m;C++){const S=a.data[C],M=Sr(S);M&&Ru(l,u,S);const O=Kr(l,a,C,u);Ar(O,l),null!==y&&OA(0,C-p,O,S,0,y),M&&(Bi(u.index,l)[8]=O)}}(a,l,u,pr(u,l)),128==(128&u.flags)&&function kA(a,l,u){const h=u.directiveStart,p=u.directiveEnd,m=u.index,y=function ru(){return At.lFrame.currentDirectiveIndex}();try{hs(m);for(let C=h;C<p;C++){const S=a.data[C],M=l[C];vl(C),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&mt(S,M)}}finally{hs(-1),vl(y)}}(a,l,u))}function Wo(a,l,u=pr){const h=l.localNames;if(null!==h){let p=l.index+1;for(let m=0;m<h.length;m+=2){const y=h[m+1],C=-1===y?u(l,a):a[y];a[p++]=C}}}function Yo(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=Jy(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function Jy(a,l,u,h,p,m,y,C,S,M){const O=22+h,U=O+p,Q=function xA(a,l){const u=[];for(let h=0;h<l;h++)u.push(h<a?null:Kt);return u}(O,U),le="function"==typeof M?M():M;return Q[1]={type:a,blueprint:Q,template:u,queries:null,viewQuery:C,declTNode:l,data:Q.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:S,consts:le,incompleteFirstPass:!1}}function Qg(a,l,u,h){const p=lb(l);null===u?p.push(h):(p.push(u),a.firstCreatePass&&cb(a).push(h,p.length-1))}function MA(a,l,u){for(let h in a)if(a.hasOwnProperty(h)){const p=a[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(l,p):u[h]=[l,p]}return u}function tb(a,l){const h=l.directiveEnd,p=a.data,m=l.attrs,y=[];let C=null,S=null;for(let M=l.directiveStart;M<h;M++){const O=p[M],U=O.inputs,Q=null===m||lA(l)?null:PA(U,m);y.push(Q),C=MA(U,M,C),S=MA(O.outputs,M,S)}null!==C&&(C.hasOwnProperty("class")&&(l.flags|=16),C.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=y,l.inputs=C,l.outputs=S}function go(a,l,u,h,p,m,y,C){const S=pr(l,u);let O,M=l.inputs;!C&&null!=M&&(O=M[h])?(za(a,u,O,h,p),dl(l)&&IA(u,l.index)):3&l.type&&(h=function GD(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(h),p=null!=y?y(p,l.value||"",h):p,m.setProperty(S,h,p))}function IA(a,l){const u=Bi(l,a);16&u[2]||(u[2]|=32)}function Xg(a,l,u,h){let p=!1;if(_a()){const m=function cV(a,l,u){const h=a.directiveRegistry;let p=null;if(h)for(let m=0;m<h.length;m++){const y=h[m];cA(u,y.selectors,!1)&&(p||(p=[]),ar(ps(u,l),a,y.type),Sr(y)?(RA(a,u),p.unshift(y)):p.push(y))}return p}(a,l,u),y=null===h?null:{"":-1};if(null!==m){p=!0,Ga(u,a.data.length,m.length);for(let O=0;O<m.length;O++){const U=m[O];U.providersResolver&&U.providersResolver(U)}let C=!1,S=!1,M=Qd(a,l,m.length,null);for(let O=0;O<m.length;O++){const U=m[O];u.mergedAttrs=Ma(u.mergedAttrs,U.hostAttrs),Vl(a,u,l,M,U),ku(M,U,y),null!==U.contentQueries&&(u.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(u.flags|=128);const Q=U.type.prototype;!C&&(Q.ngOnChanges||Q.ngOnInit||Q.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(u.index),C=!0),!S&&(Q.ngOnChanges||Q.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(u.index),S=!0),M++}tb(a,u)}y&&function uV(a,l,u){if(l){const h=a.localNames=[];for(let p=0;p<l.length;p+=2){const m=u[l[p+1]];if(null==m)throw new xe(-301,!1);h.push(l[p],m)}}}(u,h,y)}return u.mergedAttrs=Ma(u.mergedAttrs,u.attrs),p}function Jg(a,l,u,h,p,m){const y=m.hostBindings;if(y){let C=a.hostBindingOpCodes;null===C&&(C=a.hostBindingOpCodes=[]);const S=~l.index;(function nb(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(C)!=S&&C.push(S),C.push(h,p,y)}}function mt(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function RA(a,l){l.flags|=2,(a.components||(a.components=[])).push(l.index)}function ku(a,l,u){if(u){if(l.exportAs)for(let h=0;h<l.exportAs.length;h++)u[l.exportAs[h]]=a;Sr(l)&&(u[""]=a)}}function Ga(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}function Vl(a,l,u,h,p){a.data[h]=p;const m=p.factory||(p.factory=ma(p.type)),y=new Sa(m,Sr(p),qd);a.blueprint[h]=y,u[h]=y,Jg(a,l,0,h,Qd(a,u,p.hostVars,Kt),p)}function Ru(a,l,u){const h=pr(l,a),p=Yo(u),m=a[10],y=ob(a,Xy(a,p,null,u.onPush?32:16,h,l,m,m.createRenderer(h,u),null,null,null));a[l.index]=y}function Zo(a,l,u,h,p,m){const y=pr(a,l);!function ib(a,l,u,h,p,m,y){if(null==m)a.removeAttribute(l,p,u);else{const C=null==y?De(m):y(m,h||"",p);a.setAttribute(l,p,C,u)}}(l[11],y,m,a.value,u,h,p)}function OA(a,l,u,h,p,m){const y=m[l];if(null!==y){const C=h.setInput;for(let S=0;S<y.length;){const M=y[S++],O=y[S++],U=y[S++];null!==C?h.setInput(u,U,M,O):u[O]=U}}}function PA(a,l){let u=null,h=0;for(;h<l.length;){const p=l[h];if(0!==p)if(5!==p){if("number"==typeof p)break;a.hasOwnProperty(p)&&(null===u&&(u=[]),u.push(p,a[p],l[h+1])),h+=2}else h+=2;else h+=4}return u}function e_(a,l,u,h){return new Array(a,!0,!1,l,null,0,h,u,null,null)}function FA(a,l){const u=Bi(l,a);if(us(u)){const h=u[1];48&u[2]?Kg(h,u,h.template,u[8]):u[5]>0&&sb(u)}}function sb(a){for(let h=mD(a);null!==h;h=gD(h))for(let p=10;p<h.length;p++){const m=h[p];if(us(m))if(512&m[2]){const y=m[1];Kg(y,m,y.template,m[8])}else m[5]>0&&sb(m)}const u=a[1].components;if(null!==u)for(let h=0;h<u.length;h++){const p=Bi(u[h],a);us(p)&&p[5]>0&&sb(p)}}function LA(a,l){const u=Bi(l,a),h=u[1];(function BA(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])})(h,u),Au(h,u,u[8])}function ob(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function Ou(a){for(;a;){a[2]|=32;const l=Fg(a);if(fd(a)&&!l)return a;a=l}return null}function Dp(a){!function zD(a){for(let l=0;l<a.components.length;l++){const u=a.components[l],h=Vd(u);if(null!==h){const p=h[1];oV(p,h,p.template,u)}}}(a[8])}function ab(a,l,u){su(0),l(a,u)}const qD=(()=>Promise.resolve(null))();function lb(a){return a[7]||(a[7]=[])}function cb(a){return a.cleanup||(a.cleanup=[])}function WD(a,l,u){return(null===a||Sr(a))&&(u=function rc(a){for(;Array.isArray(a);){if("object"==typeof a[1])return a;a=a[0]}return null}(u[l.index])),u[11]}function ub(a,l){const u=a[9],h=u?u.get(Xf,null):null;h&&h.handleError(l)}function za(a,l,u,h,p){for(let m=0;m<u.length;){const y=u[m++],C=u[m++],S=l[y],M=a.data[y];null!==M.setInput?M.setInput(S,p,h,C):S[C]=p}}function t_(a,l,u){let h=u?a.styles:null,p=u?a.classes:null,m=0;if(null!==l)for(let y=0;y<l.length;y++){const C=l[y];"number"==typeof C?m=C:1==m?p=Ce(p,C):2==m&&(h=Ce(h,C+": "+l[++y]+";"))}u?a.styles=h:a.stylesWithoutHost=h,u?a.classes=p:a.classesWithoutHost=p}function Xd(a,l,u,h,p=!1){for(;null!==u;){const m=l[u.index];if(null!==m&&h.push(pi(m)),$r(m))for(let C=10;C<m.length;C++){const S=m[C],M=S[1].firstChild;null!==M&&Xd(S[1],S,M,h)}const y=u.type;if(8&y)Xd(a,l,u.child,h);else if(32&y){const C=Ay(u,l);let S;for(;S=C();)h.push(S)}else if(16&y){const C=SD(l,u);if(Array.isArray(C))h.push(...C);else{const S=Fg(l[16]);Xd(S[1],S,C,h,!0)}}u=p?u.projectionNext:u.next}return h}class n_{constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,u=l[1];return Xd(u,l,u.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if($r(l)){const u=l[8],h=u?u.indexOf(this):-1;h>-1&&(np(l,h),mu(u,h))}this._attachedToViewContainer=!1}Vg(this._lView[1],this._lView)}onDestroy(l){Qg(this._lView[1],this._lView,null,l)}markForCheck(){Ou(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Pu(a,l,u){const h=l[10];h.begin&&h.begin();try{Kg(a,l,a.template,u)}catch(p){throw ub(l,p),p}finally{h.end&&h.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function jd(a,l){lp(a,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new xe(902,!1);this._appRef=l}}class hV extends n_{constructor(l){super(l),this._view=l}detectChanges(){Dp(this._view)}checkNoChanges(){}get context(){return null}}class YD extends Pg{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=J(l);return new i_(u,this.ngModule)}}function HA(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}class pV{constructor(l,u){this.injector=l,this.parentInjector=u}get(l,u,h){const p=this.injector.get(l,by,h);return p!==by||u===by?p:this.parentInjector.get(l,u,h)}}class i_ extends ZC{constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=function VB(a){return a.map(BB).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return HA(this.componentDef.inputs)}get outputs(){return HA(this.componentDef.outputs)}create(l,u,h,p){let m=(p=p||this.ngModule)instanceof Ba?p:p?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const y=m?new pV(l,m):l,C=y.get(KC,null);if(null===C)throw new xe(407,!1);const S=y.get(PI,null),M=C.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",U=h?function TA(a,l,u){return a.selectRootElement(l,u===pt.ShadowDom)}(M,h,this.componentDef.encapsulation):ky(C.createRenderer(null,this.componentDef),O,function fV(a){const l=a.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(O)),Q=this.componentDef.onPush?288:272,le=function Jd(a,l){return{components:[],scheduler:a||KI,clean:qD,playerHandler:l||null,flags:0}}(),Ie=Jy(0,null,null,1,0,null,null,null,null,null),ze=Xy(null,Ie,le,Q,null,null,C,M,S,y,null);let st,gt;Ca(ze);try{const Ot=function GA(a,l,u,h,p,m){const y=u[1];u[22]=a;const S=Bl(y,22,2,"#host",null),M=S.mergedAttrs=l.hostAttrs;null!==M&&(t_(S,M,!0),null!==a&&(Dl(p,a,M),null!==S.classes&&By(p,a,S.classes),null!==S.styles&&Ly(p,a,S.styles)));const O=h.createRenderer(a,l),U=Xy(u,Yo(l),null,l.onPush?32:16,u[22],S,h,O,m||null,null,null);return y.firstCreatePass&&(ar(ps(S,u),y,l.type),RA(y,S),Ga(S,u.length,1)),ob(u,U),u[22]=U}(U,this.componentDef,ze,C,M);if(U)if(h)Dl(M,U,["ng-version",JC.full]);else{const{attrs:Be,classes:Mt}=function UB(a){const l=[],u=[];let h=1,p=2;for(;h<a.length;){let m=a[h];if("string"==typeof m)2===p?""!==m&&l.push(m,a[++h]):8===p&&u.push(m);else{if(!Ua(p))break;p=m}h++}return{attrs:l,classes:u}}(this.componentDef.selectors[0]);Be&&Dl(M,U,Be),Mt&&Mt.length>0&&By(M,U,Mt.join(" "))}if(gt=Po(Ie,22),void 0!==u){const Be=gt.projection=[];for(let Mt=0;Mt<this.ngContentSelectors.length;Mt++){const _n=u[Mt];Be.push(null!=_n?Array.from(_n):null)}}st=function r_(a,l,u,h,p){const m=u[1],y=function lV(a,l,u){const h=ti();a.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Vl(a,h,l,Qd(a,l,1,null),u),tb(a,h));const p=Kr(l,a,h.directiveStart,h);Ar(p,l);const m=pr(h,l);return m&&Ar(m,l),p}(m,u,l);if(h.components.push(y),a[8]=y,null!==p)for(const S of p)S(y,l);if(l.contentQueries){const S=ti();l.contentQueries(1,y,S.directiveStart)}const C=ti();return!m.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(hs(C.index),Jg(u[1],C,0,C.directiveStart,C.directiveEnd,l),mt(l,y)),y}(Ot,this.componentDef,ze,le,[ZD]),Au(Ie,ze,null)}finally{lc()}return new mV(this.componentType,st,Kf(gt,ze),ze,gt)}}class mV extends class RI{}{constructor(l,u,h,p,m){super(),this.location=h,this._rootLView=p,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new hV(p),this.componentType=l}setInput(l,u){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[l])){const m=this._rootLView;za(m[1],m,p,l,u),IA(m,this._tNode.index)}}get injector(){return new Cn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function ZD(){const a=ti();lu(Re()[1],a)}function db(a){let l=function zA(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const h=[a];for(;l;){let p;if(Sr(a))p=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new xe(903,!1);p=l.\u0275dir}if(p){if(u){h.push(p);const y=a;y.inputs=Ep(a.inputs),y.declaredInputs=Ep(a.declaredInputs),y.outputs=Ep(a.outputs);const C=p.hostBindings;C&&qA(a,C);const S=p.viewQuery,M=p.contentQueries;if(S&&QD(a,S),M&&$A(a,M),oe(a.inputs,p.inputs),oe(a.declaredInputs,p.declaredInputs),oe(a.outputs,p.outputs),Sr(p)&&p.data.animation){const O=a.data;O.animation=(O.animation||[]).concat(p.data.animation)}}const m=p.features;if(m)for(let y=0;y<m.length;y++){const C=m[y];C&&C.ngInherit&&C(a),C===db&&(u=!1)}}l=Object.getPrototypeOf(l)}!function KD(a){let l=0,u=null;for(let h=a.length-1;h>=0;h--){const p=a[h];p.hostVars=l+=p.hostVars,p.hostAttrs=Ma(p.hostAttrs,u=Ma(u,p.hostAttrs))}}(h)}function Ep(a){return a===Hn?{}:a===zt?[]:a}function QD(a,l){const u=a.viewQuery;a.viewQuery=u?(h,p)=>{l(h,p),u(h,p)}:l}function $A(a,l){const u=a.contentQueries;a.contentQueries=u?(h,p,m)=>{l(h,p,m),u(h,p,m)}:l}function qA(a,l){const u=a.hostBindings;a.hostBindings=u?(h,p)=>{l(h,p),u(h,p)}:l}let s_=null;function eh(){if(!s_){const a=ut.Symbol;if(a&&a.iterator)s_=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<l.length;++u){const h=l[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(s_=h)}}}return s_}function th(a){return!!nh(a)&&(Array.isArray(a)||!(a instanceof Map)&&eh()in a)}function nh(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function Ko(a,l,u){return a[l]=u}function kr(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function XD(a,l,u,h){const p=Re();return kr(p,Ho(),l)&&(Yt(),Zo(Tn(),p,a,l,u,h)),XD}function Nu(a,l,u,h){return kr(a,Ho(),u)?l+De(u)+h:Kt}function nE(a,l,u,h,p,m,y,C){const S=Re(),M=Yt(),O=a+22,U=M.firstCreatePass?function XA(a,l,u,h,p,m,y,C,S){const M=l.consts,O=Bl(l,a,4,y||null,ds(M,C));Xg(l,u,O,ds(M,S)),lu(l,O);const U=O.tViews=Jy(2,O,h,p,m,l.directiveRegistry,l.pipeRegistry,null,l.schemas,M);return null!==l.queries&&(l.queries.template(l,O),U.queries=l.queries.embeddedTView(O)),O}(O,M,S,l,u,h,p,m,y):M.data[O];or(U,!1);const Q=S[11].createComment("");op(M,S,Q,U),Ar(Q,S),ob(S,S[O]=e_(Q,S,Q,U)),Rs(U)&&HD(M,S,U),null!=y&&Wo(S,U,C)}function Hl(a){return Ns(function ba(){return At.lFrame.contextLView}(),22+a)}function mb(a,l,u){const h=Re();return kr(h,Ho(),l)&&go(Yt(),Tn(),h,a,l,h[11],u,!1),mb}function qa(a,l,u,h,p){const y=p?"class":"style";za(a,u,l.inputs[y],y,h)}function Si(a,l,u,h){const p=Re(),m=Yt(),y=22+a,C=p[11],S=p[y]=ky(C,l,function Ed(){return At.lFrame.currentNamespace}()),M=m.firstCreatePass?function iE(a,l,u,h,p,m,y){const C=l.consts,M=Bl(l,a,2,p,ds(C,m));return Xg(l,u,M,ds(C,y)),null!==M.attrs&&t_(M,M.attrs,!1),null!==M.mergedAttrs&&t_(M,M.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,M),M}(y,m,p,0,l,u,h):m.data[y];or(M,!0);const O=M.mergedAttrs;null!==O&&Dl(C,S,O);const U=M.classes;null!==U&&By(C,S,U);const Q=M.styles;return null!==Q&&Ly(C,S,Q),64!=(64&M.flags)&&op(m,p,S,M),0===function gl(){return At.lFrame.elementDepthCount}()&&Ar(S,p),function yd(){At.lFrame.elementDepthCount++}(),Rs(M)&&(HD(m,p,M),SA(m,M,p)),null!==h&&Wo(p,M),Si}function Qo(){let a=ti();tu()?Uo():(a=a.parent,or(a,!1));const l=a;!function ao(){At.lFrame.elementDepthCount--}();const u=Yt();return u.firstCreatePass&&(lu(u,a),io(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function Ri(a){return 0!=(16&a.flags)}(l)&&qa(u,l,Re(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function wf(a){return 0!=(32&a.flags)}(l)&&qa(u,l,Re(),l.stylesWithoutHost,!1),Qo}function gb(a,l,u,h){return Si(a,l,u,h),Qo(),gb}function kp(a,l,u){const h=Re(),p=Yt(),m=a+22,y=p.firstCreatePass?function Xo(a,l,u,h,p){const m=l.consts,y=ds(m,h),C=Bl(l,a,8,"ng-container",y);return null!==y&&t_(C,y,!0),Xg(l,u,C,ds(m,p)),null!==l.queries&&l.queries.elementStart(l,C),C}(m,p,h,l,u):p.data[m];or(y,!0);const C=h[m]=h[11].createComment("");return op(p,h,C,y),Ar(C,h),Rs(y)&&(HD(p,h,y),SA(p,y,h)),null!=u&&Wo(h,y),kp}function Rp(){let a=ti();const l=Yt();return tu()?Uo():(a=a.parent,or(a,!1)),l.firstCreatePass&&(lu(l,a),io(a)&&l.queries.elementEnd(a)),Rp}function o_(a,l,u){return kp(a,l,u),Rp(),o_}function _b(){return Re()}function a_(a){return!!a&&"function"==typeof a.then}function vb(a){return!!a&&"function"==typeof a.subscribe}const yb=vb;function l_(a,l,u,h){const p=Re(),m=Yt(),y=ti();return bb(m,p,p[11],y,a,l,0,h),l_}function ah(a,l){const u=ti(),h=Re(),p=Yt();return bb(p,h,WD(yl(p.data),u,h),u,a,l),ah}function bb(a,l,u,h,p,m,y,C){const S=Rs(h),O=a.firstCreatePass&&cb(a),U=l[8],Q=lb(l);let le=!0;if(3&h.type||C){const st=pr(h,l),gt=C?C(st):st,Ot=Q.length,Be=C?_n=>C(pi(_n[h.index])):h.index;let Mt=null;if(!C&&S&&(Mt=function rE(a,l,u,h){const p=a.cleanup;if(null!=p)for(let m=0;m<p.length-1;m+=2){const y=p[m];if(y===u&&p[m+1]===h){const C=l[7],S=p[m+2];return C.length>S?C[S]:null}"string"==typeof y&&(m+=2)}return null}(a,l,p,h.index)),null!==Mt)(Mt.__ngLastListenerFn__||Mt).__ngNextListenerFn__=m,Mt.__ngLastListenerFn__=m,le=!1;else{m=Cb(h,l,U,m,!1);const _n=u.listen(gt,p,m);Q.push(m,_n),O&&O.push(p,Be,Ot,Ot+1)}}else m=Cb(h,l,U,m,!1);const Ie=h.outputs;let ze;if(le&&null!==Ie&&(ze=Ie[p])){const st=ze.length;if(st)for(let gt=0;gt<st;gt+=2){const oi=l[ze[gt]][ze[gt+1]].subscribe(m),Sh=Q.length;Q.push(m,oi),O&&O.push(p,h.index,Sh,-(Sh+1))}}}function wb(a,l,u,h){try{return!1!==u(h)}catch(p){return ub(a,p),!1}}function Cb(a,l,u,h,p){return function m(y){if(y===Function)return h;Ou(2&a.flags?Bi(a.index,l):l);let S=wb(l,0,h,y),M=m.__ngNextListenerFn__;for(;M;)S=wb(l,0,M,y)&&S,M=M.__ngNextListenerFn__;return p&&!1===S&&(y.preventDefault(),y.returnValue=!1),S}}function sE(a=1){return function _f(a){return(At.lFrame.contextLView=function wl(a,l){for(;a>0;)l=l[15],a--;return l}(a,At.lFrame.contextLView))[8]}(a)}function oE(a,l){let u=null;const h=function PB(a){const l=a.attrs;if(null!=l){const u=l.indexOf(5);if(0==(1&u))return l[u+1]}return null}(a);for(let p=0;p<l.length;p++){const m=l[p];if("*"!==m){if(null===h?cA(a,m,!0):LB(h,m))return p}else u=p}return u}function Db(a){const l=Re()[16][6];if(!l.projection){const h=l.projection=Ra(a?a.length:1,null),p=h.slice();let m=l.child;for(;null!==m;){const y=a?oE(m,a):0;null!==y&&(p[y]?p[y].projectionNext=m:h[y]=m,p[y]=m),m=m.next}}}function c_(a,l=0,u){const h=Re(),p=Yt(),m=Bl(p,22+a,16,null,u||null);null===m.projection&&(m.projection=l),Uo(),64!=(64&m.flags)&&function TD(a,l,u){Fy(l[11],0,l,u,Oy(a,u,l),Ug(u.parent||l[6],u,l))}(p,h,m)}function u_(a,l,u){return Op(a,"",l,"",u),u_}function Op(a,l,u,h,p){const m=Re(),y=Nu(m,l,u,h);return y!==Kt&&go(Yt(),Tn(),m,a,y,m[11],p,!1),Op}function ek(a,l,u,h,p){const m=a[u+1],y=null===l;let C=h?Us(m):Cs(m),S=!1;for(;0!==C&&(!1===S||y);){const O=a[C+1];bV(a[C],l)&&(S=!0,a[C+1]=h?qy(O):Mc(O)),C=h?Us(O):Cs(O)}S&&(a[u+1]=h?Mc(m):qy(m))}function bV(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&Ol(a,l)>=0}function f_(a,l,u){return Ss(a,l,u,!1),f_}function Rb(a,l){return Ss(a,l,null,!0),Rb}function Ss(a,l,u,h){const p=Re(),m=Yt(),y=function Yr(a){const l=At.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}(2);m.firstUpdatePass&&function p_(a,l,u,h){const p=a.data;if(null===p[u+1]){const m=p[mi()],y=function ch(a,l){return l>=a.expandoStartIndex}(a,u);(function dh(a,l){return 0!=(a.flags&(l?16:32))})(m,h)&&null===l&&!y&&(l=!1),l=function uE(a,l,u,h){const p=yl(a);let m=h?l.residualClasses:l.residualStyles;if(null===p)0===(h?l.classBindings:l.styleBindings)&&(u=uh(u=g_(null,a,l,u,h),l.attrs,h),m=null);else{const y=l.directiveStylingLast;if(-1===y||a[y]!==p)if(u=g_(p,a,l,u,h),null===m){let S=function Pb(a,l,u){const h=u?l.classBindings:l.styleBindings;if(0!==Cs(h))return a[Us(h)]}(a,l,h);void 0!==S&&Array.isArray(S)&&(S=g_(null,a,l,S[1],h),S=uh(S,l.attrs,h),function dE(a,l,u,h){a[Us(u?l.classBindings:l.styleBindings)]=h}(a,l,h,S))}else m=function m_(a,l,u){let h;const p=l.directiveEnd;for(let m=1+l.directiveStylingLast;m<p;m++)h=uh(h,a[m].hostAttrs,u);return uh(h,l.attrs,u)}(a,l,h)}return void 0!==m&&(h?l.residualClasses=m:l.residualStyles=m),u}(p,m,l,h),function Wa(a,l,u,h,p,m){let y=m?l.classBindings:l.styleBindings,C=Us(y),S=Cs(y);a[h]=u;let O,M=!1;if(Array.isArray(u)){const U=u;O=U[1],(null===O||Ol(U,O)>0)&&(M=!0)}else O=u;if(p)if(0!==S){const Q=Us(a[C+1]);a[h+1]=Gg(Q,C),0!==Q&&(a[Q+1]=Wd(a[Q+1],h)),a[C+1]=function yA(a,l){return 131071&a|l<<17}(a[C+1],h)}else a[h+1]=Gg(C,0),0!==C&&(a[C+1]=Wd(a[C+1],h)),C=h;else a[h+1]=Gg(S,0),0===C?C=h:a[S+1]=Wd(a[S+1],h),S=h;M&&(a[h+1]=Mc(a[h+1])),ek(a,O,h,!0),ek(a,O,h,!1),function aE(a,l,u,h,p){const m=p?a.residualClasses:a.residualStyles;null!=m&&"string"==typeof l&&Ol(m,l)>=0&&(u[h+1]=qy(u[h+1]))}(l,O,a,h,m),y=Gg(C,S),m?l.classBindings=y:l.styleBindings=y}(p,m,l,u,y,h)}}(m,a,y,h),l!==Kt&&kr(p,y,l)&&function sk(a,l,u,h,p,m,y,C){if(!(3&l.type))return;const S=a.data,M=S[C+1];Nb(function BD(a){return 1==(1&a)}(M)?hE(S,l,u,p,Cs(M),y):void 0)||(Nb(m)||function xu(a){return 2==(2&a)}(M)&&(m=hE(S,null,u,p,C,y)),function MD(a,l,u,h,p){if(l)p?a.addClass(u,h):a.removeClass(u,h);else{let m=-1===h.indexOf("-")?void 0:Ll.DashCase;null==p?a.removeStyle(u,h,m):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),m|=Ll.Important),a.setStyle(u,h,p,m))}}(h,y,ml(mi(),u),p,m))}(m,m.data[mi()],p,p[11],a,p[y+1]=function v_(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=ge(Na(a)))),a}(l,u),h,y)}function g_(a,l,u,h,p){let m=null;const y=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<y&&(m=l[C],h=uh(h,m.hostAttrs,p),m!==a);)C++;return null!==a&&(u.directiveStylingLast=C),h}function uh(a,l,u){const h=u?1:2;let p=-1;if(null!==l)for(let m=0;m<l.length;m++){const y=l[m];"number"==typeof y?p=y:p===h&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),Xi(a,y,!!u||l[++m]))}return void 0===a?null:a}function hE(a,l,u,h,p,m){const y=null===l;let C;for(;p>0;){const S=a[p],M=Array.isArray(S),O=M?S[1]:S,U=null===O;let Q=u[p+1];Q===Kt&&(Q=U?zt:void 0);let le=U?_c(Q,h):O===h?Q:void 0;if(M&&!Nb(le)&&(le=_c(S,h)),Nb(le)&&(C=le,y))return C;const Ie=a[p+1];p=y?Us(Ie):Cs(Ie)}if(null!==l){let S=m?l.residualClasses:l.residualStyles;null!=S&&(C=_c(S,h))}return C}function Nb(a){return void 0!==a}function Lp(a,l=""){const u=Re(),h=Yt(),p=a+22,m=h.firstCreatePass?Bl(h,p,1,l,null):h.data[p],y=u[p]=function _D(a,l){return a.createText(l)}(u[11],l);op(h,u,y,m),or(m,!1)}function hh(a){return y_("",a,""),hh}function y_(a,l,u){const h=Re(),p=Nu(h,a,l,u);return p!==Kt&&function er(a,l,u){const h=ml(l,a);!function qo(a,l,u){a.setValue(l,u)}(a[11],h,u)}(h,mi(),p),y_}function fh(a,l,u){const h=Re();return kr(h,Ho(),l)&&go(Yt(),Tn(),h,a,l,h[11],u,!0),fh}function Fu(a,l,u){const h=Re();if(kr(h,Ho(),l)){const m=Yt(),y=Tn();go(m,y,h,a,l,WD(yl(m.data),y,h),u,!0)}return Fu}const Lu=void 0;var mk=["en",[["a","p"],["AM","PM"],Lu],[["AM","PM"],Lu,Lu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Lu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Lu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Lu,"{1} 'at' {0}",Lu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function DE(a){const u=Math.floor(Math.abs(a)),h=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let jp={};function Gb(a){const l=function xE(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=zb(l);if(u)return u;const h=l.split("-")[0];if(u=zb(h),u)return u;if("en"===h)return mk;throw new xe(701,!1)}function EE(a){return Gb(a)[kt.PluralCase]}function zb(a){return a in jp||(jp[a]=ut.ng&&ut.ng.common&&ut.ng.common.locales&&ut.ng.common.locales[a]),jp[a]}var kt=(()=>((kt=kt||{})[kt.LocaleId=0]="LocaleId",kt[kt.DayPeriodsFormat=1]="DayPeriodsFormat",kt[kt.DayPeriodsStandalone=2]="DayPeriodsStandalone",kt[kt.DaysFormat=3]="DaysFormat",kt[kt.DaysStandalone=4]="DaysStandalone",kt[kt.MonthsFormat=5]="MonthsFormat",kt[kt.MonthsStandalone=6]="MonthsStandalone",kt[kt.Eras=7]="Eras",kt[kt.FirstDayOfWeek=8]="FirstDayOfWeek",kt[kt.WeekendRange=9]="WeekendRange",kt[kt.DateFormat=10]="DateFormat",kt[kt.TimeFormat=11]="TimeFormat",kt[kt.DateTimeFormat=12]="DateTimeFormat",kt[kt.NumberSymbols=13]="NumberSymbols",kt[kt.NumberFormats=14]="NumberFormats",kt[kt.CurrencyCode=15]="CurrencyCode",kt[kt.CurrencySymbol=16]="CurrencySymbol",kt[kt.CurrencyName=17]="CurrencyName",kt[kt.Currencies=18]="Currencies",kt[kt.Directionality=19]="Directionality",kt[kt.PluralCase=20]="PluralCase",kt[kt.ExtraData=21]="ExtraData",kt))();const ph="en-US";let Bu=ph;function Zp(a,l,u,h,p){if(a=re(a),Array.isArray(a))for(let m=0;m<a.length;m++)Zp(a[m],l,u,h,p);else{const m=Yt(),y=Re();let C=Cu(a)?a:re(a.provide),S=qC(a);const M=ti(),O=1048575&M.providerIndexes,U=M.directiveStart,Q=M.providerIndexes>>20;if(Cu(a)||!a.multi){const le=new Sa(S,p,qd),Ie=KE(C,l,p?O:O+Q,U);-1===Ie?(ar(ps(M,y),m,C),e0(m,a,l.length),l.push(C),M.directiveStart++,M.directiveEnd++,p&&(M.providerIndexes+=1048576),u.push(le),y.push(le)):(u[Ie]=le,y[Ie]=le)}else{const le=KE(C,l,O+Q,U),Ie=KE(C,l,O,O+Q),ze=le>=0&&u[le],st=Ie>=0&&u[Ie];if(p&&!st||!p&&!ze){ar(ps(M,y),m,C);const gt=function Uk(a,l,u,h,p){const m=new Sa(a,u,qd);return m.multi=[],m.index=l,m.componentProviders=0,Kp(m,p,h&&!u),m}(p?BV:LV,u.length,p,h,S);!p&&st&&(u[Ie].providerFactory=gt),e0(m,a,l.length,0),l.push(C),M.directiveStart++,M.directiveEnd++,p&&(M.providerIndexes+=1048576),u.push(gt),y.push(gt)}else e0(m,a,le>-1?le:Ie,Kp(u[p?Ie:le],S,!p&&h));!p&&h&&st&&u[Ie].componentProviders++}}}function e0(a,l,u,h){const p=Cu(l),m=function py(a){return!!a.useClass}(l);if(p||m){const S=(m?re(l.useClass):l).prototype.ngOnDestroy;if(S){const M=a.destroyHooks||(a.destroyHooks=[]);if(!p&&l.multi){const O=M.indexOf(u);-1===O?M.push(u,[h,S]):M[O+1].push(h,S)}else M.push(u,S)}}}function Kp(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function KE(a,l,u,h){for(let p=u;p<h;p++)if(l[p]===a)return p;return-1}function LV(a,l,u,h){return QE(this.multi,[])}function BV(a,l,u,h){const p=this.multi;let m;if(this.providerFactory){const y=this.providerFactory.componentProviders,C=Kr(u,u[1],this.providerFactory.index,h);m=C.slice(0,y),QE(p,m);for(let S=y;S<C.length;S++)m.push(C[S])}else m=[],QE(p,m);return m}function QE(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function Hk(a,l=[]){return u=>{u.providersResolver=(h,p)=>function ZE(a,l,u){const h=Yt();if(h.firstCreatePass){const p=Sr(a);Zp(u,h.data,h.blueprint,p,!0),Zp(l,h.data,h.blueprint,p,!1)}}(h,p?p(a):a,l)}}class Gs{}class XE{}function jk(a,l){return new JE(a,l??null)}class JE extends Gs{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new YD(this);const h=Ee(l);this._bootstrapComponents=xc(h.bootstrap),this._r3Injector=jg(l,u,[{provide:Gs,useValue:this},{provide:Pg,useValue:this.componentFactoryResolver}],ge(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class eS extends XE{constructor(l){super(),this.moduleType=l}create(l){return new JE(this.moduleType,l)}}class tS extends Gs{constructor(l,u,h){super(),this.componentFactoryResolver=new YD(this),this.instance=null;const p=new $C([...l,{provide:Gs,useValue:this},{provide:Pg,useValue:this.componentFactoryResolver}],u||my(),h,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function t0(a,l,u=null){return new tS(a,l,u).injector}let nS=(()=>{class a{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const h=dy(0,u.type),p=h.length>0?t0([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,p)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return a.\u0275prov=cn({token:a,providedIn:"environment",factory:()=>new a(Zn(Ba))}),a})();function iS(a){a.getStandaloneInjector=l=>l.get(nS).getOrCreateStandaloneInjector(a)}function Yk(a,l,u){const h=ki()+a,p=Re();return p[h]===Kt?Ko(p,h,u?l.call(u):l()):function xp(a,l){return a[l]}(p,h)}function Zk(a,l,u,h){return function tR(a,l,u,h,p,m){const y=l+u;return kr(a,y,p)?Ko(a,y+1,m?h.call(m,p):h(p)):Xp(a,y+1)}(Re(),ki(),a,l,u,h)}function Xp(a,l){const u=a[l];return u===Kt?void 0:u}function nR(a,l,u,h,p,m,y){const C=l+u;return function Hs(a,l,u,h){const p=kr(a,l,u);return kr(a,l+1,h)||p}(a,C,p,m)?Ko(a,C+2,y?h.call(y,p,m):h(p,m)):Xp(a,C+2)}function aS(a,l){const u=Yt();let h;const p=a+22;u.firstCreatePass?(h=function S_(a,l){if(l)for(let u=l.length-1;u>=0;u--){const h=l[u];if(a===h.name)return h}}(l,u.pipeRegistry),u.data[p]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(p,h.onDestroy)):h=u.data[p];const m=h.factory||(h.factory=ma(h.type)),y=mn(qd);try{const C=Ia(!1),S=m();return Ia(C),function JA(a,l,u,h){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),l[u]=h}(u,Re(),p,S),S}finally{mn(y)}}function x_(a,l,u,h){const p=a+22,m=Re(),y=Ns(m,p);return function Jp(a,l){return a[1].data[l].pure}(m,p)?nR(m,ki(),l,y.transform,u,h,y):y.transform(u,h)}function s0(a){return l=>{setTimeout(a,void 0,l)}}const Jo=class aR extends o.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,h){let p=l,m=u||(()=>null),y=h;if(l&&"object"==typeof l){const S=l;p=S.next?.bind(S),m=S.error?.bind(S),y=S.complete?.bind(S)}this.__isAsync&&(m=s0(m),p&&(p=s0(p)),y&&(y=s0(y)));const C=super.subscribe({next:p,error:m,complete:y});return l instanceof j.w0&&l.add(C),C}};function o0(){return this._results[eh()]()}class em{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=eh(),h=em.prototype;h[u]||(h[u]=o0)}get changes(){return this._changes||(this._changes=new Jo)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const h=this;h.dirty=!1;const p=Qi(l);(this._changesDetected=!function Wv(a,l,u){if(a.length!==l.length)return!1;for(let h=0;h<a.length;h++){let p=a[h],m=l[h];if(u&&(p=u(p),m=u(m)),m!==p)return!1}return!0}(h._results,p,u))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let T_=(()=>{class a{}return a.__NG_ELEMENT_ID__=lR,a})();const $V=T_,qV=class extends $V{constructor(l,u,h){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(l,u){const h=this._declarationTContainer.tViews,p=Xy(this._declarationLView,h,l,16,null,h.declTNode,null,null,null,null,u||null);p[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(p[19]=y.createEmbeddedView(h)),Au(h,p,l),new n_(p)}};function lR(){return a0(ti(),Re())}function a0(a,l){return 4&a.type?new qV(l,a,Kf(a,l)):null}let l0=(()=>{class a{}return a.__NG_ELEMENT_ID__=WV,a})();function WV(){return uR(ti(),Re())}const YV=l0,cR=class extends YV{constructor(l,u,h){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=h}get element(){return Kf(this._hostTNode,this._hostLView)}get injector(){return new Cn(this._hostTNode,this._hostLView)}get parentInjector(){const l=dc(this._hostTNode,this._hostLView);if(Ef(l)){const u=Di(l,this._hostLView),h=Sl(l);return new Cn(u[1].data[h+8],u)}return new Cn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=uS(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,u,h){let p,m;"number"==typeof h?p=h:null!=h&&(p=h.index,m=h.injector);const y=l.createEmbeddedView(u||{},m);return this.insert(y,p),y}createComponent(l,u,h,p,m){const y=l&&!function mc(a){return"function"==typeof a}(l);let C;if(y)C=u;else{const U=u||{};C=U.index,h=U.injector,p=U.projectableNodes,m=U.environmentInjector||U.ngModuleRef}const S=y?l:new i_(J(l)),M=h||this.parentInjector;if(!m&&null==S.ngModule){const Q=(y?M:this.parentInjector).get(Ba,null);Q&&(m=Q)}const O=S.create(M,p,void 0,m);return this.insert(O.hostView,C),O}insert(l,u){const h=l._lView,p=h[1];if(function so(a){return $r(a[3])}(h)){const O=this.indexOf(l);if(-1!==O)this.detach(O);else{const U=h[3],Q=new cR(U,U[6],U[3]);Q.detach(Q.indexOf(l))}}const m=this._adjustIndex(u),y=this._lContainer;!function Bg(a,l,u,h){const p=10+h,m=u.length;h>0&&(u[p-1][4]=l),h<m-10?(l[4]=u[p],pu(u,10+h,l)):(u.push(l),l[4]=null),l[3]=u;const y=l[17];null!==y&&u!==y&&function yD(a,l){const u=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===u?a[9]=[l]:u.push(l)}(y,l);const C=l[19];null!==C&&C.insertView(a),l[2]|=64}(p,h,y,m);const C=xD(m,y),S=h[11],M=Eu(S,y[7]);return null!==M&&function Ry(a,l,u,h,p,m){h[0]=p,h[6]=l,lp(a,h,u,1,p,m)}(p,y[6],S,h,M,C),l.attachToViewContainerRef(),pu(c0(y),m,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=uS(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),h=np(this._lContainer,u);h&&(mu(c0(this._lContainer),u),Vg(h[1],h))}detach(l){const u=this._adjustIndex(l,-1),h=np(this._lContainer,u);return h&&null!=mu(c0(this._lContainer),u)?new n_(h):null}_adjustIndex(l,u=0){return l??this.length+u}};function uS(a){return a[8]}function c0(a){return a[8]||(a[8]=[])}function uR(a,l){let u;const h=l[a.index];if($r(h))u=h;else{let p;if(8&a.type)p=pi(h);else{const m=l[11];p=m.createComment("");const y=pr(a,l);Tc(m,Eu(m,y),p,function rA(a,l){return a.nextSibling(l)}(m,y),!1)}l[a.index]=u=e_(h,l,p,a),ob(l,u)}return new cR(u,a,l)}class ea{constructor(l){this.queryList=l,this.matches=null}clone(){return new ea(this.queryList)}setDirty(){this.queryList.setDirty()}}class dS{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const h=null!==l.contentQueries?l.contentQueries[0]:u.length,p=[];for(let m=0;m<h;m++){const y=u.getByIndex(m);p.push(this.queries[y.indexInDeclarationView].clone())}return new dS(p)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==mR(l,u).matches&&this.queries[u].setDirty()}}class vh{constructor(l,u,h=null){this.predicate=l,this.flags=u,this.read=h}}class u0{constructor(l=[]){this.queries=l}elementStart(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let h=0;h<this.length;h++){const p=null!==u?u.length:0,m=this.getByIndex(h).embeddedTView(l,p);m&&(m.indexInDeclarationView=h,null!==u?u.push(m):u=[m])}return null!==u?new u0(u):null}template(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class d0{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new d0(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=l.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const m=h[p];this.matchTNodeWithReadOption(l,u,hS(u,m)),this.matchTNodeWithReadOption(l,u,Go(u,l,m,!1,!1))}else h===T_?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,Go(u,l,h,!1,!1))}matchTNodeWithReadOption(l,u,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===Du||p===l0||p===T_&&4&u.type)this.addMatch(u.index,-2);else{const m=Go(u,l,p,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,h)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function hS(a,l){const u=a.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===l)return u[h+1];return null}function fR(a,l,u,h){return-1===u?function fS(a,l){return 11&a.type?Kf(a,l):4&a.type?a0(a,l):null}(l,a):-2===u?function pS(a,l,u){return u===Du?Kf(l,a):u===T_?a0(l,a):u===l0?uR(l,a):void 0}(a,l,h):Kr(a,a[1],u,l)}function h0(a,l,u,h){const p=l[19].queries[h];if(null===p.matches){const m=a.data,y=u.matches,C=[];for(let S=0;S<y.length;S+=2){const M=y[S];C.push(M<0?null:fR(l,m[M],y[S+1],u.metadata.read))}p.matches=C}return p.matches}function f0(a,l,u,h){const p=a.queries.getByIndex(u),m=p.matches;if(null!==m){const y=h0(a,l,p,u);for(let C=0;C<m.length;C+=2){const S=m[C];if(S>0)h.push(y[C/2]);else{const M=m[C+1],O=l[-S];for(let U=10;U<O.length;U++){const Q=O[U];Q[17]===Q[3]&&f0(Q[1],Q,M,h)}if(null!==O[9]){const U=O[9];for(let Q=0;Q<U.length;Q++){const le=U[Q];f0(le[1],le,M,h)}}}}}return h}function mS(a){const l=Re(),u=Yt(),h=wa();su(h+1);const p=mR(u,h);if(a.dirty&&No(l)===(2==(2&p.metadata.flags))){if(null===p.matches)a.reset([]);else{const m=p.crossesNgTemplate?f0(u,l,h,[]):h0(u,l,p,h);a.reset(m,yy),a.notifyOnChanges()}return!0}return!1}function gS(a,l,u){const h=Yt();h.firstCreatePass&&(bS(h,new vh(a,l,u),-1),2==(2&l)&&(h.staticViewQueries=!0)),yS(h,Re(),l)}function _S(a,l,u,h){const p=Yt();if(p.firstCreatePass){const m=ti();bS(p,new vh(l,u,h),m.index),function KV(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(p,a),2==(2&u)&&(p.staticContentQueries=!0)}yS(p,Re(),u)}function vS(){return function pR(a,l){return a[19].queries[l].queryList}(Re(),wa())}function yS(a,l,u){const h=new em(4==(4&u));Qg(a,l,h,h.destroy),null===l[19]&&(l[19]=new dS),l[19].queries.push(new ea(h))}function bS(a,l,u){null===a.queries&&(a.queries=new u0),a.queries.track(new d0(l,u))}function mR(a,l){return a.queries.getByIndex(l)}function bh(a){const l=J(a)||Z(a)||$(a);return null!==l&&l.standalone}function O_(...a){}const BS=new $t("Application Initializer");let nm=(()=>{class a{constructor(u){this.appInits=u,this.resolve=O_,this.reject=O_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const m=this.appInits[p]();if(a_(m))u.push(m);else if(yb(m)){const y=new Promise((C,S)=>{m.subscribe({complete:C,error:S})});u.push(y)}}Promise.all(u).then(()=>{h()}).catch(p=>{this.reject(p)}),0===u.length&&h(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)(Zn(BS,8))},a.\u0275prov=cn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const im=new $t("AppId",{providedIn:"root",factory:function zl(){return`${_0()}${_0()}${_0()}`}});function _0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const VS=new $t("Platform Initializer"),US=new $t("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),v0=new $t("appBootstrapListener"),PR=new $t("AnimationModuleType");let rm=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=cn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const P_=new $t("LocaleId",{providedIn:"root",factory:()=>Rd(P_,bt.Optional|bt.SkipSelf)||function yr(){return typeof $localize<"u"&&$localize.locale||ph}()}),HS=new $t("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class zS{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}let NR=(()=>{class a{compileModuleSync(u){return new eS(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),m=xc(Ee(u).declarations).reduce((y,C)=>{const S=J(C);return S&&y.push(new i_(S)),y},[]);return new zS(h,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=cn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const a2=(()=>Promise.resolve(0))();function $S(a){typeof Zone>"u"?a2.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class vo{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Jo(!1),this.onMicrotaskEmpty=new Jo(!1),this.onStable=new Jo(!1),this.onError=new Jo(!1),typeof Zone>"u")throw new xe(908,!1);Zone.assertZonePatched();const p=this;if(p._nesting=0,p._outer=p._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;p._inner=p._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&u,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function l2(){let a=ut.requestAnimationFrame,l=ut.cancelAnimationFrame;if(typeof Zone<"u"&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function d2(a){const l=()=>{!function u2(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(ut,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,WS(a),a.isCheckStableRunning=!0,qS(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),WS(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,p,m,y,C)=>{try{return BR(a),u.invokeTask(p,m,y,C)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||a.shouldCoalesceRunChangeDetection)&&l(),VR(a)}},onInvoke:(u,h,p,m,y,C,S)=>{try{return BR(a),u.invoke(p,m,y,C,S)}finally{a.shouldCoalesceRunChangeDetection&&l(),VR(a)}},onHasTask:(u,h,p,m)=>{u.hasTask(p,m),h===p&&("microTask"==m.change?(a._hasPendingMicrotasks=m.microTask,WS(a),qS(a)):"macroTask"==m.change&&(a.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,h,p,m)=>(u.handleError(p,m),a.runOutsideAngular(()=>a.onError.emit(m)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vo.isInAngularZone())throw new xe(909,!1)}static assertNotInAngularZone(){if(vo.isInAngularZone())throw new xe(909,!1)}run(l,u,h){return this._inner.run(l,u,h)}runTask(l,u,h,p){const m=this._inner,y=m.scheduleEventTask("NgZoneEvent: "+p,l,c2,O_,O_);try{return m.runTask(y,u,h)}finally{m.cancelTask(y)}}runGuarded(l,u,h){return this._inner.runGuarded(l,u,h)}runOutsideAngular(l){return this._outer.run(l)}}const c2={};function qS(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function WS(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function BR(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function VR(a){a._nesting--,qS(a)}class h2{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Jo,this.onMicrotaskEmpty=new Jo,this.onStable=new Jo,this.onError=new Jo}run(l,u,h){return l.apply(u,h)}runGuarded(l,u,h){return l.apply(u,h)}runOutsideAngular(l){return l()}runTask(l,u,h,p){return l.apply(u,h)}}const UR=new $t(""),HR=new $t("");let YS,f2=(()=>{class a{constructor(u,h,p){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,YS||(function p2(a){YS=a}(p),p.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vo.assertNotInAngularZone(),$S(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$S(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,p){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==m),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:p})}whenStable(u,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,p){return[]}}return a.\u0275fac=function(u){return new(u||a)(Zn(vo),Zn(jR),Zn(HR))},a.\u0275prov=cn({token:a,factory:a.\u0275fac}),a})(),jR=(()=>{class a{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return YS?.findTestabilityInTree(this,u,h)??null}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=cn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})(),$u=null;const ZS=new $t("AllowMultipleToken"),Ch=new $t("PlatformDestroyListeners");class KS{constructor(l,u){this.name=l,this.token=u}}function $R(a,l,u=[]){const h=`Platform: ${l}`,p=new $t(h);return(m=[])=>{let y=b0();if(!y||y.injector.get(ZS,!1)){const C=[...u,...m,{provide:p,useValue:!0}];a?a(C):function QS(a){if($u&&!$u.get(ZS,!1))throw new xe(400,!1);$u=a;const l=a.get(XS);(function om(a){const l=a.get(VS,null);l&&l.forEach(u=>u())})(a)}(function y0(a=[],l){return zd.create({name:l,providers:[{provide:Rg,useValue:"platform"},{provide:Ch,useValue:new Set([()=>$u=null])},...a]})}(C,h))}return function N_(a){const l=b0();if(!l)throw new xe(401,!1);return l}()}}function b0(){return $u?.get(XS)??null}let XS=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const p=function qR(a,l){let u;return u="noop"===a?new h2:("zone.js"===a?void 0:a)||new vo(l),u}(h?.ngZone,function JS(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!a||!a.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!a||!a.ngZoneRunCoalescing)||!1}}(h)),m=[{provide:vo,useValue:p}];return p.run(()=>{const y=zd.create({providers:m,parent:this.injector,name:u.moduleType.name}),C=u.create(y),S=C.injector.get(Xf,null);if(!S)throw new xe(402,!1);return p.runOutsideAngular(()=>{const M=p.onError.subscribe({next:O=>{S.handleError(O)}});C.onDestroy(()=>{Rc(this._modules,C),M.unsubscribe()})}),function w0(a,l,u){try{const h=u();return a_(h)?h.catch(p=>{throw l.runOutsideAngular(()=>a.handleError(p)),p}):h}catch(h){throw l.runOutsideAngular(()=>a.handleError(h)),h}}(S,p,()=>{const M=C.injector.get(nm);return M.runInitializers(),M.donePromise.then(()=>(function TE(a){Jt(a,"Expected localeId to be defined"),"string"==typeof a&&(Bu=a.toLowerCase().replace(/_/g,"-"))}(C.injector.get(P_,ph)||ph),this._moduleDoBootstrap(C),C))})})}bootstrapModule(u,h=[]){const p=ex({},h);return function sm(a,l,u){const h=new eS(u);return Promise.resolve(h)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,p))}_moduleDoBootstrap(u){const h=u.injector.get(F_);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!u.instance.ngDoBootstrap)throw new xe(403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(Ch,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)(Zn(zd))},a.\u0275prov=cn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function ex(a,l){return Array.isArray(l)?l.reduce(ex,a):{...a,...l}}let F_=(()=>{class a{constructor(u,h,p){this._zone=u,this._injector=h,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new N.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),y=new N.y(C=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{vo.assertNotInAngularZone(),$S(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{vo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{S.unsubscribe(),M.unsubscribe()}});this.isStable=(0,ue.T)(m,y.pipe((0,he.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,h){const p=u instanceof ZC;if(!this._injector.get(nm).done)throw!p&&bh(u),new xe(405,false);let y;y=p?u:this._injector.get(Pg).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const C=function zR(a){return a.isBoundToModule}(y)?void 0:this._injector.get(Gs),M=y.create(zd.NULL,[],h||y.selector,C),O=M.location.nativeElement,U=M.injector.get(UR,null);return U?.registerApplication(O),M.onDestroy(()=>{this.detachView(M.hostView),Rc(this.components,M),U?.unregisterApplication(O)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new xe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;Rc(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(v0,[]).concat(this._bootstrapListeners).forEach(p=>p(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Rc(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new xe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return a.\u0275fac=function(u){return new(u||a)(Zn(vo),Zn(Ba),Zn(Xf))},a.\u0275prov=cn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function Rc(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}let tx=!0,nx=!1;function WR(){return nx=!0,tx}function YR(){if(nx)throw new Error("Cannot enable prod mode after platform setup.");tx=!1}let v2=(()=>{class a{}return a.__NG_ELEMENT_ID__=y2,a})();function y2(a){return function KR(a,l,u){if(dl(a)&&!u){const h=Bi(a.index,l);return new n_(h,h)}return 47&a.type?new n_(l[16],l):null}(ti(),Re(),16==(16&a))}class tO{constructor(){}supports(l){return th(l)}create(l){return new E2(l)}}const D2=(a,l)=>l;class E2{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||D2}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,h=this._removalsHead,p=0,m=null;for(;u||h;){const y=!h||u&&u.currentIndex<S0(h,p,m)?u:h,C=S0(y,p,m),S=y.currentIndex;if(y===h)p--,h=h._nextRemoved;else if(u=u._next,null==y.previousIndex)p++;else{m||(m=[]);const M=C-p,O=S-p;if(M!=O){for(let Q=0;Q<M;Q++){const le=Q<m.length?m[Q]:m[Q]=0,Ie=le+Q;O<=Ie&&Ie<M&&(m[Q]=le+1)}m[y.previousIndex]=O-M}}C!==S&&l(y,C,S)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!th(l))throw new xe(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let p,m,y,u=this._itHead,h=!1;if(Array.isArray(l)){this.length=l.length;for(let C=0;C<this.length;C++)m=l[C],y=this._trackByFn(C,m),null!==u&&Object.is(u.trackById,y)?(h&&(u=this._verifyReinsertion(u,m,y,C)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,y,C),h=!0),u=u._next}else p=0,function YA(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[eh()]();let h;for(;!(h=u.next()).done;)l(h.value)}}(l,C=>{y=this._trackByFn(p,C),null!==u&&Object.is(u.trackById,y)?(h&&(u=this._verifyReinsertion(u,C,y,p)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,y,p),h=!0),u=u._next,p++}),this.length=p;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,h,p){let m;return null===l?m=this._itTail:(m=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,m,p)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,m,p)):l=this._addAfter(new S2(u,h),m,p),l}_verifyReinsertion(l,u,h,p){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?l=this._reinsertAfter(m,l._prev,p):l.currentIndex!=p&&(l.currentIndex=p,this._addToMoves(l,p)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const p=l._prevRemoved,m=l._nextRemoved;return null===p?this._removalsHead=m:p._nextRemoved=m,null===m?this._removalsTail=p:m._prevRemoved=p,this._insertAfter(l,u,h),this._addToMoves(l,h),l}_moveAfter(l,u,h){return this._unlink(l),this._insertAfter(l,u,h),this._addToMoves(l,h),l}_addAfter(l,u,h){return this._insertAfter(l,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,h){const p=null===u?this._itHead:u._next;return l._next=p,l._prev=u,null===p?this._itTail=l:p._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new ax),this._linkedRecords.put(l),l.currentIndex=h,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,h=l._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ax),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class S2{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class x2{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,l))return h;return null}remove(l){const u=l._prevDup,h=l._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class ax{constructor(){this.map=new Map}put(l){const u=l.trackById;let h=this.map.get(u);h||(h=new x2,this.map.set(u,h)),h.add(l)}get(l,u){const p=this.map.get(l);return p?p.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function S0(a,l,u){const h=a.previousIndex;if(null===h)return h;let p=0;return u&&h<u.length&&(p=u[h]),h+l+p}class lx{constructor(){}supports(l){return l instanceof Map||nh(l)}create(){return new T2}}class T2{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||nh(l)))throw new xe(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(h,p)=>{if(u&&u.key===p)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(p,h);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const h=l._prev;return u._next=l,u._prev=h,l._prev=u,h&&(h._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const p=this._records.get(l);this._maybeAddToChanges(p,u);const m=p._prev,y=p._next;return m&&(m._next=y),y&&(y._prev=m),p._next=null,p._prev=null,p}const h=new nO(l);return this._records.set(l,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(h=>u(l[h],h))}}class nO{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function x0(){return new cx([new tO])}let cx=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(null!=h){const p=h.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||x0()),deps:[[a,new nt,new fe]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(null!=h)return h;throw new xe(901,!1)}}return a.\u0275prov=cn({token:a,providedIn:"root",factory:x0}),a})();function ux(){return new T0([new lx])}let T0=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(h){const p=h.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||ux()),deps:[[a,new nt,new fe]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(h)return h;throw new xe(901,!1)}}return a.\u0275prov=cn({token:a,providedIn:"root",factory:ux}),a})();const I2=$R(null,"core",[]);let sO=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)(Zn(F_))},a.\u0275mod=Ye({type:a}),a.\u0275inj=Gt({}),a})();function oO(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}},3942:(vt,Oe,V)=>{V.d(Oe,{Z:()=>xe});var o=V(2090),j=V(4859),N=V(9681),ue=V(1877);class he{constructor(De,ve){this._delegate=De,this.firebase=ve,(0,N._addComponent)(De,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=De.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this._delegate.automaticDataCollectionEnabled=De}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(De=>{this._delegate.checkDestroyed(),De()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(De,ve=N._DEFAULT_ENTRY_NAME){var at;this._delegate.checkDestroyed();const lt=this._delegate.container.getProvider(De);return!lt.isInitialized()&&"EXPLICIT"===(null===(at=lt.getComponent())||void 0===at?void 0:at.instantiationMode)&&lt.initialize(),lt.getImmediate({identifier:ve})}_removeServiceInstance(De,ve=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(De).clearInstance(ve)}_addComponent(De){(0,N._addComponent)(this._delegate,De)}_addOrOverwriteComponent(De){(0,N._addOrOverwriteComponent)(this._delegate,De)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new o.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function Ce(){const ht=function ge(ht){const De={},ve={__esModule:!0,initializeApp:function Ne(ce,pe={}){const we=N.initializeApp(ce,pe);if((0,o.r3)(De,we.name))return De[we.name];const ne=new ht(we,ve);return De[we.name]=ne,ne},app:lt,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Te(ce){const pe=ce.name,we=pe.replace("-compat","");if(N._registerComponent(ce)&&"PUBLIC"===ce.type){const ne=(se=lt())=>{if("function"!=typeof se[we])throw oe.create("invalid-app-argument",{appName:pe});return se[we]()};void 0!==ce.serviceProps&&(0,o.ZB)(ne,ce.serviceProps),ve[we]=ne,ht.prototype[we]=function(...se){return this._getService.bind(this,pe).apply(this,ce.multipleInstances?se:[])}}return"PUBLIC"===ce.type?ve[we]:null},removeApp:function at(ce){delete De[ce]},useAsService:function Qe(ce,pe){return"serverAuth"===pe?null:pe},modularAPIs:N}};function lt(ce){if(!(0,o.r3)(De,ce=ce||N._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:ce});return De[ce]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function Pe(){return Object.keys(De).map(ce=>De[ce])}}),lt.App=ht,ve}(he);return ht.INTERNAL=Object.assign(Object.assign({},ht.INTERNAL),{createFirebaseNamespace:Ce,extendNamespace:function De(ve){(0,o.ZB)(ht,ve)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),ht}(),Y=new ue.Yd("@firebase/app-compat");if((0,o.jU)()&&void 0!==self.firebase){Y.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ht=self.firebase.SDK_VERSION;ht&&ht.indexOf("LITE")>=0&&Y.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const xe=W;!function Fe(ht){(0,N.registerVersion)("@firebase/app-compat","0.1.32",ht)}()},9681:(vt,Oe,V)=>{V.r(Oe),V.d(Oe,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Cr,_DEFAULT_ENTRY_NAME:()=>Jt,_addComponent:()=>pn,_addOrOverwriteComponent:()=>cn,_apps:()=>An,_clearComponents:()=>to,_components:()=>$n,_getProvider:()=>Gt,_registerComponent:()=>en,_removeServiceInstance:()=>Wi,deleteApp:()=>bt,getApp:()=>Jn,getApps:()=>ls,initializeApp:()=>Dr,onLog:()=>mn,registerVersion:()=>Zi,setLogLevel:()=>wi});var o=V(5861),j=V(4859),N=V(1877),ue=V(2090),he=V(8766);class ye{constructor(K){this.container=K}getPlatformInfoString(){return this.container.getProviders().map(X=>{if(function oe(G){return"VERSION"===G.getComponent()?.type}(X)){const Ae=X.getImmediate();return`${Ae.library}/${Ae.version}`}return null}).filter(X=>X).join(" ")}}const ge="@firebase/app",W=new N.Yd("@firebase/app"),Jt="[DEFAULT]",tt={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},An=new Map,$n=new Map;function pn(G,K){try{G.container.addComponent(K)}catch(X){W.debug(`Component ${K.name} failed to register with FirebaseApp ${G.name}`,X)}}function cn(G,K){G.container.addOrOverwriteComponent(K)}function en(G){const K=G.name;if($n.has(K))return W.debug(`There were multiple attempts to register component ${K}.`),!1;$n.set(K,G);for(const X of An.values())pn(X,G);return!0}function Gt(G,K){const X=G.container.getProvider("heartbeat").getImmediate({optional:!0});return X&&X.triggerHeartbeat(),G.container.getProvider(K)}function Wi(G,K,X=Jt){Gt(G,K).clearInstance(X)}function to(){$n.clear()}const Vn=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class as{constructor(K,X,Ae){this._isDeleted=!1,this._options=Object.assign({},K),this._config=Object.assign({},X),this._name=X.name,this._automaticDataCollectionEnabled=X.automaticDataCollectionEnabled,this._container=Ae,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this.checkDestroyed(),this._automaticDataCollectionEnabled=K}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(K){this._isDeleted=K}checkDestroyed(){if(this.isDeleted)throw Vn.create("app-deleted",{appName:this._name})}}const Cr="9.9.3";function Dr(G,K={}){"object"!=typeof K&&(K={name:K});const X=Object.assign({name:Jt,automaticDataCollectionEnabled:!1},K),Ae=X.name;if("string"!=typeof Ae||!Ae)throw Vn.create("bad-app-name",{appName:String(Ae)});const Ye=An.get(Ae);if(Ye){if((0,ue.vZ)(G,Ye.options)&&(0,ue.vZ)(X,Ye.config))return Ye;throw Vn.create("duplicate-app",{appName:Ae})}const Tt=new j.H0(Ae);for(const wn of $n.values())Tt.addComponent(wn);const bn=new as(G,X,Tt);return An.set(Ae,bn),bn}function Jn(G=Jt){const K=An.get(G);if(!K)throw Vn.create("no-app",{appName:G});return K}function ls(){return Array.from(An.values())}function bt(G){return kn.apply(this,arguments)}function kn(){return(kn=(0,o.Z)(function*(G){const K=G.name;An.has(K)&&(An.delete(K),yield Promise.all(G.container.getProviders().map(X=>X.delete())),G.isDeleted=!0)})).apply(this,arguments)}function Zi(G,K,X){var Ae;let Ye=null!==(Ae=tt[G])&&void 0!==Ae?Ae:G;X&&(Ye+=`-${X}`);const Tt=Ye.match(/\s|\//),bn=K.match(/\s|\//);if(Tt||bn){const wn=[`Unable to register library "${Ye}" with version "${K}":`];return Tt&&wn.push(`library name "${Ye}" contains illegal characters (whitespace or "/")`),Tt&&bn&&wn.push("and"),bn&&wn.push(`version name "${K}" contains illegal characters (whitespace or "/")`),void W.warn(wn.join(" "))}en(new j.wA(`${Ye}-version`,()=>({library:Ye,version:K}),"VERSION"))}function mn(G,K){if(null!==G&&"function"!=typeof G)throw Vn.create("invalid-log-argument");(0,N.Am)(G,K)}function wi(G){(0,N.Ub)(G)}const Sn="firebase-heartbeat-store";let ir=null;function Rn(){return ir||(ir=(0,he.X3)("firebase-heartbeat-database",1,{upgrade:(G,K)=>{0===K&&G.createObjectStore(Sn)}}).catch(G=>{throw Vn.create("idb-open",{originalErrorMessage:G.message})})),ir}function ut(){return(ut=(0,o.Z)(function*(G){var K;try{return(yield Rn()).transaction(Sn).objectStore(Sn).get(Hn(G))}catch(X){if(X instanceof ue.ZR)W.warn(X.message);else{const Ae=Vn.create("idb-get",{originalErrorMessage:null===(K=X)||void 0===K?void 0:K.message});W.warn(Ae.message)}}})).apply(this,arguments)}function Un(G,K){return rr.apply(this,arguments)}function rr(){return(rr=(0,o.Z)(function*(G,K){var X;try{const Ye=(yield Rn()).transaction(Sn,"readwrite");return yield Ye.objectStore(Sn).put(K,Hn(G)),Ye.done}catch(Ae){if(Ae instanceof ue.ZR)W.warn(Ae.message);else{const Ye=Vn.create("idb-set",{originalErrorMessage:null===(X=Ae)||void 0===X?void 0:X.message});W.warn(Ye.message)}}})).apply(this,arguments)}function Hn(G){return`${G.name}!${G.options.appId}`}class sr{constructor(K){this.container=K,this._heartbeatsCache=null;const X=this.container.getProvider("app").getImmediate();this._storage=new Nt(X),this._heartbeatsCachePromise=this._storage.read().then(Ae=>(this._heartbeatsCache=Ae,Ae))}triggerHeartbeat(){var K=this;return(0,o.Z)(function*(){const Ae=K.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ye=Pt();if(null===K._heartbeatsCache&&(K._heartbeatsCache=yield K._heartbeatsCachePromise),K._heartbeatsCache.lastSentHeartbeatDate!==Ye&&!K._heartbeatsCache.heartbeats.some(Tt=>Tt.date===Ye))return K._heartbeatsCache.heartbeats.push({date:Ye,agent:Ae}),K._heartbeatsCache.heartbeats=K._heartbeatsCache.heartbeats.filter(Tt=>{const bn=new Date(Tt.date).valueOf();return Date.now()-bn<=2592e6}),K._storage.overwrite(K._heartbeatsCache)})()}getHeartbeatsHeader(){var K=this;return(0,o.Z)(function*(){if(null===K._heartbeatsCache&&(yield K._heartbeatsCachePromise),null===K._heartbeatsCache||0===K._heartbeatsCache.heartbeats.length)return"";const X=Pt(),{heartbeatsToSend:Ae,unsentEntries:Ye}=function Er(G,K=1024){const X=[];let Ae=G.slice();for(const Ye of G){const Tt=X.find(bn=>bn.agent===Ye.agent);if(Tt){if(Tt.dates.push(Ye.date),ee(X)>K){Tt.dates.pop();break}}else if(X.push({agent:Ye.agent,dates:[Ye.date]}),ee(X)>K){X.pop();break}Ae=Ae.slice(1)}return{heartbeatsToSend:X,unsentEntries:Ae}}(K._heartbeatsCache.heartbeats),Tt=(0,ue.L)(JSON.stringify({version:2,heartbeats:Ae}));return K._heartbeatsCache.lastSentHeartbeatDate=X,Ye.length>0?(K._heartbeatsCache.heartbeats=Ye,yield K._storage.overwrite(K._heartbeatsCache)):(K._heartbeatsCache.heartbeats=[],K._storage.overwrite(K._heartbeatsCache)),Tt})()}}function Pt(){return(new Date).toISOString().substring(0,10)}class Nt{constructor(K){this.app=K,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,o.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var K=this;return(0,o.Z)(function*(){return(yield K._canUseIndexedDBPromise)&&(yield function pt(G){return ut.apply(this,arguments)}(K.app))||{heartbeats:[]}})()}overwrite(K){var X=this;return(0,o.Z)(function*(){var Ae;if(yield X._canUseIndexedDBPromise){const Tt=yield X.read();return Un(X.app,{lastSentHeartbeatDate:null!==(Ae=K.lastSentHeartbeatDate)&&void 0!==Ae?Ae:Tt.lastSentHeartbeatDate,heartbeats:K.heartbeats})}})()}add(K){var X=this;return(0,o.Z)(function*(){var Ae;if(yield X._canUseIndexedDBPromise){const Tt=yield X.read();return Un(X.app,{lastSentHeartbeatDate:null!==(Ae=K.lastSentHeartbeatDate)&&void 0!==Ae?Ae:Tt.lastSentHeartbeatDate,heartbeats:[...Tt.heartbeats,...K.heartbeats]})}})()}}function ee(G){return(0,ue.L)(JSON.stringify({version:2,heartbeats:G})).length}!function q(G){en(new j.wA("platform-logger",K=>new ye(K),"PRIVATE")),en(new j.wA("heartbeat",K=>new sr(K),"PRIVATE")),Zi(ge,"0.7.31",G),Zi(ge,"0.7.31","esm2017"),Zi("fire-js","")}("")},4859:(vt,Oe,V)=>{V.d(Oe,{H0:()=>ge,wA:()=>N,zt:()=>he});var o=V(5861),j=V(2090);class N{constructor(W,Y,re){this.name=W,this.instanceFactory=Y,this.type=re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const ue="[DEFAULT]";class he{constructor(W,Y){this.name=W,this.container=Y,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const Y=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(Y)){const re=new j.BH;if(this.instancesDeferred.set(Y,re),this.isInitialized(Y)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:Y});qe&&re.resolve(qe)}catch{}}return this.instancesDeferred.get(Y).promise}getImmediate(W){var Y;const re=this.normalizeInstanceIdentifier(W?.identifier),qe=null!==(Y=W?.optional)&&void 0!==Y&&Y;if(!this.isInitialized(re)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:re})}catch(Fe){if(qe)return null;throw Fe}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function oe(Ce){return"EAGER"===Ce.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:ue})}catch{}for(const[Y,re]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(Y);try{const Fe=this.getOrInitializeService({instanceIdentifier:qe});re.resolve(Fe)}catch{}}}}clearInstance(W=ue){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,o.Z)(function*(){const Y=Array.from(W.instances.values());yield Promise.all([...Y.filter(re=>"INTERNAL"in re).map(re=>re.INTERNAL.delete()),...Y.filter(re=>"_delete"in re).map(re=>re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=ue){return this.instances.has(W)}getOptions(W=ue){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:Y={}}=W,re=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(re))throw Error(`${this.name}(${re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:re,options:Y});for(const[Fe,xe]of this.instancesDeferred.entries())re===this.normalizeInstanceIdentifier(Fe)&&xe.resolve(qe);return qe}onInit(W,Y){var re;const qe=this.normalizeInstanceIdentifier(Y),Fe=null!==(re=this.onInitCallbacks.get(qe))&&void 0!==re?re:new Set;Fe.add(W),this.onInitCallbacks.set(qe,Fe);const xe=this.instances.get(qe);return xe&&W(xe,qe),()=>{Fe.delete(W)}}invokeOnInitCallbacks(W,Y){const re=this.onInitCallbacks.get(Y);if(re)for(const qe of re)try{qe(W,Y)}catch{}}getOrInitializeService({instanceIdentifier:W,options:Y={}}){let re=this.instances.get(W);if(!re&&this.component&&(re=this.component.instanceFactory(this.container,{instanceIdentifier:(Ce=W,Ce===ue?void 0:Ce),options:Y}),this.instances.set(W,re),this.instancesOptions.set(W,Y),this.invokeOnInitCallbacks(re,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,re)}catch{}var Ce;return re||null}normalizeInstanceIdentifier(W=ue){return this.component?this.component.multipleInstances?W:ue:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const Y=this.getProvider(W.name);if(Y.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);Y.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const Y=new he(W,this);return this.providers.set(W,Y),Y}getProviders(){return Array.from(this.providers.values())}}},1877:(vt,Oe,V)=>{V.d(Oe,{Am:()=>Ce,Ub:()=>ge,Yd:()=>oe,in:()=>j});const o=[];var j=(()=>{return(W=j||(j={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",j;var W})();const N={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},ue=j.INFO,he={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},ye=(W,Y,...re)=>{if(Y<W.logLevel)return;const qe=(new Date).toISOString(),Fe=he[Y];if(!Fe)throw new Error(`Attempted to log a message with an invalid logType (value: ${Y})`);console[Fe](`[${qe}]  ${W.name}:`,...re)};class oe{constructor(Y){this.name=Y,this._logLevel=ue,this._logHandler=ye,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(Y){if(!(Y in j))throw new TypeError(`Invalid value "${Y}" assigned to \`logLevel\``);this._logLevel=Y}setLogLevel(Y){this._logLevel="string"==typeof Y?N[Y]:Y}get logHandler(){return this._logHandler}set logHandler(Y){if("function"!=typeof Y)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Y}get userLogHandler(){return this._userLogHandler}set userLogHandler(Y){this._userLogHandler=Y}debug(...Y){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...Y),this._logHandler(this,j.DEBUG,...Y)}log(...Y){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...Y),this._logHandler(this,j.VERBOSE,...Y)}info(...Y){this._userLogHandler&&this._userLogHandler(this,j.INFO,...Y),this._logHandler(this,j.INFO,...Y)}warn(...Y){this._userLogHandler&&this._userLogHandler(this,j.WARN,...Y),this._logHandler(this,j.WARN,...Y)}error(...Y){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...Y),this._logHandler(this,j.ERROR,...Y)}}function ge(W){o.forEach(Y=>{Y.setLogLevel(W)})}function Ce(W,Y){for(const re of o){let qe=null;Y&&Y.level&&(qe=N[Y.level]),re.userLogHandler=null===W?null:(Fe,xe,...ht)=>{const De=ht.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch{return null}}).filter(ve=>ve).join(" ");xe>=(qe??Fe.logLevel)&&W({level:j[xe].toLowerCase(),message:De,args:ht,type:Fe.name})}}}},8766:(vt,Oe,V)=>{V.d(Oe,{Lj:()=>Ne,X3:()=>lt});var o=V(5861);let N,ue;const oe=new WeakMap,ge=new WeakMap,Ce=new WeakMap,W=new WeakMap,Y=new WeakMap;let Fe={get(pe,we,ne){if(pe instanceof IDBTransaction){if("done"===we)return ge.get(pe);if("objectStoreNames"===we)return pe.objectStoreNames||Ce.get(pe);if("store"===we)return ne.objectStoreNames[1]?void 0:ne.objectStore(ne.objectStoreNames[0])}return ve(pe[we])},set:(pe,we,ne)=>(pe[we]=ne,!0),has:(pe,we)=>pe instanceof IDBTransaction&&("done"===we||"store"===we)||we in pe};function De(pe){return"function"==typeof pe?function ht(pe){return pe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(pe)?function(...we){return pe.apply(at(this),we),ve(oe.get(this))}:function(...we){return ve(pe.apply(at(this),we))}:function(we,...ne){const se=pe.call(at(this),we,...ne);return Ce.set(se,we.sort?we.sort():[we]),ve(se)}}(pe):(pe instanceof IDBTransaction&&function qe(pe){if(ge.has(pe))return;const we=new Promise((ne,se)=>{const _e=()=>{pe.removeEventListener("complete",de),pe.removeEventListener("error",He),pe.removeEventListener("abort",He)},de=()=>{ne(),_e()},He=()=>{se(pe.error||new DOMException("AbortError","AbortError")),_e()};pe.addEventListener("complete",de),pe.addEventListener("error",He),pe.addEventListener("abort",He)});ge.set(pe,we)}(pe),((pe,we)=>we.some(ne=>pe instanceof ne))(pe,function he(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(pe,Fe):pe)}function ve(pe){if(pe instanceof IDBRequest)return function re(pe){const we=new Promise((ne,se)=>{const _e=()=>{pe.removeEventListener("success",de),pe.removeEventListener("error",He)},de=()=>{ne(ve(pe.result)),_e()},He=()=>{se(pe.error),_e()};pe.addEventListener("success",de),pe.addEventListener("error",He)});return we.then(ne=>{ne instanceof IDBCursor&&oe.set(ne,pe)}).catch(()=>{}),Y.set(we,pe),we}(pe);if(W.has(pe))return W.get(pe);const we=De(pe);return we!==pe&&(W.set(pe,we),Y.set(we,pe)),we}const at=pe=>Y.get(pe);function lt(pe,we,{blocked:ne,upgrade:se,blocking:_e,terminated:de}={}){const He=indexedDB.open(pe,we),je=ve(He);return se&&He.addEventListener("upgradeneeded",Ct=>{se(ve(He.result),Ct.oldVersion,Ct.newVersion,ve(He.transaction))}),ne&&He.addEventListener("blocked",()=>ne()),je.then(Ct=>{de&&Ct.addEventListener("close",()=>de()),_e&&Ct.addEventListener("versionchange",()=>_e())}).catch(()=>{}),je}function Ne(pe,{blocked:we}={}){const ne=indexedDB.deleteDatabase(pe);return we&&ne.addEventListener("blocked",()=>we()),ve(ne).then(()=>{})}const Pe=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],Qe=new Map;function ce(pe,we){if(!(pe instanceof IDBDatabase)||we in pe||"string"!=typeof we)return;if(Qe.get(we))return Qe.get(we);const ne=we.replace(/FromIndex$/,""),se=we!==ne,_e=Te.includes(ne);if(!(ne in(se?IDBIndex:IDBObjectStore).prototype)||!_e&&!Pe.includes(ne))return;const de=function(){var He=(0,o.Z)(function*(je,...Ct){const an=this.transaction(je,_e?"readwrite":"readonly");let Jt=an.store;return se&&(Jt=Jt.index(Ct.shift())),(yield Promise.all([Jt[ne](...Ct),_e&&an.done]))[0]});return function(Ct){return He.apply(this,arguments)}}();return Qe.set(we,de),de}!function xe(pe){Fe=pe(Fe)}(pe=>({...pe,get:(we,ne,se)=>ce(we,ne)||pe.get(we,ne,se),has:(we,ne)=>!!ce(we,ne)||pe.has(we,ne)}))},5861:(vt,Oe,V)=>{function o(N,ue,he,ye,oe,ge,Ce){try{var W=N[ge](Ce),Y=W.value}catch(re){return void he(re)}W.done?ue(Y):Promise.resolve(Y).then(ye,oe)}function j(N){return function(){var ue=this,he=arguments;return new Promise(function(ye,oe){var ge=N.apply(ue,he);function Ce(Y){o(ge,ye,oe,Ce,W,"next",Y)}function W(Y){o(ge,ye,oe,Ce,W,"throw",Y)}Ce(void 0)})}}V.d(Oe,{Z:()=>j})}},vt=>{vt(vt.s=8956)}]);